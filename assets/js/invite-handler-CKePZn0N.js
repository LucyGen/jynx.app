import{l as e}from"./logger-BUGiJmJP.js";const n=/^[a-zA-Z0-9]{22}$/,t=e.getModuleLogger("invite");function o(e){t.info("Attempting to open app via deep link"),window.location.href=e}function i(){const e=document.querySelector(".app-store-fallback");e&&(e.classList.remove("hidden"),t.info("Showing app store fallback"))}function a(){t.info("Initializing invite handler");const e=function(){let e=new URLSearchParams(window.location.search).get("token");if(!e){const n=window.location.pathname.match(/\/invite\/([a-zA-Z0-9]{22})$/);n&&(e=n[1],t.debug("Token extracted from path segment"))}return e?(n.test(e)||t.debug("Token does not match expected format (22 alphanumeric chars)"),e):(t.debug("No token found in URL"),null)}(),a=function(e){return e?`jynx://invite/${e}`:"jynx://"}(e);t.debug("Token:",e?"[REDACTED]":"none"),t.debug("Deep link URL constructed"),/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)?(t.info("Mobile device detected, auto-attempting deep link"),o(a),setTimeout((()=>{i()}),1500)):(t.info("Desktop device detected, showing store links"),i());const c=document.getElementById("open-app-btn");c?(c.addEventListener("click",(()=>{t.info("Open app button clicked"),o(a),setTimeout((()=>{i()}),1500)})),t.debug("Button click handler attached")):t.warn("Open app button not found in DOM")}const c={init:a};export{c as default,a as init};
