import{g as t}from"./logger-CHTAPRDI.js";import{C as e}from"./sync-game-BdspoOK-.js";import"./analytics-service-UCL_K60g.js";import"./firebase-vendor-sIns1Pds.js";import"./vendor-CEMwkx1U.js";class s{constructor(){this.logger=t("LocalStorageService"),this.prefix=e.STORAGE.KEY_PREFIX}getKey(t){return`${this.prefix}${t}`}get(t,e=null){try{const s=localStorage.getItem(this.getKey(t));return s?JSON.parse(s):e}catch(s){return this.logger.warn(`Failed to get ${t}`,s),e}}set(t,e){try{localStorage.setItem(this.getKey(t),JSON.stringify(e))}catch(s){this.logger.warn(`Failed to set ${t}`,s)}}remove(t){try{localStorage.removeItem(this.getKey(t))}catch(e){this.logger.warn(`Failed to remove ${t}`,e)}}clear(){try{Object.keys(localStorage).forEach((t=>{t.startsWith(this.prefix)&&localStorage.removeItem(t)}))}catch(t){this.logger.warn("Failed to clear storage",t)}}getHighScore(){return this.get(e.STORAGE.KEYS.HIGH_SCORE,0)}saveHighScore(t){this.set(e.STORAGE.KEYS.HIGH_SCORE,t)}getSettings(){return this.get(e.STORAGE.KEYS.SETTINGS,{audioEnabled:!0,volume:.7})}saveSettings(t){this.set(e.STORAGE.KEYS.SETTINGS,t)}getStats(){return this.get(e.STORAGE.KEYS.STATS,{gamesPlayed:0,totalScore:0,perfectSyncs:0})}saveStats(t){this.set(e.STORAGE.KEYS.STATS,t)}getConversionData(){return{ctaDismissed:this.get("jynx_cta_dismissed",null),ctaShownCount:this.get("jynx_cta_shown_count",0),ctaLastShown:this.get("jynx_cta_last_shown",null),conversionTracked:this.get("jynx_conversion_tracked",!1),emailCollected:this.get("jynx_email_collected",!1),selectedVariant:this.get("jynx_selected_variant",null)}}saveConversionData(t){Object.entries(t).forEach((([t,e])=>{this.set(`jynx_${t}`,e)}))}clearConversionDismissal(){this.remove("jynx_cta_dismissed")}incrementGamesPlayed(){const t=this.getStats();return t.gamesPlayed+=1,this.saveStats(t),t.gamesPlayed}addPerfectSyncs(t){const e=this.getStats();return e.perfectSyncs+=t,this.saveStats(e),e.perfectSyncs}}export{s as default};
