function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function r(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(u){r=!0,s=u}finally{try{i||null==a.return||a.return()}finally{if(r)throw s}}return n}(t,e)||a(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function l(t,e){return Object.getOwnPropertyNames(Object(t)).reduce((function(n,i){var r=Object.getOwnPropertyDescriptor(Object(t),i),s=Object.getOwnPropertyDescriptor(Object(e),i);return Object.defineProperty(n,i,s||r)}),{})}function c(t){return"string"==typeof t}function h(t){return Array.isArray(t)}function d(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=l(e);return void 0!==n.types?t=n.types:void 0!==n.split&&(t=n.split),void 0!==t&&(n.types=(c(t)||h(t)?String(t):"").split(",").map((function(t){return String(t).trim()})).filter((function(t){return/((line)|(word)|(char))/i.test(t)}))),(n.absolute||n.position)&&(n.absolute=n.absolute||/absolute/.test(e.position)),n}function f(t){var e=c(t)||h(t)?String(t):"";return{none:!e,lines:/line/i.test(e),words:/word/i.test(e),chars:/char/i.test(e)}}function g(t){return null!==t&&"object"==typeof t}function p(t){return g(t)&&/^(1|3|11)$/.test(t.nodeType)}function m(t){return h(t)?t:null==t?[]:function(t){return g(t)&&function(t){return"number"==typeof t&&t>-1&&t%1==0}(t.length)}(t)?Array.prototype.slice.call(t):[t]}function y(t){var e=t;return c(t)&&(e=/^(#[a-z]\w+)$/.test(t.trim())?document.getElementById(t.trim().slice(1)):document.querySelectorAll(t)),m(e).reduce((function(t,e){return[].concat(o(t),o(m(e).filter(p)))}),[])}!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const n of t)if("childList"===n.type)for(const t of n.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}(),function(){function t(){for(var t=arguments.length,e=0;e<t;e++){var n=e<0||arguments.length<=e?void 0:arguments[e];1===n.nodeType||11===n.nodeType?this.appendChild(n):this.appendChild(document.createTextNode(String(n)))}}function e(){for(;this.lastChild;)this.removeChild(this.lastChild);arguments.length&&this.append.apply(this,arguments)}function n(){for(var t=this.parentNode,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=n.length;if(t)for(r||t.removeChild(this);r--;){var s=n[r];"object"!=typeof s?s=this.ownerDocument.createTextNode(s):s.parentNode&&s.parentNode.removeChild(s),r?t.insertBefore(this.previousSibling,s):t.replaceChild(s,this)}}"undefined"!=typeof Element&&(Element.prototype.append||(Element.prototype.append=t,DocumentFragment.prototype.append=t),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=e,DocumentFragment.prototype.replaceChildren=e),Element.prototype.replaceWith||(Element.prototype.replaceWith=n,DocumentFragment.prototype.replaceWith=n))}();var v=Object.entries,D="_splittype",b={},w=0;function _(t,e,n){if(!g(t))return console.warn("[data.set] owner is not an object"),null;var i=t[D]||(t[D]=++w),s=b[i]||(b[i]={});return void 0===n?e&&Object.getPrototypeOf(e)===Object.prototype&&(b[i]=r(r({},s),e)):void 0!==e&&(s[e]=n),n}function E(t,e){var n=g(t)?t[D]:null;return n&&b[n]||{}}function C(t){var e=t&&t[D];e&&(delete t[e],delete b[e])}var T="\\ud800-\\udfff",S="\\u0300-\\u036f\\ufe20-\\ufe23",A="\\u20d0-\\u20f0",x="\\ufe0e\\ufe0f",k="[".concat(T,"]"),F="[".concat(S).concat(A,"]"),I="\\ud83c[\\udffb-\\udfff]",L="(?:".concat(F,"|").concat(I,")"),O="[^".concat(T,"]"),M="(?:\\ud83c[\\udde6-\\uddff]){2}",N="[\\ud800-\\udbff][\\udc00-\\udfff]",P="\\u200d",R="".concat(L,"?"),B="[".concat(x,"]?"),V=B+R+("(?:"+P+"(?:"+[O,M,N].join("|")+")"+B+R+")*"),U="(?:".concat(["".concat(O).concat(F,"?"),F,M,N,k].join("|"),"\n)"),z=RegExp("".concat(I,"(?=").concat(I,")|").concat(U).concat(V),"g"),j=RegExp("[".concat([P,T,S,A,x].join(""),"]"));function $(t){return j.test(t)}function q(t){return $(t)?function(t){return t.match(z)||[]}(t):function(t){return t.split("")}(t)}function H(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(t=null==(e=t)?"":String(e))&&c(t)&&!n&&$(t)?q(t):t.split(n)}function G(t,e){var n=document.createElement(t);return e?(Object.keys(e).forEach((function(t){var i=e[t],r=c(i)?i.trim():i;null!==r&&""!==r&&("children"===t?n.append.apply(n,o(m(r))):n.setAttribute(t,r))})),n):n}var K={splitClass:"",lineClass:"line",wordClass:"word",charClass:"char",types:["lines","words","chars"],absolute:!1,tagName:"div"};function W(t,e){var n,i=f((e=l(K,e)).types),r=e.tagName,s=t.nodeValue,a=document.createDocumentFragment(),u=[];return/^\s/.test(s)&&a.append(" "),n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return(t?String(t):"").trim().replace(/\s+/g," ").split(e)}(s).reduce((function(t,n,s,l){var c,h;return i.chars&&(h=H(n).map((function(t){var n=G(r,{class:"".concat(e.splitClass," ").concat(e.charClass),style:"display: inline-block;",children:t});return _(n,"isChar",!0),u=[].concat(o(u),[n]),n}))),i.words||i.lines?(_(c=G(r,{class:"".concat(e.wordClass," ").concat(e.splitClass),style:"display: inline-block; ".concat(i.words&&e.absolute?"position: relative;":""),children:i.chars?h:n}),{isWord:!0,isWordStart:!0,isWordEnd:!0}),a.appendChild(c)):h.forEach((function(t){a.appendChild(t)})),s<l.length-1&&a.append(" "),i.words?t.concat(c):t}),[]),/\s$/.test(s)&&a.append(" "),t.replaceWith(a),{words:n,chars:u}}function X(t,e){var n=t.nodeType,i={words:[],chars:[]};if(!/(1|3|11)/.test(n))return i;if(3===n&&/\S/.test(t.nodeValue))return W(t,e);var r=m(t.childNodes);if(r.length&&(_(t,"isSplit",!0),!E(t).isRoot)){t.style.display="inline-block",t.style.position="relative";var s=t.nextSibling,a=t.previousSibling,u=t.textContent||"",l=s?s.textContent:" ",c=a?a.textContent:" ";_(t,{isWordEnd:/\s$/.test(u)||/^\s/.test(l),isWordStart:/^\s/.test(u)||/\s$/.test(c)})}return r.reduce((function(t,n){var i=X(n,e),r=i.words,s=i.chars;return{words:[].concat(o(t.words),o(r)),chars:[].concat(o(t.chars),o(s))}}),i)}function Y(t){E(t).isWord?(C(t),t.replaceWith.apply(t,o(t.childNodes))):m(t.children).forEach((function(t){return Y(t)}))}function Q(t,e,n){var i,r,o,a=f(e.types),u=e.tagName,l=t.getElementsByTagName("*"),c=[],h=[],d=null,g=[],p=t.parentElement,y=t.nextElementSibling,v=document.createDocumentFragment(),D=window.getComputedStyle(t),b=D.textAlign,w=.2*parseFloat(D.fontSize);return e.absolute&&(o={left:t.offsetLeft,top:t.offsetTop,width:t.offsetWidth},r=t.offsetWidth,i=t.offsetHeight,_(t,{cssWidth:t.style.width,cssHeight:t.style.height})),m(l).forEach((function(i){var r=i.parentElement===t,o=function(t,e,n,i){if(!n.absolute)return{top:e?t.offsetTop:null};var r=t.offsetParent,o=s(i,2),a=o[0],u=o[1],l=0,c=0;if(r&&r!==document.body){var h=r.getBoundingClientRect();l=h.x+a,c=h.y+u}var d=t.getBoundingClientRect(),f=d.width,g=d.height,p=d.x;return{width:f,height:g,top:d.y+u-c,left:p+a-l}}(i,r,e,n),u=o.width,l=o.height,f=o.top,g=o.left;/^br$/i.test(i.nodeName)||(a.lines&&r&&((null===d||f-d>=w)&&(d=f,c.push(h=[])),h.push(i)),e.absolute&&_(i,{top:f,left:g,width:u,height:l}))})),p&&p.removeChild(t),a.lines&&(g=c.map((function(t){var n=G(u,{class:"".concat(e.splitClass," ").concat(e.lineClass),style:"display: block; text-align: ".concat(b,"; width: 100%;")});_(n,"isLine",!0);var i={height:0,top:1e4};return v.appendChild(n),t.forEach((function(t,e,r){var s=E(t),o=s.isWordEnd,a=s.top,u=s.height,l=r[e+1];i.height=Math.max(i.height,u),i.top=Math.min(i.top,a),n.appendChild(t),o&&E(l).isWordStart&&n.append(" ")})),e.absolute&&_(n,{height:i.height,top:i.top}),n})),a.words||Y(v),t.replaceChildren(v)),e.absolute&&(t.style.width="".concat(t.style.width||r,"px"),t.style.height="".concat(i,"px"),m(l).forEach((function(t){var e=E(t),n=e.isLine,i=e.top,r=e.left,s=e.width,a=e.height,u=E(t.parentElement),l=!n&&u.isLine;t.style.top="".concat(l?i-u.top:i,"px"),t.style.left="".concat(n?o.left:r-(l?o.left:0),"px"),t.style.height="".concat(a,"px"),t.style.width="".concat(n?o.width:s,"px"),t.style.position="absolute"}))),p&&(y?p.insertBefore(t,y):p.appendChild(t)),g}var J=l(K,{}),Z=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isSplit=!1,this.settings=l(J,d(n)),this.elements=y(e),this.split()}return e(t,null,[{key:"clearData",value:function(){Object.keys(b).forEach((function(t){delete b[t]}))}},{key:"setDefaults",value:function(t){return J=l(J,d(t)),K}},{key:"revert",value:function(t){y(t).forEach((function(t){var e=E(t),n=e.isSplit,i=e.html,r=e.cssWidth,s=e.cssHeight;n&&(t.innerHTML=i,t.style.width=r||"",t.style.height=s||"",C(t))}))}},{key:"create",value:function(e,n){return new t(e,n)}},{key:"data",get:function(){return b}},{key:"defaults",get:function(){return J},set:function(t){J=l(J,d(t))}}]),e(t,[{key:"split",value:function(t){var e=this;this.revert(),this.elements.forEach((function(t){_(t,"html",t.innerHTML)})),this.lines=[],this.words=[],this.chars=[];var n=[window.pageXOffset,window.pageYOffset];void 0!==t&&(this.settings=l(this.settings,d(t)));var i=f(this.settings.types);i.none||(this.elements.forEach((function(t){_(t,"isRoot",!0);var n=X(t,e.settings),i=n.words,r=n.chars;e.words=[].concat(o(e.words),o(i)),e.chars=[].concat(o(e.chars),o(r))})),this.elements.forEach((function(t){if(i.lines||e.settings.absolute){var r=Q(t,e.settings,n);e.lines=[].concat(o(e.lines),o(r))}})),this.isSplit=!0,window.scrollTo(n[0],n[1]),v(b).forEach((function(t){var e=s(t,2),n=e[0],i=e[1],r=i.isRoot,o=i.isSplit;r&&o||(b[n]=null,delete b[n])})))}},{key:"revert",value:function(){this.isSplit&&(this.lines=null,this.words=null,this.chars=null,this.isSplit=!1),t.revert(this.elements)}}]),t}();function tt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function et(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}
/*!
 * GSAP 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var nt,it,rt,st,ot,at,ut,lt,ct,ht,dt,ft,gt,pt,mt,yt,vt,Dt,bt,wt,_t,Et,Ct,Tt,St,At,xt,kt,Ft,It,Lt,Ot,Mt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Nt={duration:.5,overwrite:!1,delay:0},Pt=1e8,Rt=1e-8,Bt=2*Math.PI,Vt=Bt/4,Ut=0,zt=Math.sqrt,jt=Math.cos,$t=Math.sin,qt=function(t){return"string"==typeof t},Ht=function(t){return"function"==typeof t},Gt=function(t){return"number"==typeof t},Kt=function(t){return void 0===t},Wt=function(t){return"object"==typeof t},Xt=function(t){return!1!==t},Yt=function(){return"undefined"!=typeof window},Qt=function(t){return Ht(t)||qt(t)},Jt="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Zt=Array.isArray,te=/(?:-?\.?\d|\.)+/gi,ee=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,ne=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,ie=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,re=/[+-]=-?[.\d]+/,se=/[^,'"\[\]\s]+/gi,oe=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ae={},ue={},le=function(t){return(ue=Be(t,ae))&&Vi},ce=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},he=function(t,e){return!e&&console.warn(t)},de=function(t,e){return t&&(ae[t]=e)&&ue&&(ue[t]=e)||ae},fe=function(){return 0},ge={suppressEvents:!0,isStart:!0,kill:!1},pe={suppressEvents:!0,kill:!1},me={suppressEvents:!0},ye={},ve=[],De={},be={},we={},_e=30,Ee=[],Ce="",Te=function(t){var e,n,i=t[0];if(Wt(i)||Ht(i)||(t=[t]),!(e=(i._gsap||{}).harness)){for(n=Ee.length;n--&&!Ee[n].targetTest(i););e=Ee[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new Zn(t[n],e)))||t.splice(n,1);return t},Se=function(t){return t._gsap||Te(mn(t))[0]._gsap},Ae=function(t,e,n){return(n=t[e])&&Ht(n)?t[e]():Kt(n)&&t.getAttribute&&t.getAttribute(e)||n},xe=function(t,e){return(t=t.split(",")).forEach(e)||t},ke=function(t){return Math.round(1e5*t)/1e5||0},Fe=function(t){return Math.round(1e7*t)/1e7||0},Ie=function(t,e){var n=e.charAt(0),i=parseFloat(e.substr(2));return t=parseFloat(t),"+"===n?t+i:"-"===n?t-i:"*"===n?t*i:t/i},Le=function(t,e){for(var n=e.length,i=0;t.indexOf(e[i])<0&&++i<n;);return i<n},Oe=function(){var t,e,n=ve.length,i=ve.slice(0);for(De={},ve.length=0,t=0;t<n;t++)(e=i[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},Me=function(t,e,n,i){ve.length&&!it&&Oe(),t.render(e,n,it&&e<0&&(t._initted||t._startAt)),ve.length&&!it&&Oe()},Ne=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(se).length<2?e:qt(t)?t.trim():t},Pe=function(t){return t},Re=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},Be=function(t,e){for(var n in e)t[n]=e[n];return t},Ve=function t(e,n){for(var i in n)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(e[i]=Wt(n[i])?t(e[i]||(e[i]={}),n[i]):n[i]);return e},Ue=function(t,e){var n,i={};for(n in t)n in e||(i[n]=t[n]);return i},ze=function(t){var e,n=t.parent||st,i=t.keyframes?(e=Zt(t.keyframes),function(t,n){for(var i in n)i in t||"duration"===i&&e||"ease"===i||(t[i]=n[i])}):Re;if(Xt(t.inherit))for(;n;)i(t,n.vars.defaults),n=n.parent||n._dp;return t},je=function(t,e,n,i,r){var s,o=t[i];if(r)for(s=e[r];o&&o[r]>s;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[i]=e,e._prev=o,e.parent=e._dp=t,e},$e=function(t,e,n,i){void 0===n&&(n="_first"),void 0===i&&(i="_last");var r=e._prev,s=e._next;r?r._next=s:t[n]===e&&(t[n]=s),s?s._prev=r:t[i]===e&&(t[i]=r),e._next=e._prev=e.parent=null},qe=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},He=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},Ge=function(t,e,n,i){return t._startAt&&(it?t._startAt.revert(pe):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,i))},Ke=function t(e){return!e||e._ts&&t(e.parent)},We=function(t){return t._repeat?Xe(t._tTime,t=t.duration()+t._rDelay)*t:0},Xe=function(t,e){var n=Math.floor(t=Fe(t/e));return t&&n===t?n-1:n},Ye=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Qe=function(t){return t._end=Fe(t._start+(t._tDur/Math.abs(t._ts||t._rts||Rt)||0))},Je=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=Fe(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Qe(t),n._dirty||He(n,t)),t},Ze=function(t,e){var n;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(n=Ye(t.rawTime(),e),(!e._dur||dn(0,e.totalDuration(),n)-e._tTime>Rt)&&e.render(n,!0)),He(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-1e-8}},tn=function(t,e,n,i){return e.parent&&qe(e),e._start=Fe((Gt(n)?n:n||t!==st?ln(t,n,e):t._time)+e._delay),e._end=Fe(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),je(t,e,"_first","_last",t._sort?"_start":0),sn(e)||(t._recent=e),i||Ze(t,e),t._ts<0&&Je(t,t._tTime),t},en=function(t,e){return(ae.ScrollTrigger||ce("scrollTrigger",e))&&ae.ScrollTrigger.create(e,t)},nn=function(t,e,n,i,r){return ai(t,e,r),t._initted?!n&&t._pt&&!it&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&ct!==Un.frame?(ve.push(t),t._lazy=[r,i],1):void 0:1},rn=function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))},sn=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},on=function(t,e,n,i){var r=t._repeat,s=Fe(e)||0,o=t._tTime/t._tDur;return o&&!i&&(t._time*=s/t._dur),t._dur=s,t._tDur=r?r<0?1e10:Fe(s*(r+1)+t._rDelay*r):s,o>0&&!i&&Je(t,t._tTime=t._tDur*o),t.parent&&Qe(t),n||He(t.parent,t),t},an=function(t){return t instanceof ei?He(t):on(t,t._dur)},un={_start:0,endTime:fe,totalDuration:fe},ln=function t(e,n,i){var r,s,o,a=e.labels,u=e._recent||un,l=e.duration()>=Pt?u.endTime(!1):e._dur;return qt(n)&&(isNaN(n)||n in a)?(s=n.charAt(0),o="%"===n.substr(-1),r=n.indexOf("="),"<"===s||">"===s?(r>=0&&(n=n.replace(/=/,"")),("<"===s?u._start:u.endTime(u._repeat>=0))+(parseFloat(n.substr(1))||0)*(o?(r<0?u:i).totalDuration()/100:1)):r<0?(n in a||(a[n]=l),a[n]):(s=parseFloat(n.charAt(r-1)+n.substr(r+1)),o&&i&&(s=s/100*(Zt(i)?i[0]:i).totalDuration()),r>1?t(e,n.substr(0,r-1),i)+s:l+s)):null==n?l:+n},cn=function(t,e,n){var i,r,s=Gt(e[1]),o=(s?2:1)+(t<2?0:1),a=e[o];if(s&&(a.duration=e[1]),a.parent=n,t){for(i=a,r=n;r&&!("immediateRender"in i);)i=r.vars.defaults||{},r=Xt(r.vars.inherit)&&r.parent;a.immediateRender=Xt(i.immediateRender),t<2?a.runBackwards=1:a.startAt=e[o-1]}return new di(e[0],a,e[o+1])},hn=function(t,e){return t||0===t?e(t):e},dn=function(t,e,n){return n<t?t:n>e?e:n},fn=function(t,e){return qt(t)&&(e=oe.exec(t))?e[1]:""},gn=[].slice,pn=function(t,e){return t&&Wt(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&Wt(t[0]))&&!t.nodeType&&t!==ot},mn=function(t,e,n){return rt&&!e&&rt.selector?rt.selector(t):!qt(t)||n||!at&&zn()?Zt(t)?function(t,e,n){return void 0===n&&(n=[]),t.forEach((function(t){var i;return qt(t)&&!e||pn(t,1)?(i=n).push.apply(i,mn(t)):n.push(t)}))||n}(t,n):pn(t)?gn.call(t,0):t?[t]:[]:gn.call((e||ut).querySelectorAll(t),0)},yn=function(t){return t=mn(t)[0]||he("Invalid scope")||{},function(e){var n=t.current||t.nativeElement||t;return mn(e,n.querySelectorAll?n:n===t?he("Invalid scope")||ut.createElement("div"):t)}},vn=function(t){return t.sort((function(){return.5-Math.random()}))},Dn=function(t){if(Ht(t))return t;var e=Wt(t)?t:{each:t},n=Wn(e.ease),i=e.from||0,r=parseFloat(e.base)||0,s={},o=i>0&&i<1,a=isNaN(i)||o,u=e.axis,l=i,c=i;return qt(i)?l=c={center:.5,edges:.5,end:1}[i]||0:!o&&a&&(l=i[0],c=i[1]),function(t,o,h){var d,f,g,p,m,y,v,D,b,w=(h||e).length,_=s[w];if(!_){if(!(b="auto"===e.grid?0:(e.grid||[1,Pt])[1])){for(v=-1e8;v<(v=h[b++].getBoundingClientRect().left)&&b<w;);b<w&&b--}for(_=s[w]=[],d=a?Math.min(b,w)*l-.5:i%b,f=b===Pt?0:a?w*c/b-.5:i/b|0,v=0,D=Pt,y=0;y<w;y++)g=y%b-d,p=f-(y/b|0),_[y]=m=u?Math.abs("y"===u?p:g):zt(g*g+p*p),m>v&&(v=m),m<D&&(D=m);"random"===i&&vn(_),_.max=v-D,_.min=D,_.v=w=(parseFloat(e.amount)||parseFloat(e.each)*(b>w?w-1:u?"y"===u?w/b:b:Math.max(b,w/b))||0)*("edges"===i?-1:1),_.b=w<0?r-w:r,_.u=fn(e.amount||e.each)||0,n=n&&w<0?Gn(n):n}return w=(_[t]-_.min)/_.max||0,Fe(_.b+(n?n(w):w)*_.v)+_.u}},bn=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var i=Fe(Math.round(parseFloat(n)/t)*t*e);return(i-i%1)/e+(Gt(n)?0:fn(n))}},wn=function(t,e){var n,i,r=Zt(t);return!r&&Wt(t)&&(n=r=t.radius||Pt,t.values?(t=mn(t.values),(i=!Gt(t[0]))&&(n*=n)):t=bn(t.increment)),hn(e,r?Ht(t)?function(e){return i=t(e),Math.abs(i-e)<=n?i:e}:function(e){for(var r,s,o=parseFloat(i?e.x:e),a=parseFloat(i?e.y:0),u=Pt,l=0,c=t.length;c--;)(r=i?(r=t[c].x-o)*r+(s=t[c].y-a)*s:Math.abs(t[c]-o))<u&&(u=r,l=c);return l=!n||u<=n?t[l]:e,i||l===e||Gt(e)?l:l+fn(e)}:bn(t))},_n=function(t,e,n,i){return hn(Zt(t)?!e:!0===n?!!(n=0):!i,(function(){return Zt(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+.99*n))/n)*n*i)/i}))},En=function(t,e,n){return hn(n,(function(n){return t[~~e(n)]}))},Cn=function(t){for(var e,n,i,r,s=0,o="";~(e=t.indexOf("random(",s));)i=t.indexOf(")",e),r="["===t.charAt(e+7),n=t.substr(e+7,i-e-7).match(r?se:te),o+=t.substr(s,e-s)+_n(r?n:+n[0],r?0:+n[1],+n[2]||1e-5),s=i+1;return o+t.substr(s,t.length-s)},Tn=function(t,e,n,i,r){var s=e-t,o=i-n;return hn(r,(function(e){return n+((e-t)/s*o||0)}))},Sn=function(t,e,n){var i,r,s,o=t.labels,a=Pt;for(i in o)(r=o[i]-e)<0==!!n&&r&&a>(r=Math.abs(r))&&(s=i,a=r);return s},An=function(t,e,n){var i,r,s,o=t.vars,a=o[e],u=rt,l=t._ctx;if(a)return i=o[e+"Params"],r=o.callbackScope||t,n&&ve.length&&Oe(),l&&(rt=l),s=i?a.apply(r,i):a.call(r),rt=u,s},xn=function(t){return qe(t),t.scrollTrigger&&t.scrollTrigger.kill(!!it),t.progress()<1&&An(t,"onInterrupt"),t},kn=[],Fn=function(t){if(t)if(t=!t.name&&t.default||t,Yt()||t.headless){var e=t.name,n=Ht(t),i=e&&!n&&t.init?function(){this._props=[]}:t,r={init:fe,render:wi,add:si,kill:Ei,modifier:_i,rawVars:0},s={targetTest:0,get:0,getSetter:yi,aliases:{},register:0};if(zn(),t!==i){if(be[e])return;Re(i,Re(Ue(t,r),s)),Be(i.prototype,Be(r,Ue(t,s))),be[i.prop=e]=i,t.targetTest&&(Ee.push(i),ye[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}de(e,i),t.register&&t.register(Vi,i,Si)}else kn.push(t)},In=255,Ln={aqua:[0,In,In],lime:[0,In,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,In],navy:[0,0,128],white:[In,In,In],olive:[128,128,0],yellow:[In,In,0],orange:[In,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[In,0,0],pink:[In,192,203],cyan:[0,In,In],transparent:[In,In,In,0]},On=function(t,e,n){return(6*(t+=t<0?1:t>1?-1:0)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)*In+.5|0},Mn=function(t,e,n){var i,r,s,o,a,u,l,c,h,d,f=t?Gt(t)?[t>>16,t>>8&In,t&In]:0:Ln.black;if(!f){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),Ln[t])f=Ln[t];else if("#"===t.charAt(0)){if(t.length<6&&(i=t.charAt(1),r=t.charAt(2),s=t.charAt(3),t="#"+i+i+r+r+s+s+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(f=parseInt(t.substr(1,6),16))>>16,f>>8&In,f&In,parseInt(t.substr(7),16)/255];f=[(t=parseInt(t.substr(1),16))>>16,t>>8&In,t&In]}else if("hsl"===t.substr(0,3))if(f=d=t.match(te),e){if(~t.indexOf("="))return f=t.match(ee),n&&f.length<4&&(f[3]=1),f}else o=+f[0]%360/360,a=+f[1]/100,i=2*(u=+f[2]/100)-(r=u<=.5?u*(a+1):u+a-u*a),f.length>3&&(f[3]*=1),f[0]=On(o+1/3,i,r),f[1]=On(o,i,r),f[2]=On(o-1/3,i,r);else f=t.match(te)||Ln.transparent;f=f.map(Number)}return e&&!d&&(i=f[0]/In,r=f[1]/In,s=f[2]/In,u=((l=Math.max(i,r,s))+(c=Math.min(i,r,s)))/2,l===c?o=a=0:(h=l-c,a=u>.5?h/(2-l-c):h/(l+c),o=l===i?(r-s)/h+(r<s?6:0):l===r?(s-i)/h+2:(i-r)/h+4,o*=60),f[0]=~~(o+.5),f[1]=~~(100*a+.5),f[2]=~~(100*u+.5)),n&&f.length<4&&(f[3]=1),f},Nn=function(t){var e=[],n=[],i=-1;return t.split(Rn).forEach((function(t){var r=t.match(ne)||[];e.push.apply(e,r),n.push(i+=r.length+1)})),e.c=n,e},Pn=function(t,e,n){var i,r,s,o,a="",u=(t+a).match(Rn),l=e?"hsla(":"rgba(",c=0;if(!u)return t;if(u=u.map((function(t){return(t=Mn(t,e,1))&&l+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),n&&(s=Nn(t),(i=n.c).join(a)!==s.c.join(a)))for(o=(r=t.replace(Rn,"1").split(ne)).length-1;c<o;c++)a+=r[c]+(~i.indexOf(c)?u.shift()||l+"0,0,0,0)":(s.length?s:u.length?u:n).shift());if(!r)for(o=(r=t.split(Rn)).length-1;c<o;c++)a+=r[c]+u[c];return a+r[o]},Rn=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in Ln)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Bn=/hsl[a]?\(/,Vn=function(t){var e,n=t.join(" ");if(Rn.lastIndex=0,Rn.test(n))return e=Bn.test(n),t[1]=Pn(t[1],e),t[0]=Pn(t[0],e,Nn(t[1])),!0},Un=(Dt=Date.now,bt=500,wt=33,_t=Dt(),Et=_t,Tt=Ct=1e3/240,At=function t(e){var n,i,r,s,o=Dt()-Et,a=!0===e;if((o>bt||o<0)&&(_t+=o-wt),((n=(r=(Et+=o)-_t)-Tt)>0||a)&&(s=++mt.frame,yt=r-1e3*mt.time,mt.time=r/=1e3,Tt+=n+(n>=Ct?4:Ct-n),i=1),a||(ft=gt(t)),i)for(vt=0;vt<St.length;vt++)St[vt](r,yt,s,e)},mt={time:0,frame:0,tick:function(){At(!0)},deltaRatio:function(t){return yt/(1e3/(t||60))},wake:function(){lt&&(!at&&Yt()&&(ot=at=window,ut=ot.document||{},ae.gsap=Vi,(ot.gsapVersions||(ot.gsapVersions=[])).push(Vi.version),le(ue||ot.GreenSockGlobals||!ot.gsap&&ot||{}),kn.forEach(Fn)),pt="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,ft&&mt.sleep(),gt=pt||function(t){return setTimeout(t,Tt-1e3*mt.time+1|0)},dt=1,At(2))},sleep:function(){(pt?cancelAnimationFrame:clearTimeout)(ft),dt=0,gt=fe},lagSmoothing:function(t,e){bt=t||1/0,wt=Math.min(e||33,bt)},fps:function(t){Ct=1e3/(t||240),Tt=1e3*mt.time+Ct},add:function(t,e,n){var i=e?function(e,n,r,s){t(e,n,r,s),mt.remove(i)}:t;return mt.remove(t),St[n?"unshift":"push"](i),zn(),i},remove:function(t,e){~(e=St.indexOf(t))&&St.splice(e,1)&&vt>=e&&vt--},_listeners:St=[]}),zn=function(){return!dt&&Un.wake()},jn={},$n=/^[\d.\-M][\d.\-,\s]/,qn=/["']/g,Hn=function(t){for(var e,n,i,r={},s=t.substr(1,t.length-3).split(":"),o=s[0],a=1,u=s.length;a<u;a++)n=s[a],e=a!==u-1?n.lastIndexOf(","):n.length,i=n.substr(0,e),r[o]=isNaN(i)?i.replace(qn,"").trim():+i,o=n.substr(e+1).trim();return r},Gn=function(t){return function(e){return 1-t(1-e)}},Kn=function t(e,n){for(var i,r=e._first;r;)r instanceof ei?t(r,n):!r.vars.yoyoEase||r._yoyo&&r._repeat||r._yoyo===n||(r.timeline?t(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},Wn=function(t,e){return t&&(Ht(t)?t:jn[t]||function(t){var e,n,i,r,s=(t+"").split("("),o=jn[s[0]];return o&&s.length>1&&o.config?o.config.apply(null,~t.indexOf("{")?[Hn(s[1])]:(e=t,n=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",n),e.substring(n,~r&&r<i?e.indexOf(")",i+1):i)).split(",").map(Ne)):jn._CE&&$n.test(t)?jn._CE("",t):o}(t))||e},Xn=function(t,e,n,i){void 0===n&&(n=function(t){return 1-e(1-t)}),void 0===i&&(i=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var r,s={easeIn:e,easeOut:n,easeInOut:i};return xe(t,(function(t){for(var e in jn[t]=ae[t]=s,jn[r=t.toLowerCase()]=n,s)jn[r+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=jn[t+"."+e]=s[e]})),s},Yn=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},Qn=function t(e,n,i){var r=n>=1?n:1,s=(i||(e?.3:.45))/(n<1?n:1),o=s/Bt*(Math.asin(1/r)||0),a=function(t){return 1===t?1:r*Math.pow(2,-10*t)*$t((t-o)*s)+1},u="out"===e?a:"in"===e?function(t){return 1-a(1-t)}:Yn(a);return s=Bt/s,u.config=function(n,i){return t(e,n,i)},u},Jn=function t(e,n){void 0===n&&(n=1.70158);var i=function(t){return t?--t*t*((n+1)*t+n)+1:0},r="out"===e?i:"in"===e?function(t){return 1-i(1-t)}:Yn(i);return r.config=function(n){return t(e,n)},r};xe("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var n=e<5?e+1:e;Xn(t+",Power"+(n-1),e?function(t){return Math.pow(t,n)}:function(t){return t},(function(t){return 1-Math.pow(1-t,n)}),(function(t){return t<.5?Math.pow(2*t,n)/2:1-Math.pow(2*(1-t),n)/2}))})),jn.Linear.easeNone=jn.none=jn.Linear.easeIn,Xn("Elastic",Qn("in"),Qn("out"),Qn()),xt=7.5625,It=2*(Ft=1/(kt=2.75)),Lt=2.5*Ft,Xn("Bounce",(function(t){return 1-Ot(1-t)}),Ot=function(t){return t<Ft?xt*t*t:t<It?xt*Math.pow(t-1.5/kt,2)+.75:t<Lt?xt*(t-=2.25/kt)*t+.9375:xt*Math.pow(t-2.625/kt,2)+.984375}),Xn("Expo",(function(t){return Math.pow(2,10*(t-1))*t+t*t*t*t*t*t*(1-t)})),Xn("Circ",(function(t){return-(zt(1-t*t)-1)})),Xn("Sine",(function(t){return 1===t?1:1-jt(t*Vt)})),Xn("Back",Jn("in"),Jn("out"),Jn()),jn.SteppedEase=jn.steps=ae.SteppedEase={config:function(t,e){void 0===t&&(t=1);var n=1/t,i=t+(e?0:1),r=e?1:0;return function(t){return((i*dn(0,.99999999,t)|0)+r)*n}}},Nt.ease=jn["quad.out"],xe("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return Ce+=t+","+t+"Params,"}));var Zn=function(t,e){this.id=Ut++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:Ae,this.set=e?e.getSetter:yi},ti=function(){function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,on(this,+t.duration,1,1),this.data=t.data,rt&&(this._ctx=rt,rt.data.push(this)),dt||Un.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,on(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(zn(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Je(this,t),!n._dp||n.parent||Ze(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&tn(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===Rt||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),Me(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+We(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+We(this),e):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(t,e){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*n,e):this._repeat?Xe(this._tTime,n)+1:1},e.timeScale=function(t,e){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var n=this.parent&&this._ts?Ye(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,this.totalTime(dn(-Math.abs(this._delay),this._tDur,n),!1!==e),Qe(this),function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t}(this)},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(zn(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==Rt&&(this._tTime-=Rt)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&tn(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(Xt(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ye(e.rawTime(t),this):this._tTime:this._tTime},e.revert=function(t){void 0===t&&(t=me);var e=it;return it=t,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(t),this.totalTime(-.01,t.suppressEvents)),"nested"!==this.data&&!1!==t.kill&&this.kill(),it=e,this},e.globalTime=function(t){for(var e=this,n=arguments.length?t:e.rawTime();e;)n=e._start+n/(Math.abs(e._ts)||1),e=e._dp;return!this.parent&&this._sat?this._sat.globalTime(t):n},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,an(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,an(this),e?this.time(e):this}return this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(ln(this,t),Xt(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,Xt(e)),this._dur||(this._zTime=-1e-8),this},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,n=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=n&&t<this.endTime(!0)-Rt))},e.eventCallback=function(t,e,n){var i=this.vars;return arguments.length>1?(e?(i[t]=e,n&&(i[t+"Params"]=n),"onUpdate"===t&&(this._onUpdate=e)):delete i[t],this):i[t]},e.then=function(t){var e=this;return new Promise((function(n){var i=Ht(t)?t:Pe,r=function(){var t=e.then;e.then=null,Ht(i)&&(i=i(e))&&(i.then||i===e)&&(e.then=t),n(i),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?r():e._prom=r}))},e.kill=function(){xn(this)},t}();Re(ti.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var ei=function(t){function e(e,n){var i;return void 0===e&&(e={}),(i=t.call(this,e)||this).labels={},i.smoothChildTiming=!!e.smoothChildTiming,i.autoRemoveChildren=!!e.autoRemoveChildren,i._sort=Xt(e.sortChildren),st&&tn(e.parent||st,tt(i),n),e.reversed&&i.reverse(),e.paused&&i.paused(!0),e.scrollTrigger&&en(tt(i),e.scrollTrigger),i}et(e,t);var n=e.prototype;return n.to=function(t,e,n){return cn(0,arguments,this),this},n.from=function(t,e,n){return cn(1,arguments,this),this},n.fromTo=function(t,e,n,i){return cn(2,arguments,this),this},n.set=function(t,e,n){return e.duration=0,e.parent=this,ze(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new di(t,e,ln(this,n),1),this},n.call=function(t,e,n){return tn(this,di.delayedCall(0,t,e),n)},n.staggerTo=function(t,e,n,i,r,s,o){return n.duration=e,n.stagger=n.stagger||i,n.onComplete=s,n.onCompleteParams=o,n.parent=this,new di(t,n,ln(this,r)),this},n.staggerFrom=function(t,e,n,i,r,s,o){return n.runBackwards=1,ze(n).immediateRender=Xt(n.immediateRender),this.staggerTo(t,e,n,i,r,s,o)},n.staggerFromTo=function(t,e,n,i,r,s,o,a){return i.startAt=n,ze(i).immediateRender=Xt(i.immediateRender),this.staggerTo(t,e,i,r,s,o,a)},n.render=function(t,e,n){var i,r,s,o,a,u,l,c,h,d,f,g,p=this._time,m=this._dirty?this.totalDuration():this._tDur,y=this._dur,v=t<=0?0:Fe(t),D=this._zTime<0!=t<0&&(this._initted||!y);if(this!==st&&v>m&&t>=0&&(v=m),v!==this._tTime||n||D){if(p!==this._time&&y&&(v+=this._time-p,t+=this._time-p),i=v,h=this._start,u=!(c=this._ts),D&&(y||(p=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(f=this._yoyo,a=y+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*a+t,e,n);if(i=Fe(v%a),v===m?(o=this._repeat,i=y):((o=~~(d=Fe(v/a)))&&o===d&&(i=y,o--),i>y&&(i=y)),d=Xe(this._tTime,a),!p&&this._tTime&&d!==o&&this._tTime-d*a-this._dur<=0&&(d=o),f&&1&o&&(i=y-i,g=1),o!==d&&!this._lock){var b=f&&1&d,w=b===(f&&1&o);if(o<d&&(b=!b),p=b?0:v%y?y:v,this._lock=1,this.render(p||(g?0:Fe(o*a)),e,!y)._lock=0,this._tTime=v,!e&&this.parent&&An(this,"onRepeat"),this.vars.repeatRefresh&&!g&&(this.invalidate()._lock=1),p&&p!==this._time||u!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(y=this._dur,m=this._tDur,w&&(this._lock=2,p=b?y:-1e-4,this.render(p,!0),this.vars.repeatRefresh&&!g&&this.invalidate()),this._lock=0,!this._ts&&!u)return this;Kn(this,g)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(l=function(t,e,n){var i;if(n>e)for(i=t._first;i&&i._start<=n;){if("isPause"===i.data&&i._start>e)return i;i=i._next}else for(i=t._last;i&&i._start>=n;){if("isPause"===i.data&&i._start<e)return i;i=i._prev}}(this,Fe(p),Fe(i)),l&&(v-=i-(i=l._start))),this._tTime=v,this._time=i,this._act=!c,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,p=0),!p&&i&&!e&&!o&&(An(this,"onStart"),this._tTime!==v))return this;if(i>=p&&t>=0)for(r=this._first;r;){if(s=r._next,(r._act||i>=r._start)&&r._ts&&l!==r){if(r.parent!==this)return this.render(t,e,n);if(r.render(r._ts>0?(i-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(i-r._start)*r._ts,e,n),i!==this._time||!this._ts&&!u){l=0,s&&(v+=this._zTime=-1e-8);break}}r=s}else{r=this._last;for(var _=t<0?t:i;r;){if(s=r._prev,(r._act||_<=r._end)&&r._ts&&l!==r){if(r.parent!==this)return this.render(t,e,n);if(r.render(r._ts>0?(_-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(_-r._start)*r._ts,e,n||it&&(r._initted||r._startAt)),i!==this._time||!this._ts&&!u){l=0,s&&(v+=this._zTime=_?-1e-8:Rt);break}}r=s}}if(l&&!e&&(this.pause(),l.render(i>=p?0:-1e-8)._zTime=i>=p?1:-1,this._ts))return this._start=h,Qe(this),this.render(t,e,n);this._onUpdate&&!e&&An(this,"onUpdate",!0),(v===m&&this._tTime>=this.totalDuration()||!v&&p)&&(h!==this._start&&Math.abs(c)===Math.abs(this._ts)||this._lock||((t||!y)&&(v===m&&this._ts>0||!v&&this._ts<0)&&qe(this,1),e||t<0&&!p||!v&&!p&&m||(An(this,v===m&&t>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(v<m&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(t,e){var n=this;if(Gt(e)||(e=ln(this,e,t)),!(t instanceof ti)){if(Zt(t))return t.forEach((function(t){return n.add(t,e)})),this;if(qt(t))return this.addLabel(t,e);if(!Ht(t))return this;t=di.delayedCall(0,t)}return this!==t?tn(this,t,e):this},n.getChildren=function(t,e,n,i){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===i&&(i=-1e8);for(var r=[],s=this._first;s;)s._start>=i&&(s instanceof di?e&&r.push(s):(n&&r.push(s),t&&r.push.apply(r,s.getChildren(!0,e,n)))),s=s._next;return r},n.getById=function(t){for(var e=this.getChildren(1,1,1),n=e.length;n--;)if(e[n].vars.id===t)return e[n]},n.remove=function(t){return qt(t)?this.removeLabel(t):Ht(t)?this.killTweensOf(t):(t.parent===this&&$e(this,t),t===this._recent&&(this._recent=this._last),He(this))},n.totalTime=function(e,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Fe(Un.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,n),this._forcing=0,this):this._tTime},n.addLabel=function(t,e){return this.labels[t]=ln(this,e),this},n.removeLabel=function(t){return delete this.labels[t],this},n.addPause=function(t,e,n){var i=di.delayedCall(0,e||fe,n);return i.data="isPause",this._hasPause=1,tn(this,i,ln(this,t))},n.removePause=function(t){var e=this._first;for(t=ln(this,t);e;)e._start===t&&"isPause"===e.data&&qe(e),e=e._next},n.killTweensOf=function(t,e,n){for(var i=this.getTweensOf(t,n),r=i.length;r--;)ni!==i[r]&&i[r].kill(t,e);return this},n.getTweensOf=function(t,e){for(var n,i=[],r=mn(t),s=this._first,o=Gt(e);s;)s instanceof di?Le(s._targets,r)&&(o?(!ni||s._initted&&s._ts)&&s.globalTime(0)<=e&&s.globalTime(s.totalDuration())>e:!e||s.isActive())&&i.push(s):(n=s.getTweensOf(r,e)).length&&i.push.apply(i,n),s=s._next;return i},n.tweenTo=function(t,e){e=e||{};var n,i=this,r=ln(i,t),s=e,o=s.startAt,a=s.onStart,u=s.onStartParams,l=s.immediateRender,c=di.to(i,Re({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:e.duration||Math.abs((r-(o&&"time"in o?o.time:i._time))/i.timeScale())||Rt,onStart:function(){if(i.pause(),!n){var t=e.duration||Math.abs((r-(o&&"time"in o?o.time:i._time))/i.timeScale());c._dur!==t&&on(c,t,0,1).render(c._time,!0,!0),n=1}a&&a.apply(c,u||[])}},e));return l?c.render(0):c},n.tweenFromTo=function(t,e,n){return this.tweenTo(e,Re({startAt:{time:ln(this,t)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(t){return void 0===t&&(t=this._time),Sn(this,ln(this,t))},n.previousLabel=function(t){return void 0===t&&(t=this._time),Sn(this,ln(this,t),1)},n.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+Rt)},n.shiftChildren=function(t,e,n){void 0===n&&(n=0);for(var i,r=this._first,s=this.labels;r;)r._start>=n&&(r._start+=t,r._end+=t),r=r._next;if(e)for(i in s)s[i]>=n&&(s[i]+=t);return He(this)},n.invalidate=function(e){var n=this._first;for(this._lock=0;n;)n.invalidate(e),n=n._next;return t.prototype.invalidate.call(this,e)},n.clear=function(t){void 0===t&&(t=!0);for(var e,n=this._first;n;)e=n._next,this.remove(n),n=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),He(this)},n.totalDuration=function(t){var e,n,i,r=0,s=this,o=s._last,a=Pt;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-t:t));if(s._dirty){for(i=s.parent;o;)e=o._prev,o._dirty&&o.totalDuration(),(n=o._start)>a&&s._sort&&o._ts&&!s._lock?(s._lock=1,tn(s,o,n-o._delay,1)._lock=0):a=n,n<0&&o._ts&&(r-=n,(!i&&!s._dp||i&&i.smoothChildTiming)&&(s._start+=n/s._ts,s._time-=n,s._tTime-=n),s.shiftChildren(-n,!1,-1/0),a=0),o._end>r&&o._ts&&(r=o._end),o=e;on(s,s===st&&s._time>r?s._time:r,1,1),s._dirty=0}return s._tDur},e.updateRoot=function(t){if(st._ts&&(Me(st,Ye(t,st)),ct=Un.frame),Un.frame>=_e){_e+=Mt.autoSleep||120;var e=st._first;if((!e||!e._ts)&&Mt.autoSleep&&Un._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Un.sleep()}}},e}(ti);Re(ei.prototype,{_lock:0,_hasPause:0,_forcing:0});var ni,ii,ri=function(t,e,n,i,r,s,o){var a,u,l,c,h,d,f,g,p=new Si(this._pt,t,e,0,1,bi,null,r),m=0,y=0;for(p.b=n,p.e=i,n+="",(f=~(i+="").indexOf("random("))&&(i=Cn(i)),s&&(s(g=[n,i],t,e),n=g[0],i=g[1]),u=n.match(ie)||[];a=ie.exec(i);)c=a[0],h=i.substring(m,a.index),l?l=(l+1)%5:"rgba("===h.substr(-5)&&(l=1),c!==u[y++]&&(d=parseFloat(u[y-1])||0,p._pt={_next:p._pt,p:h||1===y?h:",",s:d,c:"="===c.charAt(1)?Ie(d,c)-d:parseFloat(c)-d,m:l&&l<4?Math.round:0},m=ie.lastIndex);return p.c=m<i.length?i.substring(m,i.length):"",p.fp=o,(re.test(i)||f)&&(p.e=0),this._pt=p,p},si=function(t,e,n,i,r,s,o,a,u,l){Ht(i)&&(i=i(r||0,t,s));var c,h=t[e],d="get"!==n?n:Ht(h)?u?t[e.indexOf("set")||!Ht(t["get"+e.substr(3)])?e:"get"+e.substr(3)](u):t[e]():h,f=Ht(h)?u?pi:gi:fi;if(qt(i)&&(~i.indexOf("random(")&&(i=Cn(i)),"="===i.charAt(1)&&((c=Ie(d,i)+(fn(d)||0))||0===c)&&(i=c)),!l||d!==i||ii)return isNaN(d*i)||""===i?(!h&&!(e in t)&&ce(e,i),ri.call(this,t,e,d,i,f,a||Mt.stringFilter,u)):(c=new Si(this._pt,t,e,+d||0,i-(d||0),"boolean"==typeof h?Di:vi,0,f),u&&(c.fp=u),o&&c.modifier(o,this,t),this._pt=c)},oi=function(t,e,n,i,r,s){var o,a,u,l;if(be[t]&&!1!==(o=new be[t]).init(r,o.rawVars?e[t]:function(t,e,n,i,r){if(Ht(t)&&(t=li(t,r,e,n,i)),!Wt(t)||t.style&&t.nodeType||Zt(t)||Jt(t))return qt(t)?li(t,r,e,n,i):t;var s,o={};for(s in t)o[s]=li(t[s],r,e,n,i);return o}(e[t],i,r,s,n),n,i,s)&&(n._pt=a=new Si(n._pt,r,t,0,1,o.render,o,0,o.priority),n!==ht))for(u=n._ptLookup[n._targets.indexOf(r)],l=o._props.length;l--;)u[o._props[l]]=a;return o},ai=function t(e,n,i){var r,s,o,a,u,l,c,h,d,f,g,p,m,y=e.vars,v=y.ease,D=y.startAt,b=y.immediateRender,w=y.lazy,_=y.onUpdate,E=y.runBackwards,C=y.yoyoEase,T=y.keyframes,S=y.autoRevert,A=e._dur,x=e._startAt,k=e._targets,F=e.parent,I=F&&"nested"===F.data?F.vars.targets:k,L="auto"===e._overwrite&&!nt,O=e.timeline;if(O&&(!T||!v)&&(v="none"),e._ease=Wn(v,Nt.ease),e._yEase=C?Gn(Wn(!0===C?v:C,Nt.ease)):0,C&&e._yoyo&&!e._repeat&&(C=e._yEase,e._yEase=e._ease,e._ease=C),e._from=!O&&!!y.runBackwards,!O||T&&!y.stagger){if(p=(h=k[0]?Se(k[0]).harness:0)&&y[h.prop],r=Ue(y,ye),x&&(x._zTime<0&&x.progress(1),n<0&&E&&b&&!S?x.render(-1,!0):x.revert(E&&A?pe:ge),x._lazy=0),D){if(qe(e._startAt=di.set(k,Re({data:"isStart",overwrite:!1,parent:F,immediateRender:!0,lazy:!x&&Xt(w),startAt:null,delay:0,onUpdate:_&&function(){return An(e,"onUpdate")},stagger:0},D))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(it||!b&&!S)&&e._startAt.revert(pe),b&&A&&n<=0&&i<=0)return void(n&&(e._zTime=n))}else if(E&&A&&!x)if(n&&(b=!1),o=Re({overwrite:!1,data:"isFromStart",lazy:b&&!x&&Xt(w),immediateRender:b,stagger:0,parent:F},r),p&&(o[h.prop]=p),qe(e._startAt=di.set(k,o)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(it?e._startAt.revert(pe):e._startAt.render(-1,!0)),e._zTime=n,b){if(!n)return}else t(e._startAt,Rt,Rt);for(e._pt=e._ptCache=0,w=A&&Xt(w)||w&&!A,s=0;s<k.length;s++){if(c=(u=k[s])._gsap||Te(k)[s]._gsap,e._ptLookup[s]=f={},De[c.id]&&ve.length&&Oe(),g=I===k?s:I.indexOf(u),h&&!1!==(d=new h).init(u,p||r,e,g,I)&&(e._pt=a=new Si(e._pt,u,d.name,0,1,d.render,d,0,d.priority),d._props.forEach((function(t){f[t]=a})),d.priority&&(l=1)),!h||p)for(o in r)be[o]&&(d=oi(o,r,e,g,u,I))?d.priority&&(l=1):f[o]=a=si.call(e,u,o,"get",r[o],g,I,0,y.stringFilter);e._op&&e._op[s]&&e.kill(u,e._op[s]),L&&e._pt&&(ni=e,st.killTweensOf(u,f,e.globalTime(n)),m=!e.parent,ni=0),e._pt&&w&&(De[c.id]=1)}l&&Ti(e),e._onInit&&e._onInit(e)}e._onUpdate=_,e._initted=(!e._op||e._pt)&&!m,T&&n<=0&&O.render(Pt,!0,!0)},ui=function(t,e,n,i){var r,s,o=e.ease||i||"power1.inOut";if(Zt(e))s=n[t]||(n[t]=[]),e.forEach((function(t,n){return s.push({t:n/(e.length-1)*100,v:t,e:o})}));else for(r in e)s=n[r]||(n[r]=[]),"ease"===r||s.push({t:parseFloat(t),v:e[r],e:o})},li=function(t,e,n,i,r){return Ht(t)?t.call(e,n,i,r):qt(t)&&~t.indexOf("random(")?Cn(t):t},ci=Ce+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",hi={};xe(ci+",id,stagger,delay,duration,paused,scrollTrigger",(function(t){return hi[t]=1}));var di=function(t){function e(e,n,i,r){var s;"number"==typeof n&&(i.duration=n,n=i,i=null);var o,a,u,l,c,h,d,f,g=(s=t.call(this,r?n:ze(n))||this).vars,p=g.duration,m=g.delay,y=g.immediateRender,v=g.stagger,D=g.overwrite,b=g.keyframes,w=g.defaults,_=g.scrollTrigger,E=g.yoyoEase,C=n.parent||st,T=(Zt(e)||Jt(e)?Gt(e[0]):"length"in n)?[e]:mn(e);if(s._targets=T.length?Te(T):he("GSAP target "+e+" not found. https://gsap.com",!Mt.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=D,b||v||Qt(p)||Qt(m)){if(n=s.vars,(o=s.timeline=new ei({data:"nested",defaults:w||{},targets:C&&"nested"===C.data?C.vars.targets:T})).kill(),o.parent=o._dp=tt(s),o._start=0,v||Qt(p)||Qt(m)){if(l=T.length,d=v&&Dn(v),Wt(v))for(c in v)~ci.indexOf(c)&&(f||(f={}),f[c]=v[c]);for(a=0;a<l;a++)(u=Ue(n,hi)).stagger=0,E&&(u.yoyoEase=E),f&&Be(u,f),h=T[a],u.duration=+li(p,tt(s),a,h,T),u.delay=(+li(m,tt(s),a,h,T)||0)-s._delay,!v&&1===l&&u.delay&&(s._delay=m=u.delay,s._start+=m,u.delay=0),o.to(h,u,d?d(a,h,T):0),o._ease=jn.none;o.duration()?p=m=0:s.timeline=0}else if(b){ze(Re(o.vars.defaults,{ease:"none"})),o._ease=Wn(b.ease||n.ease||"none");var S,A,x,k=0;if(Zt(b))b.forEach((function(t){return o.to(T,t,">")})),o.duration();else{for(c in u={},b)"ease"===c||"easeEach"===c||ui(c,b[c],u,b.easeEach);for(c in u)for(S=u[c].sort((function(t,e){return t.t-e.t})),k=0,a=0;a<S.length;a++)(x={ease:(A=S[a]).e,duration:(A.t-(a?S[a-1].t:0))/100*p})[c]=A.v,o.to(T,x,k),k+=x.duration;o.duration()<p&&o.to({},{duration:p-o.duration()})}}p||s.duration(p=o.duration())}else s.timeline=0;return!0!==D||nt||(ni=tt(s),st.killTweensOf(T),ni=0),tn(C,tt(s),i),n.reversed&&s.reverse(),n.paused&&s.paused(!0),(y||!p&&!b&&s._start===Fe(C._time)&&Xt(y)&&Ke(tt(s))&&"nested"!==C.data)&&(s._tTime=-1e-8,s.render(Math.max(0,-m)||0)),_&&en(tt(s),_),s}et(e,t);var n=e.prototype;return n.render=function(t,e,n){var i,r,s,o,a,u,l,c,h,d=this._time,f=this._tDur,g=this._dur,p=t<0,m=t>f-Rt&&!p?f:t<Rt?0:t;if(g){if(m!==this._tTime||!t||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==p||this._lazy){if(i=m,c=this.timeline,this._repeat){if(o=g+this._rDelay,this._repeat<-1&&p)return this.totalTime(100*o+t,e,n);if(i=Fe(m%o),m===f?(s=this._repeat,i=g):(s=~~(a=Fe(m/o)))&&s===a?(i=g,s--):i>g&&(i=g),(u=this._yoyo&&1&s)&&(h=this._yEase,i=g-i),a=Xe(this._tTime,o),i===d&&!n&&this._initted&&s===a)return this._tTime=m,this;s!==a&&(c&&this._yEase&&Kn(c,u),this.vars.repeatRefresh&&!u&&!this._lock&&i!==o&&this._initted&&(this._lock=n=1,this.render(Fe(o*s),!0).invalidate()._lock=0))}if(!this._initted){if(nn(this,p?t:i,n,e,m))return this._tTime=0,this;if(!(d===this._time||n&&this.vars.repeatRefresh&&s!==a))return this;if(g!==this._dur)return this.render(t,e,n)}if(this._tTime=m,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=l=(h||this._ease)(i/g),this._from&&(this.ratio=l=1-l),i&&!d&&!e&&!s&&(An(this,"onStart"),this._tTime!==m))return this;for(r=this._pt;r;)r.r(l,r.d),r=r._next;c&&c.render(t<0?t:c._dur*c._ease(i/this._dur),e,n)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(p&&Ge(this,t,0,n),An(this,"onUpdate")),this._repeat&&s!==a&&this.vars.onRepeat&&!e&&this.parent&&An(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(p&&!this._onUpdate&&Ge(this,t,0,!0),(t||!g)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&qe(this,1),e||p&&!d||!(m||d||u)||(An(this,m===f?"onComplete":"onReverseComplete",!0),this._prom&&!(m<f&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,n,i){var r,s,o,a=t.ratio,u=e<0||!e&&(!t._start&&rn(t)&&(t._initted||!sn(t))||(t._ts<0||t._dp._ts<0)&&!sn(t))?0:1,l=t._rDelay,c=0;if(l&&t._repeat&&(c=dn(0,t._tDur,e),s=Xe(c,l),t._yoyo&&1&s&&(u=1-u),s!==Xe(t._tTime,l)&&(a=1-u,t.vars.repeatRefresh&&t._initted&&t.invalidate())),u!==a||it||i||t._zTime===Rt||!e&&t._zTime){if(!t._initted&&nn(t,e,i,n,c))return;for(o=t._zTime,t._zTime=e||(n?Rt:0),n||(n=e&&!o),t.ratio=u,t._from&&(u=1-u),t._time=0,t._tTime=c,r=t._pt;r;)r.r(u,r.d),r=r._next;e<0&&Ge(t,e,0,!0),t._onUpdate&&!n&&An(t,"onUpdate"),c&&t._repeat&&!n&&t.parent&&An(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===u&&(u&&qe(t,1),n||it||(An(t,u?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,n);return this},n.targets=function(){return this._targets},n.invalidate=function(e){return(!e||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(e),t.prototype.invalidate.call(this,e)},n.resetTo=function(t,e,n,i,r){dt||Un.wake(),this._ts||this.play();var s=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||ai(this,s),function(t,e,n,i,r,s,o,a){var u,l,c,h,d=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!d)for(d=t._ptCache[e]=[],c=t._ptLookup,h=t._targets.length;h--;){if((u=c[h][e])&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==e&&u.fp!==e;)u=u._next;if(!u)return ii=1,t.vars[e]="+=0",ai(t,o),ii=0,a?he(e+" not eligible for reset"):1;d.push(u)}for(h=d.length;h--;)(u=(l=d[h])._pt||l).s=!i&&0!==i||r?u.s+(i||0)+s*u.c:i,u.c=n-u.s,l.e&&(l.e=ke(n)+fn(l.e)),l.b&&(l.b=u.s+fn(l.b))}(this,t,e,n,i,this._ease(s/this._dur),s,r)?this.resetTo(t,e,n,i,1):(Je(this,0),this.parent||je(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?xn(this):this.scrollTrigger&&this.scrollTrigger.kill(!!it),this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,ni&&!0!==ni.vars.overwrite)._first||xn(this),this.parent&&n!==this.timeline.totalDuration()&&on(this,this._dur*this.timeline._tDur/n,0,1),this}var i,r,s,o,a,u,l,c=this._targets,h=t?mn(t):c,d=this._ptLookup,f=this._pt;if((!e||"all"===e)&&function(t,e){for(var n=t.length,i=n===e.length;i&&n--&&t[n]===e[n];);return n<0}(c,h))return"all"===e&&(this._pt=0),xn(this);for(i=this._op=this._op||[],"all"!==e&&(qt(e)&&(a={},xe(e,(function(t){return a[t]=1})),e=a),e=function(t,e){var n,i,r,s,o=t[0]?Se(t[0]).harness:0,a=o&&o.aliases;if(!a)return e;for(i in n=Be({},e),a)if(i in n)for(r=(s=a[i].split(",")).length;r--;)n[s[r]]=n[i];return n}(c,e)),l=c.length;l--;)if(~h.indexOf(c[l]))for(a in r=d[l],"all"===e?(i[l]=e,o=r,s={}):(s=i[l]=i[l]||{},o=e),o)(u=r&&r[a])&&("kill"in u.d&&!0!==u.d.kill(a)||$e(this,u,"_pt"),delete r[a]),"all"!==s&&(s[a]=1);return this._initted&&!this._pt&&f&&xn(this),this},e.to=function(t,n){return new e(t,n,arguments[2])},e.from=function(t,e){return cn(1,arguments)},e.delayedCall=function(t,n,i,r){return new e(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:n,onReverseComplete:n,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:r})},e.fromTo=function(t,e,n){return cn(2,arguments)},e.set=function(t,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new e(t,n)},e.killTweensOf=function(t,e,n){return st.killTweensOf(t,e,n)},e}(ti);Re(di.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),xe("staggerTo,staggerFrom,staggerFromTo",(function(t){di[t]=function(){var e=new ei,n=gn.call(arguments,0);return n.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,n)}}));var fi=function(t,e,n){return t[e]=n},gi=function(t,e,n){return t[e](n)},pi=function(t,e,n,i){return t[e](i.fp,n)},mi=function(t,e,n){return t.setAttribute(e,n)},yi=function(t,e){return Ht(t[e])?gi:Kt(t[e])&&t.setAttribute?mi:fi},vi=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},Di=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},bi=function(t,e){var n=e._pt,i="";if(!t&&e.b)i=e.b;else if(1===t&&e.e)i=e.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*t):Math.round(1e4*(n.s+n.c*t))/1e4)+i,n=n._next;i+=e.c}e.set(e.t,e.p,i,e)},wi=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},_i=function(t,e,n,i){for(var r,s=this._pt;s;)r=s._next,s.p===i&&s.modifier(t,e,n),s=r},Ei=function(t){for(var e,n,i=this._pt;i;)n=i._next,i.p===t&&!i.op||i.op===t?$e(this,i,"_pt"):i.dep||(e=1),i=n;return!e},Ci=function(t,e,n,i){i.mSet(t,e,i.m.call(i.tween,n,i.mt),i)},Ti=function(t){for(var e,n,i,r,s=t._pt;s;){for(e=s._next,n=i;n&&n.pr>s.pr;)n=n._next;(s._prev=n?n._prev:r)?s._prev._next=s:i=s,(s._next=n)?n._prev=s:r=s,s=e}t._pt=i},Si=function(){function t(t,e,n,i,r,s,o,a,u){this.t=e,this.s=i,this.c=r,this.p=n,this.r=s||vi,this.d=o||this,this.set=a||fi,this.pr=u||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,n){this.mSet=this.mSet||this.set,this.set=Ci,this.m=t,this.mt=n,this.tween=e},t}();xe(Ce+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return ye[t]=1})),ae.TweenMax=ae.TweenLite=di,ae.TimelineLite=ae.TimelineMax=ei,st=new ei({sortChildren:!1,defaults:Nt,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Mt.stringFilter=Vn;var Ai=[],xi={},ki=[],Fi=0,Ii=0,Li=function(t){return(xi[t]||ki).map((function(t){return t()}))},Oi=function(){var t=Date.now(),e=[];t-Fi>2&&(Li("matchMediaInit"),Ai.forEach((function(t){var n,i,r,s,o=t.queries,a=t.conditions;for(i in o)(n=ot.matchMedia(o[i]).matches)&&(r=1),n!==a[i]&&(a[i]=n,s=1);s&&(t.revert(),r&&e.push(t))})),Li("matchMediaRevert"),e.forEach((function(t){return t.onMatch(t,(function(e){return t.add(null,e)}))})),Fi=t,Li("matchMedia"))},Mi=function(){function t(t,e){this.selector=e&&yn(e),this.data=[],this._r=[],this.isReverted=!1,this.id=Ii++,t&&this.add(t)}var e=t.prototype;return e.add=function(t,e,n){Ht(t)&&(n=e,e=t,t=Ht);var i=this,r=function(){var t,r=rt,s=i.selector;return r&&r!==i&&r.data.push(i),n&&(i.selector=yn(n)),rt=i,t=e.apply(i,arguments),Ht(t)&&i._r.push(t),rt=r,i.selector=s,i.isReverted=!1,t};return i.last=r,t===Ht?r(i,(function(t){return i.add(null,t)})):t?i[t]=r:r},e.ignore=function(t){var e=rt;rt=null,t(this),rt=e},e.getTweens=function(){var e=[];return this.data.forEach((function(n){return n instanceof t?e.push.apply(e,n.getTweens()):n instanceof di&&!(n.parent&&"nested"===n.parent.data)&&e.push(n)})),e},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(t,e){var n=this;if(t?function(){for(var e,i=n.getTweens(),r=n.data.length;r--;)"isFlip"===(e=n.data[r]).data&&(e.revert(),e.getChildren(!0,!0,!1).forEach((function(t){return i.splice(i.indexOf(t),1)})));for(i.map((function(t){return{g:t._dur||t._delay||t._sat&&!t._sat.vars.immediateRender?t.globalTime(0):-1/0,t:t}})).sort((function(t,e){return e.g-t.g||-1/0})).forEach((function(e){return e.t.revert(t)})),r=n.data.length;r--;)(e=n.data[r])instanceof ei?"nested"!==e.data&&(e.scrollTrigger&&e.scrollTrigger.revert(),e.kill()):!(e instanceof di)&&e.revert&&e.revert(t);n._r.forEach((function(e){return e(t,n)})),n.isReverted=!0}():this.data.forEach((function(t){return t.kill&&t.kill()})),this.clear(),e)for(var i=Ai.length;i--;)Ai[i].id===this.id&&Ai.splice(i,1)},e.revert=function(t){this.kill(t||{})},t}(),Ni=function(){function t(t){this.contexts=[],this.scope=t,rt&&rt.data.push(this)}var e=t.prototype;return e.add=function(t,e,n){Wt(t)||(t={matches:t});var i,r,s,o=new Mi(0,n||this.scope),a=o.conditions={};for(r in rt&&!o.selector&&(o.selector=rt.selector),this.contexts.push(o),e=o.add("onMatch",e),o.queries=t,t)"all"===r?s=1:(i=ot.matchMedia(t[r]))&&(Ai.indexOf(o)<0&&Ai.push(o),(a[r]=i.matches)&&(s=1),i.addListener?i.addListener(Oi):i.addEventListener("change",Oi));return s&&e(o,(function(t){return o.add(null,t)})),this},e.revert=function(t){this.kill(t||{})},e.kill=function(t){this.contexts.forEach((function(e){return e.kill(t,!0)}))},t}(),Pi={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((function(t){return Fn(t)}))},timeline:function(t){return new ei(t)},getTweensOf:function(t,e){return st.getTweensOf(t,e)},getProperty:function(t,e,n,i){qt(t)&&(t=mn(t)[0]);var r=Se(t||{}).get,s=n?Pe:Ne;return"native"===n&&(n=""),t?e?s((be[e]&&be[e].get||r)(t,e,n,i)):function(e,n,i){return s((be[e]&&be[e].get||r)(t,e,n,i))}:t},quickSetter:function(t,e,n){if((t=mn(t)).length>1){var i=t.map((function(t){return Vi.quickSetter(t,e,n)})),r=i.length;return function(t){for(var e=r;e--;)i[e](t)}}t=t[0]||{};var s=be[e],o=Se(t),a=o.harness&&(o.harness.aliases||{})[e]||e,u=s?function(e){var i=new s;ht._pt=0,i.init(t,n?e+n:e,ht,0,[t]),i.render(1,i),ht._pt&&wi(1,ht)}:o.set(t,a);return s?u:function(e){return u(t,a,n?e+n:e,o,1)}},quickTo:function(t,e,n){var i,r=Vi.to(t,Re(((i={})[e]="+=0.1",i.paused=!0,i.stagger=0,i),n||{})),s=function(t,n,i){return r.resetTo(e,t,n,i)};return s.tween=r,s},isTweening:function(t){return st.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Wn(t.ease,Nt.ease)),Ve(Nt,t||{})},config:function(t){return Ve(Mt,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,i=t.plugins,r=t.defaults,s=t.extendTimeline;(i||"").split(",").forEach((function(t){return t&&!be[t]&&!ae[t]&&he(e+" effect requires "+t+" plugin.")})),we[e]=function(t,e,i){return n(mn(t),Re(e||{},r),i)},s&&(ei.prototype[e]=function(t,n,i){return this.add(we[e](t,Wt(n)?n:(i=n)&&{},this),i)})},registerEase:function(t,e){jn[t]=Wn(e)},parseEase:function(t,e){return arguments.length?Wn(t,e):jn},getById:function(t){return st.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var n,i,r=new ei(t);for(r.smoothChildTiming=Xt(t.smoothChildTiming),st.remove(r),r._dp=0,r._time=r._tTime=st._time,n=st._first;n;)i=n._next,!e&&!n._dur&&n instanceof di&&n.vars.onComplete===n._targets[0]||tn(r,n,n._start-n._delay),n=i;return tn(st,r,0),r},context:function(t,e){return t?new Mi(t,e):rt},matchMedia:function(t){return new Ni(t)},matchMediaRefresh:function(){return Ai.forEach((function(t){var e,n,i=t.conditions;for(n in i)i[n]&&(i[n]=!1,e=1);e&&t.revert()}))||Oi()},addEventListener:function(t,e){var n=xi[t]||(xi[t]=[]);~n.indexOf(e)||n.push(e)},removeEventListener:function(t,e){var n=xi[t],i=n&&n.indexOf(e);i>=0&&n.splice(i,1)},utils:{wrap:function t(e,n,i){var r=n-e;return Zt(e)?En(e,t(0,e.length),n):hn(i,(function(t){return(r+(t-e)%r)%r+e}))},wrapYoyo:function t(e,n,i){var r=n-e,s=2*r;return Zt(e)?En(e,t(0,e.length-1),n):hn(i,(function(t){return e+((t=(s+(t-e)%s)%s||0)>r?s-t:t)}))},distribute:Dn,random:_n,snap:wn,normalize:function(t,e,n){return Tn(t,e,0,1,n)},getUnit:fn,clamp:function(t,e,n){return hn(n,(function(n){return dn(t,e,n)}))},splitColor:Mn,toArray:mn,selector:yn,mapRange:Tn,pipe:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(n){return t(parseFloat(n))+(e||fn(n))}},interpolate:function t(e,n,i,r){var s=isNaN(e+n)?0:function(t){return(1-t)*e+t*n};if(!s){var o,a,u,l,c,h=qt(e),d={};if(!0===i&&(r=1)&&(i=null),h)e={p:e},n={p:n};else if(Zt(e)&&!Zt(n)){for(u=[],l=e.length,c=l-2,a=1;a<l;a++)u.push(t(e[a-1],e[a]));l--,s=function(t){t*=l;var e=Math.min(c,~~t);return u[e](t-e)},i=n}else r||(e=Be(Zt(e)?[]:{},e));if(!u){for(o in n)si.call(d,e,o,"get",n[o]);s=function(t){return wi(t,d)||(h?e.p:e)}}}return hn(i,s)},shuffle:vn},install:le,effects:we,ticker:Un,updateRoot:ei.updateRoot,plugins:be,globalTimeline:st,core:{PropTween:Si,globals:de,Tween:di,Timeline:ei,Animation:ti,getCache:Se,_removeLinkedListItem:$e,reverting:function(){return it},context:function(t){return t&&rt&&(rt.data.push(t),t._ctx=rt),rt},suppressOverwrites:function(t){return nt=t}}};xe("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return Pi[t]=di[t]})),Un.add(ei.updateRoot),ht=Pi.to({},{duration:0});var Ri=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},Bi=function(t,e){return{name:t,rawVars:1,init:function(t,n,i){i._onInit=function(t){var i,r;if(qt(n)&&(i={},xe(n,(function(t){return i[t]=1})),n=i),e){for(r in i={},n)i[r]=e(n[r]);n=i}!function(t,e){var n,i,r,s=t._targets;for(n in e)for(i=s.length;i--;)(r=t._ptLookup[i][n])&&(r=r.d)&&(r._pt&&(r=Ri(r,n)),r&&r.modifier&&r.modifier(e[n],t,s[i],n))}(t,n)}}}},Vi=Pi.registerPlugin({name:"attr",init:function(t,e,n,i,r){var s,o,a;for(s in this.tween=n,e)a=t.getAttribute(s)||"",(o=this.add(t,"setAttribute",(a||0)+"",e[s],i,r,0,0,s)).op=s,o.b=a,this._props.push(s)},render:function(t,e){for(var n=e._pt;n;)it?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n],0,0,0,0,0,1)}},Bi("roundProps",bn),Bi("modifiers"),Bi("snap",wn))||Pi;di.version=ei.version=Vi.version="3.12.7",lt=1,Yt()&&zn(),jn.Power0,jn.Power1,jn.Power2,jn.Power3,jn.Power4,jn.Linear,jn.Quad,jn.Cubic,jn.Quart,jn.Quint,jn.Strong,jn.Elastic,jn.Back,jn.SteppedEase,jn.Bounce,jn.Sine,jn.Expo,jn.Circ;
/*!
 * CSSPlugin 3.12.7
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
var Ui,zi,ji,$i,qi,Hi,Gi,Ki,Wi={},Xi=180/Math.PI,Yi=Math.PI/180,Qi=Math.atan2,Ji=/([A-Z])/g,Zi=/(left|right|width|margin|padding|x)/i,tr=/[\s,\(]\S/,er={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},nr=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},ir=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},rr=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},sr=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},or=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},ar=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},ur=function(t,e,n){return t.style[e]=n},lr=function(t,e,n){return t.style.setProperty(e,n)},cr=function(t,e,n){return t._gsap[e]=n},hr=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},dr=function(t,e,n,i,r){var s=t._gsap;s.scaleX=s.scaleY=n,s.renderTransform(r,s)},fr=function(t,e,n,i,r){var s=t._gsap;s[e]=n,s.renderTransform(r,s)},gr="transform",pr=gr+"Origin",mr=function t(e,n){var i=this,r=this.target,s=r.style,o=r._gsap;if(e in Wi&&s){if(this.tfm=this.tfm||{},"transform"===e)return er.transform.split(",").forEach((function(e){return t.call(i,e,n)}));if(~(e=er[e]||e).indexOf(",")?e.split(",").forEach((function(t){return i.tfm[t]=Mr(r,t)})):this.tfm[e]=o.x?o[e]:Mr(r,e),e===pr&&(this.tfm.zOrigin=o.zOrigin),this.props.indexOf(gr)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(pr,n,"")),e=gr}(s||n)&&this.props.push(e,n,s[e])},yr=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},vr=function(){var t,e,n=this.props,i=this.target,r=i.style,s=i._gsap;for(t=0;t<n.length;t+=3)n[t+1]?2===n[t+1]?i[n[t]](n[t+2]):i[n[t]]=n[t+2]:n[t+2]?r[n[t]]=n[t+2]:r.removeProperty("--"===n[t].substr(0,2)?n[t]:n[t].replace(Ji,"-$1").toLowerCase());if(this.tfm){for(e in this.tfm)s[e]=this.tfm[e];s.svg&&(s.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),(t=Gi())&&t.isStart||r[gr]||(yr(r),s.zOrigin&&r[pr]&&(r[pr]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},Dr=function(t,e){var n={target:t,props:[],revert:vr,save:mr};return t._gsap||Vi.core.getCache(t),e&&t.style&&t.nodeType&&e.split(",").forEach((function(t){return n.save(t)})),n},br=function(t,e){var n=zi.createElementNS?zi.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):zi.createElement(t);return n&&n.style?n:zi.createElement(t)},wr=function t(e,n,i){var r=getComputedStyle(e);return r[n]||r.getPropertyValue(n.replace(Ji,"-$1").toLowerCase())||r.getPropertyValue(n)||!i&&t(e,Er(n)||n,1)||""},_r="O,Moz,ms,Ms,Webkit".split(","),Er=function(t,e,n){var i=(e||qi).style,r=5;if(t in i&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);r--&&!(_r[r]+t in i););return r<0?null:(3===r?"ms":r>=0?_r[r]:"")+t},Cr=function(){"undefined"!=typeof window&&window.document&&(Ui=window,zi=Ui.document,ji=zi.documentElement,qi=br("div")||{style:{}},br("div"),gr=Er(gr),pr=gr+"Origin",qi.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Ki=!!Er("perspective"),Gi=Vi.core.reverting,$i=1)},Tr=function(t){var e,n=t.ownerSVGElement,i=br("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=t.cloneNode(!0);r.style.display="block",i.appendChild(r),ji.appendChild(i);try{e=r.getBBox()}catch(s){}return i.removeChild(r),ji.removeChild(i),e},Sr=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},Ar=function(t){var e,n;try{e=t.getBBox()}catch(i){e=Tr(t),n=1}return e&&(e.width||e.height)||n||(e=Tr(t)),!e||e.width||e.x||e.y?e:{x:+Sr(t,["x","cx","x1"])||0,y:+Sr(t,["y","cy","y1"])||0,width:0,height:0}},xr=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!Ar(t))},kr=function(t,e){if(e){var n,i=t.style;e in Wi&&e!==pr&&(e=gr),i.removeProperty?("ms"!==(n=e.substr(0,2))&&"webkit"!==e.substr(0,6)||(e="-"+e),i.removeProperty("--"===n?e:e.replace(Ji,"-$1").toLowerCase())):i.removeAttribute(e)}},Fr=function(t,e,n,i,r,s){var o=new Si(t._pt,e,n,0,1,s?ar:or);return t._pt=o,o.b=i,o.e=r,t._props.push(n),o},Ir={deg:1,rad:1,turn:1},Lr={grid:1,flex:1},Or=function t(e,n,i,r){var s,o,a,u,l=parseFloat(i)||0,c=(i+"").trim().substr((l+"").length)||"px",h=qi.style,d=Zi.test(n),f="svg"===e.tagName.toLowerCase(),g=(f?"client":"offset")+(d?"Width":"Height"),p=100,m="px"===r,y="%"===r;if(r===c||!l||Ir[r]||Ir[c])return l;if("px"!==c&&!m&&(l=t(e,n,i,"px")),u=e.getCTM&&xr(e),(y||"%"===c)&&(Wi[n]||~n.indexOf("adius")))return s=u?e.getBBox()[d?"width":"height"]:e[g],ke(y?l/s*p:l/100*s);if(h[d?"width":"height"]=p+(m?c:r),o="rem"!==r&&~n.indexOf("adius")||"em"===r&&e.appendChild&&!f?e:e.parentNode,u&&(o=(e.ownerSVGElement||{}).parentNode),o&&o!==zi&&o.appendChild||(o=zi.body),(a=o._gsap)&&y&&a.width&&d&&a.time===Un.time&&!a.uncache)return ke(l/a.width*p);if(!y||"height"!==n&&"width"!==n)(y||"%"===c)&&!Lr[wr(o,"display")]&&(h.position=wr(e,"position")),o===e&&(h.position="static"),o.appendChild(qi),s=qi[g],o.removeChild(qi),h.position="absolute";else{var v=e.style[n];e.style[n]=p+r,s=e[g],v?e.style[n]=v:kr(e,n)}return d&&y&&((a=Se(o)).time=Un.time,a.width=o[g]),ke(m?s*l/p:s&&l?p/s*l:0)},Mr=function(t,e,n,i){var r;return $i||Cr(),e in er&&"transform"!==e&&~(e=er[e]).indexOf(",")&&(e=e.split(",")[0]),Wi[e]&&"transform"!==e?(r=Hr(t,i),r="transformOrigin"!==e?r[e]:r.svg?r.origin:Gr(wr(t,pr))+" "+r.zOrigin+"px"):(!(r=t.style[e])||"auto"===r||i||~(r+"").indexOf("calc("))&&(r=Br[e]&&Br[e](t,e,n)||wr(t,e)||Ae(t,e)||("opacity"===e?1:0)),n&&!~(r+"").trim().indexOf(" ")?Or(t,e,r,n)+n:r},Nr=function(t,e,n,i){if(!n||"none"===n){var r=Er(e,t,1),s=r&&wr(t,r,1);s&&s!==n?(e=r,n=s):"borderColor"===e&&(n=wr(t,"borderTopColor"))}var o,a,u,l,c,h,d,f,g,p,m,y=new Si(this._pt,t.style,e,0,1,bi),v=0,D=0;if(y.b=n,y.e=i,n+="","auto"===(i+="")&&(h=t.style[e],t.style[e]=i,i=wr(t,e)||i,h?t.style[e]=h:kr(t,e)),Vn(o=[n,i]),i=o[1],u=(n=o[0]).match(ne)||[],(i.match(ne)||[]).length){for(;a=ne.exec(i);)d=a[0],g=i.substring(v,a.index),c?c=(c+1)%5:"rgba("!==g.substr(-5)&&"hsla("!==g.substr(-5)||(c=1),d!==(h=u[D++]||"")&&(l=parseFloat(h)||0,m=h.substr((l+"").length),"="===d.charAt(1)&&(d=Ie(l,d)+m),f=parseFloat(d),p=d.substr((f+"").length),v=ne.lastIndex-p.length,p||(p=p||Mt.units[e]||m,v===i.length&&(i+=p,y.e+=p)),m!==p&&(l=Or(t,e,h,p)||0),y._pt={_next:y._pt,p:g||1===D?g:",",s:l,c:f-l,m:c&&c<4||"zIndex"===e?Math.round:0});y.c=v<i.length?i.substring(v,i.length):""}else y.r="display"===e&&"none"===i?ar:or;return re.test(i)&&(y.e=0),this._pt=y,y},Pr={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Rr=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n,i,r,s=e.t,o=s.style,a=e.u,u=s._gsap;if("all"===a||!0===a)o.cssText="",i=1;else for(r=(a=a.split(",")).length;--r>-1;)n=a[r],Wi[n]&&(i=1,n="transformOrigin"===n?pr:gr),kr(s,n);i&&(kr(s,gr),u&&(u.svg&&s.removeAttribute("transform"),o.scale=o.rotate=o.translate="none",Hr(s,1),u.uncache=1,yr(o)))}},Br={clearProps:function(t,e,n,i,r){if("isFromStart"!==r.data){var s=t._pt=new Si(t._pt,e,n,0,0,Rr);return s.u=i,s.pr=-10,s.tween=r,t._props.push(n),1}}},Vr=[1,0,0,1,0,0],Ur={},zr=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},jr=function(t){var e=wr(t,gr);return zr(e)?Vr:e.substr(7).match(ee).map(ke)},$r=function(t,e){var n,i,r,s,o=t._gsap||Se(t),a=t.style,u=jr(t);return o.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(u=[(r=t.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?Vr:u:(u!==Vr||t.offsetParent||t===ji||o.svg||(r=a.display,a.display="block",(n=t.parentNode)&&(t.offsetParent||t.getBoundingClientRect().width)||(s=1,i=t.nextElementSibling,ji.appendChild(t)),u=jr(t),r?a.display=r:kr(t,"display"),s&&(i?n.insertBefore(t,i):n?n.appendChild(t):ji.removeChild(t))),e&&u.length>6?[u[0],u[1],u[4],u[5],u[12],u[13]]:u)},qr=function(t,e,n,i,r,s){var o,a,u,l=t._gsap,c=r||$r(t,!0),h=l.xOrigin||0,d=l.yOrigin||0,f=l.xOffset||0,g=l.yOffset||0,p=c[0],m=c[1],y=c[2],v=c[3],D=c[4],b=c[5],w=e.split(" "),_=parseFloat(w[0])||0,E=parseFloat(w[1])||0;n?c!==Vr&&(a=p*v-m*y)&&(u=_*(-m/a)+E*(p/a)-(p*b-m*D)/a,_=_*(v/a)+E*(-y/a)+(y*b-v*D)/a,E=u):(_=(o=Ar(t)).x+(~w[0].indexOf("%")?_/100*o.width:_),E=o.y+(~(w[1]||w[0]).indexOf("%")?E/100*o.height:E)),i||!1!==i&&l.smooth?(D=_-h,b=E-d,l.xOffset=f+(D*p+b*y)-D,l.yOffset=g+(D*m+b*v)-b):l.xOffset=l.yOffset=0,l.xOrigin=_,l.yOrigin=E,l.smooth=!!i,l.origin=e,l.originIsAbsolute=!!n,t.style[pr]="0px 0px",s&&(Fr(s,l,"xOrigin",h,_),Fr(s,l,"yOrigin",d,E),Fr(s,l,"xOffset",f,l.xOffset),Fr(s,l,"yOffset",g,l.yOffset)),t.setAttribute("data-svg-origin",_+" "+E)},Hr=function(t,e){var n=t._gsap||new Zn(t);if("x"in n&&!e&&!n.uncache)return n;var i,r,s,o,a,u,l,c,h,d,f,g,p,m,y,v,D,b,w,_,E,C,T,S,A,x,k,F,I,L,O,M,N=t.style,P=n.scaleX<0,R="px",B="deg",V=getComputedStyle(t),U=wr(t,pr)||"0";return i=r=s=u=l=c=h=d=f=0,o=a=1,n.svg=!(!t.getCTM||!xr(t)),V.translate&&("none"===V.translate&&"none"===V.scale&&"none"===V.rotate||(N[gr]=("none"!==V.translate?"translate3d("+(V.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==V.rotate?"rotate("+V.rotate+") ":"")+("none"!==V.scale?"scale("+V.scale.split(" ").join(",")+") ":"")+("none"!==V[gr]?V[gr]:"")),N.scale=N.rotate=N.translate="none"),m=$r(t,n.svg),n.svg&&(n.uncache?(A=t.getBBox(),U=n.xOrigin-A.x+"px "+(n.yOrigin-A.y)+"px",S=""):S=!e&&t.getAttribute("data-svg-origin"),qr(t,S||U,!!S||n.originIsAbsolute,!1!==n.smooth,m)),g=n.xOrigin||0,p=n.yOrigin||0,m!==Vr&&(b=m[0],w=m[1],_=m[2],E=m[3],i=C=m[4],r=T=m[5],6===m.length?(o=Math.sqrt(b*b+w*w),a=Math.sqrt(E*E+_*_),u=b||w?Qi(w,b)*Xi:0,(h=_||E?Qi(_,E)*Xi+u:0)&&(a*=Math.abs(Math.cos(h*Yi))),n.svg&&(i-=g-(g*b+p*_),r-=p-(g*w+p*E))):(M=m[6],L=m[7],k=m[8],F=m[9],I=m[10],O=m[11],i=m[12],r=m[13],s=m[14],l=(y=Qi(M,I))*Xi,y&&(S=C*(v=Math.cos(-y))+k*(D=Math.sin(-y)),A=T*v+F*D,x=M*v+I*D,k=C*-D+k*v,F=T*-D+F*v,I=M*-D+I*v,O=L*-D+O*v,C=S,T=A,M=x),c=(y=Qi(-_,I))*Xi,y&&(v=Math.cos(-y),O=E*(D=Math.sin(-y))+O*v,b=S=b*v-k*D,w=A=w*v-F*D,_=x=_*v-I*D),u=(y=Qi(w,b))*Xi,y&&(S=b*(v=Math.cos(y))+w*(D=Math.sin(y)),A=C*v+T*D,w=w*v-b*D,T=T*v-C*D,b=S,C=A),l&&Math.abs(l)+Math.abs(u)>359.9&&(l=u=0,c=180-c),o=ke(Math.sqrt(b*b+w*w+_*_)),a=ke(Math.sqrt(T*T+M*M)),y=Qi(C,T),h=Math.abs(y)>2e-4?y*Xi:0,f=O?1/(O<0?-O:O):0),n.svg&&(S=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!zr(wr(t,gr)),S&&t.setAttribute("transform",S))),Math.abs(h)>90&&Math.abs(h)<270&&(P?(o*=-1,h+=u<=0?180:-180,u+=u<=0?180:-180):(a*=-1,h+=h<=0?180:-180)),e=e||n.uncache,n.x=i-((n.xPercent=i&&(!e&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-i)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+R,n.y=r-((n.yPercent=r&&(!e&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-r)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+R,n.z=s+R,n.scaleX=ke(o),n.scaleY=ke(a),n.rotation=ke(u)+B,n.rotationX=ke(l)+B,n.rotationY=ke(c)+B,n.skewX=h+B,n.skewY=d+B,n.transformPerspective=f+R,(n.zOrigin=parseFloat(U.split(" ")[2])||!e&&n.zOrigin||0)&&(N[pr]=Gr(U)),n.xOffset=n.yOffset=0,n.force3D=Mt.force3D,n.renderTransform=n.svg?Zr:Ki?Jr:Wr,n.uncache=0,n},Gr=function(t){return(t=t.split(" "))[0]+" "+t[1]},Kr=function(t,e,n){var i=fn(e);return ke(parseFloat(e)+parseFloat(Or(t,"x",n+"px",i)))+i},Wr=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Jr(t,e)},Xr="0deg",Yr="0px",Qr=") ",Jr=function(t,e){var n=e||this,i=n.xPercent,r=n.yPercent,s=n.x,o=n.y,a=n.z,u=n.rotation,l=n.rotationY,c=n.rotationX,h=n.skewX,d=n.skewY,f=n.scaleX,g=n.scaleY,p=n.transformPerspective,m=n.force3D,y=n.target,v=n.zOrigin,D="",b="auto"===m&&t&&1!==t||!0===m;if(v&&(c!==Xr||l!==Xr)){var w,_=parseFloat(l)*Yi,E=Math.sin(_),C=Math.cos(_);_=parseFloat(c)*Yi,w=Math.cos(_),s=Kr(y,s,E*w*-v),o=Kr(y,o,-Math.sin(_)*-v),a=Kr(y,a,C*w*-v+v)}p!==Yr&&(D+="perspective("+p+Qr),(i||r)&&(D+="translate("+i+"%, "+r+"%) "),(b||s!==Yr||o!==Yr||a!==Yr)&&(D+=a!==Yr||b?"translate3d("+s+", "+o+", "+a+") ":"translate("+s+", "+o+Qr),u!==Xr&&(D+="rotate("+u+Qr),l!==Xr&&(D+="rotateY("+l+Qr),c!==Xr&&(D+="rotateX("+c+Qr),h===Xr&&d===Xr||(D+="skew("+h+", "+d+Qr),1===f&&1===g||(D+="scale("+f+", "+g+Qr),y.style[gr]=D||"translate(0, 0)"},Zr=function(t,e){var n,i,r,s,o,a=e||this,u=a.xPercent,l=a.yPercent,c=a.x,h=a.y,d=a.rotation,f=a.skewX,g=a.skewY,p=a.scaleX,m=a.scaleY,y=a.target,v=a.xOrigin,D=a.yOrigin,b=a.xOffset,w=a.yOffset,_=a.forceCSS,E=parseFloat(c),C=parseFloat(h);d=parseFloat(d),f=parseFloat(f),(g=parseFloat(g))&&(f+=g=parseFloat(g),d+=g),d||f?(d*=Yi,f*=Yi,n=Math.cos(d)*p,i=Math.sin(d)*p,r=Math.sin(d-f)*-m,s=Math.cos(d-f)*m,f&&(g*=Yi,o=Math.tan(f-g),r*=o=Math.sqrt(1+o*o),s*=o,g&&(o=Math.tan(g),n*=o=Math.sqrt(1+o*o),i*=o)),n=ke(n),i=ke(i),r=ke(r),s=ke(s)):(n=p,s=m,i=r=0),(E&&!~(c+"").indexOf("px")||C&&!~(h+"").indexOf("px"))&&(E=Or(y,"x",c,"px"),C=Or(y,"y",h,"px")),(v||D||b||w)&&(E=ke(E+v-(v*n+D*r)+b),C=ke(C+D-(v*i+D*s)+w)),(u||l)&&(o=y.getBBox(),E=ke(E+u/100*o.width),C=ke(C+l/100*o.height)),o="matrix("+n+","+i+","+r+","+s+","+E+","+C+")",y.setAttribute("transform",o),_&&(y.style[gr]=o)},ts=function(t,e,n,i,r){var s,o,a=360,u=qt(r),l=parseFloat(r)*(u&&~r.indexOf("rad")?Xi:1)-i,c=i+l+"deg";return u&&("short"===(s=r.split("_")[1])&&(l%=a)!==l%180&&(l+=l<0?a:-360),"cw"===s&&l<0?l=(l+36e9)%a-~~(l/a)*a:"ccw"===s&&l>0&&(l=(l-36e9)%a-~~(l/a)*a)),t._pt=o=new Si(t._pt,e,n,i,l,ir),o.e=c,o.u="deg",t._props.push(n),o},es=function(t,e){for(var n in e)t[n]=e[n];return t},ns=function(t,e,n){var i,r,s,o,a,u,l,c=es({},n._gsap),h=n.style;for(r in c.svg?(s=n.getAttribute("transform"),n.setAttribute("transform",""),h[gr]=e,i=Hr(n,1),kr(n,gr),n.setAttribute("transform",s)):(s=getComputedStyle(n)[gr],h[gr]=e,i=Hr(n,1),h[gr]=s),Wi)(s=c[r])!==(o=i[r])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(r)<0&&(a=fn(s)!==(l=fn(o))?Or(n,r,s,l):parseFloat(s),u=parseFloat(o),t._pt=new Si(t._pt,i,r,a,u-a,nr),t._pt.u=l||0,t._props.push(r));es(i,c)};xe("padding,margin,Width,Radius",(function(t,e){var n="Top",i="Right",r="Bottom",s="Left",o=(e<3?[n,i,r,s]:[n+s,n+i,r+i,r+s]).map((function(n){return e<2?t+n:"border"+n+t}));Br[e>1?"border"+t:t]=function(t,e,n,i,r){var s,a;if(arguments.length<4)return s=o.map((function(e){return Mr(t,e,n)})),5===(a=s.join(" ")).split(s[0]).length?s[0]:a;s=(i+"").split(" "),a={},o.forEach((function(t,e){return a[t]=s[e]=s[e]||s[(e-1)/2|0]})),t.init(e,a,r)}}));var is,rs,ss,os={name:"css",register:Cr,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,i,r){var s,o,a,u,l,c,h,d,f,g,p,m,y,v,D,b,w,_,E,C,T=this._props,S=t.style,A=n.vars.startAt;for(h in $i||Cr(),this.styles=this.styles||Dr(t),b=this.styles.props,this.tween=n,e)if("autoRound"!==h&&(o=e[h],!be[h]||!oi(h,e,n,i,t,r)))if(l=typeof o,c=Br[h],"function"===l&&(l=typeof(o=o.call(n,i,t,r))),"string"===l&&~o.indexOf("random(")&&(o=Cn(o)),c)c(this,t,h,o,n)&&(D=1);else if("--"===h.substr(0,2))s=(getComputedStyle(t).getPropertyValue(h)+"").trim(),o+="",Rn.lastIndex=0,Rn.test(s)||(d=fn(s),f=fn(o)),f?d!==f&&(s=Or(t,h,s,f)+f):d&&(o+=d),this.add(S,"setProperty",s,o,i,r,0,0,h),T.push(h),b.push(h,0,S[h]);else if("undefined"!==l){if(A&&h in A?(s="function"==typeof A[h]?A[h].call(n,i,t,r):A[h],qt(s)&&~s.indexOf("random(")&&(s=Cn(s)),fn(s+"")||"auto"===s||(s+=Mt.units[h]||fn(Mr(t,h))||""),"="===(s+"").charAt(1)&&(s=Mr(t,h))):s=Mr(t,h),u=parseFloat(s),(g="string"===l&&"="===o.charAt(1)&&o.substr(0,2))&&(o=o.substr(2)),a=parseFloat(o),h in er&&("autoAlpha"===h&&(1===u&&"hidden"===Mr(t,"visibility")&&a&&(u=0),b.push("visibility",0,S.visibility),Fr(this,S,"visibility",u?"inherit":"hidden",a?"inherit":"hidden",!a)),"scale"!==h&&"transform"!==h&&~(h=er[h]).indexOf(",")&&(h=h.split(",")[0])),p=h in Wi)if(this.styles.save(h),m||((y=t._gsap).renderTransform&&!e.parseTransform||Hr(t,e.parseTransform),v=!1!==e.smoothOrigin&&y.smooth,(m=this._pt=new Si(this._pt,S,gr,0,1,y.renderTransform,y,0,-1)).dep=1),"scale"===h)this._pt=new Si(this._pt,y,"scaleY",y.scaleY,(g?Ie(y.scaleY,g+a):a)-y.scaleY||0,nr),this._pt.u=0,T.push("scaleY",h),h+="X";else{if("transformOrigin"===h){b.push(pr,0,S[pr]),_=void 0,E=void 0,C=void 0,_=(w=o).split(" "),E=_[0],C=_[1]||"50%","top"!==E&&"bottom"!==E&&"left"!==C&&"right"!==C||(w=E,E=C,C=w),_[0]=Pr[E]||E,_[1]=Pr[C]||C,o=_.join(" "),y.svg?qr(t,o,0,v,0,this):((f=parseFloat(o.split(" ")[2])||0)!==y.zOrigin&&Fr(this,y,"zOrigin",y.zOrigin,f),Fr(this,S,h,Gr(s),Gr(o)));continue}if("svgOrigin"===h){qr(t,o,1,v,0,this);continue}if(h in Ur){ts(this,y,h,u,g?Ie(u,g+o):o);continue}if("smoothOrigin"===h){Fr(this,y,"smooth",y.smooth,o);continue}if("force3D"===h){y[h]=o;continue}if("transform"===h){ns(this,o,t);continue}}else h in S||(h=Er(h)||h);if(p||(a||0===a)&&(u||0===u)&&!tr.test(o)&&h in S)a||(a=0),(d=(s+"").substr((u+"").length))!==(f=fn(o)||(h in Mt.units?Mt.units[h]:d))&&(u=Or(t,h,s,f)),this._pt=new Si(this._pt,p?y:S,h,u,(g?Ie(u,g+a):a)-u,p||"px"!==f&&"zIndex"!==h||!1===e.autoRound?nr:sr),this._pt.u=f||0,d!==f&&"%"!==f&&(this._pt.b=s,this._pt.r=rr);else if(h in S)Nr.call(this,t,h,s,g?g+o:o);else if(h in t)this.add(t,h,s||t[h],g?g+o:o,i,r);else if("parseTransform"!==h){ce(h,o);continue}p||(h in S?b.push(h,0,S[h]):"function"==typeof t[h]?b.push(h,2,t[h]()):b.push(h,1,s||t[h])),T.push(h)}D&&Ti(this)},render:function(t,e){if(e.tween._time||!Gi())for(var n=e._pt;n;)n.r(t,n.d),n=n._next;else e.styles.revert()},get:Mr,aliases:er,getSetter:function(t,e,n){var i=er[e];return i&&i.indexOf(",")<0&&(e=i),e in Wi&&e!==pr&&(t._gsap.x||Mr(t,"x"))?n&&Hi===n?"scale"===e?hr:cr:(Hi=n||{})&&("scale"===e?dr:fr):t.style&&!Kt(t.style[e])?ur:~e.indexOf("-")?lr:yi(t,e)},core:{_removeProperty:kr,_getMatrix:$r}};Vi.utils.checkPrefix=Er,Vi.core.getStyleSaver=Dr,ss=xe((is="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(rs="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){Wi[t]=1})),xe(rs,(function(t){Mt.units[t]="deg",Ur[t]=1})),er[ss[13]]=is+","+rs,xe("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");er[e[1]]=ss[e[0]]})),xe("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){Mt.units[t]="px"})),Vi.registerPlugin(os);var as=Vi.registerPlugin(os)||Vi;function us(t,e,n){return e&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}
/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/as.core.Tween;var ls,cs,hs,ds,fs,gs,ps,ms,ys,vs,Ds,bs,ws,_s=function(){return ls||"undefined"!=typeof window&&(ls=window.gsap)&&ls.registerPlugin&&ls},Es=1,Cs=[],Ts=[],Ss=[],As=Date.now,xs=function(t,e){return e},ks=function(t,e){return~Ss.indexOf(t)&&Ss[Ss.indexOf(t)+1][e]},Fs=function(t){return!!~vs.indexOf(t)},Is=function(t,e,n,i,r){return t.addEventListener(e,n,{passive:!1!==i,capture:!!r})},Ls=function(t,e,n,i){return t.removeEventListener(e,n,!!i)},Os="scrollLeft",Ms="scrollTop",Ns=function(){return Ds&&Ds.isPressed||Ts.cache++},Ps=function(t,e){var n=function n(i){if(i||0===i){Es&&(hs.history.scrollRestoration="manual");var r=Ds&&Ds.isPressed;i=n.v=Math.round(i)||(Ds&&Ds.iOS?1:0),t(i),n.cacheID=Ts.cache,r&&xs("ss",i)}else(e||Ts.cache!==n.cacheID||xs("ref"))&&(n.cacheID=Ts.cache,n.v=t());return n.v+n.offset};return n.offset=0,t&&n},Rs={s:Os,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Ps((function(t){return arguments.length?hs.scrollTo(t,Bs.sc()):hs.pageXOffset||ds[Os]||fs[Os]||gs[Os]||0}))},Bs={s:Ms,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Rs,sc:Ps((function(t){return arguments.length?hs.scrollTo(Rs.sc(),t):hs.pageYOffset||ds[Ms]||fs[Ms]||gs[Ms]||0}))},Vs=function(t,e){return(e&&e._ctx&&e._ctx.selector||ls.utils.toArray)(t)[0]||("string"==typeof t&&!1!==ls.config().nullTargetWarn?console.warn("Element not found:",t):null)},Us=function(t,e){var n=e.s,i=e.sc;Fs(t)&&(t=ds.scrollingElement||fs);var r=Ts.indexOf(t),s=i===Bs.sc?1:2;!~r&&(r=Ts.push(t)-1),Ts[r+s]||Is(t,"scroll",Ns);var o=Ts[r+s],a=o||(Ts[r+s]=Ps(ks(t,n),!0)||(Fs(t)?i:Ps((function(e){return arguments.length?t[n]=e:t[n]}))));return a.target=t,o||(a.smooth="smooth"===ls.getProperty(t,"scrollBehavior")),a},zs=function(t,e,n){var i=t,r=t,s=As(),o=s,a=e||50,u=Math.max(500,3*a),l=function(t,e){var u=As();e||u-s>a?(r=i,i=t,o=s,s=u):n?i+=t:i=r+(t-r)/(u-o)*(s-o)};return{update:l,reset:function(){r=i=n?0:i,o=s=0},getVelocity:function(t){var e=o,a=r,c=As();return(t||0===t)&&t!==i&&l(t),s===o||c-o>u?0:(i+(n?a:-a))/((n?c:s)-e)*1e3}}},js=function(t,e){return e&&!t._gsapAllow&&t.preventDefault(),t.changedTouches?t.changedTouches[0]:t},$s=function(t){var e=Math.max.apply(Math,t),n=Math.min.apply(Math,t);return Math.abs(e)>=Math.abs(n)?e:n},qs=function(){var t,e,n,i;(ys=ls.core.globals().ScrollTrigger)&&ys.core&&(t=ys.core,e=t.bridge||{},n=t._scrollers,i=t._proxies,n.push.apply(n,Ts),i.push.apply(i,Ss),Ts=n,Ss=i,xs=function(t,n){return e[t](n)})},Hs=function(t){return ls=t||_s(),!cs&&ls&&"undefined"!=typeof document&&document.body&&(hs=window,ds=document,fs=ds.documentElement,gs=ds.body,vs=[hs,ds,fs,gs],ls.utils.clamp,ws=ls.core.context||function(){},ms="onpointerenter"in gs?"pointer":"mouse",ps=Gs.isTouch=hs.matchMedia&&hs.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in hs||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,bs=Gs.eventTypes=("ontouchstart"in fs?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in fs?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout((function(){return Es=0}),500),qs(),cs=1),cs};Rs.op=Bs,Ts.cache=0;var Gs=function(){function t(t){this.init(t)}return t.prototype.init=function(t){cs||Hs(ls)||console.warn("Please gsap.registerPlugin(Observer)"),ys||qs();var e=t.tolerance,n=t.dragMinimum,i=t.type,r=t.target,s=t.lineHeight,o=t.debounce,a=t.preventDefault,u=t.onStop,l=t.onStopDelay,c=t.ignore,h=t.wheelSpeed,d=t.event,f=t.onDragStart,g=t.onDragEnd,p=t.onDrag,m=t.onPress,y=t.onRelease,v=t.onRight,D=t.onLeft,b=t.onUp,w=t.onDown,_=t.onChangeX,E=t.onChangeY,C=t.onChange,T=t.onToggleX,S=t.onToggleY,A=t.onHover,x=t.onHoverEnd,k=t.onMove,F=t.ignoreCheck,I=t.isNormalizer,L=t.onGestureStart,O=t.onGestureEnd,M=t.onWheel,N=t.onEnable,P=t.onDisable,R=t.onClick,B=t.scrollSpeed,V=t.capture,U=t.allowClicks,z=t.lockAxis,j=t.onLockAxis;this.target=r=Vs(r)||fs,this.vars=t,c&&(c=ls.utils.toArray(c)),e=e||1e-9,n=n||0,h=h||1,B=B||1,i=i||"wheel,touch,pointer",o=!1!==o,s||(s=parseFloat(hs.getComputedStyle(gs).lineHeight)||22);var $,q,H,G,K,W,X,Y=this,Q=0,J=0,Z=t.passive||!a&&!1!==t.passive,tt=Us(r,Rs),et=Us(r,Bs),nt=tt(),it=et(),rt=~i.indexOf("touch")&&!~i.indexOf("pointer")&&"pointerdown"===bs[0],st=Fs(r),ot=r.ownerDocument||ds,at=[0,0,0],ut=[0,0,0],lt=0,ct=function(){return lt=As()},ht=function(t,e){return(Y.event=t)&&c&&~c.indexOf(t.target)||e&&rt&&"touch"!==t.pointerType||F&&F(t,e)},dt=function(){var t=Y.deltaX=$s(at),n=Y.deltaY=$s(ut),i=Math.abs(t)>=e,r=Math.abs(n)>=e;C&&(i||r)&&C(Y,t,n,at,ut),i&&(v&&Y.deltaX>0&&v(Y),D&&Y.deltaX<0&&D(Y),_&&_(Y),T&&Y.deltaX<0!=Q<0&&T(Y),Q=Y.deltaX,at[0]=at[1]=at[2]=0),r&&(w&&Y.deltaY>0&&w(Y),b&&Y.deltaY<0&&b(Y),E&&E(Y),S&&Y.deltaY<0!=J<0&&S(Y),J=Y.deltaY,ut[0]=ut[1]=ut[2]=0),(G||H)&&(k&&k(Y),H&&(f&&1===H&&f(Y),p&&p(Y),H=0),G=!1),W&&!(W=!1)&&j&&j(Y),K&&(M(Y),K=!1),$=0},ft=function(t,e,n){at[n]+=t,ut[n]+=e,Y._vx.update(t),Y._vy.update(e),o?$||($=requestAnimationFrame(dt)):dt()},gt=function(t,e){z&&!X&&(Y.axis=X=Math.abs(t)>Math.abs(e)?"x":"y",W=!0),"y"!==X&&(at[2]+=t,Y._vx.update(t,!0)),"x"!==X&&(ut[2]+=e,Y._vy.update(e,!0)),o?$||($=requestAnimationFrame(dt)):dt()},pt=function(t){if(!ht(t,1)){var e=(t=js(t,a)).clientX,i=t.clientY,r=e-Y.x,s=i-Y.y,o=Y.isDragging;Y.x=e,Y.y=i,(o||(r||s)&&(Math.abs(Y.startX-e)>=n||Math.abs(Y.startY-i)>=n))&&(H=o?2:1,o||(Y.isDragging=!0),gt(r,s))}},mt=Y.onPress=function(t){ht(t,1)||t&&t.button||(Y.axis=X=null,q.pause(),Y.isPressed=!0,t=js(t),Q=J=0,Y.startX=Y.x=t.clientX,Y.startY=Y.y=t.clientY,Y._vx.reset(),Y._vy.reset(),Is(I?r:ot,bs[1],pt,Z,!0),Y.deltaX=Y.deltaY=0,m&&m(Y))},yt=Y.onRelease=function(t){if(!ht(t,1)){Ls(I?r:ot,bs[1],pt,!0);var e=!isNaN(Y.y-Y.startY),n=Y.isDragging,i=n&&(Math.abs(Y.x-Y.startX)>3||Math.abs(Y.y-Y.startY)>3),s=js(t);!i&&e&&(Y._vx.reset(),Y._vy.reset(),a&&U&&ls.delayedCall(.08,(function(){if(As()-lt>300&&!t.defaultPrevented)if(t.target.click)t.target.click();else if(ot.createEvent){var e=ot.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,hs,1,s.screenX,s.screenY,s.clientX,s.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(e)}}))),Y.isDragging=Y.isGesturing=Y.isPressed=!1,u&&n&&!I&&q.restart(!0),H&&dt(),g&&n&&g(Y),y&&y(Y,i)}},vt=function(t){return t.touches&&t.touches.length>1&&(Y.isGesturing=!0)&&L(t,Y.isDragging)},Dt=function(){return(Y.isGesturing=!1)||O(Y)},bt=function(t){if(!ht(t)){var e=tt(),n=et();ft((e-nt)*B,(n-it)*B,1),nt=e,it=n,u&&q.restart(!0)}},wt=function(t){if(!ht(t)){t=js(t,a),M&&(K=!0);var e=(1===t.deltaMode?s:2===t.deltaMode?hs.innerHeight:1)*h;ft(t.deltaX*e,t.deltaY*e,0),u&&!I&&q.restart(!0)}},_t=function(t){if(!ht(t)){var e=t.clientX,n=t.clientY,i=e-Y.x,r=n-Y.y;Y.x=e,Y.y=n,G=!0,u&&q.restart(!0),(i||r)&&gt(i,r)}},Et=function(t){Y.event=t,A(Y)},Ct=function(t){Y.event=t,x(Y)},Tt=function(t){return ht(t)||js(t,a)&&R(Y)};q=Y._dc=ls.delayedCall(l||.25,(function(){Y._vx.reset(),Y._vy.reset(),q.pause(),u&&u(Y)})).pause(),Y.deltaX=Y.deltaY=0,Y._vx=zs(0,50,!0),Y._vy=zs(0,50,!0),Y.scrollX=tt,Y.scrollY=et,Y.isDragging=Y.isGesturing=Y.isPressed=!1,ws(this),Y.enable=function(t){return Y.isEnabled||(Is(st?ot:r,"scroll",Ns),i.indexOf("scroll")>=0&&Is(st?ot:r,"scroll",bt,Z,V),i.indexOf("wheel")>=0&&Is(r,"wheel",wt,Z,V),(i.indexOf("touch")>=0&&ps||i.indexOf("pointer")>=0)&&(Is(r,bs[0],mt,Z,V),Is(ot,bs[2],yt),Is(ot,bs[3],yt),U&&Is(r,"click",ct,!0,!0),R&&Is(r,"click",Tt),L&&Is(ot,"gesturestart",vt),O&&Is(ot,"gestureend",Dt),A&&Is(r,ms+"enter",Et),x&&Is(r,ms+"leave",Ct),k&&Is(r,ms+"move",_t)),Y.isEnabled=!0,Y.isDragging=Y.isGesturing=Y.isPressed=G=H=!1,Y._vx.reset(),Y._vy.reset(),nt=tt(),it=et(),t&&t.type&&mt(t),N&&N(Y)),Y},Y.disable=function(){Y.isEnabled&&(Cs.filter((function(t){return t!==Y&&Fs(t.target)})).length||Ls(st?ot:r,"scroll",Ns),Y.isPressed&&(Y._vx.reset(),Y._vy.reset(),Ls(I?r:ot,bs[1],pt,!0)),Ls(st?ot:r,"scroll",bt,V),Ls(r,"wheel",wt,V),Ls(r,bs[0],mt,V),Ls(ot,bs[2],yt),Ls(ot,bs[3],yt),Ls(r,"click",ct,!0),Ls(r,"click",Tt),Ls(ot,"gesturestart",vt),Ls(ot,"gestureend",Dt),Ls(r,ms+"enter",Et),Ls(r,ms+"leave",Ct),Ls(r,ms+"move",_t),Y.isEnabled=Y.isPressed=Y.isDragging=!1,P&&P(Y))},Y.kill=Y.revert=function(){Y.disable();var t=Cs.indexOf(Y);t>=0&&Cs.splice(t,1),Ds===Y&&(Ds=0)},Cs.push(Y),I&&Fs(r)&&(Ds=Y),Y.enable(d)},us(t,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),t}();Gs.version="3.12.7",Gs.create=function(t){return new Gs(t)},Gs.register=Hs,Gs.getAll=function(){return Cs.slice()},Gs.getById=function(t){return Cs.filter((function(e){return e.vars.id===t}))[0]},_s()&&ls.registerPlugin(Gs);
/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
var Ks,Ws,Xs,Ys,Qs,Js,Zs,to,eo,no,io,ro,so,oo,ao,uo,lo,co,ho,fo,go,po,mo,yo,vo,Do,bo,wo,_o,Eo,Co,To,So,Ao,xo,ko,Fo,Io,Lo=1,Oo=Date.now,Mo=Oo(),No=0,Po=0,Ro=function(t,e,n){var i=Qo(t)&&("clamp("===t.substr(0,6)||t.indexOf("max")>-1);return n["_"+e+"Clamp"]=i,i?t.substr(6,t.length-7):t},Bo=function(t,e){return!e||Qo(t)&&"clamp("===t.substr(0,6)?t:"clamp("+t+")"},Vo=function t(){return Po&&requestAnimationFrame(t)},Uo=function(){return oo=1},zo=function(){return oo=0},jo=function(t){return t},$o=function(t){return Math.round(1e5*t)/1e5||0},qo=function(){return"undefined"!=typeof window},Ho=function(){return Ks||qo()&&(Ks=window.gsap)&&Ks.registerPlugin&&Ks},Go=function(t){return!!~Zs.indexOf(t)},Ko=function(t){return("Height"===t?Co:Xs["inner"+t])||Qs["client"+t]||Js["client"+t]},Wo=function(t){return ks(t,"getBoundingClientRect")||(Go(t)?function(){return au.width=Xs.innerWidth,au.height=Co,au}:function(){return ba(t)})},Xo=function(t,e){var n=e.s,i=e.d2,r=e.d,s=e.a;return Math.max(0,(n="scroll"+i)&&(s=ks(t,n))?s()-Wo(t)()[r]:Go(t)?(Qs[n]||Js[n])-Ko(i):t[n]-t["offset"+i])},Yo=function(t,e){for(var n=0;n<ho.length;n+=3)(!e||~e.indexOf(ho[n+1]))&&t(ho[n],ho[n+1],ho[n+2])},Qo=function(t){return"string"==typeof t},Jo=function(t){return"function"==typeof t},Zo=function(t){return"number"==typeof t},ta=function(t){return"object"==typeof t},ea=function(t,e,n){return t&&t.progress(e?0:1)&&n&&t.pause()},na=function(t,e){if(t.enabled){var n=t._ctx?t._ctx.add((function(){return e(t)})):e(t);n&&n.totalTime&&(t.callbackAnimation=n)}},ia=Math.abs,ra="left",sa="right",oa="bottom",aa="width",ua="height",la="Right",ca="Left",ha="Top",da="Bottom",fa="padding",ga="margin",pa="Width",ma="Height",ya="px",va=function(t){return Xs.getComputedStyle(t)},Da=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},ba=function(t,e){var n=e&&"matrix(1, 0, 0, 1, 0, 0)"!==va(t)[ao]&&Ks.to(t,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),i=t.getBoundingClientRect();return n&&n.progress(0).kill(),i},wa=function(t,e){var n=e.d2;return t["offset"+n]||t["client"+n]||0},_a=function(t){var e,n=[],i=t.labels,r=t.duration();for(e in i)n.push(i[e]/r);return n},Ea=function(t){var e=Ks.utils.snap(t),n=Array.isArray(t)&&t.slice(0).sort((function(t,e){return t-e}));return n?function(t,i,r){var s;if(void 0===r&&(r=.001),!i)return e(t);if(i>0){for(t-=r,s=0;s<n.length;s++)if(n[s]>=t)return n[s];return n[s-1]}for(s=n.length,t+=r;s--;)if(n[s]<=t)return n[s];return n[0]}:function(n,i,r){void 0===r&&(r=.001);var s=e(n);return!i||Math.abs(s-n)<r||s-n<0==i<0?s:e(i<0?n-t:n+t)}},Ca=function(t,e,n,i){return n.split(",").forEach((function(n){return t(e,n,i)}))},Ta=function(t,e,n,i,r){return t.addEventListener(e,n,{passive:!i,capture:!!r})},Sa=function(t,e,n,i){return t.removeEventListener(e,n,!!i)},Aa=function(t,e,n){(n=n&&n.wheelHandler)&&(t(e,"wheel",n),t(e,"touchmove",n))},xa={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},ka={toggleActions:"play",anticipatePin:0},Fa={top:0,left:0,center:.5,bottom:1,right:1},Ia=function(t,e){if(Qo(t)){var n=t.indexOf("="),i=~n?+(t.charAt(n-1)+1)*parseFloat(t.substr(n+1)):0;~n&&(t.indexOf("%")>n&&(i*=e/100),t=t.substr(0,n-1)),t=i+(t in Fa?Fa[t]*e:~t.indexOf("%")?parseFloat(t)*e/100:parseFloat(t)||0)}return t},La=function(t,e,n,i,r,s,o,a){var u=r.startColor,l=r.endColor,c=r.fontSize,h=r.indent,d=r.fontWeight,f=Ys.createElement("div"),g=Go(n)||"fixed"===ks(n,"pinType"),p=-1!==t.indexOf("scroller"),m=g?Js:n,y=-1!==t.indexOf("start"),v=y?u:l,D="border-color:"+v+";font-size:"+c+";color:"+v+";font-weight:"+d+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return D+="position:"+((p||a)&&g?"fixed;":"absolute;"),(p||a||!g)&&(D+=(i===Bs?sa:oa)+":"+(s+parseFloat(h))+"px;"),o&&(D+="box-sizing:border-box;text-align:left;width:"+o.offsetWidth+"px;"),f._isStart=y,f.setAttribute("class","gsap-marker-"+t+(e?" marker-"+e:"")),f.style.cssText=D,f.innerText=e||0===e?t+"-"+e:t,m.children[0]?m.insertBefore(f,m.children[0]):m.appendChild(f),f._offset=f["offset"+i.op.d2],Oa(f,0,i,y),f},Oa=function(t,e,n,i){var r={display:"block"},s=n[i?"os2":"p2"],o=n[i?"p2":"os2"];t._isFlipped=i,r[n.a+"Percent"]=i?-100:0,r[n.a]=i?"1px":0,r["border"+s+pa]=1,r["border"+o+pa]=0,r[n.p]=e+"px",Ks.set(t,r)},Ma=[],Na={},Pa=function(){return Oo()-No>34&&(xo||(xo=requestAnimationFrame(tu)))},Ra=function(){(!mo||!mo.isPressed||mo.startX>Js.clientWidth)&&(Ts.cache++,mo?xo||(xo=requestAnimationFrame(tu)):tu(),No||$a("scrollStart"),No=Oo())},Ba=function(){Do=Xs.innerWidth,vo=Xs.innerHeight},Va=function(t){Ts.cache++,(!0===t||!so&&!po&&!Ys.fullscreenElement&&!Ys.webkitFullscreenElement&&(!yo||Do!==Xs.innerWidth||Math.abs(Xs.innerHeight-vo)>.25*Xs.innerHeight))&&to.restart(!0)},Ua={},za=[],ja=function t(){return Sa(gu,"scrollEnd",t)||Qa(!0)},$a=function(t){return Ua[t]&&Ua[t].map((function(t){return t()}))||za},qa=[],Ha=function(t){for(var e=0;e<qa.length;e+=5)(!t||qa[e+4]&&qa[e+4].query===t)&&(qa[e].style.cssText=qa[e+1],qa[e].getBBox&&qa[e].setAttribute("transform",qa[e+2]||""),qa[e+3].uncache=1)},Ga=function(t,e){var n;for(uo=0;uo<Ma.length;uo++)!(n=Ma[uo])||e&&n._ctx!==e||(t?n.kill(1):n.revert(!0,!0));To=!0,e&&Ha(e),e||$a("revert")},Ka=function(t,e){Ts.cache++,(e||!ko)&&Ts.forEach((function(t){return Jo(t)&&t.cacheID++&&(t.rec=0)})),Qo(t)&&(Xs.history.scrollRestoration=_o=t)},Wa=0,Xa=function(){Js.appendChild(Eo),Co=!mo&&Eo.offsetHeight||Xs.innerHeight,Js.removeChild(Eo)},Ya=function(t){return eo(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach((function(e){return e.style.display=t?"none":"block"}))},Qa=function(t,e){if(Qs=Ys.documentElement,Js=Ys.body,Zs=[Xs,Ys,Qs,Js],!No||t||To){Xa(),ko=gu.isRefreshing=!0,Ts.forEach((function(t){return Jo(t)&&++t.cacheID&&(t.rec=t())}));var n=$a("refreshInit");fo&&gu.sort(),e||Ga(),Ts.forEach((function(t){Jo(t)&&(t.smooth&&(t.target.style.scrollBehavior="auto"),t(0))})),Ma.slice(0).forEach((function(t){return t.refresh()})),To=!1,Ma.forEach((function(t){if(t._subPinOffset&&t.pin){var e=t.vars.horizontal?"offsetWidth":"offsetHeight",n=t.pin[e];t.revert(!0,1),t.adjustPinSpacing(t.pin[e]-n),t.refresh()}})),So=1,Ya(!0),Ma.forEach((function(t){var e=Xo(t.scroller,t._dir),n="max"===t.vars.end||t._endClamp&&t.end>e,i=t._startClamp&&t.start>=e;(n||i)&&t.setPositions(i?e-1:t.start,n?Math.max(i?e:t.start+1,e):t.end,!0)})),Ya(!1),So=0,n.forEach((function(t){return t&&t.render&&t.render(-1)})),Ts.forEach((function(t){Jo(t)&&(t.smooth&&requestAnimationFrame((function(){return t.target.style.scrollBehavior="smooth"})),t.rec&&t(t.rec))})),Ka(_o,1),to.pause(),Wa++,ko=2,tu(2),Ma.forEach((function(t){return Jo(t.vars.onRefresh)&&t.vars.onRefresh(t)})),ko=gu.isRefreshing=!1,$a("refresh")}else Ta(gu,"scrollEnd",ja)},Ja=0,Za=1,tu=function(t){if(2===t||!ko&&!To){gu.isUpdating=!0,Io&&Io.update(0);var e=Ma.length,n=Oo(),i=n-Mo>=50,r=e&&Ma[0].scroll();if(Za=Ja>r?-1:1,ko||(Ja=r),i&&(No&&!oo&&n-No>200&&(No=0,$a("scrollEnd")),io=Mo,Mo=n),Za<0){for(uo=e;uo-- >0;)Ma[uo]&&Ma[uo].update(0,i);Za=1}else for(uo=0;uo<e;uo++)Ma[uo]&&Ma[uo].update(0,i);gu.isUpdating=!1}xo=0},eu=[ra,"top",oa,sa,ga+da,ga+la,ga+ha,ga+ca,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],nu=eu.concat([aa,ua,"boxSizing","max"+pa,"max"+ma,"position",ga,fa,fa+ha,fa+la,fa+da,fa+ca]),iu=function(t,e,n,i){if(!t._gsap.swappedIn){for(var r,s=eu.length,o=e.style,a=t.style;s--;)o[r=eu[s]]=n[r];o.position="absolute"===n.position?"absolute":"relative","inline"===n.display&&(o.display="inline-block"),a[oa]=a[sa]="auto",o.flexBasis=n.flexBasis||"auto",o.overflow="visible",o.boxSizing="border-box",o[aa]=wa(t,Rs)+ya,o[ua]=wa(t,Bs)+ya,o[fa]=a[ga]=a.top=a[ra]="0",su(i),a[aa]=a["max"+pa]=n[aa],a[ua]=a["max"+ma]=n[ua],a[fa]=n[fa],t.parentNode!==e&&(t.parentNode.insertBefore(e,t),e.appendChild(t)),t._gsap.swappedIn=!0}},ru=/([A-Z])/g,su=function(t){if(t){var e,n,i=t.t.style,r=t.length,s=0;for((t.t._gsap||Ks.core.getCache(t.t)).uncache=1;s<r;s+=2)n=t[s+1],e=t[s],n?i[e]=n:i[e]&&i.removeProperty(e.replace(ru,"-$1").toLowerCase())}},ou=function(t){for(var e=nu.length,n=t.style,i=[],r=0;r<e;r++)i.push(nu[r],n[nu[r]]);return i.t=t,i},au={left:0,top:0},uu=function(t,e,n,i,r,s,o,a,u,l,c,h,d,f){Jo(t)&&(t=t(a)),Qo(t)&&"max"===t.substr(0,3)&&(t=h+("="===t.charAt(4)?Ia("0"+t.substr(3),n):0));var g,p,m,y=d?d.time():0;if(d&&d.seek(0),isNaN(t)||(t=+t),Zo(t))d&&(t=Ks.utils.mapRange(d.scrollTrigger.start,d.scrollTrigger.end,0,h,t)),o&&Oa(o,n,i,!0);else{Jo(e)&&(e=e(a));var v,D,b,w,_=(t||"0").split(" ");m=Vs(e,a)||Js,(v=ba(m)||{})&&(v.left||v.top)||"none"!==va(m).display||(w=m.style.display,m.style.display="block",v=ba(m),w?m.style.display=w:m.style.removeProperty("display")),D=Ia(_[0],v[i.d]),b=Ia(_[1]||"0",n),t=v[i.p]-u[i.p]-l+D+r-b,o&&Oa(o,b,i,n-b<20||o._isStart&&b>20),n-=n-b}if(f&&(a[f]=t||-.001,t<0&&(t=0)),s){var E=t+n,C=s._isStart;g="scroll"+i.d2,Oa(s,E,i,C&&E>20||!C&&(c?Math.max(Js[g],Qs[g]):s.parentNode[g])<=E+1),c&&(u=ba(o),c&&(s.style[i.op.p]=u[i.op.p]-i.op.m-s._offset+ya))}return d&&m&&(g=ba(m),d.seek(h),p=ba(m),d._caScrollDist=g[i.p]-p[i.p],t=t/d._caScrollDist*h),d&&d.seek(y),d?t:Math.round(t)},lu=/(webkit|moz|length|cssText|inset)/i,cu=function(t,e,n,i){if(t.parentNode!==e){var r,s,o=t.style;if(e===Js){for(r in t._stOrig=o.cssText,s=va(t))+r||lu.test(r)||!s[r]||"string"!=typeof o[r]||"0"===r||(o[r]=s[r]);o.top=n,o.left=i}else o.cssText=t._stOrig;Ks.core.getCache(t).uncache=1,e.appendChild(t)}},hu=function(t,e,n){var i=e,r=i;return function(e){var s=Math.round(t());return s!==i&&s!==r&&Math.abs(s-i)>3&&Math.abs(s-r)>3&&(e=s,n&&n()),r=i,i=Math.round(e)}},du=function(t,e,n){var i={};i[e.p]="+="+n,Ks.set(t,i)},fu=function(t,e){var n=Us(t,e),i="_scroll"+e.p2,r=function e(r,s,o,a,u){var l=e.tween,c=s.onComplete,h={};o=o||n();var d=hu(n,o,(function(){l.kill(),e.tween=0}));return u=a&&u||0,a=a||r-o,l&&l.kill(),s[i]=r,s.inherit=!1,s.modifiers=h,h[i]=function(){return d(o+a*l.ratio+u*l.ratio*l.ratio)},s.onUpdate=function(){Ts.cache++,e.tween&&tu()},s.onComplete=function(){e.tween=0,c&&c.call(l)},l=e.tween=Ks.to(t,s)};return t[i]=n,n.wheelHandler=function(){return r.tween&&r.tween.kill()&&(r.tween=0)},Ta(t,"wheel",n.wheelHandler),gu.isTouch&&Ta(t,"touchmove",n.wheelHandler),r},gu=function(){function t(e,n){Ws||t.register(Ks)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),wo(this),this.init(e,n)}return t.prototype.init=function(e,n){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),Po){var i,r,s,o,a,u,l,c,h,d,f,g,p,m,y,v,D,b,w,_,E,C,T,S,A,x,k,F,I,L,O,M,N,P,R,B,V,U,z,j,$,q,H=e=Da(Qo(e)||Zo(e)||e.nodeType?{trigger:e}:e,ka),G=H.onUpdate,K=H.toggleClass,W=H.id,X=H.onToggle,Y=H.onRefresh,Q=H.scrub,J=H.trigger,Z=H.pin,tt=H.pinSpacing,et=H.invalidateOnRefresh,nt=H.anticipatePin,it=H.onScrubComplete,rt=H.onSnapComplete,st=H.once,ot=H.snap,at=H.pinReparent,ut=H.pinSpacer,lt=H.containerAnimation,ct=H.fastScrollEnd,ht=H.preventOverlaps,dt=e.horizontal||e.containerAnimation&&!1!==e.horizontal?Rs:Bs,ft=!Q&&0!==Q,gt=Vs(e.scroller||Xs),pt=Ks.core.getCache(gt),mt=Go(gt),yt="fixed"===("pinType"in e?e.pinType:ks(gt,"pinType")||mt&&"fixed"),vt=[e.onEnter,e.onLeave,e.onEnterBack,e.onLeaveBack],Dt=ft&&e.toggleActions.split(" "),bt="markers"in e?e.markers:ka.markers,wt=mt?0:parseFloat(va(gt)["border"+dt.p2+pa])||0,_t=this,Et=e.onRefreshInit&&function(){return e.onRefreshInit(_t)},Ct=function(t,e,n){var i=n.d,r=n.d2,s=n.a;return(s=ks(t,"getBoundingClientRect"))?function(){return s()[i]}:function(){return(e?Ko(r):t["client"+r])||0}}(gt,mt,dt),Tt=function(t,e){return!e||~Ss.indexOf(t)?Wo(t):function(){return au}}(gt,mt),St=0,At=0,xt=0,kt=Us(gt,dt);if(_t._startClamp=_t._endClamp=!1,_t._dir=dt,nt*=45,_t.scroller=gt,_t.scroll=lt?lt.time.bind(lt):kt,o=kt(),_t.vars=e,n=n||e.animation,"refreshPriority"in e&&(fo=1,-9999===e.refreshPriority&&(Io=_t)),pt.tweenScroll=pt.tweenScroll||{top:fu(gt,Bs),left:fu(gt,Rs)},_t.tweenTo=i=pt.tweenScroll[dt.p],_t.scrubDuration=function(t){(N=Zo(t)&&t)?M?M.duration(t):M=Ks.to(n,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:N,paused:!0,onComplete:function(){return it&&it(_t)}}):(M&&M.progress(1).kill(),M=0)},n&&(n.vars.lazy=!1,n._initted&&!_t.isReverted||!1!==n.vars.immediateRender&&!1!==e.immediateRender&&n.duration()&&n.render(0,!0,!0),_t.animation=n.pause(),n.scrollTrigger=_t,_t.scrubDuration(Q),L=0,W||(W=n.vars.id)),ot&&(ta(ot)&&!ot.push||(ot={snapTo:ot}),"scrollBehavior"in Js.style&&Ks.set(mt?[Js,Qs]:gt,{scrollBehavior:"auto"}),Ts.forEach((function(t){return Jo(t)&&t.target===(mt?Ys.scrollingElement||Qs:gt)&&(t.smooth=!1)})),s=Jo(ot.snapTo)?ot.snapTo:"labels"===ot.snapTo?function(t){return function(e){return Ks.utils.snap(_a(t),e)}}(n):"labelsDirectional"===ot.snapTo?(j=n,function(t,e){return Ea(_a(j))(t,e.direction)}):!1!==ot.directional?function(t,e){return Ea(ot.snapTo)(t,Oo()-At<500?0:e.direction)}:Ks.utils.snap(ot.snapTo),P=ot.duration||{min:.1,max:2},P=ta(P)?no(P.min,P.max):no(P,P),R=Ks.delayedCall(ot.delay||N/2||.1,(function(){var t=kt(),e=Oo()-At<500,r=i.tween;if(!(e||Math.abs(_t.getVelocity())<10)||r||oo||St===t)_t.isActive&&St!==t&&R.restart(!0);else{var o,a,c=(t-u)/m,h=n&&!ft?n.totalProgress():c,d=e?0:(h-O)/(Oo()-io)*1e3||0,f=Ks.utils.clamp(-c,1-c,ia(d/2)*d/.185),g=c+(!1===ot.inertia?0:f),p=ot,y=p.onStart,v=p.onInterrupt,D=p.onComplete;if(o=s(g,_t),Zo(o)||(o=g),a=Math.max(0,Math.round(u+o*m)),t<=l&&t>=u&&a!==t){if(r&&!r._initted&&r.data<=ia(a-t))return;!1===ot.inertia&&(f=o-c),i(a,{duration:P(ia(.185*Math.max(ia(g-h),ia(o-h))/d/.05||0)),ease:ot.ease||"power3",data:ia(a-t),onInterrupt:function(){return R.restart(!0)&&v&&v(_t)},onComplete:function(){_t.update(),St=kt(),n&&!ft&&(M?M.resetTo("totalProgress",o,n._tTime/n._tDur):n.progress(o)),L=O=n&&!ft?n.totalProgress():_t.progress,rt&&rt(_t),D&&D(_t)}},t,f*m,a-t-f*m),y&&y(_t,i.tween)}}})).pause()),W&&(Na[W]=_t),(z=(J=_t.trigger=Vs(J||!0!==Z&&Z))&&J._gsap&&J._gsap.stRevert)&&(z=z(_t)),Z=!0===Z?J:Vs(Z),Qo(K)&&(K={targets:J,className:K}),Z&&(!1===tt||tt===ga||(tt=!(!tt&&Z.parentNode&&Z.parentNode.style&&"flex"===va(Z.parentNode).display)&&fa),_t.pin=Z,(r=Ks.core.getCache(Z)).spacer?y=r.pinState:(ut&&((ut=Vs(ut))&&!ut.nodeType&&(ut=ut.current||ut.nativeElement),r.spacerIsNative=!!ut,ut&&(r.spacerState=ou(ut))),r.spacer=b=ut||Ys.createElement("div"),b.classList.add("pin-spacer"),W&&b.classList.add("pin-spacer-"+W),r.pinState=y=ou(Z)),!1!==e.force3D&&Ks.set(Z,{force3D:!0}),_t.spacer=b=r.spacer,I=va(Z),S=I[tt+dt.os2],_=Ks.getProperty(Z),E=Ks.quickSetter(Z,dt.a,ya),iu(Z,b,I),D=ou(Z)),bt){g=ta(bt)?Da(bt,xa):xa,d=La("scroller-start",W,gt,dt,g,0),f=La("scroller-end",W,gt,dt,g,0,d),w=d["offset"+dt.op.d2];var Ft=Vs(ks(gt,"content")||gt);c=this.markerStart=La("start",W,Ft,dt,g,w,0,lt),h=this.markerEnd=La("end",W,Ft,dt,g,w,0,lt),lt&&(U=Ks.quickSetter([c,h],dt.a,ya)),yt||Ss.length&&!0===ks(gt,"fixedMarkers")||(q=va($=mt?Js:gt).position,$.style.position="absolute"===q||"fixed"===q?q:"relative",Ks.set([d,f],{force3D:!0}),x=Ks.quickSetter(d,dt.a,ya),F=Ks.quickSetter(f,dt.a,ya))}if(lt){var It=lt.vars.onUpdate,Lt=lt.vars.onUpdateParams;lt.eventCallback("onUpdate",(function(){_t.update(0,0,1),It&&It.apply(lt,Lt||[])}))}if(_t.previous=function(){return Ma[Ma.indexOf(_t)-1]},_t.next=function(){return Ma[Ma.indexOf(_t)+1]},_t.revert=function(t,e){if(!e)return _t.kill(!0);var i=!1!==t||!_t.enabled,r=so;i!==_t.isReverted&&(i&&(B=Math.max(kt(),_t.scroll.rec||0),xt=_t.progress,V=n&&n.progress()),c&&[c,h,d,f].forEach((function(t){return t.style.display=i?"none":"block"})),i&&(so=_t,_t.update(i)),!Z||at&&_t.isActive||(i?function(t,e,n){su(n);var i=t._gsap;if(i.spacerIsNative)su(i.spacerState);else if(t._gsap.swappedIn){var r=e.parentNode;r&&(r.insertBefore(t,e),r.removeChild(e))}t._gsap.swappedIn=!1}(Z,b,y):iu(Z,b,va(Z),A)),i||_t.update(i),so=r,_t.isReverted=i)},_t.refresh=function(r,s,g,w){if(!so&&_t.enabled||s)if(Z&&r&&No)Ta(t,"scrollEnd",ja);else{!ko&&Et&&Et(_t),so=_t,i.tween&&!g&&(i.tween.kill(),i.tween=0),M&&M.pause(),et&&n&&n.revert({kill:!1}).invalidate(),_t.isReverted||_t.revert(!0,!0),_t._subPinOffset=!1;var E,S,x,F,I,L,O,N,P,U,z,j,$,q=Ct(),H=Tt(),G=lt?lt.duration():Xo(gt,dt),K=m<=.01,W=0,X=w||0,Q=ta(g)?g.end:e.end,nt=e.endTrigger||J,it=ta(g)?g.start:e.start||(0!==e.start&&J?Z?"0 0":"0 100%":0),rt=_t.pinnedContainer=e.pinnedContainer&&Vs(e.pinnedContainer,_t),st=J&&Math.max(0,Ma.indexOf(_t))||0,ot=st;for(bt&&ta(g)&&(j=Ks.getProperty(d,dt.p),$=Ks.getProperty(f,dt.p));ot-- >0;)(L=Ma[ot]).end||L.refresh(0,1)||(so=_t),!(O=L.pin)||O!==J&&O!==Z&&O!==rt||L.isReverted||(U||(U=[]),U.unshift(L),L.revert(!0,!0)),L!==Ma[ot]&&(st--,ot--);for(Jo(it)&&(it=it(_t)),it=Ro(it,"start",_t),u=uu(it,J,q,dt,kt(),c,d,_t,H,wt,yt,G,lt,_t._startClamp&&"_startClamp")||(Z?-.001:0),Jo(Q)&&(Q=Q(_t)),Qo(Q)&&!Q.indexOf("+=")&&(~Q.indexOf(" ")?Q=(Qo(it)?it.split(" ")[0]:"")+Q:(W=Ia(Q.substr(2),q),Q=Qo(it)?it:(lt?Ks.utils.mapRange(0,lt.duration(),lt.scrollTrigger.start,lt.scrollTrigger.end,u):u)+W,nt=J)),Q=Ro(Q,"end",_t),l=Math.max(u,uu(Q||(nt?"100% 0":G),nt,q,dt,kt()+W,h,f,_t,H,wt,yt,G,lt,_t._endClamp&&"_endClamp"))||-.001,W=0,ot=st;ot--;)(O=(L=Ma[ot]).pin)&&L.start-L._pinPush<=u&&!lt&&L.end>0&&(E=L.end-(_t._startClamp?Math.max(0,L.start):L.start),(O===J&&L.start-L._pinPush<u||O===rt)&&isNaN(it)&&(W+=E*(1-L.progress)),O===Z&&(X+=E));if(u+=W,l+=W,_t._startClamp&&(_t._startClamp+=W),_t._endClamp&&!ko&&(_t._endClamp=l||-.001,l=Math.min(l,Xo(gt,dt))),m=l-u||(u-=.01)&&.001,K&&(xt=Ks.utils.clamp(0,1,Ks.utils.normalize(u,l,B))),_t._pinPush=X,c&&W&&((E={})[dt.a]="+="+W,rt&&(E[dt.p]="-="+kt()),Ks.set([c,h],E)),!Z||So&&_t.end>=Xo(gt,dt)){if(J&&kt()&&!lt)for(S=J.parentNode;S&&S!==Js;)S._pinOffset&&(u-=S._pinOffset,l-=S._pinOffset),S=S.parentNode}else E=va(Z),F=dt===Bs,x=kt(),C=parseFloat(_(dt.a))+X,!G&&l>1&&(z={style:z=(mt?Ys.scrollingElement||Qs:gt).style,value:z["overflow"+dt.a.toUpperCase()]},mt&&"scroll"!==va(Js)["overflow"+dt.a.toUpperCase()]&&(z.style["overflow"+dt.a.toUpperCase()]="scroll")),iu(Z,b,E),D=ou(Z),S=ba(Z,!0),N=yt&&Us(gt,F?Rs:Bs)(),tt?((A=[tt+dt.os2,m+X+ya]).t=b,(ot=tt===fa?wa(Z,dt)+m+X:0)&&(A.push(dt.d,ot+ya),"auto"!==b.style.flexBasis&&(b.style.flexBasis=ot+ya)),su(A),rt&&Ma.forEach((function(t){t.pin===rt&&!1!==t.vars.pinSpacing&&(t._subPinOffset=!0)})),yt&&kt(B)):(ot=wa(Z,dt))&&"auto"!==b.style.flexBasis&&(b.style.flexBasis=ot+ya),yt&&((I={top:S.top+(F?x-u:N)+ya,left:S.left+(F?N:x-u)+ya,boxSizing:"border-box",position:"fixed"})[aa]=I["max"+pa]=Math.ceil(S.width)+ya,I[ua]=I["max"+ma]=Math.ceil(S.height)+ya,I[ga]=I[ga+ha]=I[ga+la]=I[ga+da]=I[ga+ca]="0",I[fa]=E[fa],I[fa+ha]=E[fa+ha],I[fa+la]=E[fa+la],I[fa+da]=E[fa+da],I[fa+ca]=E[fa+ca],v=function(t,e,n){for(var i,r=[],s=t.length,o=n?8:0;o<s;o+=2)i=t[o],r.push(i,i in e?e[i]:t[o+1]);return r.t=t.t,r}(y,I,at),ko&&kt(0)),n?(P=n._initted,go(1),n.render(n.duration(),!0,!0),T=_(dt.a)-C+m+X,k=Math.abs(m-T)>1,yt&&k&&v.splice(v.length-2,2),n.render(0,!0,!0),P||n.invalidate(!0),n.parent||n.totalTime(n.totalTime()),go(0)):T=m,z&&(z.value?z.style["overflow"+dt.a.toUpperCase()]=z.value:z.style.removeProperty("overflow-"+dt.a));U&&U.forEach((function(t){return t.revert(!1,!0)})),_t.start=u,_t.end=l,o=a=ko?B:kt(),lt||ko||(o<B&&kt(B),_t.scroll.rec=0),_t.revert(!1,!0),At=Oo(),R&&(St=-1,R.restart(!0)),so=0,n&&ft&&(n._initted||V)&&n.progress()!==V&&n.progress(V||0,!0).render(n.time(),!0,!0),(K||xt!==_t.progress||lt||et||n&&!n._initted)&&(n&&!ft&&n.totalProgress(lt&&u<-.001&&!xt?Ks.utils.normalize(u,l,0):xt,!0),_t.progress=K||(o-u)/m===xt?0:xt),Z&&tt&&(b._pinOffset=Math.round(_t.progress*T)),M&&M.invalidate(),isNaN(j)||(j-=Ks.getProperty(d,dt.p),$-=Ks.getProperty(f,dt.p),du(d,dt,j),du(c,dt,j-(w||0)),du(f,dt,$),du(h,dt,$-(w||0))),K&&!ko&&_t.update(),!Y||ko||p||(p=!0,Y(_t),p=!1)}},_t.getVelocity=function(){return(kt()-a)/(Oo()-io)*1e3||0},_t.endAnimation=function(){ea(_t.callbackAnimation),n&&(M?M.progress(1):n.paused()?ft||ea(n,_t.direction<0,1):ea(n,n.reversed()))},_t.labelToScroll=function(t){return n&&n.labels&&(u||_t.refresh()||u)+n.labels[t]/n.duration()*m||0},_t.getTrailing=function(t){var e=Ma.indexOf(_t),n=_t.direction>0?Ma.slice(0,e).reverse():Ma.slice(e+1);return(Qo(t)?n.filter((function(e){return e.vars.preventOverlaps===t})):n).filter((function(t){return _t.direction>0?t.end<=u:t.start>=l}))},_t.update=function(t,e,r){if(!lt||r||t){var s,c,h,f,g,p,y,w=!0===ko?B:_t.scroll(),_=t?0:(w-u)/m,A=_<0?0:_>1?1:_||0,I=_t.progress;if(e&&(a=o,o=lt?kt():w,ot&&(O=L,L=n&&!ft?n.totalProgress():A)),nt&&Z&&!so&&!Lo&&No&&(!A&&u<w+(w-a)/(Oo()-io)*nt?A=1e-4:1===A&&l>w+(w-a)/(Oo()-io)*nt&&(A=.9999)),A!==I&&_t.enabled){if(f=(g=(s=_t.isActive=!!A&&A<1)!==(!!I&&I<1))||!!A!=!!I,_t.direction=A>I?1:-1,_t.progress=A,f&&!so&&(c=A&&!I?0:1===A?1:1===I?2:3,ft&&(h=!g&&"none"!==Dt[c+1]&&Dt[c+1]||Dt[c],y=n&&("complete"===h||"reset"===h||h in n))),ht&&(g||y)&&(y||Q||!n)&&(Jo(ht)?ht(_t):_t.getTrailing(ht).forEach((function(t){return t.endAnimation()}))),ft||(!M||so||Lo?n&&n.totalProgress(A,!(!so||!At&&!t)):(M._dp._time-M._start!==M._time&&M.render(M._dp._time-M._start),M.resetTo?M.resetTo("totalProgress",A,n._tTime/n._tDur):(M.vars.totalProgress=A,M.invalidate().restart()))),Z)if(t&&tt&&(b.style[tt+dt.os2]=S),yt){if(f){if(p=!t&&A>I&&l+1>w&&w+1>=Xo(gt,dt),at)if(t||!s&&!p)cu(Z,b);else{var N=ba(Z,!0),P=w-u;cu(Z,Js,N.top+(dt===Bs?P:0)+ya,N.left+(dt===Bs?0:P)+ya)}su(s||p?v:D),k&&A<1&&s||E(C+(1!==A||p?0:T))}}else E($o(C+T*A));ot&&!i.tween&&!so&&!Lo&&R.restart(!0),K&&(g||st&&A&&(A<1||!Ao))&&eo(K.targets).forEach((function(t){return t.classList[s||st?"add":"remove"](K.className)})),G&&!ft&&!t&&G(_t),f&&!so?(ft&&(y&&("complete"===h?n.pause().totalProgress(1):"reset"===h?n.restart(!0).pause():"restart"===h?n.restart(!0):n[h]()),G&&G(_t)),!g&&Ao||(X&&g&&na(_t,X),vt[c]&&na(_t,vt[c]),st&&(1===A?_t.kill(!1,1):vt[c]=0),g||vt[c=1===A?1:3]&&na(_t,vt[c])),ct&&!s&&Math.abs(_t.getVelocity())>(Zo(ct)?ct:2500)&&(ea(_t.callbackAnimation),M?M.progress(1):ea(n,"reverse"===h?1:!A,1))):ft&&G&&!so&&G(_t)}if(F){var V=lt?w/lt.duration()*(lt._caScrollDist||0):w;x(V+(d._isFlipped?1:0)),F(V)}U&&U(-w/lt.duration()*(lt._caScrollDist||0))}},_t.enable=function(e,n){_t.enabled||(_t.enabled=!0,Ta(gt,"resize",Va),mt||Ta(gt,"scroll",Ra),Et&&Ta(t,"refreshInit",Et),!1!==e&&(_t.progress=xt=0,o=a=St=kt()),!1!==n&&_t.refresh())},_t.getTween=function(t){return t&&i?i.tween:M},_t.setPositions=function(t,e,n,i){if(lt){var r=lt.scrollTrigger,s=lt.duration(),o=r.end-r.start;t=r.start+o*t/s,e=r.start+o*e/s}_t.refresh(!1,!1,{start:Bo(t,n&&!!_t._startClamp),end:Bo(e,n&&!!_t._endClamp)},i),_t.update()},_t.adjustPinSpacing=function(t){if(A&&t){var e=A.indexOf(dt.d)+1;A[e]=parseFloat(A[e])+t+ya,A[1]=parseFloat(A[1])+t+ya,su(A)}},_t.disable=function(e,n){if(_t.enabled&&(!1!==e&&_t.revert(!0,!0),_t.enabled=_t.isActive=!1,n||M&&M.pause(),B=0,r&&(r.uncache=1),Et&&Sa(t,"refreshInit",Et),R&&(R.pause(),i.tween&&i.tween.kill()&&(i.tween=0)),!mt)){for(var s=Ma.length;s--;)if(Ma[s].scroller===gt&&Ma[s]!==_t)return;Sa(gt,"resize",Va),mt||Sa(gt,"scroll",Ra)}},_t.kill=function(t,i){_t.disable(t,i),M&&!i&&M.kill(),W&&delete Na[W];var s=Ma.indexOf(_t);s>=0&&Ma.splice(s,1),s===uo&&Za>0&&uo--,s=0,Ma.forEach((function(t){return t.scroller===_t.scroller&&(s=1)})),s||ko||(_t.scroll.rec=0),n&&(n.scrollTrigger=null,t&&n.revert({kill:!1}),i||n.kill()),c&&[c,h,d,f].forEach((function(t){return t.parentNode&&t.parentNode.removeChild(t)})),Io===_t&&(Io=0),Z&&(r&&(r.uncache=1),s=0,Ma.forEach((function(t){return t.pin===Z&&s++})),s||(r.spacer=0)),e.onKill&&e.onKill(_t)},Ma.push(_t),_t.enable(!1,!1),z&&z(_t),n&&n.add&&!m){var Ot=_t.update;_t.update=function(){_t.update=Ot,Ts.cache++,u||l||_t.refresh()},Ks.delayedCall(.01,_t.update),m=.01,u=l=0}else _t.refresh();Z&&function(){if(Fo!==Wa){var t=Fo=Wa;requestAnimationFrame((function(){return t===Wa&&Qa(!0)}))}}()}else this.update=this.refresh=this.kill=jo},t.register=function(e){return Ws||(Ks=e||Ho(),qo()&&window.document&&t.enable(),Ws=Po),Ws},t.defaults=function(t){if(t)for(var e in t)ka[e]=t[e];return ka},t.disable=function(t,e){Po=0,Ma.forEach((function(n){return n[e?"kill":"disable"](t)})),Sa(Xs,"wheel",Ra),Sa(Ys,"scroll",Ra),clearInterval(ro),Sa(Ys,"touchcancel",jo),Sa(Js,"touchstart",jo),Ca(Sa,Ys,"pointerdown,touchstart,mousedown",Uo),Ca(Sa,Ys,"pointerup,touchend,mouseup",zo),to.kill(),Yo(Sa);for(var n=0;n<Ts.length;n+=3)Aa(Sa,Ts[n],Ts[n+1]),Aa(Sa,Ts[n],Ts[n+2])},t.enable=function(){if(Xs=window,Ys=document,Qs=Ys.documentElement,Js=Ys.body,Ks&&(eo=Ks.utils.toArray,no=Ks.utils.clamp,wo=Ks.core.context||jo,go=Ks.core.suppressOverwrites||jo,_o=Xs.history.scrollRestoration||"auto",Ja=Xs.pageYOffset||0,Ks.core.globals("ScrollTrigger",t),Js)){Po=1,(Eo=document.createElement("div")).style.height="100vh",Eo.style.position="absolute",Xa(),Vo(),Gs.register(Ks),t.isTouch=Gs.isTouch,bo=Gs.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),yo=1===Gs.isTouch,Ta(Xs,"wheel",Ra),Zs=[Xs,Ys,Qs,Js],Ks.matchMedia?(t.matchMedia=function(t){var e,n=Ks.matchMedia();for(e in t)n.add(e,t[e]);return n},Ks.addEventListener("matchMediaInit",(function(){return Ga()})),Ks.addEventListener("matchMediaRevert",(function(){return Ha()})),Ks.addEventListener("matchMedia",(function(){Qa(0,1),$a("matchMedia")})),Ks.matchMedia().add("(orientation: portrait)",(function(){return Ba(),Ba}))):console.warn("Requires GSAP 3.11.0 or later"),Ba(),Ta(Ys,"scroll",Ra);var e,n,i=Js.hasAttribute("style"),r=Js.style,s=r.borderTopStyle,o=Ks.core.Animation.prototype;for(o.revert||Object.defineProperty(o,"revert",{value:function(){return this.time(-.01,!0)}}),r.borderTopStyle="solid",e=ba(Js),Bs.m=Math.round(e.top+Bs.sc())||0,Rs.m=Math.round(e.left+Rs.sc())||0,s?r.borderTopStyle=s:r.removeProperty("border-top-style"),i||(Js.setAttribute("style",""),Js.removeAttribute("style")),ro=setInterval(Pa,250),Ks.delayedCall(.5,(function(){return Lo=0})),Ta(Ys,"touchcancel",jo),Ta(Js,"touchstart",jo),Ca(Ta,Ys,"pointerdown,touchstart,mousedown",Uo),Ca(Ta,Ys,"pointerup,touchend,mouseup",zo),ao=Ks.utils.checkPrefix("transform"),nu.push(ao),Ws=Oo(),to=Ks.delayedCall(.2,Qa).pause(),ho=[Ys,"visibilitychange",function(){var t=Xs.innerWidth,e=Xs.innerHeight;Ys.hidden?(lo=t,co=e):lo===t&&co===e||Va()},Ys,"DOMContentLoaded",Qa,Xs,"load",Qa,Xs,"resize",Va],Yo(Ta),Ma.forEach((function(t){return t.enable(0,1)})),n=0;n<Ts.length;n+=3)Aa(Sa,Ts[n],Ts[n+1]),Aa(Sa,Ts[n],Ts[n+2])}},t.config=function(e){"limitCallbacks"in e&&(Ao=!!e.limitCallbacks);var n=e.syncInterval;n&&clearInterval(ro)||(ro=n)&&setInterval(Pa,n),"ignoreMobileResize"in e&&(yo=1===t.isTouch&&e.ignoreMobileResize),"autoRefreshEvents"in e&&(Yo(Sa)||Yo(Ta,e.autoRefreshEvents||"none"),po=-1===(e.autoRefreshEvents+"").indexOf("resize"))},t.scrollerProxy=function(t,e){var n=Vs(t),i=Ts.indexOf(n),r=Go(n);~i&&Ts.splice(i,r?6:2),e&&(r?Ss.unshift(Xs,e,Js,e,Qs,e):Ss.unshift(n,e))},t.clearMatchMedia=function(t){Ma.forEach((function(e){return e._ctx&&e._ctx.query===t&&e._ctx.kill(!0,!0)}))},t.isInViewport=function(t,e,n){var i=(Qo(t)?Vs(t):t).getBoundingClientRect(),r=i[n?aa:ua]*e||0;return n?i.right-r>0&&i.left+r<Xs.innerWidth:i.bottom-r>0&&i.top+r<Xs.innerHeight},t.positionInViewport=function(t,e,n){Qo(t)&&(t=Vs(t));var i=t.getBoundingClientRect(),r=i[n?aa:ua],s=null==e?r/2:e in Fa?Fa[e]*r:~e.indexOf("%")?parseFloat(e)*r/100:parseFloat(e)||0;return n?(i.left+s)/Xs.innerWidth:(i.top+s)/Xs.innerHeight},t.killAll=function(t){if(Ma.slice(0).forEach((function(t){return"ScrollSmoother"!==t.vars.id&&t.kill()})),!0!==t){var e=Ua.killAll||[];Ua={},e.forEach((function(t){return t()}))}},t}();gu.version="3.12.7",gu.saveStyles=function(t){return t?eo(t).forEach((function(t){if(t&&t.style){var e=qa.indexOf(t);e>=0&&qa.splice(e,5),qa.push(t,t.style.cssText,t.getBBox&&t.getAttribute("transform"),Ks.core.getCache(t),wo())}})):qa},gu.revert=function(t,e){return Ga(!t,e)},gu.create=function(t,e){return new gu(t,e)},gu.refresh=function(t){return t?Va(!0):(Ws||gu.register())&&Qa(!0)},gu.update=function(t){return++Ts.cache&&tu(!0===t?2:0)},gu.clearScrollMemory=Ka,gu.maxScroll=function(t,e){return Xo(t,e?Rs:Bs)},gu.getScrollFunc=function(t,e){return Us(Vs(t),e?Rs:Bs)},gu.getById=function(t){return Na[t]},gu.getAll=function(){return Ma.filter((function(t){return"ScrollSmoother"!==t.vars.id}))},gu.isScrolling=function(){return!!No},gu.snapDirectional=Ea,gu.addEventListener=function(t,e){var n=Ua[t]||(Ua[t]=[]);~n.indexOf(e)||n.push(e)},gu.removeEventListener=function(t,e){var n=Ua[t],i=n&&n.indexOf(e);i>=0&&n.splice(i,1)},gu.batch=function(t,e){var n,i=[],r={},s=e.interval||.016,o=e.batchMax||1e9,a=function(t,e){var n=[],i=[],r=Ks.delayedCall(s,(function(){e(n,i),n=[],i=[]})).pause();return function(t){n.length||r.restart(!0),n.push(t.trigger),i.push(t),o<=n.length&&r.progress(1)}};for(n in e)r[n]="on"===n.substr(0,2)&&Jo(e[n])&&"onRefreshInit"!==n?a(0,e[n]):e[n];return Jo(o)&&(o=o(),Ta(gu,"refresh",(function(){return o=e.batchMax()}))),eo(t).forEach((function(t){var e={};for(n in r)e[n]=r[n];e.trigger=t,i.push(gu.create(e))})),i};var pu,mu=function(t,e,n,i){return e>i?t(i):e<0&&t(0),n>i?(i-e)/(n-e):n<0?e/(e-n):1},yu=function t(e,n){!0===n?e.style.removeProperty("touch-action"):e.style.touchAction=!0===n?"auto":n?"pan-"+n+(Gs.isTouch?" pinch-zoom":""):"none",e===Qs&&t(Js,n)},vu={auto:1,scroll:1},Du=function(t){var e,n=t.event,i=t.target,r=t.axis,s=(n.changedTouches?n.changedTouches[0]:n).target,o=s._gsap||Ks.core.getCache(s),a=Oo();if(!o._isScrollT||a-o._isScrollT>2e3){for(;s&&s!==Js&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!vu[(e=va(s)).overflowY]&&!vu[e.overflowX]);)s=s.parentNode;o._isScroll=s&&s!==i&&!Go(s)&&(vu[(e=va(s)).overflowY]||vu[e.overflowX]),o._isScrollT=a}(o._isScroll||"x"===r)&&(n.stopPropagation(),n._gsapAllow=!0)},bu=function(t,e,n,i){return Gs.create({target:t,capture:!0,debounce:!1,lockAxis:!0,type:e,onWheel:i=i&&Du,onPress:i,onDrag:i,onScroll:i,onEnable:function(){return n&&Ta(Ys,Gs.eventTypes[0],_u,!1,!0)},onDisable:function(){return Sa(Ys,Gs.eventTypes[0],_u,!0)}})},wu=/(input|label|select|textarea)/i,_u=function(t){var e=wu.test(t.target.tagName);(e||pu)&&(t._gsapAllow=!0,pu=e)},Eu=function(t){ta(t)||(t={}),t.preventDefault=t.isNormalizer=t.allowClicks=!0,t.type||(t.type="wheel,touch"),t.debounce=!!t.debounce,t.id=t.id||"normalizer";var e,n,i,r,s,o,a,u,l=t,c=l.normalizeScrollX,h=l.momentum,d=l.allowNestedScroll,f=l.onRelease,g=Vs(t.target)||Qs,p=Ks.core.globals().ScrollSmoother,m=p&&p.get(),y=bo&&(t.content&&Vs(t.content)||m&&!1!==t.content&&!m.smooth()&&m.content()),v=Us(g,Bs),D=Us(g,Rs),b=1,w=(Gs.isTouch&&Xs.visualViewport?Xs.visualViewport.scale*Xs.visualViewport.width:Xs.outerWidth)/Xs.innerWidth,_=0,E=Jo(h)?function(){return h(e)}:function(){return h||2.8},C=bu(g,t.type,!0,d),T=function(){return r=!1},S=jo,A=jo,x=function(){n=Xo(g,Bs),A=no(bo?1:0,n),c&&(S=no(0,Xo(g,Rs))),i=Wa},k=function(){y._gsap.y=$o(parseFloat(y._gsap.y)+v.offset)+"px",y.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(y._gsap.y)+", 0, 1)",v.offset=v.cacheID=0},F=function(){x(),s.isActive()&&s.vars.scrollY>n&&(v()>n?s.progress(1)&&v(n):s.resetTo("scrollY",n))};return y&&Ks.set(y,{y:"+=0"}),t.ignoreCheck=function(t){return bo&&"touchmove"===t.type&&function(){if(r){requestAnimationFrame(T);var t=$o(e.deltaY/2),n=A(v.v-t);if(y&&n!==v.v+v.offset){v.offset=n-v.v;var i=$o((parseFloat(y&&y._gsap.y)||0)-v.offset);y.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+i+", 0, 1)",y._gsap.y=i+"px",v.cacheID=Ts.cache,tu()}return!0}v.offset&&k(),r=!0}()||b>1.05&&"touchstart"!==t.type||e.isGesturing||t.touches&&t.touches.length>1},t.onPress=function(){r=!1;var t=b;b=$o((Xs.visualViewport&&Xs.visualViewport.scale||1)/w),s.pause(),t!==b&&yu(g,b>1.01||!c&&"x"),o=D(),a=v(),x(),i=Wa},t.onRelease=t.onGestureStart=function(t,e){if(v.offset&&k(),e){Ts.cache++;var i,r,o=E();c&&(r=(i=D())+.05*o*-t.velocityX/.227,o*=mu(D,i,r,Xo(g,Rs)),s.vars.scrollX=S(r)),r=(i=v())+.05*o*-t.velocityY/.227,o*=mu(v,i,r,Xo(g,Bs)),s.vars.scrollY=A(r),s.invalidate().duration(o).play(.01),(bo&&s.vars.scrollY>=n||i>=n-1)&&Ks.to({},{onUpdate:F,duration:o})}else u.restart(!0);f&&f(t)},t.onWheel=function(){s._ts&&s.pause(),Oo()-_>1e3&&(i=0,_=Oo())},t.onChange=function(t,e,n,r,s){if(Wa!==i&&x(),e&&c&&D(S(r[2]===e?o+(t.startX-t.x):D()+e-r[1])),n){v.offset&&k();var u=s[2]===n,l=u?a+t.startY-t.y:v()+n-s[1],h=A(l);u&&l!==h&&(a+=h-l),v(h)}(n||e)&&tu()},t.onEnable=function(){yu(g,!c&&"x"),gu.addEventListener("refresh",F),Ta(Xs,"resize",F),v.smooth&&(v.target.style.scrollBehavior="auto",v.smooth=D.smooth=!1),C.enable()},t.onDisable=function(){yu(g,!0),Sa(Xs,"resize",F),gu.removeEventListener("refresh",F),C.kill()},t.lockAxis=!1!==t.lockAxis,(e=new Gs(t)).iOS=bo,bo&&!v()&&v(1),bo&&Ks.ticker.add(jo),u=e._dc,s=Ks.to(e,{ease:"power4",paused:!0,inherit:!1,scrollX:c?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:hu(v,v(),(function(){return s.pause()}))},onUpdate:tu,onComplete:u.vars.onComplete}),e};gu.sort=function(t){if(Jo(t))return Ma.sort(t);var e=Xs.pageYOffset||0;return gu.getAll().forEach((function(t){return t._sortY=t.trigger?e+t.trigger.getBoundingClientRect().top:t.start+Xs.innerHeight})),Ma.sort(t||function(t,e){return-1e6*(t.vars.refreshPriority||0)+(t.vars.containerAnimation?1e6:t._sortY)-((e.vars.containerAnimation?1e6:e._sortY)+-1e6*(e.vars.refreshPriority||0))})},gu.observe=function(t){return new Gs(t)},gu.normalizeScroll=function(t){if(void 0===t)return mo;if(!0===t&&mo)return mo.enable();if(!1===t)return mo&&mo.kill(),void(mo=t);var e=t instanceof Gs?t:Eu(t);return mo&&mo.target===e.target&&mo.kill(),Go(e.target)&&(mo=e),e},gu.core={_getVelocityProp:zs,_inputObserver:bu,_scrollers:Ts,_proxies:Ss,bridge:{ss:function(){No||$a("scrollStart"),No=Oo()},ref:function(){return so}}},Ho()&&Ks.registerPlugin(gu);
/*!
 * strings: 3.12.7
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
var Cu=/(?:^\s+|\s+$)/g,Tu=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2642\u2640]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDD27\uDCBC\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCC\uDFCB]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function Su(t,e,n,i,r){for(var s,o=t.firstChild,a=[];o;)3===o.nodeType?(s=(o.nodeValue+"").replace(/^\n+/g,""),i||(s=s.replace(/\s+/g," ")),a.push.apply(a,Au(s,e,n,i,r))):"br"===(o.nodeName+"").toLowerCase()?a[a.length-1]+="<br>":a.push(o.outerHTML),o=o.nextSibling;if(!r)for(s=a.length;s--;)"&"===a[s]&&a.splice(s,1,"&amp;");return a}function Au(t,e,n,i,r){if(t+="",n&&(t=t.trim?t.trim():t.replace(Cu,"")),e&&""!==e)return t.replace(/>/g,"&gt;").replace(/</g,"&lt;").split(e);for(var s,o,a=[],u=t.length,l=0;l<u;l++)((o=t.charAt(l)).charCodeAt(0)>=55296&&o.charCodeAt(0)<=56319||t.charCodeAt(l+1)>=65024&&t.charCodeAt(l+1)<=65039)&&(s=((t.substr(l,12).split(Tu)||[])[1]||"").length||2,o=t.substr(l,s),a.emoji=1,l+=s-1),a.push(r?o:">"===o?"&gt;":"<"===o?"&lt;":!i||" "!==o||" "!==t.charAt(l-1)&&" "!==t.charAt(l+1)?o:"&nbsp;");return a}
/*!
 * TextPlugin 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var xu,ku,Fu={version:"3.12.7",name:"text",init:function(t,e,n){"object"!=typeof e&&(e={value:e});var i,r,s,o,a,u,l,c,h=t.nodeName.toUpperCase(),d=this,f=e,g=f.newClass,p=f.oldClass,m=f.preserveSpaces,y=f.rtl,v=d.delimiter=e.delimiter||"",D=d.fillChar=e.fillChar||(e.padSpace?"&nbsp;":"");if(d.svg=t.getBBox&&("TEXT"===h||"TSPAN"===h),!("innerHTML"in t)&&!d.svg)return!1;if(d.target=t,"value"in e){for(s=Su(t,v,!1,m,d.svg),ku||(ku=document.createElement("div")),ku.innerHTML=e.value,r=Su(ku,v,!1,m,d.svg),d.from=n._from,!d.from&&!y||y&&d.from||(h=s,s=r,r=h),d.hasClass=!(!g&&!p),d.newClass=y?p:g,d.oldClass=y?g:p,i=(h=s.length-r.length)<0?s:r,h<0&&(h=-h);--h>-1;)i.push(D);if("diff"===e.type){for(o=0,a=[],u=[],l="",h=0;h<r.length;h++)(c=r[h])===s[h]?l+=c:(a[o]=l+c,u[o++]=l+s[h],l="");r=a,s=u,l&&(r.push(l),s.push(l))}e.speed&&n.duration(Math.min(.05/e.speed*i.length,e.maxDuration||9999)),d.rtl=y,d.original=s,d.text=r,d._props.push("text")}else d.text=d.original=[""]},render:function(t,e){t>1?t=1:t<0&&(t=0),e.from&&(t=1-t);var n,i,r,s=e.text,o=e.hasClass,a=e.newClass,u=e.oldClass,l=e.delimiter,c=e.target,h=e.fillChar,d=e.original,f=e.rtl,g=s.length,p=(f?1-t:t)*g+.5|0;o&&t?(i=u&&p!==g,r=((n=a&&p)?"<span class='"+a+"'>":"")+s.slice(0,p).join(l)+(n?"</span>":"")+(i?"<span class='"+u+"'>":"")+l+d.slice(p).join(l)+(i?"</span>":"")):r=s.slice(0,p).join(l)+l+d.slice(p).join(l),e.svg?c.textContent=r:c.innerHTML="&nbsp;"===h&&~r.indexOf("  ")?r.split("  ").join("&nbsp;&nbsp;"):r}};Fu.splitInnerHTML=Su,Fu.emojiSafeSplit=Au,Fu.getText=function t(e){var n=e.nodeType,i="";if(1===n||9===n||11===n){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=t(e)}else if(3===n||4===n)return e.nodeValue;return i},(xu||"undefined"!=typeof window&&(xu=window.gsap)&&xu.registerPlugin&&xu)&&xu.registerPlugin(Fu);const Iu=0,Lu=1,Ou=2,Mu=3,Nu=4,Pu=5,Ru={globalLogLevel:Ou,enableConsoleLogs:!0,moduleLogLevels:{animation:Ou,background:Ou,i18n:Mu,app:Lu,forms:Lu,ui:Ou,performance:Lu},timestampFormat:!0,showModuleName:!0};const Bu=new class{constructor(){this.config={...Ru},this.originalConsoleMethods={log:console.log,info:console.info,warn:console.warn,error:console.error,debug:console.debug,trace:console.trace}}init(t={}){return this.config={...Ru,...t,moduleLogLevels:{...Ru.moduleLogLevels,...t.moduleLogLevels||{}}},this.checkUrlParameters(),this}checkUrlParameters(){try{const t=new URLSearchParams(window.location.search).get("log");if(t)if(t.includes(":")){const[e,n]=t.split(":"),i=this.getLogLevelFromString(n);void 0!==i&&(this.config.moduleLogLevels[e]=i,this.info("logger",`Set log level for module '${e}' to ${n.toUpperCase()}`))}else{const e=this.getLogLevelFromString(t);void 0!==e&&(this.config.globalLogLevel=e,this.info("logger",`Set global log level to ${t.toUpperCase()}`))}}catch(t){this.originalConsoleMethods.error("Error parsing log URL parameters:",t)}}getLogLevelFromString(t){return{trace:Iu,debug:Lu,info:Ou,warn:Mu,error:Nu,none:Pu}[t.toLowerCase()]}getEffectiveLogLevel(t){return t&&void 0!==this.config.moduleLogLevels[t]?this.config.moduleLogLevels[t]:this.config.globalLogLevel}formatLogMessage(t,e){const n=[...e];let i="";if(this.config.timestampFormat){i+=`[${(new Date).toISOString()}] `}return this.config.showModuleName&&t&&(i+=`[${t}] `),i&&("string"==typeof n[0]?n[0]=i+n[0]:n.unshift(i)),n}isLevelEnabled(t,e){return e>=this.getEffectiveLogLevel(t)&&this.config.enableConsoleLogs}trace(t,...e){this.isLevelEnabled(t,Iu)&&this.originalConsoleMethods.trace(...this.formatLogMessage(t,e))}debug(t,...e){this.isLevelEnabled(t,Lu)&&this.originalConsoleMethods.debug(...this.formatLogMessage(t,e))}info(t,...e){this.isLevelEnabled(t,Ou)&&this.originalConsoleMethods.info(...this.formatLogMessage(t,e))}warn(t,...e){this.isLevelEnabled(t,Mu)&&this.originalConsoleMethods.warn(...this.formatLogMessage(t,e))}error(t,...e){this.isLevelEnabled(t,Nu)&&this.originalConsoleMethods.error(...this.formatLogMessage(t,e))}getModuleLogger(t){return{trace:(...e)=>this.trace(t,...e),debug:(...e)=>this.debug(t,...e),info:(...e)=>this.info(t,...e),warn:(...e)=>this.warn(t,...e),error:(...e)=>this.error(t,...e),group:(e,n=!1)=>{this.isLevelEnabled(t,Lu)&&(n?console.groupCollapsed(`[${t}] ${e}`):console.group(`[${t}] ${e}`))},groupEnd:()=>{this.isLevelEnabled(t,Lu)&&console.groupEnd()},time:e=>{this.isLevelEnabled(t,Lu)&&console.time(`[${t}] ${e}`)},timeEnd:e=>{this.isLevelEnabled(t,Lu)&&console.timeEnd(`[${t}] ${e}`)},dir:(e,n={})=>{this.isLevelEnabled(t,Lu)&&console.dir(e,n)},get isTraceEnabled(){return this.isLevelEnabled(t,Iu)},get isDebugEnabled(){return this.isLevelEnabled(t,Lu)},get isInfoEnabled(){return this.isLevelEnabled(t,Ou)},get isWarnEnabled(){return this.isLevelEnabled(t,Mu)},get isErrorEnabled(){return this.isLevelEnabled(t,Nu)}}}setModuleLogLevel(t,e){this.config.moduleLogLevels[t]=e}setGlobalLogLevel(t){this.config.globalLogLevel=t}enableLogs(t){this.config.enableConsoleLogs=t}};Bu.init(),as.registerPlugin(gu,Fu);const Vu=new class{constructor(){this.logger=Bu.getModuleLogger("animation"),this.logger.info("AnimationManager initialized"),this.defaults={duration:.8,opacity:{from:0,to:1},ease:"ease-out",stagger:100},this.animatedElements=new Set,this.intersectionObserver=null,this.logger.debug("Animated elements tracking initialized with defaults",this.defaults)}setupRevealAnimations(){this.logger.debug("Setting up reveal animations with GSAP");const t=document.querySelectorAll("[data-animation]");this.logger.debug(`Found ${t.length} elements with data-animation attribute`),t.forEach((t=>{if(this.animatedElements.has(t))return void this.logger.trace("Skipping already animated element",{element:t.tagName,id:t.id,class:t.className});const e=t.getAttribute("data-animation"),n=parseFloat(t.getAttribute("data-animation-delay")||0)/1e3,i=parseFloat(t.getAttribute("data-animation-duration")||this.defaults.duration),r="H1"===t.tagName||"H2"===t.tagName||"H3"===t.tagName||"P"===t.tagName||t.classList.contains("text-animate");this.logger.trace("Setting up GSAP animation for element",{element:t.tagName,id:t.id,class:t.className,type:e,delay:n,duration:i,isText:r}),this.animatedElements.add(t);let s={opacity:0,willChange:"transform, opacity"},o={opacity:1,ease:"power3.out",duration:i,delay:n,onComplete:()=>{t.style.willChange="auto",t.classList.add("animated"),this.logger.trace("Animation completed for element",{element:t.tagName,id:t.id})}};switch(e){case"up":s.y=30,o.y=0;break;case"down":s.y=-30,o.y=0;break;case"left":s.x=-50,o.x=0;break;case"right":s.x=50,o.x=0;break;case"scale":s.scale=.9,o.scale=1,o.ease="back.out(1.7)";break;case"text":case"split":if(t.textContent&&t.textContent.length<40){const e=[...t.textContent],n=t.textContent;return t.textContent="",t.style.opacity="1",void as.timeline({scrollTrigger:{trigger:t,start:"top 85%",once:!0}}).to(t,{text:n,duration:Math.min(.04*e.length,2),ease:"none"})}s.y=20,o.y=0}r&&"left"!==e&&"right"!==e&&"scale"!==e&&"text"!==e&&"split"!==e&&("H1"!==t.tagName&&"H2"!==t.tagName||(o.onComplete=()=>{t.style.willChange="auto",t.classList.add("animated"),as.to(t,{textShadow:"0 0 10px rgba(255, 49, 168, 0.3)",duration:.8,repeat:1,yoyo:!0})})),as.set(t,s),gu.create({trigger:t,start:"top 85%",once:!0,onEnter:()=>{this.logger.trace("Triggering animation for element",{element:t.tagName,id:t.id}),as.to(t,o)}})})),this.setupHeadingAnimations(),this.logger.debug("GSAP reveal animations setup complete")}setupHeadingAnimations(){document.querySelectorAll("section h2, .section-header h2, .gradient-text").forEach((t=>{var e;if(!this.animatedElements.has(t)&&!t.hasAttribute("data-animation"))if(this.logger.trace("Setting up special heading animation for",{heading:(null==(e=t.textContent)?void 0:e.substring(0,20))+"...",id:t.id}),this.animatedElements.add(t),t.classList.contains("gradient-text"))as.set(t,{opacity:0,backgroundSize:"100% 100%",backgroundPosition:"left center"}),gu.create({trigger:t,start:"top 85%",once:!0,onEnter:()=>{as.to(t,{opacity:1,duration:.8,ease:"power2.out",onComplete:()=>{as.to(t,{backgroundPosition:"right center",duration:1.5,ease:"power1.inOut"})}})}});else if(t.textContent&&t.textContent.length<30){const e=t.textContent;t.textContent="",t.style.opacity="1",gu.create({trigger:t,start:"top 85%",once:!0,onEnter:()=>{as.to(t,{text:e,duration:Math.min(.05*e.length,2),ease:"none",onComplete:()=>{as.fromTo(t,{textShadow:"0 0 0px rgba(255, 255, 255, 0)"},{textShadow:"0 0 10px rgba(255, 49, 168, 0.3), 0 0 20px rgba(255, 255, 255, 0.2)",duration:.8,yoyo:!0,repeat:1})}})}})}else as.set(t,{y:30,opacity:0}),gu.create({trigger:t,start:"top 85%",once:!0,onEnter:()=>{as.to(t,{y:0,opacity:1,duration:.8,ease:"power3.out"})}})}))}setupStaggeredReveal(t,e,n={}){this.logger.debug("Setting up staggered reveal animation with GSAP",{container:t,items:e,options:n});const i=document.querySelector(t);if(!i)return void this.logger.warn("Container not found, skipping staggered animation",{selector:t});const r=i.querySelectorAll(e);if(!r.length)return void this.logger.warn("No items found in container, skipping staggered animation",{containerSelector:t,itemsSelector:e});this.logger.debug(`Found ${r.length} items for staggered animation`);const s={y:n.y??40,x:n.x??0,scale:n.scale??1,duration:n.duration??this.defaults.duration,stagger:n.stagger?n.stagger/1e3:.1,ease:n.ease?n.ease:"power3.out",start:n.start??"80%"};this.logger.trace("Staggered animation options",s);let o={opacity:0,willChange:"transform, opacity"};0!==s.y&&(o.y=s.y),0!==s.x&&(o.x=s.x),1!==s.scale&&(o.scale=s.scale);let a={opacity:1,x:0,y:0,scale:1,stagger:s.stagger,duration:s.duration,ease:s.ease,clearProps:"willChange",onStart:(t,e)=>{e&&(this.animatedElements.add(e),e.classList.add("animated"),this.logger.trace("Staggered animation started for item",{index:t,item:e.tagName,id:e.id}))}};[...r].some((t=>"H2"===t.tagName||"H3"===t.tagName||"P"===t.tagName||t.classList.contains("text-animate")))&&(a.onComplete=()=>{const t=[...r].filter((t=>"H2"===t.tagName||"H3"===t.tagName));t.length>0&&as.to(t[0],{textShadow:"0 0 10px rgba(255, 49, 168, 0.3)",duration:.8,repeat:1,yoyo:!0})}),as.set(r,o),gu.create({trigger:i,start:`top ${s.start}`,once:!0,onEnter:()=>{this.logger.debug(`Triggering GSAP staggered animation for ${r.length} items`),as.to(r,a)}})}setupSplitScreenAnimation(t,e,n){this.logger.debug("Setting up split screen animation",{container:t,left:e,right:n});const i=document.querySelector(t);if(!i)return void this.logger.error(`Container not found: ${t}`);let r=i.querySelector(e),s=i.querySelector(n);if(r||(r=document.querySelector(e),this.logger.debug(`Trying alternative selector for left element: ${e}`)),s||(s=document.querySelector(n),this.logger.debug(`Trying alternative selector for right element: ${n}`)),!r||!s)return void this.logger.error("Elements not found",{leftFound:!!r,rightFound:!!s,leftSelector:e,rightSelector:n});this.logger.debug("Found all elements for split screen animation"),r.style.opacity="0",r.style.transform="translateX(-50px)",r.style.transition="opacity 0.8s ease-out, transform 0.8s ease-out",r.style.willChange="opacity, transform",s.style.opacity="0",s.style.transform="translateX(50px)",s.style.transition="opacity 0.8s ease-out, transform 0.8s ease-out",s.style.willChange="opacity, transform",this.logger.trace("Set initial states for split screen elements");const o=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&(this.logger.debug("Split screen animation triggered"),this.animatedElements.add(r),this.animatedElements.add(s),requestAnimationFrame((()=>{r.style.opacity="1",r.style.transform="translateX(0)",r.classList.add("animated"),s.style.opacity="1",s.style.transform="translateX(0)",s.classList.add("animated"),this.logger.trace("Split screen animation started");r.addEventListener("transitionend",(()=>{r.style.willChange="auto",s.style.willChange="auto",this.logger.trace("Split screen animation completed")}),{once:!0})})),o.unobserve(i))}))}),{root:null,rootMargin:"0px 0px -25% 0px",threshold:.1});o.observe(i),this.logger.debug("Split screen animation setup complete")}animateHeroSequence(t,e={}){this.logger.debug("Animating hero sequence with elements",{elementsProvided:Object.keys(t),options:e});const n=as.timeline({defaults:{ease:e.ease||"power3.out",duration:.8},onComplete:()=>{this.logger.debug("Hero animation sequence complete"),"function"==typeof e.onComplete&&e.onComplete()}});if(t.titleChars&&t.titleChars.length?(this.logger.trace(`Animating title characters (${t.titleChars.length})`),as.set(t.titleChars,{y:30,opacity:0,willChange:"transform, opacity"}),n.to(t.titleChars,{y:0,opacity:1,stagger:.02,duration:.7,ease:"back.out(1.7)",onComplete:()=>{t.titleChars.forEach((t=>t.style.willChange="auto"))}},"-=0.2")):t.titleElement?(this.logger.trace("Animating title element (fallback)"),as.set(t.titleElement,{y:30,opacity:0,willChange:"transform, opacity"}),n.to(t.titleElement,{y:0,opacity:1,duration:.8,onComplete:()=>t.titleElement.style.willChange="auto"},"-=0.2")):this.logger.warn("No title element found for animation"),t.titleLine&&(this.logger.trace("Animating title line"),as.set(t.titleLine,{width:0,opacity:0,willChange:"width, opacity"}),n.to(t.titleLine,{width:"55%",opacity:.85,duration:.6,ease:"power3.inOut",onComplete:()=>t.titleLine.style.willChange="auto"},"-=0.1")),t.subtitle&&(this.logger.trace("Animating subtitle"),as.set(t.subtitle,{y:30,opacity:0,willChange:"transform, opacity"}),n.to(t.subtitle,{y:0,opacity:1,duration:.7,onComplete:()=>t.subtitle.style.willChange="auto"},"-=0.3")),t.description){this.logger.trace("Animating description");const e=t.description.textContent;e.length<100?(as.set(t.description,{opacity:1,text:"",willChange:"content"}),n.to(t.description,{text:e,duration:1.2,ease:"none",onComplete:()=>t.description.style.willChange="auto"},"-=0.1")):(as.set(t.description,{y:30,opacity:0,willChange:"transform, opacity"}),n.to(t.description,{y:0,opacity:1,duration:.7,onComplete:()=>t.description.style.willChange="auto"},"-=0.3"))}return t.cta&&(this.logger.trace("Animating CTA"),t.cta.style.removeProperty("will-change"),t.cta.style.removeProperty("transform"),as.set(t.cta,{y:30,opacity:0}),n.to(t.cta,{y:0,opacity:1,duration:.7,onComplete:()=>{t.cta.style.transform="",t.cta.style.opacity="1";const e=t.cta.querySelector(".btn-hero-cta");e&&as.to(e,{boxShadow:"0 0 15px var(--color-neon-glow)",duration:1,repeat:1,yoyo:!0,delay:.5})}},"-=0.4")),Object.values(t).forEach((t=>{t&&(Array.isArray(t)||t instanceof NodeList?t.forEach((t=>this.animatedElements.add(t))):this.animatedElements.add(t))})),this.logger.debug("Hero animation timeline created and started"),n}setupFormAnimation(t,e){if(!t)return void this.logger.warn("Form element not provided, skipping animation");this.logger.debug("Setting up form animation",{formId:t.id,formClass:t.className});const n=t.querySelectorAll("input, button, .form-group");this.logger.debug(`Found ${n.length} form elements to animate`),n.forEach(((t,e)=>{t.style.transition="opacity 0.5s ease-out, transform 0.5s ease-out",t.style.transitionDelay=.1*e+"s",t.style.willChange="opacity, transform"})),requestAnimationFrame((()=>{n.forEach((t=>{t.style.opacity="0",t.style.transform="translateY(-20px)"}));n[n.length-1].addEventListener("transitionend",(()=>{this.logger.debug("Form animation completed"),"function"==typeof e&&(this.logger.trace("Executing form animation success callback"),this.logger.time("form-success-callback"),e(),this.logger.timeEnd("form-success-callback"))}),{once:!0})}))}};const Uu=new class{constructor(){this.isInitialized=!1,this.heroLoaded=!1,this.logger=Bu.getModuleLogger("animation-manager"),this.logger.info("ApplicationAnimationManager instance created")}init(){this.isInitialized?(this.logger.info("Reinitializing AnimationManager"),this.heroLoaded=!1):this.logger.info("Initializing animation manager for the first time"),this.logger.time("animation-manager-initialization");try{this.logger.debug("Resetting existing animations"),document.querySelectorAll(".animated").forEach((t=>{t.classList.remove("animated")})),this.logger.debug("Setting up reveal animations"),this.setupRevealAnimations(),this.logger.debug("Setting up hero animation"),this.setupHeroAnimation(),this.logger.info("Animation manager initialization complete")}catch(t){this.logger.error("Animation manager initialization failed",t)}finally{this.isInitialized=!0,this.logger.timeEnd("animation-manager-initialization")}}setupRevealAnimations(){this.logger.debug("Setting up all reveal animations"),this.logger.time("reveal-animations-setup"),this.logger.debug("Setting up base reveal animations"),Vu.setupRevealAnimations(),this.logger.debug("Setting up feature cards animations"),Vu.setupStaggeredReveal(".features-grid",".card",{y:40,stagger:150,start:"80%"}),this.logger.debug("Setting up solution section split-screen animation"),Vu.setupSplitScreenAnimation("#solution",".problem-content",".solution-content");const t=document.querySelector("#solution"),e=t?t.querySelector(".problem-content"):null,n=t?t.querySelector(".solution-content"):null;this.logger.debug("Solution section animation elements:",{container:t?"Found":"Not found",leftElement:e?"Found":"Not found",rightElement:n?"Found":"Not found"}),t&&e&&n||this.logger.warn("Some solution section elements not found",{solutionSection:!!t,problemContent:!!e,solutionContent:!!n}),this.logger.debug("Setting up CTA section animations"),Vu.setupStaggeredReveal(".cta-section",".cta-content > *",{y:30,stagger:100,start:"75%"}),this.logger.debug("Setting up feedback section animations"),Vu.setupStaggeredReveal(".feedback-section",".feedback-container > *:not(.hidden)",{y:30,stagger:100,start:"75%"}),this.logger.timeEnd("reveal-animations-setup")}setupHeroAnimation(){this.logger.debug("Setting up hero animation"),this.logger.time("hero-animation-setup");const t=document.querySelector("#hero");if(!t)return this.logger.warn("Hero section not found, skipping hero animation"),void this.logger.timeEnd("hero-animation-setup");const e=t.querySelector(".hero-subtitle"),n=t.querySelector(".hero-description"),i=t.querySelector(".hero-cta"),r=t.querySelector(".hero-title-line");this.logger.debug("Hero animation elements:",{heroSectionFound:!!t,heroSubtitleFound:!!e,heroDescriptionFound:!!n,heroCtaFound:!!i,heroTitleLineFound:!!r}),e&&(e.classList.add("will-animate"),this.logger.trace("Set initial state for hero subtitle")),n&&(n.classList.add("will-animate"),this.logger.trace("Set initial state for hero description")),i&&(i.classList.add("will-animate"),i.style.removeProperty("will-change"),i.style.removeProperty("transform"),this.logger.trace("Set initial state for hero CTA and fixed pseudo-element"));const s=t.querySelector(".hero-title");if(!s)return this.logger.warn("Hero title not found, skipping title animation"),void this.logger.timeEnd("hero-animation-setup");s.classList.add("hero-title-gradient","will-animate"),this.logger.debug("Applied gradient effect to hero title");let o=null;try{this.logger.debug("Splitting hero title text for character animation");const t=new Z(s,{types:"chars",tagName:"span"}).chars||s.querySelectorAll(".char")||s.querySelectorAll("span");t&&t.length>0?(this.logger.debug(`Successfully split title into ${t.length} characters`),o=t):this.logger.warn("Character splitting failed, using fallback approach")}catch(c){this.logger.error("SplitType error, using fallback approach",c)}const a={};this.logger.debug("Building animation elements collection");const u=document.querySelector("header");u&&(a.header=u,this.logger.trace("Added header to animation elements"));const l=document.querySelectorAll(".nav-links li");l&&l.length>0&&(a.navItems=l,this.logger.trace(`Added ${l.length} nav items to animation elements`)),r&&(a.titleLine=r,this.logger.trace("Added title line to animation elements")),e&&(a.subtitle=e,this.logger.trace("Added subtitle to animation elements")),n&&(a.description=n,this.logger.trace("Added description to animation elements")),i&&(a.cta=i,this.logger.trace("Added CTA to animation elements")),o&&o.length?(a.titleChars=o,this.logger.trace(`Added ${o.length} title characters to animation elements`)):s&&(a.titleElement=s,this.logger.trace("Added title element (fallback) to animation elements")),this.logger.debug("Animation elements prepared, starting animation");try{this.logger.time("hero-animation-sequence"),Vu.animateHeroSequence(a,{startDelay:.2,ease:"power3.out",onComplete:()=>{this.heroLoaded=!0,this.logger.debug("Hero animation sequence completed")}})}catch(c){this.logger.error("Error in hero animation sequence:",c)}finally{this.logger.timeEnd("hero-animation-setup")}}};const zu=new class{constructor(t="fr"){this.defaultLocale=t,this.translations={},this.observers=new Set,this.currentLocale=this.determineLocale()}determineLocale(){const t=new URLSearchParams(window.location.search).get("lang");if(t&&["en","fr"].includes(t.toLowerCase()))return localStorage.setItem("userLocale",t.toLowerCase()),t.toLowerCase();const e=localStorage.getItem("userLocale");if(e)return e;const n=navigator.language.split("-")[0];return n&&["en","fr"].includes(n)?n:this.defaultLocale}async init(){try{await this.loadTranslations(this.currentLocale),this.updatePageContent(),this.setupLanguageSwitcher(),this.updateUrlQuery()}catch(t){console.error("Failed to initialize i18n:",t),this.currentLocale=this.defaultLocale}}updateUrlQuery(){const t=new URL(window.location.href);t.searchParams.get("lang")!==this.currentLocale&&(t.searchParams.set("lang",this.currentLocale),window.history.replaceState(null,"",t.toString()))}async changeLocale(t){if(t!==this.currentLocale)try{await this.loadTranslations(t),this.currentLocale=t,localStorage.setItem("userLocale",t),this.updatePageContent(),this.updateUrlQuery(),this.notifyObservers(),document.documentElement.lang=t}catch(e){console.error(`Failed to change locale to ${t}:`,e)}}setupLanguageSwitcher(){const t=document.querySelectorAll("#language-switcher, #language-selector");if(!t.length)return;const e=document.getElementById("language-selector");if(e){if(this.currentLocale){const t=e.options;if(null==t?void 0:t.length){const n=this.currentLocale.toString().toLowerCase(),i=Array.from(t).find((t=>t.value.toLowerCase()===n));i&&(e.value=i.value)}}t.forEach((n=>{e.value&&(n.value=e.value),n.addEventListener("change",(e=>{const n=e.target.value;t.forEach((t=>{t.value=n})),this.changeLocale(n)}))}))}}async loadTranslations(t){try{const e=`/locales/${t}.json`,n=await fetch(e,{headers:{Accept:"application/json","Cache-Control":"no-cache"}});if(!n.ok)throw new Error(`Failed to load translations. Status: ${n.status}`);if(this.translations[t]=await n.json(),"object"!=typeof this.translations[t]||null===this.translations[t])throw new Error("Invalid translation file format");return this.currentLocale=t,this.translations[t]}catch(e){throw console.error(`Failed to load translations for ${t}:`,e),e}}translate(t,e={}){const n=t.split(".");let i=this.translations[this.currentLocale];for(const r of n)if(i=null==i?void 0:i[r],void 0===i){console.warn(`Translation missing for key: ${t}`),i=this.getFromDefaultLocale(t);break}return"string"!=typeof i?t:i.replace(/\{\{\s*(\w+)\s*\}\}/g,((t,n)=>void 0!==e[n]?e[n]:`{{${n}}}`))}getFromDefaultLocale(t){const e=t.split(".");let n=this.translations[this.defaultLocale];for(const i of e)if(n=null==n?void 0:n[i],void 0===n)return t;return n}updatePageContent(){document.querySelectorAll("[data-i18n]").forEach((t=>{const e=t.getAttribute("data-i18n");t.textContent=this.translate(e)})),document.querySelectorAll("[data-i18n-placeholder]").forEach((t=>{const e=t.getAttribute("data-i18n-placeholder");t.placeholder=this.translate(e)})),document.querySelectorAll("[data-i18n-aria-label]").forEach((t=>{const e=t.getAttribute("data-i18n-aria-label");t.setAttribute("aria-label",this.translate(e))}))}addObserver(t){this.observers.add(t)}removeObserver(t){this.observers.delete(t)}notifyObservers(){this.observers.forEach((t=>{try{t(this.currentLocale)}catch(e){console.error("Error in i18n observer:",e)}}))}getCurrentLocale(){return this.currentLocale}};document.addEventListener("DOMContentLoaded",(()=>{zu.init().catch((t=>{console.error("Failed to initialize i18n:",t)}))}));const ju=function(t,e=""){t&&(t.dataset.originalText=t.innerHTML,t.dataset.originalDisabled=t.disabled,t.classList.add("is-loading"),t.disabled=!0,t.setAttribute("aria-busy","true"))},$u=function(t){t&&(t.classList.remove("is-loading"),t.removeAttribute("aria-busy"),"originalText"in t.dataset&&(t.innerHTML=t.dataset.originalText,delete t.dataset.originalText),"originalDisabled"in t.dataset?(t.disabled="true"===t.dataset.originalDisabled,delete t.dataset.originalDisabled):t.disabled=!1)},qu=function(t=".btn"){document.querySelectorAll(t).forEach((t=>{t.addEventListener("keydown",(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t.click())})),"a"===t.tagName.toLowerCase()&&t.setAttribute("role","button")}))};var Hu={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},Ku={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const e=t[r],s=r+1<t.length,o=s?t[r+1]:0,a=r+2<t.length,u=a?t[r+2]:0,l=e>>2,c=(3&e)<<4|o>>4;let h=(15&o)<<2|u>>6,d=63&u;a||(d=64,s||(h=64)),i.push(n[l],n[c],n[h],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Gu(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const e=n[t.charAt(r++)],s=r<t.length?n[t.charAt(r)]:0;++r;const o=r<t.length?n[t.charAt(r)]:64;++r;const a=r<t.length?n[t.charAt(r)]:64;if(++r,null==e||null==s||null==o||null==a)throw new Wu;const u=e<<2|s>>4;if(i.push(u),64!==o){const t=s<<4&240|o>>2;if(i.push(t),64!==a){const t=o<<6&192|a;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Wu extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Xu=function(t){return function(t){const e=Gu(t);return Ku.encodeByteArray(e,!0)}(t).replace(/\./g,"")};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Yu=()=>
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Qu=()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&function(t){try{return Ku.decodeString(t,!0)}catch(n){console.error("base64Decode failed: ",n)}return null}(t[1]);return e&&JSON.parse(e)},Ju=()=>{try{return Yu()||(()=>{if("undefined"==typeof process)return;const t=Hu.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||Qu()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},Zu=t=>{const e=(t=>{var e,n;return null===(n=null===(e=Ju())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]},tl=()=>{var t;return null===(t=Ju())||void 0===t?void 0:t.config};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class el{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function il(){return!function(){var t;const e=null===(t=Ju())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(n){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rl(){try{return"object"==typeof indexedDB}catch(t){return!1}}function sl(){return new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}}))}function ol(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,al.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ul.prototype.create)}}class ul{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],s=r?function(t,e){return t.replace(ll,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new al(i,o,n)}}const ll=/\{\$([^}]+)}/g;function cl(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(hl(n)&&hl(s)){if(!cl(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function hl(t){return null!==t&&"object"==typeof t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(t,e=1e3,n=2){const i=e*Math.pow(n,t),r=Math.round(.5*i*(Math.random()-.5)*2);return Math.min(144e5,i+r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t){return t&&t._delegate?t._delegate:t}class gl{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new el;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(n){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService({instanceIdentifier:pl})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:i});n.resolve(t)}catch(e){}}}}clearInstance(t=pl){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=pl){return this.instances.has(t)}getOptions(t=pl){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(i){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===pl?void 0:i),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(r){}var i;return n||null}normalizeInstanceIdentifier(t=pl){return this.component?this.component.multipleInstances?t:pl:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class yl{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new ml(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vl,Dl;(Dl=vl||(vl={}))[Dl.DEBUG=0]="DEBUG",Dl[Dl.VERBOSE=1]="VERBOSE",Dl[Dl.INFO=2]="INFO",Dl[Dl.WARN=3]="WARN",Dl[Dl.ERROR=4]="ERROR",Dl[Dl.SILENT=5]="SILENT";const bl={debug:vl.DEBUG,verbose:vl.VERBOSE,info:vl.INFO,warn:vl.WARN,error:vl.ERROR,silent:vl.SILENT},wl=vl.INFO,_l={[vl.DEBUG]:"log",[vl.VERBOSE]:"log",[vl.INFO]:"info",[vl.WARN]:"warn",[vl.ERROR]:"error"},El=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=_l[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...n)};class Cl{constructor(t){this.name=t,this._logLevel=wl,this._logHandler=El,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in vl))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?bl[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,vl.DEBUG,...t),this._logHandler(this,vl.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,vl.VERBOSE,...t),this._logHandler(this,vl.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,vl.INFO,...t),this._logHandler(this,vl.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,vl.WARN,...t),this._logHandler(this,vl.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,vl.ERROR,...t),this._logHandler(this,vl.ERROR,...t)}}let Tl,Sl;const Al=new WeakMap,xl=new WeakMap,kl=new WeakMap,Fl=new WeakMap,Il=new WeakMap;let Ll={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return xl.get(t);if("objectStoreNames"===e)return t.objectStoreNames||kl.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nl(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Ol(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Sl||(Sl=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(Pl(this),e),Nl(Al.get(this))}:function(...e){return Nl(t.apply(Pl(this),e))}:function(e,...n){const i=t.call(Pl(this),e,...n);return kl.set(i,e.sort?e.sort():[e]),Nl(i)}}function Ml(t){return"function"==typeof t?Ol(t):(t instanceof IDBTransaction&&function(t){if(xl.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));xl.set(t,e)}(t),e=t,(Tl||(Tl=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((t=>e instanceof t))?new Proxy(t,Ll):t);var e}function Nl(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(Nl(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&Al.set(e,t)})).catch((()=>{})),Il.set(e,t),e}(t);if(Fl.has(t))return Fl.get(t);const e=Ml(t);return e!==t&&(Fl.set(t,e),Il.set(e,t)),e}const Pl=t=>Il.get(t);function Rl(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Nl(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(Nl(o.result),t.oldVersion,t.newVersion,Nl(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(t=>r(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}const Bl=["get","getKey","getAll","getAllKeys","count"],Vl=["put","add","delete","clear"],Ul=new Map;function zl(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Ul.get(e))return Ul.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=Vl.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Bl.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),r&&s.done]))[0]};return Ul.set(e,s),s}Ll=(t=>({...t,get:(e,n,i)=>zl(e,n)||t.get(e,n,i),has:(e,n)=>!!zl(e,n)||t.has(e,n)}))(Ll);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class jl{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const $l="@firebase/app",ql="0.11.2",Hl=new Cl("@firebase/app"),Gl="@firebase/app-compat",Kl="@firebase/analytics-compat",Wl="@firebase/analytics",Xl="@firebase/app-check-compat",Yl="@firebase/app-check",Ql="@firebase/auth",Jl="@firebase/auth-compat",Zl="@firebase/database",tc="@firebase/data-connect",ec="@firebase/database-compat",nc="@firebase/functions",ic="@firebase/functions-compat",rc="@firebase/installations",sc="@firebase/installations-compat",oc="@firebase/messaging",ac="@firebase/messaging-compat",uc="@firebase/performance",lc="@firebase/performance-compat",cc="@firebase/remote-config",hc="@firebase/remote-config-compat",dc="@firebase/storage",fc="@firebase/storage-compat",gc="@firebase/firestore",pc="@firebase/vertexai",mc="@firebase/firestore-compat",yc="firebase",vc="[DEFAULT]",Dc={[$l]:"fire-core",[Gl]:"fire-core-compat",[Wl]:"fire-analytics",[Kl]:"fire-analytics-compat",[Yl]:"fire-app-check",[Xl]:"fire-app-check-compat",[Ql]:"fire-auth",[Jl]:"fire-auth-compat",[Zl]:"fire-rtdb",[tc]:"fire-data-connect",[ec]:"fire-rtdb-compat",[nc]:"fire-fn",[ic]:"fire-fn-compat",[rc]:"fire-iid",[sc]:"fire-iid-compat",[oc]:"fire-fcm",[ac]:"fire-fcm-compat",[uc]:"fire-perf",[lc]:"fire-perf-compat",[cc]:"fire-rc",[hc]:"fire-rc-compat",[dc]:"fire-gcs",[fc]:"fire-gcs-compat",[gc]:"fire-fst",[mc]:"fire-fst-compat",[pc]:"fire-vertex","fire-js":"fire-js",[yc]:"fire-js-all"},bc=new Map,wc=new Map,_c=new Map;function Ec(t,e){try{t.container.addComponent(e)}catch(n){Hl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Cc(t){const e=t.name;if(_c.has(e))return Hl.debug(`There were multiple attempts to register component ${e}.`),!1;_c.set(e,t);for(const n of bc.values())Ec(n,t);for(const n of wc.values())Ec(n,t);return!0}function Tc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Sc=new ul("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ac{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new gl("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Sc.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(t,e={}){let n=t;if("object"!=typeof e){e={name:e}}const i=Object.assign({name:vc,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!=typeof r||!r)throw Sc.create("bad-app-name",{appName:String(r)});if(n||(n=tl()),!n)throw Sc.create("no-options");const s=bc.get(r);if(s){if(cl(n,s.options)&&cl(i,s.config))return s;throw Sc.create("duplicate-app",{appName:r})}const o=new yl(r);for(const u of _c.values())o.addComponent(u);const a=new Ac(n,i,o);return bc.set(r,a),a}function kc(t=vc){const e=bc.get(t);if(!e&&t===vc&&tl())return xc();if(!e)throw Sc.create("no-app",{appName:t});return e}function Fc(t,e,n){var i;let r=null!==(i=Dc[t])&&void 0!==i?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${r}" with version "${e}":`];return s&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Hl.warn(t.join(" "))}Cc(new gl(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic="firebase-heartbeat-store";let Lc=null;function Oc(){return Lc||(Lc=Rl("firebase-heartbeat-database",1,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(Ic)}catch(n){console.warn(n)}}}).catch((t=>{throw Sc.create("idb-open",{originalErrorMessage:t.message})}))),Lc}async function Mc(t,e){try{const n=(await Oc()).transaction(Ic,"readwrite"),i=n.objectStore(Ic);await i.put(e,Nc(t)),await n.done}catch(n){if(n instanceof al)Hl.warn(n.message);else{const t=Sc.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});Hl.warn(t.message)}}}function Nc(t){return`${t.name}!${t.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Bc(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Rc();if(null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some((t=>t.date===i)))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>30){const t=function(t){if(0===t.length)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(t,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Hl.warn(n)}}async getHeartbeatsHeader(){var t;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=Rc(),{heartbeatsToSend:n,unsentEntries:i}=function(t,e=1024){const n=[];let i=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),Vc(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Vc(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=Xu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Hl.warn(e),""}}}function Rc(){return(new Date).toISOString().substring(0,10)}class Bc{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!rl()&&sl().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await Oc()).transaction(Ic),n=await e.objectStore(Ic).get(Nc(t));return await e.done,n}catch(e){if(e instanceof al)Hl.warn(e.message);else{const t=Sc.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});Hl.warn(t.message)}}}(this.app);return(null==t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Mc(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Mc(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function Vc(t){return Xu(JSON.stringify({version:2,heartbeats:t})).length}var Uc;Uc="",Cc(new gl("platform-logger",(t=>new jl(t)),"PRIVATE")),Cc(new gl("heartbeat",(t=>new Pc(t)),"PRIVATE")),Fc($l,ql,Uc),Fc($l,ql,"esm2017"),Fc("fire-js","");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Fc("firebase","11.4.0","app");const zc="@firebase/installations",jc="0.6.13",$c=1e4,qc=`w:${jc}`,Hc="FIS_v2",Gc=36e5,Kc=new ul("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Wc(t){return t instanceof al&&t.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc({projectId:t}){return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function Yc(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function Qc(t,e){const n=(await e.json()).error;return Kc.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Jc({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Zc(t,{refreshToken:e}){const n=Jc(t);return n.append("Authorization",function(t){return`${Hc} ${t}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)),n}async function th(t){const e=await t();return e.status>=500&&e.status<600?t():e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function eh(t){return new Promise((e=>{setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const nh=/^[cdef][\w-]{21}$/;function ih(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){const e=(n=t,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return e.substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);return nh.test(e)?e:""}catch(t){return""}}function rh(t){return`${t.appName}!${t.appId}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=new Map;function oh(t,e){const n=rh(t);ah(n,e),function(t,e){const n=function(){!uh&&"BroadcastChannel"in self&&(uh=new BroadcastChannel("[Firebase] FID Change"),uh.onmessage=t=>{ah(t.data.key,t.data.fid)});return uh}();n&&n.postMessage({key:t,fid:e});0===sh.size&&uh&&(uh.close(),uh=null)}(n,e)}function ah(t,e){const n=sh.get(t);if(n)for(const i of n)i(e)}let uh=null;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const lh="firebase-installations-store";let ch=null;function hh(){return ch||(ch=Rl("firebase-installations-database",1,{upgrade:(t,e)=>{if(0===e)t.createObjectStore(lh)}})),ch}async function dh(t,e){const n=rh(t),i=(await hh()).transaction(lh,"readwrite"),r=i.objectStore(lh),s=await r.get(n);return await r.put(e,n),await i.done,s&&s.fid===e.fid||oh(t,e.fid),e}async function fh(t){const e=rh(t),n=(await hh()).transaction(lh,"readwrite");await n.objectStore(lh).delete(e),await n.done}async function gh(t,e){const n=rh(t),i=(await hh()).transaction(lh,"readwrite"),r=i.objectStore(lh),s=await r.get(n),o=e(s);return void 0===o?await r.delete(n):await r.put(o,n),await i.done,!o||s&&s.fid===o.fid||oh(t,o.fid),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ph(t){let e;const n=await gh(t.appConfig,(n=>{const i=function(t){const e=t||{fid:ih(),registrationStatus:0};return vh(e)}(n),r=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine){return{installationEntry:e,registrationPromise:Promise.reject(Kc.create("app-offline"))}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(t,e){try{const n=await async function({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=Xc(t),r=Jc(t),s=e.getImmediate({optional:!0});if(s){const t=await s.getHeartbeatsHeader();t&&r.append("x-firebase-client",t)}const o={fid:n,authVersion:Hc,appId:t.appId,sdkVersion:qc},a={method:"POST",headers:r,body:JSON.stringify(o)},u=await th((()=>fetch(i,a)));if(u.ok){const t=await u.json();return{fid:t.fid||n,registrationStatus:2,refreshToken:t.refreshToken,authToken:Yc(t.authToken)}}throw await Qc("Create Installation",u)}(t,e);return dh(t.appConfig,n)}catch(n){throw Wc(n)&&409===n.customData.serverCode?await fh(t.appConfig):await dh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}(t,n);return{installationEntry:n,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:mh(t)}:{installationEntry:e}}(t,i);return e=r.registrationPromise,r.installationEntry}));return""===n.fid?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}async function mh(t){let e=await yh(t.appConfig);for(;1===e.registrationStatus;)await eh(100),e=await yh(t.appConfig);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=await ph(t);return n||e}return e}function yh(t){return gh(t,(t=>{if(!t)throw Kc.create("installation-not-found");return vh(t)}))}function vh(t){return 1===(e=t).registrationStatus&&e.registrationTime+$c<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}async function Dh({appConfig:t,heartbeatServiceProvider:e},n){const i=function(t,{fid:e}){return`${Xc(t)}/${e}/authTokens:generate`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,n),r=Zc(t,n),s=e.getImmediate({optional:!0});if(s){const t=await s.getHeartbeatsHeader();t&&r.append("x-firebase-client",t)}const o={installation:{sdkVersion:qc,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},u=await th((()=>fetch(i,a)));if(u.ok){return Yc(await u.json())}throw await Qc("Generate Auth Token",u)}async function bh(t,e=!1){let n;const i=await gh(t.appConfig,(i=>{if(!_h(i))throw Kc.create("not-registered");const r=i.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Gc}(t)}(r))return i;if(1===r.requestStatus)return n=async function(t,e){let n=await wh(t.appConfig);for(;1===n.authToken.requestStatus;)await eh(100),n=await wh(t.appConfig);const i=n.authToken;return 0===i.requestStatus?bh(t,e):i}(t,e),i;{if(!navigator.onLine)throw Kc.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(i);return n=async function(t,e){try{const n=await Dh(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await dh(t.appConfig,i),n}catch(n){if(!Wc(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await dh(t.appConfig,n)}else await fh(t.appConfig);throw n}}(t,e),e}}));return n?await n:i.authToken}function wh(t){return gh(t,(t=>{if(!_h(t))throw Kc.create("not-registered");const e=t.authToken;return 1===(n=e).requestStatus&&n.requestTime+$c<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var n;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}function _h(t){return void 0!==t&&2===t.registrationStatus}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Eh(t,e=!1){const n=t;await async function(t){const{registrationPromise:e}=await ph(t);e&&await e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n);return(await bh(n,e)).token}function Ch(t){return Kc.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th="installations",Sh=t=>{const e=Tc(t.getProvider("app").getImmediate(),Th).getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:n,registrationPromise:i}=await ph(e);return i?i.catch(console.error):bh(e).catch(console.error),n.fid}(e),getToken:t=>Eh(e,t)}};Cc(new gl(Th,(t=>{const e=t.getProvider("app").getImmediate(),n=function(t){if(!t||!t.options)throw Ch("App Configuration");if(!t.name)throw Ch("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Ch(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:Tc(e,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),Cc(new gl("installations-internal",Sh,"PRIVATE")),Fc(zc,jc),Fc(zc,jc,"esm2017");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ah="analytics",xh="https://www.googletagmanager.com/gtag/js",kh=new Cl("@firebase/analytics"),Fh=new ul("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ih(t){if(!t.startsWith(xh)){const e=Fh.create("invalid-gtag-resource",{gtagURL:t});return kh.warn(e.message),""}return t}function Lh(t){return Promise.all(t.map((t=>t.catch((t=>t)))))}function Oh(t,e){const n=function(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}("firebase-js-sdk-policy",{createScriptURL:Ih}),i=document.createElement("script"),r=`${xh}?l=${t}&id=${e}`;i.src=n?null==n?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function Mh(t,e,n,i){return async function(r,...s){try{if("event"===r){const[i,r]=s;await async function(t,e,n,i,r){try{let s=[];if(r&&r.send_to){let t=r.send_to;Array.isArray(t)||(t=[t]);const i=await Lh(n);for(const n of t){const t=i.find((t=>t.measurementId===n)),r=t&&e[t.appId];if(!r){s=[];break}s.push(r)}}0===s.length&&(s=Object.values(e)),await Promise.all(s),t("event",i,r||{})}catch(s){kh.error(s)}}(t,e,n,i,r)}else if("config"===r){const[r,o]=s;await async function(t,e,n,i,r,s){const o=i[r];try{if(o)await e[o];else{const t=(await Lh(n)).find((t=>t.measurementId===r));t&&await e[t.appId]}}catch(a){kh.error(a)}t("config",r,s)}(t,e,n,i,r,o)}else if("consent"===r){const[e,n]=s;t("consent",e,n)}else if("get"===r){const[e,n,i]=s;t("get",e,n,i)}else if("set"===r){const[e]=s;t("set",e)}else t(r,...s)}catch(o){kh.error(o)}}}const Nh=new class{constructor(t={},e=1e3){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function Ph(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Rh(t,e=Nh,n){const{appId:i,apiKey:r,measurementId:s}=t.options;if(!i)throw Fh.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw Fh.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Vh;return setTimeout((async()=>{a.abort()}),6e4),Bh({appId:i,apiKey:r,measurementId:s},o,a,e)}async function Bh(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=Nh){var s;const{appId:o,measurementId:a}=t;try{await function(t,e){return new Promise(((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener((()=>{clearTimeout(s),i(Fh.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}(i,e)}catch(u){if(a)return kh.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==u?void 0:u.message}]`),{appId:o,measurementId:a};throw u}try{const e=await async function(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:Ph(i)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(s,r);if(200!==o.status&&304!==o.status){let t="";try{const n=await o.json();(null===(e=n.error)||void 0===e?void 0:e.message)&&(t=n.error.message)}catch(a){}throw Fh.create("config-fetch-failed",{httpStatus:o.status,responseMessage:t})}return o.json()}(t);return r.deleteThrottleMetadata(o),e}catch(u){const e=u;if(!function(t){if(!(t instanceof al&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(e)){if(r.deleteThrottleMetadata(o),a)return kh.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==e?void 0:e.message}]`),{appId:o,measurementId:a};throw u}const l=503===Number(null===(s=null==e?void 0:e.customData)||void 0===s?void 0:s.httpStatus)?dl(n,r.intervalMillis,30):dl(n,r.intervalMillis),c={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return r.setThrottleMetadata(o,c),kh.debug(`Calling attemptFetch again in ${l} millis`),Bh(t,c,i,r)}}class Vh{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach((t=>t()))}}async function Uh(t,e,n,i,r,s,o){var a;const u=Rh(t);u.then((e=>{n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&kh.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((t=>kh.error(t))),e.push(u);const l=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(){if(!rl())return kh.warn(Fh.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await sl()}catch(t){return kh.warn(Fh.create("indexeddb-unavailable",{errorInfo:null==t?void 0:t.toString()}).message),!1}return!0}().then((t=>t?i.getId():void 0)),[c,h]=await Promise.all([u,l]);(function(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(xh)&&n.src.includes(t))return n;return null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(s)||Oh(s,c.measurementId),r("js",new Date);const d=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return d.origin="firebase",d.update=!0,null!=h&&(d.firebase_id=h),r("config",c.measurementId,d),c.measurementId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zh=class{constructor(t){this.app=t}_delete(){return delete jh[this.app.options.appId],Promise.resolve()}},jh={},$h=[];const qh={};let Hh,Gh,Kh="dataLayer",Wh=!1;function Xh(t,e,n){!function(){const t=[];if(nl()&&t.push("This is a browser extension environment."),ol()||t.push("Cookies are not available."),t.length>0){const e=t.map(((t,e)=>`(${e+1}) ${t}`)).join(" "),n=Fh.create("invalid-analytics-context",{errorInfo:e});kh.warn(n.message)}}();const i=t.options.appId;if(!i)throw Fh.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Fh.create("no-api-key");kh.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=jh[i])throw Fh.create("already-exists",{id:i});if(!Wh){!function(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(Kh);const{wrappedGtag:t,gtagCore:e}=function(t,e,n,i,r){let s=function(...t){window[i].push(arguments)};return window[r]&&"function"==typeof window[r]&&(s=window[r]),window[r]=Mh(s,t,e,n),{gtagCore:s,wrappedGtag:window[r]}}(jh,$h,qh,Kh,"gtag");Gh=t,Hh=e,Wh=!0}jh[i]=Uh(t,$h,qh,e,Hh,Kh,n);return new zh(t)}function Yh(t,e,n){t=fl(t),async function(t,e,n){t("config",await e,{update:!0,user_properties:n})}(Gh,jh[t.app.options.appId],e).catch((t=>kh.error(t)))}function Qh(t,e,n,i){t=fl(t),async function(t,e,n,i,r){if(r&&r.global)t("event",n,i);else{const r=await e;t("event",n,Object.assign(Object.assign({},i),{send_to:r}))}}(Gh,jh[t.app.options.appId],e,n,i).catch((t=>kh.error(t)))}const Jh="@firebase/analytics",Zh="0.10.12";Cc(new gl(Ah,((t,{options:e})=>Xh(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),e)),"PUBLIC")),Cc(new gl("analytics-internal",(function(t){try{const e=t.getProvider(Ah).getImmediate();return{logEvent:(t,n,i)=>Qh(e,t,n,i)}}catch(e){throw Fh.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),Fc(Jh,Zh),Fc(Jh,Zh,"esm2017");var td,ed="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var t;
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */function e(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(t,e,n){n||(n=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(e^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}function i(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=0|t[r];i&&s==e||(n[r]=s,i=!1)}this.g=n}!function(t,e){function n(){}n.prototype=e.prototype,t.D=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.C=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}(e,(function(){this.blockSize=-1})),e.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},e.prototype.u=function(t,e){void 0===e&&(e=t.length);for(var i=e-this.blockSize,r=this.B,s=this.h,o=0;o<e;){if(0==s)for(;o<=i;)n(this,t,o),o+=this.blockSize;if("string"==typeof t){for(;o<e;)if(r[s++]=t.charCodeAt(o++),s==this.blockSize){n(this,r),s=0;break}}else for(;o<e;)if(r[s++]=t[o++],s==this.blockSize){n(this,r),s=0;break}}this.h=s,this.o+=e},e.prototype.v=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.o;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.u(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var r={};function s(t){return-128<=t&&128>t?function(t,e){var n=r;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(t){return new i([0|t],0>t?-1:0)})):new i([0|t],0>t?-1:0)}function o(t){if(isNaN(t)||!isFinite(t))return a;if(0>t)return d(o(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=4294967296;return new i(e,0)}var a=s(0),u=s(1),l=s(16777216);function c(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function h(t){return-1==t.h}function d(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new i(n,~t.h).add(u)}function f(t,e){return t.add(d(e))}function g(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function p(t,e){this.g=t,this.h=e}function m(t,e){if(c(e))throw Error("division by zero");if(c(t))return new p(a,a);if(h(t))return e=m(d(t),e),new p(d(e.g),d(e.h));if(h(e))return e=m(t,d(e)),new p(d(e.g),e.h);if(30<t.g.length){if(h(t)||h(e))throw Error("slowDivide_ only works with positive integers.");for(var n=u,i=e;0>=i.l(t);)n=y(n),i=y(i);var r=v(n,1),s=v(i,1);for(i=v(i,2),n=v(n,2);!c(i);){var l=s.add(i);0>=l.l(t)&&(r=r.add(n),s=l),i=v(i,1),n=v(n,1)}return e=f(t,r.j(e)),new p(r,e)}for(r=a;0<=t.l(e);){for(n=Math.max(1,Math.floor(t.m()/e.m())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),l=(s=o(n)).j(e);h(l)||0<l.l(t);)l=(s=o(n-=i)).j(e);c(s)&&(s=u),r=r.add(s),t=f(t,l)}return new p(r,t)}function y(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.i(r)<<1|t.i(r-1)>>>31;return new i(n,t.h)}function v(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],o=0;o<r;o++)s[o]=0<e?t.i(o+n)>>>e|t.i(o+n+1)<<32-e:t.i(o+n);return new i(s,t.h)}(t=i.prototype).m=function(){if(h(this))return-d(this).m();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.i(n);t+=(0<=i?i:4294967296+i)*e,e*=4294967296}return t},t.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(c(this))return"0";if(h(this))return"-"+d(this).toString(t);for(var e=o(Math.pow(t,6)),n=this,i="";;){var r=m(n,e).g,s=((0<(n=f(n,r.j(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(c(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},t.i=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},t.l=function(t){return h(t=f(this,t))?-1:c(t)?0:1},t.abs=function(){return h(this)?d(this):this},t.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var o=r+(65535&this.i(s))+(65535&t.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(t.i(s)>>>16);r=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new i(n,-2147483648&n[n.length-1]?-1:0)},t.j=function(t){if(c(this)||c(t))return a;if(h(this))return h(t)?d(this).j(d(t)):d(d(this).j(t));if(h(t))return d(this.j(d(t)));if(0>this.l(l)&&0>t.l(l))return o(this.m()*t.m());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var u=this.i(r)>>>16,f=65535&this.i(r),p=t.i(s)>>>16,m=65535&t.i(s);n[2*r+2*s]+=f*m,g(n,2*r+2*s),n[2*r+2*s+1]+=u*m,g(n,2*r+2*s+1),n[2*r+2*s+1]+=f*p,g(n,2*r+2*s+1),n[2*r+2*s+2]+=u*p,g(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new i(n,0)},t.A=function(t){return m(this,t).h},t.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)&t.i(r);return new i(n,this.h&t.h)},t.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)|t.i(r);return new i(n,this.h|t.h)},t.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)^t.i(r);return new i(n,this.h^t.h)},e.prototype.digest=e.prototype.v,e.prototype.reset=e.prototype.s,e.prototype.update=e.prototype.u,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=o,i.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return d(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=o(Math.pow(n,8)),r=a,s=0;s<e.length;s+=8){var u=Math.min(8,e.length-s),l=parseInt(e.substring(s,s+u),n);8>u?(u=o(Math.pow(n,u)),r=r.j(u).add(o(l))):r=(r=r.j(i)).add(o(l))}return r},td=i}).apply(void 0!==ed?ed:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var nd,id,rd,sd,od,ad,ud,ld,cd="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t};var n=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof cd&&cd];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(t,i){if(i)t:{var r=n;t=t.split(".");for(var s=0;s<t.length-1;s++){var o=t[s];if(!(o in r))break t;r=r[o]}(i=i(s=r[t=t[t.length-1]]))!=s&&null!=i&&e(r,t,{configurable:!0,writable:!0,value:i})}}("Array.prototype.values",(function(t){return t||function(){return function(t,e){t instanceof String&&(t+="");var n=0,i=!1,r={next:function(){if(!i&&n<t.length){var r=n++;return{value:e(r,t[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,(function(t,e){return e}))}}));
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */
var i=i||{},r=this||self;function s(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function o(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function a(t,e,n){return t.call.apply(t.bind,arguments)}function u(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function l(t,e,n){return(l=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:u).apply(null,arguments)}function c(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function h(t,e){function n(){}n.prototype=e.prototype,t.aa=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Qb=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function d(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function f(t,e){for(let n=1;n<arguments.length;n++){const e=arguments[n];if(s(e)){const n=t.length||0,i=e.length||0;t.length=n+i;for(let r=0;r<i;r++)t[n+r]=e[r]}else t.push(e)}}function g(t){return/^[\s\xa0]*$/.test(t)}function p(){var t=r.navigator;return t&&(t=t.userAgent)?t:""}function m(t){return m[" "](t),t}m[" "]=function(){};var y=!(-1==p().indexOf("Gecko")||-1!=p().toLowerCase().indexOf("webkit")&&-1==p().indexOf("Edge")||-1!=p().indexOf("Trident")||-1!=p().indexOf("MSIE")||-1!=p().indexOf("Edge"));function v(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function D(t){const e={};for(const n in t)e[n]=t[n];return e}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(t,e){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)t[n]=i[n];for(let e=0;e<b.length;e++)n=b[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function _(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function E(t){r.setTimeout((()=>{throw t}),0)}function C(){var t=k;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var T=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new S),(t=>t.reset()));class S{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}let A,x=!1,k=new class{constructor(){this.h=this.g=null}add(t,e){const n=T.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},F=()=>{const t=r.Promise.resolve(void 0);A=()=>{t.then(I)}};var I=()=>{for(var t;t=C();){try{t.h.call(t.g)}catch(kt){E(kt)}var e=T;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}x=!1};function L(){this.s=this.s,this.C=this.C}function O(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};r.addEventListener("test",t,e),r.removeEventListener("test",t,e)}catch(kt){}return t}();function N(t,e){if(O.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(y){t:{try{m(e.nodeName);var r=!0;break t}catch(s){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:P[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&N.aa.h.call(this)}}h(N,O);var P={2:"touch",3:"pen",4:"mouse"};N.prototype.h=function(){N.aa.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var R="closure_listenable_"+(1e6*Math.random()|0),B=0;function V(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ha=r,this.key=++B,this.da=this.fa=!1}function U(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function z(t){this.src=t,this.g={},this.h=0}function j(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=Array.prototype.indexOf.call(r,e,void 0);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(U(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function $(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.da&&s.listener==e&&s.capture==!!n&&s.ha==i)return r}return-1}z.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=$(t,e,i,r);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new V(e,this.src,s,!!i,r)).fa=n,t.push(e)),e};var q="closure_lm_"+(1e6*Math.random()|0),H={};function G(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)G(t,e[s],n,i,r);return null}return n=Z(n),t&&t[R]?t.K(e,n,o(i)?!!i.capture:!!i,r):function(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var a=o(r)?!!r.capture:!!r,u=Q(t);if(u||(t[q]=u=new z(t)),n=u.add(e,n,i,a,s),n.proxy)return n;if(i=function(){function t(n){return e.call(t.src,t.listener,n)}const e=Y;return t}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)M||(r=a),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(X(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}(t,e,n,!1,i,r)}function K(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)K(t,e[s],n,i,r);else i=o(i)?!!i.capture:!!i,n=Z(n),t&&t[R]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=$(s=t.g[e],n,i,r))&&(U(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--)))):t&&(t=Q(t))&&(e=t.g[e.toString()],t=-1,e&&(t=$(e,n,i,r)),(n=-1<t?e[t]:null)&&W(n))}function W(t){if("number"!=typeof t&&t&&!t.da){var e=t.src;if(e&&e[R])j(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(X(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Q(e))?(j(n,t),0==n.h&&(n.src=null,e[q]=null)):U(t)}}}function X(t){return t in H?H[t]:H[t]="on"+t}function Y(t,e){if(t.da)t=!0;else{e=new N(e,this);var n=t.listener,i=t.ha||t.src;t.fa&&W(t),t=n.call(i,e)}return t}function Q(t){return(t=t[q])instanceof z?t:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(t){return"function"==typeof t?t:(t[J]||(t[J]=function(e){return t.handleEvent(e)}),t[J])}function tt(){L.call(this),this.i=new z(this),this.M=this,this.F=null}function et(t,e){var n,i=t.F;if(i)for(n=[];i;i=i.F)n.push(i);if(t=t.M,i=e.type||e,"string"==typeof e)e=new O(e,t);else if(e instanceof O)e.target=e.target||t;else{var r=e;w(e=new O(i,t),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=nt(o,i,!0,e)&&r}if(r=nt(o=e.g=t,i,!0,e)&&r,r=nt(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)r=nt(o=e.g=n[s],i,!1,e)&&r}function nt(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.da&&o.capture==n){var a=o.listener,u=o.ha||o.src;o.fa&&j(t.i,o),r=!1!==a.call(u,i)&&r}}return r&&!i.defaultPrevented}function it(t,e,n){if("function"==typeof t)n&&(t=l(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=l(t.handleEvent,t)}return 2147483647<Number(e)?-1:r.setTimeout(t,e||0)}function rt(t){t.g=it((()=>{t.g=null,t.i&&(t.i=!1,rt(t))}),t.l);const e=t.h;t.h=null,t.m.apply(null,e)}h(tt,L),tt.prototype[R]=!0,tt.prototype.removeEventListener=function(t,e,n,i){K(this,t,e,n,i)},tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)U(n[i]);delete e.g[t],e.h--}}this.F=null},tt.prototype.K=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},tt.prototype.L=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};class st extends L{constructor(t,e){super(),this.m=t,this.l=e,this.h=null,this.i=!1,this.g=null}j(t){this.h=arguments,this.g?this.i=!0:rt(this)}N(){super.N(),this.g&&(r.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ot(t){L.call(this),this.h=t,this.g={}}h(ot,L);var at=[];function ut(t){v(t.g,(function(t,e){this.g.hasOwnProperty(e)&&W(t)}),t),t.g={}}ot.prototype.N=function(){ot.aa.N.call(this),ut(this)},ot.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lt=r.JSON.stringify,ct=r.JSON.parse,ht=class{stringify(t){return r.JSON.stringify(t,void 0)}parse(t){return r.JSON.parse(t,void 0)}};function dt(){}function ft(t){return t.h||(t.h=t.i())}function gt(){}dt.prototype.h=null;var pt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mt(){O.call(this,"d")}function yt(){O.call(this,"c")}h(mt,O),h(yt,O);var vt={},Dt=null;function bt(){return Dt=Dt||new tt}function wt(t){O.call(this,vt.La,t)}function _t(t){const e=bt();et(e,new wt(e))}function Et(t,e){O.call(this,vt.STAT_EVENT,t),this.stat=e}function Ct(t){const e=bt();et(e,new Et(e,t))}function Tt(t,e){O.call(this,vt.Ma,t),this.size=e}function St(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return r.setTimeout((function(){t()}),e)}function At(){this.g=!0}function xt(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return lt(n)}catch(a){return e}}(t,n)+(i?" "+i:"")}))}vt.La="serverreachability",h(wt,O),vt.STAT_EVENT="statevent",h(Et,O),vt.Ma="timingevent",h(Tt,O),At.prototype.xa=function(){this.g=!1},At.prototype.info=function(){};var Ft,It={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Lt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Ot(){}function Mt(t,e,n,i){this.j=t,this.i=e,this.l=n,this.R=i||1,this.U=new ot(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Nt}function Nt(){this.i=null,this.g="",this.h=!1}h(Ot,dt),Ot.prototype.g=function(){return new XMLHttpRequest},Ot.prototype.i=function(){return{}},Ft=new Ot;var Pt={},Rt={};function Bt(t,e,n){t.L=1,t.v=ce(se(e)),t.m=n,t.P=!0,Vt(t,null)}function Vt(t,e){t.F=Date.now(),jt(t),t.A=se(t.v);var n=t.A,i=t.R;Array.isArray(i)||(i=[String(i)]),Ee(n.i,"t",i),t.C=0,n=t.j.J,t.h=new Nt,t.g=hn(t.j,n?e:null,!t.m),0<t.O&&(t.M=new st(l(t.Y,t,t.g),t.O)),e=t.U,n=t.g,i=t.ca;var r="readystatechange";Array.isArray(r)||(r&&(at[0]=r.toString()),r=at);for(var s=0;s<r.length;s++){var o=G(n,r[s],i||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}e=t.H?D(t.H):{},t.m?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.m,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),_t(),function(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}(t.i,t.u,t.A,t.l,t.R,t.m)}function Ut(t){return!!t.g&&("GET"==t.u&&2!=t.L&&t.j.Ca)}function zt(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?Rt:(n=Number(e.substring(n,i)),isNaN(n)?Pt:(i+=1)+n>e.length?Rt:(e=e.slice(i,i+n),t.C=i+n,e))}function jt(t){t.S=Date.now()+t.I,$t(t,t.I)}function $t(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=St(l(t.ba,t),e)}function qt(t){t.B&&(r.clearTimeout(t.B),t.B=null)}function Ht(t){0==t.j.G||t.J||on(t.j,t)}function Gt(t){qt(t);var e=t.M;e&&"function"==typeof e.ma&&e.ma(),t.M=null,ut(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ma())}function Kt(t,e){try{var n=t.j;if(0!=n.G&&(n.g==t||Jt(n.h,t)))if(!t.K&&Jt(n.h,t)&&3==n.G){try{var i=n.Da.g.parse(e)}catch(c){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;sn(n),We(n)}en(n),Ct(18)}}else n.za=r[1],0<n.za-n.T&&37500>r[2]&&n.F&&0==n.v&&!n.C&&(n.C=St(l(n.Za,n),6e3));if(1>=Qt(n.h)&&n.ca){try{n.ca()}catch(c){}n.ca=void 0}}else un(n,11)}else if((t.K||n.g==t)&&sn(n),!g(e))for(r=n.Da.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.T=l[0],l=l[1],2==n.G)if("c"==l[0]){n.K=l[1],n.ia=l[2];const e=l[3];null!=e&&(n.la=e,n.j.info("VER="+n.la));const r=l[4];null!=r&&(n.Aa=r,n.j.info("SVER="+n.Aa));const c=l[5];null!=c&&"number"==typeof c&&0<c&&(i=1.5*c,n.L=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.h;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Zt(s,s.h),s.h=null))}if(i.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.ya=t,le(i.I,i.D,t))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-t.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=t;if((i=n).qa=cn(i,i.J?i.ia:null,i.W),o.K){te(i.h,o);var a=o,u=i.L;u&&(a.I=u),a.B&&(qt(a),jt(a)),i.g=o}else tn(i);0<n.i.length&&Ye(n)}else"stop"!=l[0]&&"close"!=l[0]||un(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?un(n,7):Ke(n):"noop"!=l[0]&&n.l&&n.l.ta(l),n.v=0)}_t()}catch(c){}}Mt.prototype.ca=function(t){t=t.target;const e=this.M;e&&3==$e(t)?e.j():this.Y(t)},Mt.prototype.Y=function(t){try{if(t==this.g)t:{const d=$e(this.g);var e=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||qe(this.g)))){this.J||4!=d||7==e||_t(),qt(this);var n=this.g.Z();this.X=n;e:if(Ut(this)){var i=qe(this.g);t="";var s=i.length,o=4==$e(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Gt(this),Ht(this);var a="";break e}this.h.i=new r.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:!(o&&e==s-1)});i.length=0,this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){e:{if(this.g){var u,l=this.g;if((u=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!g(u)){var c=u;break e}}c=null}if(!(n=c)){this.o=!1,this.s=3,Ct(12),Gt(this),Ht(this);break t}xt(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kt(this,n)}if(this.P){let t;for(n=!0;!this.J&&this.C<a.length;){if(t=zt(this,a),t==Rt){4==d&&(this.s=4,Ct(14),n=!1),xt(this.i,this.l,null,"[Incomplete Response]");break}if(t==Pt){this.s=4,Ct(15),xt(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}xt(this.i,this.l,t,null),Kt(this,t)}if(Ut(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Ct(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),nn(h),h.M=!0,Ct(11))}}else xt(this.i,this.l,a,"[Invalid Chunked Response]"),Gt(this),Ht(this)}else xt(this.i,this.l,a,null),Kt(this,a);4==d&&Gt(this),this.o&&!this.J&&(4==d?on(this.j,this):(this.o=!1,jt(this)))}else(function(t){const e={};t=(t.g&&2<=$e(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<t.length;i++){if(g(t[i]))continue;var n=_(t[i]);const r=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ct(12)):(this.s=0,Ct(13)),Gt(this),Ht(this)}}}catch(d){}},Mt.prototype.cancel=function(){this.J=!0,Gt(this)},Mt.prototype.ba=function(){this.B=null;const t=Date.now();0<=t-this.S?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.i,this.A),2!=this.L&&(_t(),Ct(17)),Gt(this),this.s=2,Ht(this)):$t(this,this.S-t)};var Wt=class{constructor(t,e){this.g=t,this.map=e}};function Xt(t){this.l=t||10,r.PerformanceNavigationTiming?t=0<(t=r.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(r.chrome&&r.chrome.loadTimes&&r.chrome.loadTimes()&&r.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Yt(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Qt(t){return t.h?1:t.g?t.g.size:0}function Jt(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Zt(t,e){t.g?t.g.add(e):t.h=e}function te(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function ee(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return d(t.i)}function ne(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(s(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.na&&"function"==typeof t.na)return t.na();if(!t.V||"function"!=typeof t.V){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(s(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}(t),i=function(t){if(t.V&&"function"==typeof t.V)return t.V();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(s(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}Xt.prototype.cancel=function(){if(this.i=ee(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var ie=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function re(t){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,t instanceof re){this.h=t.h,oe(this,t.j),this.o=t.o,this.g=t.g,ae(this,t.s),this.l=t.l;var e=t.i,n=new De;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),ue(this,n),this.m=t.m}else t&&(e=String(t).match(ie))?(this.h=!1,oe(this,e[1]||"",!0),this.o=he(e[2]||""),this.g=he(e[3]||"",!0),ae(this,e[4]),this.l=he(e[5]||"",!0),ue(this,e[6]||"",!0),this.m=he(e[7]||"")):(this.h=!1,this.i=new De(null,this.h))}function se(t){return new re(t)}function oe(t,e,n){t.j=n?he(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ae(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.s=e}else t.s=null}function ue(t,e,n){e instanceof De?(t.i=e,function(t,e){e&&!t.j&&(be(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(we(this,e),Ee(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=de(e,ye)),t.i=new De(e,t.h))}function le(t,e,n){t.i.set(e,n)}function ce(t){return le(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function he(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function de(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,fe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function fe(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}re.prototype.toString=function(){var t=[],e=this.j;e&&t.push(de(e,ge,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.o)&&t.push(de(e,ge,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(de(n,"/"==n.charAt(0)?me:pe,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.m)&&t.push("#",de(n,ve)),t.join("")};var ge=/[#\/\?@]/g,pe=/[#\?:]/g,me=/[#\?]/g,ye=/[#\?@]/g,ve=/#/g;function De(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function be(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function we(t,e){be(t),e=Ce(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function _e(t,e){return be(t),e=Ce(t,e),t.g.has(e)}function Ee(t,e,n){we(t,e),0<n.length&&(t.i=null,t.g.set(Ce(t,e),d(n)),t.h+=n.length)}function Ce(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Te(t,e,n,i,r){try{r&&(r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null),i(n)}catch(s){}}function Se(){this.g=new ht}function Ae(t,e,n){const i=n||"";try{ne(t,(function(t,n){let r=t;o(t)&&(r=lt(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function xe(t){this.l=t.Ub||null,this.j=t.eb||!1}function ke(t,e){tt.call(this),this.D=t,this.o=e,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Fe(t){t.j.read().then(t.Pa.bind(t)).catch(t.ga.bind(t))}function Ie(t){t.readyState=4,t.l=null,t.j=null,t.v=null,Le(t)}function Le(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Oe(t){let e="";return v(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Me(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=Oe(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):le(t,e,n))}function Ne(t){tt.call(this),this.headers=new Map,this.o=t||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=De.prototype).add=function(t,e){be(this),this.i=null,t=Ce(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},t.forEach=function(t,e){be(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},t.na=function(){be(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let t=0;t<r.length;t++)n.push(e[i])}return n},t.V=function(t){be(this);let e=[];if("string"==typeof t)_e(this,t)&&(e=e.concat(this.g.get(Ce(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},t.set=function(t,e){return be(this),this.i=null,_e(this,t=Ce(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.V(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")},h(xe,dt),xe.prototype.g=function(){return new ke(this.l,this.j)},xe.prototype.i=function(t){return function(){return t}}({}),h(ke,tt),(t=ke.prototype).open=function(t,e){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=t,this.A=e,this.readyState=1,Le(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.u,method:this.B,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||r).fetch(new Request(this.A,e)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ie(this)),this.readyState=0},t.Sa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Le(this)),this.g&&(this.readyState=3,Le(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==r.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fe(this)}else t.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var e=t.value?t.value:new Uint8Array(0);(e=this.v.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ie(this):Le(this),3==this.readyState&&Fe(this)}},t.Ra=function(t){this.g&&(this.response=this.responseText=t,Ie(this))},t.Qa=function(t){this.g&&(this.response=t,Ie(this))},t.ga=function(){this.g&&Ie(this)},t.setRequestHeader=function(t,e){this.u.append(t,e)},t.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ke.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}}),h(Ne,tt);var Pe=/^https?$/i,Re=["POST","PUT"];function Be(t,e){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=e,t.m=5,Ve(t),ze(t)}function Ve(t){t.A||(t.A=!0,et(t,"complete"),et(t,"error"))}function Ue(t){if(t.h&&void 0!==i&&(!t.v[1]||4!=$e(t)||2!=t.Z()))if(t.u&&4==$e(t))it(t.Ea,0,t);else if(et(t,"readystatechange"),4==$e(t)){t.h=!1;try{const i=t.Z();t:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var s;if(s=0===i){var o=String(t.D).match(ie)[1]||null;!o&&r.self&&r.self.location&&(o=r.self.location.protocol.slice(0,-1)),s=!Pe.test(o?o.toLowerCase():"")}n=s}if(n)et(t,"complete"),et(t,"success");else{t.m=6;try{var a=2<$e(t)?t.g.statusText:""}catch(u){a=""}t.l=a+" ["+t.Z()+"]",Ve(t)}}finally{ze(t)}}}function ze(t,e){if(t.g){je(t);const i=t.g,r=t.v[0]?()=>{}:null;t.g=null,t.v=null,e||et(t,"ready");try{i.onreadystatechange=r}catch(n){}}}function je(t){t.I&&(r.clearTimeout(t.I),t.I=null)}function $e(t){return t.g?t.g.readyState:0}function qe(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.H){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function He(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ge(t){this.Aa=0,this.i=[],this.j=new At,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=He("failFast",!1,t),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=He("baseRetryDelayMs",5e3,t),this.cb=He("retryDelaySeedMs",1e4,t),this.Wa=He("forwardChannelMaxRetries",2,t),this.wa=He("forwardChannelRequestTimeoutMs",2e4,t),this.pa=t&&t.xmlHttpFactory||void 0,this.Xa=t&&t.Tb||void 0,this.Ca=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.h=new Xt(t&&t.concurrentRequestLimit),this.Da=new Se,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=t&&t.Rb||!1,t&&t.xa&&this.j.xa(),t&&t.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&t&&t.detectBufferingProxy||!1,this.ja=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.ja=t.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Ke(t){if(Xe(t),3==t.G){var e=t.U++,n=se(t.I);if(le(n,"SID",t.K),le(n,"RID",e),le(n,"TYPE","terminate"),Je(t,n),(e=new Mt(t,t.j,e)).L=2,e.v=ce(se(n)),n=!1,r.navigator&&r.navigator.sendBeacon)try{n=r.navigator.sendBeacon(e.v.toString(),"")}catch(i){}!n&&r.Image&&((new Image).src=e.v,n=!0),n||(e.g=hn(e.j,null),e.g.ea(e.v)),e.F=Date.now(),jt(e)}ln(t)}function We(t){t.g&&(nn(t),t.g.cancel(),t.g=null)}function Xe(t){We(t),t.u&&(r.clearTimeout(t.u),t.u=null),sn(t),t.h.cancel(),t.s&&("number"==typeof t.s&&r.clearTimeout(t.s),t.s=null)}function Ye(t){if(!Yt(t.h)&&!t.s){t.s=!0;var e=t.Ga;A||F(),x||(A(),x=!0),k.add(e,t),t.B=0}}function Qe(t,e){var n;n=e?e.l:t.U++;const i=se(t.I);le(i,"SID",t.K),le(i,"RID",n),le(i,"AID",t.T),Je(t,i),t.m&&t.o&&Me(i,t.m,t.o),n=new Mt(t,t.j,n,t.B+1),null===t.m&&(n.H=t.o),e&&(t.i=e.D.concat(t.i)),e=Ze(t,n,1e3),n.I=Math.round(.5*t.wa)+Math.round(.5*t.wa*Math.random()),Zt(t.h,n),Bt(n,i,e)}function Je(t,e){t.H&&v(t.H,(function(t,n){le(e,n,t)})),t.l&&ne({},(function(t,n){le(e,n,t)}))}function Ze(t,e,n){n=Math.min(t.i.length,n);var i=t.l?l(t.l.Na,t.l,t):null;t:{var r=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let o=!0;for(let a=0;a<n;a++){let n=r[a].g;const u=r[a].map;if(n-=e,0>n)e=Math.max(0,r[a].g-100),o=!1;else try{Ae(u,t,"req"+n+"_")}catch(s){i&&i(u)}}if(o){i=t.join("&");break t}}}return t=t.i.splice(0,n),e.D=t,i}function tn(t){if(!t.g&&!t.u){t.Y=1;var e=t.Fa;A||F(),x||(A(),x=!0),k.add(e,t),t.v=0}}function en(t){return!(t.g||t.u||3<=t.v)&&(t.Y++,t.u=St(l(t.Fa,t),an(t,t.v)),t.v++,!0)}function nn(t){null!=t.A&&(r.clearTimeout(t.A),t.A=null)}function rn(t){t.g=new Mt(t,t.j,"rpc",t.Y),null===t.m&&(t.g.H=t.o),t.g.O=0;var e=se(t.qa);le(e,"RID","rpc"),le(e,"SID",t.K),le(e,"AID",t.T),le(e,"CI",t.F?"0":"1"),!t.F&&t.ja&&le(e,"TO",t.ja),le(e,"TYPE","xmlhttp"),Je(t,e),t.m&&t.o&&Me(e,t.m,t.o),t.L&&(t.g.I=t.L);var n=t.g;t=t.ia,n.L=1,n.v=ce(se(e)),n.m=null,n.P=!0,Vt(n,t)}function sn(t){null!=t.C&&(r.clearTimeout(t.C),t.C=null)}function on(t,e){var n=null;if(t.g==e){sn(t),nn(t),t.g=null;var i=2}else{if(!Jt(t.h,e))return;n=e.D,te(t.h,e),i=1}if(0!=t.G)if(e.o)if(1==i){n=e.m?e.m.length:0,e=Date.now()-e.F;var r=t.B;et(i=bt(),new Tt(i,n)),Ye(t)}else tn(t);else if(3==(r=e.s)||0==r&&0<e.X||!(1==i&&function(t,e){return!(Qt(t.h)>=t.h.j-(t.s?1:0)||(t.s?(t.i=e.D.concat(t.i),0):1==t.G||2==t.G||t.B>=(t.Va?0:t.Wa)||(t.s=St(l(t.Ga,t,e),an(t,t.B)),t.B++,0)))}(t,e)||2==i&&en(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:un(t,5);break;case 4:un(t,10);break;case 3:un(t,6);break;default:un(t,2)}}function an(t,e){let n=t.Ta+Math.floor(Math.random()*t.cb);return t.isActive()||(n*=2),n*e}function un(t,e){if(t.j.info("Error code "+e),2==e){var n=l(t.fb,t),i=t.Xa;const e=!i;i=new re(i||"//www.google.com/images/cleardot.gif"),r.location&&"http"==r.location.protocol||oe(i,"https"),ce(i),e?function(t,e){const n=new At;if(r.Image){const i=new Image;i.onload=c(Te,n,"TestLoadImage: loaded",!0,e,i),i.onerror=c(Te,n,"TestLoadImage: error",!1,e,i),i.onabort=c(Te,n,"TestLoadImage: abort",!1,e,i),i.ontimeout=c(Te,n,"TestLoadImage: timeout",!1,e,i),r.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(i.toString(),n):function(t,e){new At;const n=new AbortController,i=setTimeout((()=>{n.abort(),Te(0,0,!1,e)}),1e4);fetch(t,{signal:n.signal}).then((t=>{clearTimeout(i),t.ok?Te(0,0,!0,e):Te(0,0,!1,e)})).catch((()=>{clearTimeout(i),Te(0,0,!1,e)}))}(i.toString(),n)}else Ct(2);t.G=0,t.l&&t.l.sa(e),ln(t),Xe(t)}function ln(t){if(t.G=0,t.ka=[],t.l){const e=ee(t.h);0==e.length&&0==t.i.length||(f(t.ka,e),f(t.ka,t.i),t.h.i.length=0,d(t.i),t.i.length=0),t.l.ra()}}function cn(t,e,n){var i=n instanceof re?se(n):new re(n);if(""!=i.g)e&&(i.g=e+"."+i.g),ae(i,i.s);else{var s=r.location;i=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var o=new re(null);i&&oe(o,i),e&&(o.g=e),s&&ae(o,s),n&&(o.l=n),i=o}return n=t.D,e=t.ya,n&&e&&le(i,n,e),le(i,"VER",t.la),Je(t,i),i}function hn(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ca&&!t.pa?new Ne(new xe({eb:n})):new Ne(t.pa)).Ha(t.J),e}function dn(){}function fn(){}function gn(t,e){tt.call(this),this.g=new Ge(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.va&&(t?t["X-WebChannel-Client-Profile"]=e.va:t={"X-WebChannel-Client-Profile":e.va}),this.g.S=t,(t=e&&e.Sb)&&!g(t)&&(this.g.m=t),this.v=e&&e.supportsCrossDomainXhr||!1,this.u=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!g(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new yn(this)}function pn(t){mt.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function mn(){yt.call(this),this.status=1}function yn(t){this.g=t}(t=Ne.prototype).Ha=function(t){this.J=t},t.ea=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ft.g(),this.v=this.o?ft(this.o):ft(Ft),this.g.onreadystatechange=l(this.Ea,this);try{this.B=!0,this.g.open(e,String(t),!0),this.B=!1}catch(o){return void Be(this,o)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),s=r.FormData&&t instanceof r.FormData,!(0<=Array.prototype.indexOf.call(Re,e,void 0))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,a]of n)this.g.setRequestHeader(r,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{je(this),this.u=!0,this.g.send(t),this.u=!1}catch(o){Be(this,o)}},t.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=t||7,et(this,"complete"),et(this,"abort"),ze(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ze(this,!0)),Ne.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ue(this):this.bb())},t.bb=function(){Ue(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<$e(this)?this.g.status:-1}catch(t){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},t.Oa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ct(e)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=Ge.prototype).la=8,t.G=1,t.connect=function(t,e,n,i){Ct(0),this.W=t,this.H=e||{},n&&void 0!==i&&(this.H.OSID=n,this.H.OAID=i),this.F=this.X,this.I=cn(this,null,this.W),Ye(this)},t.Ga=function(t){if(this.s)if(this.s=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const r=new Mt(this,this.j,t);let s=this.o;if(this.S&&(s?(s=D(s),w(s,this.S)):s=this.S),null!==this.m||this.O||(r.H=s,s=null),this.P)t:{for(var e=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=Ze(this,r,e),le(n=se(this.I),"RID",t),le(n,"CVER",22),this.D&&le(n,"X-HTTP-Session-Id",this.D),Je(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Oe(s)))+"&"+e:this.m&&Me(n,this.m,s)),Zt(this.h,r),this.Ua&&le(n,"TYPE","init"),this.P?(le(n,"$req",e),le(n,"SID","null"),r.T=!0,Bt(r,n,null)):Bt(r,n,e),this.G=2}}else 3==this.G&&(t?Qe(this,t):0==this.i.length||Yt(this.h)||Qe(this))},t.Fa=function(){if(this.u=null,rn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var t=2*this.R;this.j.info("BP detection timer enabled: "+t),this.A=St(l(this.ab,this),t)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ct(10),We(this),rn(this))},t.Za=function(){null!=this.C&&(this.C=null,We(this),en(this),Ct(19))},t.fb=function(t){t?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=dn.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},fn.prototype.g=function(t,e){return new gn(t,e)},h(gn,tt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Ke(this.g)},gn.prototype.o=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.u&&((n={}).__data__=lt(t),t=n);e.i.push(new Wt(e.Ya++,t)),3==e.G&&Ye(e)},gn.prototype.N=function(){this.g.l=null,delete this.j,Ke(this.g),delete this.g,gn.aa.N.call(this)},h(pn,mt),h(mn,yt),h(yn,dn),yn.prototype.ua=function(){et(this.g,"a")},yn.prototype.ta=function(t){et(this.g,new pn(t))},yn.prototype.sa=function(t){et(this.g,new mn)},yn.prototype.ra=function(){et(this.g,"b")},fn.prototype.createWebChannel=fn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,ld=function(){return new fn},ud=function(){return bt()},ad=vt,od={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},It.NO_ERROR=0,It.TIMEOUT=8,It.HTTP_ERROR=6,sd=It,Lt.COMPLETE="complete",rd=Lt,gt.EventType=pt,pt.OPEN="a",pt.CLOSE="b",pt.ERROR="c",pt.MESSAGE="d",tt.prototype.listen=tt.prototype.K,id=gt,Ne.prototype.listenOnce=Ne.prototype.L,Ne.prototype.getLastError=Ne.prototype.Ka,Ne.prototype.getLastErrorCode=Ne.prototype.Ba,Ne.prototype.getStatus=Ne.prototype.Z,Ne.prototype.getResponseJson=Ne.prototype.Oa,Ne.prototype.getResponseText=Ne.prototype.oa,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Ha,nd=Ne}).apply(void 0!==cd?cd:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const hd="@firebase/firestore",dd="4.7.9";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}fd.UNAUTHENTICATED=new fd(null),fd.GOOGLE_CREDENTIALS=new fd("google-credentials-uid"),fd.FIRST_PARTY=new fd("first-party-uid"),fd.MOCK_USER=new fd("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let gd="11.4.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd=new Cl("@firebase/firestore");function md(){return pd.logLevel}function yd(t,...e){if(pd.logLevel<=vl.DEBUG){const n=e.map(bd);pd.debug(`Firestore (${gd}): ${t}`,...n)}}function vd(t,...e){if(pd.logLevel<=vl.ERROR){const n=e.map(bd);pd.error(`Firestore (${gd}): ${t}`,...n)}}function Dd(t,...e){if(pd.logLevel<=vl.WARN){const n=e.map(bd);pd.warn(`Firestore (${gd}): ${t}`,...n)}}function bd(t){if("string"==typeof t)return t;try{
/**
    * @license
    * Copyright 2020 Google LLC
    *
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    *   http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    */
return e=t,JSON.stringify(e)}catch(n){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(t="Unexpected state"){const e=`FIRESTORE (${gd}) INTERNAL ASSERTION FAILED: `+t;throw vd(e),new Error(e)}function _d(t,e){t||wd()}function Ed(t,e){return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Td extends al{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class xd{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(fd.UNAUTHENTICATED)))}shutdown(){}}class kd{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class Fd{constructor(t){this.t=t,this.currentUser=fd.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){_d(void 0===this.o);let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new Sd;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Sd,t.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{yd("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(yd("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Sd)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(yd("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(_d("string"==typeof e.accessToken),new Ad(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return _d(null===t||"string"==typeof t),new fd(t)}}class Id{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=fd.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Ld{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new Id(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(fd.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Od{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Md{constructor(t,e){var n;this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,null!=(n=t)&&void 0!==n.settings&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,e){_d(void 0===this.o);const n=t=>{null!=t.error&&yd("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.R;return this.R=t.token,yd("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{yd("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?i(t):yd("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.V)return Promise.resolve(new Od(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(_d("string"==typeof t.token),this.R=t.token,new Od(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{static newId(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=Nd(40);for(let i=0;i<n.length;++i)e.length<20&&n[i]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[i]%62))}return e}}function Rd(t,e){return t<e?-1:t>e?1:0}function Bd(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd=-62135596800,Ud=1e6;class zd{static now(){return zd.fromMillis(Date.now())}static fromDate(t){return zd.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor((t-1e3*e)*Ud);return new zd(e,n)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Td(Cd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Td(Cd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<Vd)throw new Td(Cd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Td(Cd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ud}_compareTo(t){return this.seconds===t.seconds?Rd(this.nanoseconds,t.nanoseconds):Rd(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-Vd;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{static fromTimestamp(t){return new jd(t)}static min(){return new jd(new zd(0,0))}static max(){return new jd(new zd(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="__name__";class qd{constructor(t,e,n){void 0===e?e=0:e>t.length&&wd(),void 0===n?n=t.length-e:n>t.length-e&&wd(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===qd.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof qd?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=qd.compareSegments(t.get(i),e.get(i));if(0!==n)return n}return Math.sign(t.length-e.length)}static compareSegments(t,e){const n=qd.isNumericId(t),i=qd.isNumericId(e);return n&&!i?-1:!n&&i?1:n&&i?qd.extractNumericId(t).compare(qd.extractNumericId(e)):t<e?-1:t>e?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return td.fromString(t.substring(4,t.length-2))}}class Hd extends qd{construct(t,e,n){return new Hd(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Td(Cd.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new Hd(e)}static emptyPath(){return new Hd([])}}const Gd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kd extends qd{construct(t,e,n){return new Kd(t,e,n)}static isValidIdentifier(t){return Gd.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kd.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===$d}static keyField(){return new Kd([$d])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new Td(Cd.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new Td(Cd.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Td(Cd.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new Td(Cd.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Kd(e)}static emptyPath(){return new Kd([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(t){this.path=t}static fromPath(t){return new Wd(Hd.fromString(t))}static fromName(t){return new Wd(Hd.fromString(t).popFirst(5))}static empty(){return new Wd(Hd.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Hd.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Hd.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Wd(new Hd(t.slice()))}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(t){return new Yd(t.readTime,t.key,-1)}class Yd{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new Yd(jd.min(),Wd.empty(),-1)}static max(){return new Yd(jd.max(),Wd.empty(),-1)}}function Qd(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=Wd.comparator(t.documentKey,e.documentKey),0!==n?n:Rd(t.largestBatchId,e.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class Jd{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zd(t){if(t.code!==Cd.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==t.message)throw t;yd("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&wd(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new tf(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof tf?e:tf.resolve(e)}catch(e){return tf.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):tf.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):tf.reject(e)}static resolve(t){return new tf(((e,n)=>{e(t)}))}static reject(t){return new tf(((e,n)=>{n(t)}))}static waitFor(t){return new tf(((e,n)=>{let i=0,r=0,s=!1;t.forEach((t=>{++i,t.next((()=>{++r,s&&r===i&&e()}),(t=>n(t)))})),s=!0,r===i&&e()}))}static or(t){let e=tf.resolve(!1);for(const n of t)e=e.next((t=>t?tf.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}static mapArray(t,e){return new tf(((n,i)=>{const r=t.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const u=a;e(t[u]).next((t=>{s[u]=t,++o,o===r&&n(s)}),(t=>i(t)))}}))}static doWhile(t,e){return new tf(((n,i)=>{const r=()=>{!0===t()?e().next((()=>{r()}),i):n()};r()}))}}function ef(t){return"IndexedDbTransactionError"===t.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.oe(t),this._e=t=>e.writeSequenceNumber(t))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}nf.ae=-1;function rf(t){return null==t}function sf(t){return 0===t&&1/t==-1/0}function of(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const e=t.charAt(r);switch(e){case"\0":n+="";break;case"":n+="";break;default:n+=e}}return n}function af(t){return t+""}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function lf(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function cf(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(t,e){this.comparator=t,this.root=e||ff.EMPTY}insert(t,e){return new hf(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ff.BLACK,null,null))}remove(t){return new hf(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ff.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new df(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new df(this.root,t,this.comparator,!1)}getReverseIterator(){return new df(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new df(this.root,t,this.comparator,!0)}}class df{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ff{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:ff.RED,this.left=null!=i?i:ff.EMPTY,this.right=null!=r?r:ff.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new ff(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ff.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return ff.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ff.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ff.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw wd();if(this.right.isRed())throw wd();const t=this.left.check();if(t!==this.right.check())throw wd();return t+(this.isRed()?0:1)}}ff.EMPTY=null,ff.RED=!0,ff.BLACK=!1,ff.EMPTY=new class{constructor(){this.size=0}get key(){throw wd()}get value(){throw wd()}get color(){throw wd()}get left(){throw wd()}get right(){throw wd()}copy(t,e,n,i,r){return this}insert(t,e,n){return new ff(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class gf{constructor(t){this.comparator=t,this.data=new hf(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new pf(this.data.getIterator())}getIteratorFrom(t){return new pf(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof gf))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new gf(this.comparator);return e.data=t,e}}class pf{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(t){this.fields=t,t.sort(Kd.comparator)}static empty(){return new mf([])}unionWith(t){let e=new gf(Kd.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new mf(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Bd(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new yf("Invalid base64 string: "+e):e}}(t);return new vf(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new vf(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Rd(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}vf.EMPTY_BYTE_STRING=new vf("");const Df=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bf(t){if(_d(!!t),"string"==typeof t){let e=0;const n=Df.exec(t);if(_d(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:wf(t.seconds),nanos:wf(t.nanos)}}function wf(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function _f(t){return"string"==typeof t?vf.fromBase64String(t):vf.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef="server_timestamp",Cf="__type__",Tf="__previous_value__",Sf="__local_write_time__";function Af(t){var e,n;return(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{})[Cf])||void 0===n?void 0:n.stringValue)===Ef}function xf(t){const e=t.mapValue.fields[Tf];return Af(e)?xf(e):e}function kf(t){const e=bf(t.mapValue.fields[Sf].timestampValue);return new zd(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(t,e,n,i,r,s,o,a,u){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=u}}const If="(default)";class Lf{constructor(t,e){this.projectId=t,this.database=e||If}static empty(){return new Lf("","")}get isDefaultDatabase(){return this.database===If}isEqual(t){return t instanceof Lf&&t.projectId===this.projectId&&t.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of="__type__",Mf="__max__",Nf={fields:{__type__:{stringValue:Mf}}},Pf="__vector__",Rf="value";function Bf(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Af(t)?4:function(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Mf}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)?9007199254740991:function(t){var e,n;return(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{})[Of])||void 0===n?void 0:n.stringValue)===Pf}(t)?10:11:wd()}function Vf(t,e){if(t===e)return!0;const n=Bf(t);if(n!==Bf(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return kf(t).isEqual(kf(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=bf(t.timestampValue),i=bf(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return i=e,_f(t.bytesValue).isEqual(_f(i.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return wf(t.geoPointValue.latitude)===wf(e.geoPointValue.latitude)&&wf(t.geoPointValue.longitude)===wf(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return wf(t.integerValue)===wf(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=wf(t.doubleValue),i=wf(e.doubleValue);return n===i?sf(n)===sf(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return Bd(t.arrayValue.values||[],e.arrayValue.values||[],Vf);case 10:case 11:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(uf(n)!==uf(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!Vf(n[r],i[r])))return!1;return!0}(t,e);default:return wd()}var i}function Uf(t,e){return void 0!==(t.values||[]).find((t=>Vf(t,e)))}function zf(t,e){if(t===e)return 0;const n=Bf(t),i=Bf(e);if(n!==i)return Rd(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Rd(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=wf(t.integerValue||t.doubleValue),i=wf(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return jf(t.timestampValue,e.timestampValue);case 4:return jf(kf(t),kf(e));case 5:return Rd(t.stringValue,e.stringValue);case 6:return function(t,e){const n=_f(t),i=_f(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let r=0;r<n.length&&r<i.length;r++){const t=Rd(n[r],i[r]);if(0!==t)return t}return Rd(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=Rd(wf(t.latitude),wf(e.latitude));return 0!==n?n:Rd(wf(t.longitude),wf(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return $f(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n,i,r,s;const o=t.fields||{},a=e.fields||{},u=null===(n=o[Rf])||void 0===n?void 0:n.arrayValue,l=null===(i=a[Rf])||void 0===i?void 0:i.arrayValue,c=Rd((null===(r=null==u?void 0:u.values)||void 0===r?void 0:r.length)||0,(null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0);return 0!==c?c:$f(u,l)}(t.mapValue,e.mapValue);case 11:return function(t,e){if(t===Nf&&e===Nf)return 0;if(t===Nf)return 1;if(e===Nf)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let o=0;o<i.length&&o<s.length;++o){const t=Rd(i[o],s[o]);if(0!==t)return t;const e=zf(n[i[o]],r[s[o]]);if(0!==e)return e}return Rd(i.length,s.length)}(t.mapValue,e.mapValue);default:throw wd()}}function jf(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Rd(t,e);const n=bf(t),i=bf(e),r=Rd(n.seconds,i.seconds);return 0!==r?r:Rd(n.nanos,i.nanos)}function $f(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const t=zf(n[r],i[r]);if(t)return t}return Rd(n.length,i.length)}function qf(t){return Hf(t)}function Hf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=bf(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?_f(t.bytesValue).toBase64():"referenceValue"in t?function(t){return Wd.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=Hf(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+=`${r}:${Hf(t.fields[r])}`;return n+"}"}(t.mapValue):wd()}function Gf(t){switch(Bf(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xf(t);return e?16+Gf(e):16;case 5:return 2*t.stringValue.length;case 6:return _f(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(t.arrayValue.values||[]).reduce(((t,e)=>t+Gf(e)),0);case 10:case 11:return function(t){let e=0;return lf(t.fields,((t,n)=>{e+=t.length+Gf(n)})),e}(t.mapValue);default:throw wd()}}function Kf(t){return!!t&&"integerValue"in t}function Wf(t){return!!t&&"arrayValue"in t}function Xf(t){return!!t&&"mapValue"in t}function Yf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return lf(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Yf(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Yf(t.arrayValue.values[n]);return e}return Object.assign({},t)}class Qf{constructor(t){this.value=t}static empty(){return new Qf({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Xf(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Yf(e)}setAll(t){let e=Kd.emptyPath(),n={},i=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=Yf(t):i.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());Xf(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Vf(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];Xf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){lf(e,((e,n)=>t[e]=n));for(const i of n)delete t[i]}clone(){return new Qf(Yf(this.value))}}function Jf(t){const e=[];return lf(t.fields,((t,n)=>{const i=new Kd([t]);if(Xf(n)){const t=Jf(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new mf(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Zf{constructor(t,e,n,i,r,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(t){return new Zf(t,0,jd.min(),jd.min(),jd.min(),Qf.empty(),0)}static newFoundDocument(t,e,n,i){return new Zf(t,1,e,jd.min(),n,i,0)}static newNoDocument(t,e){return new Zf(t,2,e,jd.min(),jd.min(),Qf.empty(),0)}static newUnknownDocument(t,e){return new Zf(t,3,e,jd.min(),jd.min(),Qf.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(jd.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Qf.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Qf.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=jd.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Zf&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Zf(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(t,e){this.position=t,this.inclusive=e}}function eg(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?Wd.comparator(Wd.fromName(o.referenceValue),n.key):zf(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function ng(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vf(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(t,e="asc"){this.field=t,this.dir=e}}function rg(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{}class og extends sg{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new fg(t,e,n):"array-contains"===e?new yg(t,n):"in"===e?new vg(t,n):"not-in"===e?new Dg(t,n):"array-contains-any"===e?new bg(t,n):new og(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new gg(t,n):new pg(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(zf(e,this.value)):null!==e&&Bf(this.value)===Bf(e)&&this.matchesComparison(zf(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return wd()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ag extends sg{constructor(t,e){super(),this.filters=t,this.op=e,this.ce=null}static create(t,e){return new ag(t,e)}matches(t){return ug(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function ug(t){return"and"===t.op}function lg(t){return function(t){for(const e of t.filters)if(e instanceof ag)return!1;return!0}(t)&&ug(t)}function cg(t){if(t instanceof og)return t.field.canonicalString()+t.op.toString()+qf(t.value);if(lg(t))return t.filters.map((t=>cg(t))).join(",");{const e=t.filters.map((t=>cg(t))).join(",");return`${t.op}(${e})`}}function hg(t,e){return t instanceof og?(n=t,(i=e)instanceof og&&n.op===i.op&&n.field.isEqual(i.field)&&Vf(n.value,i.value)):t instanceof ag?function(t,e){return e instanceof ag&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,i)=>t&&hg(n,e.filters[i])),!0)}(t,e):void wd();var n,i}function dg(t){return t instanceof og?`${(e=t).field.canonicalString()} ${e.op} ${qf(e.value)}`:t instanceof ag?function(t){return t.op.toString()+" {"+t.getFilters().map(dg).join(" ,")+"}"}(t):"Filter";var e}class fg extends og{constructor(t,e,n){super(t,e,n),this.key=Wd.fromName(n.referenceValue)}matches(t){const e=Wd.comparator(t.key,this.key);return this.matchesComparison(e)}}class gg extends og{constructor(t,e){super(t,"in",e),this.keys=mg("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class pg extends og{constructor(t,e){super(t,"not-in",e),this.keys=mg("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function mg(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>Wd.fromName(t.referenceValue)))}class yg extends og{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Wf(e)&&Uf(e.arrayValue,this.value)}}class vg extends og{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Uf(this.value.arrayValue,e)}}class Dg extends og{constructor(t,e){super(t,"not-in",e)}matches(t){if(Uf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Uf(this.value.arrayValue,e)}}class bg extends og{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Wf(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>Uf(this.value.arrayValue,t)))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(t,e=null,n=[],i=[],r=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.le=null}}function _g(t,e=null,n=[],i=[],r=null,s=null,o=null){return new wg(t,e,n,i,r,s,o)}function Eg(t){const e=Ed(t);if(null===e.le){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>cg(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>{return(e=t).field.canonicalString()+e.dir;var e})).join(","),rf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>qf(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>qf(t))).join(",")),e.le=t}return e.le}function Cg(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!rg(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hg(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ng(t.startAt,e.startAt)&&ng(t.endAt,e.endAt)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(t,e=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Sg(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Ag(t){const e=Ed(t);if(null===e.he){e.he=[];const t=new Set;for(const i of e.explicitOrderBy)e.he.push(i),t.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(t){let e=new gf(Kd.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.he.push(new ig(i,n))})),t.has(Kd.keyField().canonicalString())||e.he.push(new ig(Kd.keyField(),n))}return e.he}function xg(t){const e=Ed(t);return e.Pe||(e.Pe=function(t,e){if("F"===t.limitType)return _g(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new ig(t.field,e)}));const n=t.endAt?new tg(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new tg(t.startAt.position,t.startAt.inclusive):null;return _g(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}(e,Ag(t))),e.Pe}function kg(t,e,n){return new Tg(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Fg(t,e){return Cg(xg(t),xg(e))&&t.limitType===e.limitType}function Ig(t){return`${Eg(xg(t))}|lt:${t.limitType}`}function Lg(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>dg(t))).join(", ")}]`),rf(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>{return`${(e=t).field.canonicalString()} (${e.dir})`;var e})).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>qf(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>qf(t))).join(",")),`Target(${e})`}(xg(t))}; limitType=${t.limitType})`}function Og(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Wd.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of Ag(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&(i=e,!((n=t).startAt&&!function(t,e,n){const i=eg(t,e,n);return t.inclusive?i<=0:i<0}(n.startAt,Ag(n),i)||n.endAt&&!function(t,e,n){const i=eg(t,e,n);return t.inclusive?i>=0:i>0}(n.endAt,Ag(n),i)));var n,i}function Mg(t,e,n){const i=t.field.isKeyField()?Wd.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?zf(i,r):wd()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return wd()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){lf(this.inner,((e,n)=>{for(const[i,r]of n)t(i,r)}))}isEmpty(){return cf(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg=new hf(Wd.comparator);function Rg(){return Pg}const Bg=new hf(Wd.comparator);function Vg(...t){let e=Bg;for(const n of t)e=e.insert(n.key,n);return e}function Ug(t){let e=Bg;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function zg(){return $g()}function jg(){return $g()}function $g(){return new Ng((t=>t.toString()),((t,e)=>t.isEqual(e)))}const qg=new hf(Wd.comparator),Hg=new gf(Wd.comparator);function Gg(...t){let e=Hg;for(const n of t)e=e.add(n);return e}const Kg=new gf(Rd);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Wg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sf(e)?"-0":e}}function Xg(t){return{integerValue:""+t}}function Yg(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!sf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)?Xg(e):Wg(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(){this._=void 0}}function Jg(t,e,n){return t instanceof ep?function(t,e){const n={fields:{[Cf]:{stringValue:Ef},[Sf]:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&Af(e)&&(e=xf(e)),e&&(n.fields[Tf]=e),{mapValue:n}}(n,e):t instanceof np?ip(t,e):t instanceof rp?sp(t,e):function(t,e){const n=tp(t,e),i=ap(n)+ap(t.Ie);return Kf(n)&&Kf(t.Ie)?Xg(i):Wg(t.serializer,i)}(t,e)}function Zg(t,e,n){return t instanceof np?ip(t,e):t instanceof rp?sp(t,e):n}function tp(t,e){return t instanceof op?Kf(n=e)||(i=n)&&"doubleValue"in i?e:{integerValue:0}:null;var n,i}class ep extends Qg{}class np extends Qg{constructor(t){super(),this.elements=t}}function ip(t,e){const n=up(e);for(const i of t.elements)n.some((t=>Vf(t,i)))||n.push(i);return{arrayValue:{values:n}}}class rp extends Qg{constructor(t){super(),this.elements=t}}function sp(t,e){let n=up(e);for(const i of t.elements)n=n.filter((t=>!Vf(t,i)));return{arrayValue:{values:n}}}class op extends Qg{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function ap(t){return wf(t.integerValue||t.doubleValue)}function up(t){return Wf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(t,e){this.field=t,this.transform=e}}class cp{constructor(t,e){this.version=t,this.transformResults=e}}class hp{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new hp}static exists(t){return new hp(void 0,t)}static updateTime(t){return new hp(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function dp(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class fp{}function gp(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Cp(t.key,hp.none()):new Dp(t.key,t.data,hp.none());{const n=t.data,i=Qf.empty();let r=new gf(Kd.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new bp(t.key,i,new mf(r.toArray()),hp.none())}}function pp(t,e,n){t instanceof Dp?function(t,e,n){const i=t.value.clone(),r=_p(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof bp?function(t,e,n){if(!dp(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=_p(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(wp(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function mp(t,e,n,i){return t instanceof Dp?function(t,e,n,i){if(!dp(t.precondition,e))return n;const r=t.value.clone(),s=Ep(t.fieldTransforms,i,e);return r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof bp?function(t,e,n,i){if(!dp(t.precondition,e))return n;const r=Ep(t.fieldTransforms,i,e),s=e.data;return s.setAll(wp(t)),s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,i):function(t,e,n){return dp(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function yp(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=tp(i.transform,t||null);null!=r&&(null===n&&(n=Qf.empty()),n.set(i.field,r))}return n||null}function vp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,i=e.fieldTransforms,!!(void 0===n&&void 0===i||n&&i&&Bd(n,i,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&(n=t.transform,i=e.transform,n instanceof np&&i instanceof np||n instanceof rp&&i instanceof rp?Bd(n.elements,i.elements,Vf):n instanceof op&&i instanceof op?Vf(n.Ie,i.Ie):n instanceof ep&&i instanceof ep);var n,i}(t,e))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask)));var n,i}class Dp extends fp{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class bp extends fp{constructor(t,e,n,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function wp(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function _p(t,e,n){const i=new Map;_d(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,Zg(o,a,n[r]))}return i}function Ep(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,Jg(t,s,e))}return i}class Cp extends fp{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Tp extends fp{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const e=this.mutations[i];e.key.isEqual(t.key)&&pp(e,t,n[i])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=mp(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=mp(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=jg();return this.mutations.forEach((i=>{const r=t.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=e.has(i.key)?null:o;const a=gp(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(jd.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Gg())}isEqual(t){return this.batchId===t.batchId&&Bd(this.mutations,t.mutations,((t,e)=>vp(t,e)))&&Bd(this.baseMutations,t.baseMutations,((t,e)=>vp(t,e)))}}class Ap{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){_d(t.mutations.length===n.length);let i=function(){return qg}();const r=t.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,n[s].version);return new Ap(t,e,n,i)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kp,Fp;(Fp=kp||(kp={}))[Fp.OK=0]="OK",Fp[Fp.CANCELLED=1]="CANCELLED",Fp[Fp.UNKNOWN=2]="UNKNOWN",Fp[Fp.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fp[Fp.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fp[Fp.NOT_FOUND=5]="NOT_FOUND",Fp[Fp.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fp[Fp.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fp[Fp.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fp[Fp.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fp[Fp.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fp[Fp.ABORTED=10]="ABORTED",Fp[Fp.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fp[Fp.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fp[Fp.INTERNAL=13]="INTERNAL",Fp[Fp.UNAVAILABLE=14]="UNAVAILABLE",Fp[Fp.DATA_LOSS=15]="DATA_LOSS",
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
new td([4294967295,4294967295],0);class Ip{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Lp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Op(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Mp(t,e){return Lp(t,e.toTimestamp())}function Np(t){return _d(!!t),jd.fromTimestamp(function(t){const e=bf(t);return new zd(e.seconds,e.nanos)}(t))}function Pp(t,e){return Rp(t,e).canonicalString()}function Rp(t,e){const n=(i=t,new Hd(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?n:n.child(e)}function Bp(t,e){return Pp(t.databaseId,e.path)}function Vp(t){const e=function(t){const e=Hd.fromString(t);return _d(function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)),e}(t);return 4===e.length?Hd.emptyPath():function(t){return _d(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}(e)}function Up(t,e,n){return{name:Bp(t,e),fields:n.value.mapValue.fields}}function zp(t){let e=Vp(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){_d(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=jp(t);return e instanceof ag&&lg(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((t=>{return new ig($p((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,rf(e)?null:e}(n.limit));let u=null;n.startAt&&(u=function(t){const e=!!t.before,n=t.values||[];return new tg(n,e)}(n.startAt));let l=null;return n.endAt&&(l=function(t){const e=!t.before,n=t.values||[];return new tg(n,e)}(n.endAt)),function(t,e,n,i,r,s,o,a){return new Tg(t,e,n,i,r,s,o,a)}(e,r,o,s,a,"F",u,l)}function jp(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=$p(t.unaryFilter.field);return og.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=$p(t.unaryFilter.field);return og.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=$p(t.unaryFilter.field);return og.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=$p(t.unaryFilter.field);return og.create(r,"!=",{nullValue:"NULL_VALUE"});default:return wd()}}(t):void 0!==t.fieldFilter?(e=t,og.create($p(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wd()}}(e.fieldFilter.op),e.fieldFilter.value)):void 0!==t.compositeFilter?function(t){return ag.create(t.compositeFilter.filters.map((t=>jp(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return wd()}}(t.compositeFilter.op))}(t):wd();var e}function $p(t){return Kd.fromServerFormat(t.fieldPath)}function qp(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}class Hp{constructor(t){this.Tt=t}}function Gp(t){const e=zp({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?kg(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(){this.Tn=new Wp}addToCollectionParentIndex(t,e){return this.Tn.add(e),tf.resolve()}getCollectionParents(t,e){return tf.resolve(this.Tn.getEntries(e))}addFieldIndex(t,e){return tf.resolve()}deleteFieldIndex(t,e){return tf.resolve()}deleteAllFieldIndexes(t){return tf.resolve()}createTargetIndexes(t,e){return tf.resolve()}getDocumentsMatchingTarget(t,e){return tf.resolve(null)}getIndexType(t,e){return tf.resolve(0)}getFieldIndexes(t,e){return tf.resolve([])}getNextCollectionGroupToUpdate(t){return tf.resolve(null)}getMinOffset(t,e){return tf.resolve(Yd.min())}getMinOffsetFromCollectionGroup(t,e){return tf.resolve(Yd.min())}updateCollectionGroup(t,e,n){return tf.resolve()}updateIndexEntries(t,e){return tf.resolve()}}class Wp{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new gf(Hd.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new gf(Hd.comparator)).toArray()}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Yp=41943040;class Qp{static withCacheSize(t){return new Qp(t,Qp.DEFAULT_COLLECTION_PERCENTILE,Qp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qp.DEFAULT_COLLECTION_PERCENTILE=10,Qp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qp.DEFAULT=new Qp(Yp,Qp.DEFAULT_COLLECTION_PERCENTILE,Qp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qp.DISABLED=new Qp(-1,0,0);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Jp{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Kn(){return new Jp(0)}static Un(){return new Jp(-1)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="LruGarbageCollector";function tm([t,e],[n,i]){const r=Rd(t,n);return 0===r?Rd(e,i):r}class em{constructor(t){this.Hn=t,this.buffer=new gf(tm),this.Jn=0}Yn(){return++this.Jn}Zn(t){const e=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(e);else{const t=this.buffer.last();tm(e,t)<0&&(this.buffer=this.buffer.delete(t).add(e))}}get maxValue(){return this.buffer.last()[0]}}class nm{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.Xn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return null!==this.Xn}er(t){yd(Zp,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ef(t)?yd(Zp,"Ignoring IndexedDB error during garbage collection: ",t):await Zd(t)}await this.er(3e5)}))}}class im{constructor(t,e){this.tr=t,this.params=e}calculateTargetCount(t,e){return this.tr.nr(t).next((t=>Math.floor(e/100*t)))}nthSequenceNumber(t,e){if(0===e)return tf.resolve(nf.ae);const n=new em(e);return this.tr.forEachTarget(t,(t=>n.Zn(t.sequenceNumber))).next((()=>this.tr.rr(t,(t=>n.Zn(t))))).next((()=>n.maxValue))}removeTargets(t,e,n){return this.tr.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.tr.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(yd("LruGarbageCollector","Garbage collection skipped; disabled"),tf.resolve(Xp)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(yd("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xp):this.ir(t,e)))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,e){let n,i,r,s,o,a,u;const l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((e=>(e>this.params.maximumSequenceNumbersToCollect?(yd("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${e}`),i=this.params.maximumSequenceNumbersToCollect):i=e,s=Date.now(),this.nthSequenceNumber(t,i)))).next((i=>(n=i,o=Date.now(),this.removeTargets(t,n,e)))).next((e=>(r=e,a=Date.now(),this.removeOrphanedDocuments(t,n)))).next((t=>(u=Date.now(),md()<=vl.DEBUG&&yd("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-l}ms\n\tDetermined least recently used ${i} in `+(o-s)+`ms\n\tRemoved ${r} targets in `+(a-o)+`ms\n\tRemoved ${t} documents in `+(u-a)+`ms\nTotal Duration: ${u-l}ms`),tf.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:t}))))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class rm{constructor(){this.changes=new Ng((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Zf.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?tf.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&mp(n.mutation,t,mf.empty(),zd.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,Gg()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=Gg()){const i=zg();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((t=>{let e=Vg();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=zg();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,Gg())))}populateOverlays(t,e,n){const i=[];return n.forEach((t=>{e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,i){let r=Rg();const s=$g(),o=$g();return e.forEach(((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof bp)?r=r.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),mp(o.mutation,e,o.mutation.getFieldMask(),zd.now())):s.set(e.key,mf.empty())})),this.recalculateAndSaveOverlays(t,r).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new sm(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=$g();let i=new hf(((t,e)=>t-e)),r=Gg();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const r of t)r.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||mf.empty();o=r.applyToLocalView(s,o),n.set(t,o);const a=(i.get(r.batchId)||Gg()).add(t);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,u=i.value,l=jg();u.forEach((t=>{if(!r.has(t)){const i=gp(e.get(t),n.get(t));null!==i&&l.set(t,i),r=r.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,l))}return tf.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,i){return r=e,Wd.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):function(t){return null!==t.collectionGroup}(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i);var r}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):tf.resolve(zg());let o=-1,a=r;return s.next((e=>tf.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(e)?tf.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,r))).next((()=>this.computeViews(t,a,e,Gg()))).next((t=>({batchId:o,changes:Ug(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Wd(e)).next((t=>{let e=Vg();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){const r=e.collectionGroup;let s=Vg();return this.indexManager.getCollectionParents(t,r).next((o=>tf.forEach(o,(o=>{const a=(u=e,l=o.child(r),new Tg(l,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt));var u,l;return this.getDocumentsMatchingCollectionQuery(t,a,n,i).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r,i)))).next((t=>{r.forEach(((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,Zf.newInvalidDocument(i)))}));let n=Vg();return t.forEach(((t,i)=>{const s=r.get(t);void 0!==s&&mp(s.mutation,i,mf.empty(),zd.now()),Og(e,i)&&(n=n.insert(t,i))})),n}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,e){return tf.resolve(this.dr.get(e))}saveBundleMetadata(t,e){return this.dr.set(e.id,{id:(n=e).id,version:n.version,createTime:Np(n.createTime)}),tf.resolve();var n}getNamedQuery(t,e){return tf.resolve(this.Ar.get(e))}saveNamedQuery(t,e){return this.Ar.set(e.name,{name:(n=e).name,query:Gp(n.bundledQuery),readTime:Np(n.readTime)}),tf.resolve();var n}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(){this.overlays=new hf(Wd.comparator),this.Rr=new Map}getOverlay(t,e){return tf.resolve(this.overlays.get(e))}getOverlays(t,e){const n=zg();return tf.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.Et(t,e,i)})),tf.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.Rr.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.Rr.delete(n)),tf.resolve()}getOverlaysForCollection(t,e,n){const i=zg(),r=e.length+1,s=new Wd(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return tf.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new hf(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=zg(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=zg(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=i)););return tf.resolve(o)}Et(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.Rr.get(i.largestBatchId).delete(n.key);this.Rr.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new xp(e,n));let r=this.Rr.get(e);void 0===r&&(r=Gg(),this.Rr.set(e,r)),this.Rr.set(e,r.add(n.key))}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(){this.sessionToken=vf.EMPTY_BYTE_STRING}getSessionToken(t){return tf.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,tf.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(){this.Vr=new gf(hm.mr),this.gr=new gf(hm.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,e){const n=new hm(t,e);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.wr(new hm(t,e))}br(t,e){t.forEach((t=>this.removeReference(t,e)))}Sr(t){const e=new Wd(new Hd([])),n=new hm(e,t),i=new hm(e,t+1),r=[];return this.gr.forEachInRange([n,i],(t=>{this.wr(t),r.push(t.key)})),r}Dr(){this.Vr.forEach((t=>this.wr(t)))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const e=new Wd(new Hd([])),n=new hm(e,t),i=new hm(e,t+1);let r=Gg();return this.gr.forEachInRange([n,i],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new hm(t,0),n=this.Vr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class hm{constructor(t,e){this.key=t,this.Cr=e}static mr(t,e){return Wd.comparator(t.key,e.key)||Rd(t.Cr,e.Cr)}static pr(t,e){return Rd(t.Cr,e.Cr)||Wd.comparator(t.key,e.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Fr=1,this.Mr=new gf(hm.mr)}checkEmpty(t){return tf.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Sp(r,e,n,i);this.mutationQueue.push(s);for(const o of i)this.Mr=this.Mr.add(new hm(o.key,r)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return tf.resolve(s)}lookupMutationBatch(t,e){return tf.resolve(this.Or(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.Nr(n),r=i<0?0:i;return tf.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return tf.resolve(0===this.mutationQueue.length?-1:this.Fr-1)}getAllMutationBatches(t){return tf.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new hm(e,0),i=new hm(e,Number.POSITIVE_INFINITY),r=[];return this.Mr.forEachInRange([n,i],(t=>{const e=this.Or(t.Cr);r.push(e)})),tf.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new gf(Rd);return e.forEach((t=>{const e=new hm(t,0),i=new hm(t,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([e,i],(t=>{n=n.add(t.Cr)}))})),tf.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;Wd.isDocumentKey(r)||(r=r.child(""));const s=new hm(new Wd(r),0);let o=new gf(Rd);return this.Mr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.Cr)),!0)}),s),tf.resolve(this.Br(o))}Br(t){const e=[];return t.forEach((t=>{const n=this.Or(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){_d(0===this.Lr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.Mr;return tf.forEach(e.mutations,(i=>{const r=new hm(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.Mr=n}))}qn(t){}containsKey(t,e){const n=new hm(e,0),i=this.Mr.firstAfterOrEqual(n);return tf.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,tf.resolve()}Lr(t,e){return this.Nr(t)}Nr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Or(t){const e=this.Nr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(t){this.kr=t,this.docs=new hf(Wd.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,s=this.kr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return tf.resolve(n?n.document.mutableCopy():Zf.newInvalidDocument(e))}getEntries(t,e){let n=Rg();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():Zf.newInvalidDocument(t))})),tf.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let r=Rg();const s=e.path,o=new Wd(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||Qd(Xd(o),n)<=0||(i.has(o.key)||Og(e,o))&&(r=r.insert(o.key,o.mutableCopy()))}return tf.resolve(r)}getAllFromCollectionGroup(t,e,n,i){wd()}qr(t,e){return tf.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new gm(this)}getSize(t){return tf.resolve(this.size)}}class gm extends rm{constructor(t){super(),this.Ir=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this.Ir.addEntry(t,i)):this.Ir.removeEntry(n)})),tf.waitFor(e)}getFromCache(t,e){return this.Ir.getEntry(t,e)}getAllFromCache(t,e){return this.Ir.getEntries(t,e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(t){this.persistence=t,this.Qr=new Ng((t=>Eg(t)),Cg),this.lastRemoteSnapshotVersion=jd.min(),this.highestTargetId=0,this.$r=0,this.Kr=new cm,this.targetCount=0,this.Ur=Jp.Kn()}forEachTarget(t,e){return this.Qr.forEach(((t,n)=>e(n))),tf.resolve()}getLastRemoteSnapshotVersion(t){return tf.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return tf.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Ur.next(),tf.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.$r&&(this.$r=e),tf.resolve()}zn(t){this.Qr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ur=new Jp(e),this.highestTargetId=e),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,e){return this.zn(e),this.targetCount+=1,tf.resolve()}updateTargetData(t,e){return this.zn(e),tf.resolve()}removeTargetData(t,e){return this.Qr.delete(e.target),this.Kr.Sr(e.targetId),this.targetCount-=1,tf.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.Qr.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Qr.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),tf.waitFor(r).next((()=>i))}getTargetCount(t){return tf.resolve(this.targetCount)}getTargetData(t,e){const n=this.Qr.get(e)||null;return tf.resolve(n)}addMatchingKeys(t,e,n){return this.Kr.yr(e,n),tf.resolve()}removeMatchingKeys(t,e,n){this.Kr.br(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((e=>{r.push(i.markPotentiallyOrphaned(t,e))})),tf.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.Kr.Sr(e),tf.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Kr.vr(e);return tf.resolve(n)}containsKey(t,e){return tf.resolve(this.Kr.containsKey(e))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(t,e){this.Wr={},this.overlays={},this.Gr=new nf(0),this.zr=!1,this.zr=!0,this.jr=new lm,this.referenceDelegate=t(this),this.Hr=new pm(this),this.indexManager=new Kp,this.remoteDocumentCache=new fm((t=>this.referenceDelegate.Jr(t))),this.serializer=new Hp(e),this.Yr=new am(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new um,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Wr[t.toKey()];return n||(n=new dm(e,this.referenceDelegate),this.Wr[t.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,e,n){yd("MemoryPersistence","Starting transaction:",t);const i=new ym(this.Gr.next());return this.referenceDelegate.Zr(),n(i).next((t=>this.referenceDelegate.Xr(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}ei(t,e){return tf.or(Object.values(this.Wr).map((n=>()=>n.containsKey(t,e))))}}class ym extends Jd{constructor(t){super(),this.currentSequenceNumber=t}}class vm{constructor(t){this.persistence=t,this.ti=new cm,this.ni=null}static ri(t){return new vm(t)}get ii(){if(this.ni)return this.ni;throw wd()}addReference(t,e,n){return this.ti.addReference(n,e),this.ii.delete(n.toString()),tf.resolve()}removeReference(t,e,n){return this.ti.removeReference(n,e),this.ii.add(n.toString()),tf.resolve()}markPotentiallyOrphaned(t,e){return this.ii.add(e.toString()),tf.resolve()}removeTarget(t,e){this.ti.Sr(e.targetId).forEach((t=>this.ii.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.ii.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Zr(){this.ni=new Set}Xr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tf.forEach(this.ii,(n=>{const i=Wd.fromPath(n);return this.si(t,i).next((t=>{t||e.removeEntry(i,jd.min())}))})).next((()=>(this.ni=null,e.apply(t))))}updateLimboDocument(t,e){return this.si(t,e).next((t=>{t?this.ii.delete(e.toString()):this.ii.add(e.toString())}))}Jr(t){return 0}si(t,e){return tf.or([()=>tf.resolve(this.ti.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.ei(t,e)])}}class Dm{constructor(t,e){this.persistence=t,this.oi=new Ng((t=>function(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=af(e)),e=of(t.get(n),e);return af(e)}(t.path)),((t,e)=>t.isEqual(e))),this.garbageCollector=function(t,e){return new im(t,e)}(this,e)}static ri(t,e){return new Dm(t,e)}Zr(){}Xr(t){return tf.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}nr(t){const e=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next((t=>e.next((e=>t+e))))}sr(t){let e=0;return this.rr(t,(t=>{e++})).next((()=>e))}rr(t,e){return tf.forEach(this.oi,((n,i)=>this.ar(t,n,i).next((t=>t?tf.resolve():e(i)))))}removeTargets(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)}removeOrphanedDocuments(t,e){let n=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.qr(t,(i=>this.ar(t,i,e).next((t=>{t||(n++,r.removeEntry(i,jd.min()))})))).next((()=>r.apply(t))).next((()=>n))}markPotentiallyOrphaned(t,e){return this.oi.set(e,t.currentSequenceNumber),tf.resolve()}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,e,n){return this.oi.set(n,t.currentSequenceNumber),tf.resolve()}removeReference(t,e,n){return this.oi.set(n,t.currentSequenceNumber),tf.resolve()}updateLimboDocument(t,e){return this.oi.set(e,t.currentSequenceNumber),tf.resolve()}Jr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Gf(t.data.value)),e}ar(t,e,n){return tf.or([()=>this.persistence.ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const t=this.oi.get(e);return tf.resolve(void 0!==t&&t>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.Hi=n,this.Ji=i}static Yi(t,e){let n=Gg(),i=Gg();for(const r of e.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new bm(t,e.fromCache,n,i)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=il()?8:function(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")>0?6:4}initialize(t,e){this.ns=t,this.indexManager=e,this.Zi=!0}getDocumentsMatchingQuery(t,e,n,i){const r={result:null};return this.rs(t,e).next((t=>{r.result=t})).next((()=>{if(!r.result)return this.ss(t,e,i,n).next((t=>{r.result=t}))})).next((()=>{if(r.result)return;const n=new wm;return this._s(t,e,n).next((i=>{if(r.result=i,this.Xi)return this.us(t,e,n,i.size)}))})).next((()=>r.result))}us(t,e,n,i){return n.documentReadCount<this.es?(md()<=vl.DEBUG&&yd("QueryEngine","SDK will not create cache indexes for query:",Lg(e),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),tf.resolve()):(md()<=vl.DEBUG&&yd("QueryEngine","Query:",Lg(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.ts*i?(md()<=vl.DEBUG&&yd("QueryEngine","The SDK decides to create cache indexes for query:",Lg(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,xg(e))):tf.resolve())}rs(t,e){if(Sg(e))return tf.resolve(null);let n=xg(e);return this.indexManager.getIndexType(t,n).next((i=>0===i?null:(null!==e.limit&&1===i&&(e=kg(e,null,"F"),n=xg(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((i=>{const r=Gg(...i);return this.ns.getDocuments(t,r).next((i=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.cs(e,i);return this.ls(e,s,r,n.readTime)?this.rs(t,kg(e,null,"F")):this.hs(t,s,e,n)}))))})))))}ss(t,e,n,i){return Sg(e)||i.isEqual(jd.min())?tf.resolve(null):this.ns.getDocuments(t,n).next((r=>{const s=this.cs(e,r);return this.ls(e,s,n,i)?tf.resolve(null):(md()<=vl.DEBUG&&yd("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Lg(e)),this.hs(t,s,e,function(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=jd.fromTimestamp(1e9===i?new zd(n+1,0):new zd(n,i));return new Yd(r,Wd.empty(),e)}(i,-1)).next((t=>t)))}))}cs(t,e){let n=new gf(function(t){return(e,n)=>{let i=!1;for(const r of Ag(t)){const t=Mg(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}(t));return e.forEach(((e,i)=>{Og(t,i)&&(n=n.add(i))})),n}ls(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}_s(t,e,n){return md()<=vl.DEBUG&&yd("QueryEngine","Using full collection scan to execute query:",Lg(e)),this.ns.getDocumentsMatchingQuery(t,e,Yd.min(),n)}hs(t,e,n,i){return this.ns.getDocumentsMatchingQuery(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(t,e,n,i){this.persistence=t,this.Ps=e,this.serializer=i,this.Ts=new hf(Rd),this.Is=new Ng((t=>Eg(t)),Cg),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(n)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new om(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ts)))}}async function Cm(t,e){const n=Ed(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next((r=>(i=r,n.As(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const r=[],s=[];let o=Gg();for(const t of i){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({Rs:t,removedBatchIds:r,addedBatchIds:s})))}))}))}function Tm(t,e){const n=Ed(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}class Sm{constructor(){this.activeTargetIds=Kg}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ss(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Am{constructor(){this.ho=new Sm,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t,e=!0){return e&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,e,n){this.Po[t]=e}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new Sm,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{To(t){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km="ConnectivityMonitor";class Fm{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){yd(km,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){yd(km,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Im=null;function Lm(){return null===Im?Im=268435456+Math.round(2147483648*Math.random()):Im++,"0x"+Im.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Om="RestConnection",Mm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Nm{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=e+"://"+t.host,this.yo=`projects/${n}/databases/${i}`,this.wo=this.databaseId.database===If?`project_id=${n}`:`project_id=${n}&database_id=${i}`}bo(t,e,n,i,r){const s=Lm(),o=this.So(t,e.toUriEncodedString());yd(Om,`Sending RPC '${t}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(a,i,r),this.vo(t,o,a,n).then((e=>(yd(Om,`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw Dd(Om,`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}Co(t,e,n,i,r,s){return this.bo(t,e,n,i,r)}Do(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+gd,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}So(t,e){const n=Mm[t];return`${this.po}/v1/${e}:${n}`}terminate(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Ko(t){this.ko(t)}Uo(t){this.qo(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="WebChannelConnection";class Bm extends Nm{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,e,n,i){const r=Lm();return new Promise(((s,o)=>{const a=new nd;a.setWithCredentials(!0),a.listenOnce(rd.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case sd.NO_ERROR:const e=a.getResponseJson();yd(Rm,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(e)),s(e);break;case sd.TIMEOUT:yd(Rm,`RPC '${t}' ${r} timed out`),o(new Td(Cd.DEADLINE_EXCEEDED,"Request time out"));break;case sd.HTTP_ERROR:const n=a.getStatus();if(yd(Rm,`RPC '${t}' ${r} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(Cd).indexOf(e)>=0?e:Cd.UNKNOWN}(e.status);o(new Td(t,e.message))}else o(new Td(Cd.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Td(Cd.UNAVAILABLE,"Connection failed."));break;default:wd()}}finally{yd(Rm,`RPC '${t}' ${r} completed.`)}}));const u=JSON.stringify(i);yd(Rm,`RPC '${t}' ${r} sending request:`,i),a.send(e,"POST",u,n,15)}))}Wo(t,e,n){const i=Lm(),r=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=ld(),o=ud(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(a.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const l=r.join("");yd(Rm,`Creating RPC '${t}' stream ${i}: ${l}`,a);const c=s.createWebChannel(l,a);let h=!1,d=!1;const f=new Pm({Fo:e=>{d?yd(Rm,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(h||(yd(Rm,`Opening RPC '${t}' stream ${i} transport.`),c.open(),h=!0),yd(Rm,`RPC '${t}' stream ${i} sending:`,e),c.send(e))},Mo:()=>c.close()}),g=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(e){setTimeout((()=>{throw e}),0)}}))};return g(c,id.EventType.OPEN,(()=>{d||(yd(Rm,`RPC '${t}' stream ${i} transport opened.`),f.Qo())})),g(c,id.EventType.CLOSE,(()=>{d||(d=!0,yd(Rm,`RPC '${t}' stream ${i} transport closed`),f.Ko())})),g(c,id.EventType.ERROR,(e=>{d||(d=!0,Dd(Rm,`RPC '${t}' stream ${i} transport errored:`,e),f.Ko(new Td(Cd.UNAVAILABLE,"The operation could not be completed")))})),g(c,id.EventType.MESSAGE,(e=>{var n;if(!d){const r=e.data[0];_d(!!r);const s=r,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){yd(Rm,`RPC '${t}' stream ${i} received error:`,o);const e=o.status;let n=function(t){const e=kp[t];if(void 0!==e)return function(t){if(void 0===t)return vd("GRPC error has no .code"),Cd.UNKNOWN;switch(t){case kp.OK:return Cd.OK;case kp.CANCELLED:return Cd.CANCELLED;case kp.UNKNOWN:return Cd.UNKNOWN;case kp.DEADLINE_EXCEEDED:return Cd.DEADLINE_EXCEEDED;case kp.RESOURCE_EXHAUSTED:return Cd.RESOURCE_EXHAUSTED;case kp.INTERNAL:return Cd.INTERNAL;case kp.UNAVAILABLE:return Cd.UNAVAILABLE;case kp.UNAUTHENTICATED:return Cd.UNAUTHENTICATED;case kp.INVALID_ARGUMENT:return Cd.INVALID_ARGUMENT;case kp.NOT_FOUND:return Cd.NOT_FOUND;case kp.ALREADY_EXISTS:return Cd.ALREADY_EXISTS;case kp.PERMISSION_DENIED:return Cd.PERMISSION_DENIED;case kp.FAILED_PRECONDITION:return Cd.FAILED_PRECONDITION;case kp.ABORTED:return Cd.ABORTED;case kp.OUT_OF_RANGE:return Cd.OUT_OF_RANGE;case kp.UNIMPLEMENTED:return Cd.UNIMPLEMENTED;case kp.DATA_LOSS:return Cd.DATA_LOSS;default:return wd()}}(e)}(e),r=o.message;void 0===n&&(n=Cd.INTERNAL,r="Unknown error status: "+e+" with message "+o.message),d=!0,f.Ko(new Td(n,r)),c.close()}else yd(Rm,`RPC '${t}' stream ${i} received:`,r),f.Uo(r)}})),g(o,ad.STAT_EVENT,(e=>{e.stat===od.PROXY?yd(Rm,`RPC '${t}' stream ${i} detected buffering proxy`):e.stat===od.NOPROXY&&yd(Rm,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{f.$o()}),0),f}}function Vm(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t){return new Ip(t,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(t,e,n=1e3,i=1.5,r=6e4){this.Ti=t,this.timerId=e,this.Go=n,this.zo=i,this.jo=r,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const e=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),i=Math.max(0,e-n);i>0&&yd("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,(()=>(this.Yo=Date.now(),t()))),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){null!==this.Jo&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){null!==this.Jo&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="PersistentStream";class $m{constructor(t,e,n,i,r,s,o,a){this.Ti=t,this.n_=n,this.r_=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new zm(t,e)}u_(){return 1===this.state||5===this.state||this.c_()}c_(){return 2===this.state||3===this.state}start(){this.__=0,4!==this.state?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&null===this.s_&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,(()=>this.T_())))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,e){this.E_(),this.d_(),this.a_.cancel(),this.i_++,4!==t?this.a_.reset():e&&e.code===Cd.RESOURCE_EXHAUSTED?(vd(e.toString()),vd("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):e&&e.code===Cd.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(e)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),e=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.i_===e&&this.V_(t,n)}),(e=>{t((()=>{const t=new Td(Cd.UNKNOWN,"Fetching auth token failed: "+e.message);return this.m_(t)}))}))}V_(t,e){const n=this.R_(this.i_);this.stream=this.f_(t,e),this.stream.xo((()=>{n((()=>this.listener.xo()))})),this.stream.No((()=>{n((()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,(()=>(this.c_()&&(this.state=3),Promise.resolve()))),this.listener.No())))})),this.stream.Lo((t=>{n((()=>this.m_(t)))})),this.stream.onMessage((t=>{n((()=>1==++this.__?this.g_(t):this.onNext(t)))}))}l_(){this.state=5,this.a_.Xo((async()=>{this.state=0,this.start()}))}m_(t){return yd(jm,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return e=>{this.Ti.enqueueAndForget((()=>this.i_===t?e():(yd(jm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qm extends $m{constructor(t,e,n,i,r,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(t,e){return this.connection.Wo("Write",t,e)}g_(t){return _d(!!t.streamToken),this.lastStreamToken=t.streamToken,_d(!t.writeResults||0===t.writeResults.length),this.listener.D_()}onNext(t){_d(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const e=function(t,e){return t&&t.length>0?(_d(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?Np(t.updateTime):Np(e);return n.isEqual(jd.min())&&(n=Np(e)),new cp(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=Np(t.commitTime);return this.listener.v_(n,e)}C_(){const t={};t.database=function(t){return new Hd(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}(this.serializer),this.I_(t)}S_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof Dp)n={update:Up(t,e.key,e.value)};else if(e instanceof Cp)n={delete:Bp(t,e.key)};else if(e instanceof bp)n={update:Up(t,e.key,e.data),updateMask:qp(e.fieldMask)};else{if(!(e instanceof Tp))return wd();n={verify:Bp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof ep)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof np)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof rp)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof op)return{fieldPath:e.field.canonicalString(),increment:n.Ie};throw wd()}(0,t)))),e.precondition.isNone||(n.currentDocument=(i=t,void 0!==(r=e.precondition).updateTime?{updateTime:Mp(i,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:wd())),n;var i,r}(this.serializer,t)))};this.I_(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{}class Gm extends Hm{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new Td(Cd.FAILED_PRECONDITION,"The client has already been terminated.")}bo(t,e,n,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,s])=>this.connection.bo(t,Rp(e,n),i,r,s))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Cd.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Td(Cd.UNKNOWN,t.toString())}))}Co(t,e,n,i,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Co(t,Rp(e,n),i,s,o,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Cd.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Td(Cd.UNKNOWN,t.toString())}))}terminate(){this.F_=!0,this.connection.terminate()}}class Km{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){0===this.x_&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve()))))}q_(t){"Online"===this.state?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,"Online"===t&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(vd(e),this.N_=!1):yd("OnlineStateTracker",e)}Q_(){null!==this.O_&&(this.O_.cancel(),this.O_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="RemoteStore";class Xm{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=r,this.z_.To((t=>{n.enqueueAndForget((async()=>{Jm(this)&&(yd(Wm,"Restarting streams for network reachability change."),await async function(t){const e=Ed(t);e.W_.add(4),await Qm(e),e.j_.set("Unknown"),e.W_.delete(4),await Ym(e)}(this))}))})),this.j_=new Km(n,i)}}async function Ym(t){if(Jm(t))for(const e of t.G_)await e(!0)}async function Qm(t){for(const e of t.G_)await e(!1)}function Jm(t){return 0===Ed(t).W_.size}async function Zm(t,e,n){if(!ef(e))throw e;t.W_.add(1),await Qm(t),t.j_.set("Offline"),n||(n=()=>function(t){const e=Ed(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Hr.getLastRemoteSnapshotVersion(t)))}(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{yd(Wm,"Retrying IndexedDB access"),await n(),t.W_.delete(1),await Ym(t)}))}function ty(t,e){return e().catch((n=>Zm(t,n,e)))}async function ey(t){const e=Ed(t),n=hy(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:-1;for(;ny(e);)try{const t=await Tm(e.localStore,i);if(null===t){0===e.K_.length&&n.P_();break}i=t.batchId,iy(e,t)}catch(r){await Zm(e,r)}ry(e)&&sy(e)}function ny(t){return Jm(t)&&t.K_.length<10}function iy(t,e){t.K_.push(e);const n=hy(t);n.c_()&&n.b_&&n.S_(e.mutations)}function ry(t){return Jm(t)&&!hy(t).u_()&&t.K_.length>0}function sy(t){hy(t).start()}async function oy(t){hy(t).C_()}async function ay(t){const e=hy(t);for(const n of t.K_)e.S_(n.mutations)}async function uy(t,e,n){const i=t.K_.shift(),r=Ap.from(i,e,n);await ty(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await ey(t)}async function ly(t,e){e&&hy(t).b_&&await async function(t,e){if(function(t){switch(t){case Cd.OK:return wd();case Cd.CANCELLED:case Cd.UNKNOWN:case Cd.DEADLINE_EXCEEDED:case Cd.RESOURCE_EXHAUSTED:case Cd.INTERNAL:case Cd.UNAVAILABLE:case Cd.UNAUTHENTICATED:return!1;case Cd.INVALID_ARGUMENT:case Cd.NOT_FOUND:case Cd.ALREADY_EXISTS:case Cd.PERMISSION_DENIED:case Cd.FAILED_PRECONDITION:case Cd.ABORTED:case Cd.OUT_OF_RANGE:case Cd.UNIMPLEMENTED:case Cd.DATA_LOSS:return!0;default:return wd()}}(n=e.code)&&n!==Cd.ABORTED){const n=t.K_.shift();hy(t).h_(),await ty(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await ey(t)}var n}(t,e),ry(t)&&sy(t)}async function cy(t,e){const n=Ed(t);n.asyncQueue.verifyOperationInProgress(),yd(Wm,"RemoteStore received new credentials");const i=Jm(n);n.W_.add(3),await Qm(n),i&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await Ym(n)}function hy(t){return t.Y_||(t.Y_=function(t,e,n){const i=Ed(t);return i.M_(),new qm(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:oy.bind(null,t),Lo:ly.bind(null,t),D_:ay.bind(null,t),v_:uy.bind(null,t)}),t.G_.push((async e=>{e?(t.Y_.h_(),await ey(t)):(await t.Y_.stop(),t.K_.length>0&&(yd(Wm,`Stopping write stream with ${t.K_.length} pending writes`),t.K_=[]))}))),t.Y_
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class dy{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Sd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new dy(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Td(Cd.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fy(t,e){if(vd("AsyncQueue",`${e}: ${t}`),ef(t))return new Td(Cd.UNAVAILABLE,`${e}: ${t}`);throw t}class gy{constructor(){this.queries=py(),this.onlineState="Unknown",this.ia=new Set}terminate(){!function(t,e){const n=Ed(t),i=n.queries;n.queries=py(),i.forEach(((t,n)=>{for(const i of n.ta)i.onError(e)}))}(this,new Td(Cd.ABORTED,"Firestore shutting down"))}}function py(){return new Ng((t=>Ig(t)),Fg)}var my,yy;(yy=my||(my={}))._a="default",yy.Cache="cache";class vy{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new Ng((t=>Ig(t)),Fg),this.qa=new Map,this.Qa=new Set,this.$a=new hf(Wd.comparator),this.Ka=new Map,this.Ua=new cm,this.Wa={},this.Ga=new Map,this.za=Jp.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return!0===this.ja}}async function Dy(t,e,n){const i=function(t){const e=Ed(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wy.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_y.bind(null,e),e}(t);try{const t=await function(t,e){const n=Ed(t),i=zd.now(),r=e.reduce(((t,e)=>t.add(e.key)),Gg());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=Rg(),u=Gg();return n.ds.getEntries(t,r).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(u=u.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((r=>{s=r;const o=[];for(const t of e){const e=yp(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new bp(t.key,e,Jf(e.value.mapValue),hp.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,o,e)})).next((e=>{o=e;const i=e.applyToLocalDocumentSet(s,u);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:Ug(s)})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.Wa[t.currentUser.toKey()];i||(i=new hf(Rd)),i=i.insert(e,n),t.Wa[t.currentUser.toKey()]=i}(i,t.batchId,n),await Ty(i,t.changes),await ey(i.remoteStore)}catch(r){const t=fy(r,"Failed to persist write");n.reject(t)}}function by(t,e,n){const i=Ed(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.ka.forEach(((n,i)=>{const r=i.view.sa(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=Ed(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const r of n.ta)r.sa(e)&&(i=!0)})),i&&function(t){t.ia.forEach((t=>{t.next()}))}(n)}(i.eventManager,e),t.length&&i.La.p_(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function wy(t,e){const n=Ed(t),i=e.batch.batchId;try{const t=await function(t,e){const n=Ed(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),r=n.ds.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let o=tf.resolve();return s.forEach((t=>{o=o.next((()=>i.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);_d(null!==s),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,r)))}(n,t,e,r).next((()=>r.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=Gg();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(n.localStore,e);Cy(n,i,null),Ey(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ty(n,t)}catch(r){await Zd(r)}}async function _y(t,e,n){const i=Ed(t);try{const t=await function(t,e){const n=Ed(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(_d(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(i.localStore,e);Cy(i,e,n),Ey(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ty(i,t)}catch(It){await Zd(It)}}function Ey(t,e){(t.Ga.get(e)||[]).forEach((t=>{t.resolve()})),t.Ga.delete(e)}function Cy(t,e,n){const i=Ed(t);let r=i.Wa[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.Wa[i.currentUser.toKey()]=r}}async function Ty(t,e,n){const i=Ed(t),r=[],s=[],o=[];i.ka.isEmpty()||(i.ka.forEach(((t,a)=>{o.push(i.Ha(a,e,n).then((t=>{if((t||n)&&i.isPrimaryClient){const e=t?!t.fromCache:void 0;i.sharedClientState.updateQueryState(a.targetId,e?"current":"not-current")}if(t){r.push(t);const e=bm.Yi(a.targetId,t);s.push(e)}})))})),await Promise.all(o),i.La.p_(r),await async function(t,e){const n=Ed(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>tf.forEach(e,(e=>tf.forEach(e.Hi,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>tf.forEach(e.Ji,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(i){if(!ef(i))throw i;yd("LocalStore","Failed to update sequence numbers: "+i)}for(const r of e){const t=r.targetId;if(!r.fromCache){const e=n.Ts.get(t),i=e.snapshotVersion,r=e.withLastLimboFreeSnapshotVersion(i);n.Ts=n.Ts.insert(t,r)}}}(i.localStore,s))}async function Sy(t,e){const n=Ed(t);if(!n.currentUser.isEqual(e)){yd("SyncEngine","User change. New user:",e.toKey());const t=await Cm(n.localStore,e);n.currentUser=e,r="'waitForPendingWrites' promise is rejected due to a user change.",(i=n).Ga.forEach((t=>{t.forEach((t=>{t.reject(new Td(Cd.CANCELLED,r))}))})),i.Ga.clear(),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Ty(n,t.Rs)}var i,r}class Ay{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Um(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,e){return null}nu(t,e){return null}eu(t){return function(t,e,n,i){return new Em(t,e,n,i)}(this.persistence,new _m,t.initialUser,this.serializer)}Xa(t){return new mm(vm.ri,this.serializer)}Za(t){return new Am}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ay.provider={build:()=>new Ay};class xy extends Ay{constructor(t){super(),this.cacheSizeBytes=t}tu(t,e){_d(this.persistence.referenceDelegate instanceof Dm);const n=this.persistence.referenceDelegate.garbageCollector;return new nm(n,t.asyncQueue,e)}Xa(t){const e=void 0!==this.cacheSizeBytes?Qp.withCacheSize(this.cacheSizeBytes):Qp.DEFAULT;return new mm((t=>Dm.ri(t,e)),this.serializer)}}class ky{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>by(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Sy.bind(null,this.syncEngine),await async function(t,e){const n=Ed(t);e?(n.W_.delete(2),await Ym(n)):e||(n.W_.add(2),await Qm(n),n.j_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new gy}createDatastore(t){const e=Um(t.databaseInfo.databaseId),n=(i=t.databaseInfo,new Bm(i));var i;return function(t,e,n,i){return new Gm(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,i,r){return new Xm(t,e,n,i,r)}(this.localStore,this.datastore,t.asyncQueue,(t=>by(this.syncEngine,t,0)),Fm.D()?new Fm:new xm)}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new vy(t,e,n,i,r,s);return o&&(a.ja=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(t){const e=Ed(t);yd(Wm,"RemoteStore shutting down."),e.W_.add(5),await Qm(e),e.z_.shutdown(),e.j_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate(),null===(e=this.eventManager)||void 0===e||e.terminate()}}ky.provider={build:()=>new ky};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Fy="FirestoreClient";class Iy{constructor(t,e,n,i,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=fd.UNAUTHENTICATED,this.clientId=Pd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(n,(async t=>{yd(Fy,"Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(yd(Fy,"Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Sd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=fy(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function Ly(t,e){t.asyncQueue.verifyOperationInProgress(),yd(Fy,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await Cm(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Oy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){yd(Fy,"Using user provided OfflineComponentProvider");try{await Ly(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!("FirebaseError"===(n=r).name?n.code===Cd.FAILED_PRECONDITION||n.code===Cd.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code))throw r;Dd("Error using user provided cache. Falling back to memory cache: "+r),await Ly(t,new Ay)}}else yd(Fy,"Using default OfflineComponentProvider"),await Ly(t,new xy(void 0));var n;return t._offlineComponents}(t);yd(Fy,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>cy(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>cy(e.remoteStore,n))),t._onlineComponents=e}function My(t){return async function(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(yd(Fy,"Using user provided OnlineComponentProvider"),await Oy(t,t._uninitializedComponentsProvider._online)):(yd(Fy,"Using default OnlineComponentProvider"),await Oy(t,new ky))),t._onlineComponents}(t).then((t=>t.syncEngine))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Py=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(t,e,n){if(!n)throw new Td(Cd.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function By(t){if(!Wd.isDocumentKey(t))throw new Td(Cd.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Vy(t){if(Wd.isDocumentKey(t))throw new Td(Cd.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Uy(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const n=(e=t).constructor?e.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var e;return"function"==typeof t?"a function":wd()}function zy(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Td(Cd.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Uy(t);throw new Td(Cd.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="firestore.googleapis.com",$y=!0;class qy{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new Td(Cd.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jy,this.ssl=$y}else this.host=t.host,this.ssl=null!==(e=t.ssl)&&void 0!==e?e:$y;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=Yp;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Td(Cd.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,i){if(!0===e&&!0===i)throw new Td(Cd.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ny(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new Td(Cd.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new Td(Cd.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new Td(Cd.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(e=this.experimentalLongPollingOptions,n=t.experimentalLongPollingOptions,e.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams;var e,n}}class Hy{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Td(Cd.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Td(Cd.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qy(t),this._emulatorOptions=t.emulatorOptions||{},void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new xd;switch(t.type){case"firstParty":return new Ld(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Td(Cd.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Py.get(t);e&&(yd("ComponentProvider","Removing Datastore"),Py.delete(t),e.terminate())}(this),Promise.resolve()}}function Gy(t,e,n,i={}){var r;const s=(t=zy(t,Hy))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),a=`${e}:${n}`;s.host!==jy&&s.host!==a&&Dd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:i});if(!cl(u,o)&&(t._setSettings(u),i.mockUserToken)){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=fd.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Xu(JSON.stringify({alg:"none",type:"JWT"})),Xu(JSON.stringify(s)),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(i.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Td(Cd.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new fd(s)}t._authCredentials=new kd(new Ad(e,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Ky(this.firestore,t,this._query)}}class Wy{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xy(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Wy(this.firestore,t,this._key)}}class Xy extends Ky{constructor(t,e,n){super(t,e,function(t){return new Tg(t)}(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Wy(this.firestore,null,new Wd(t))}withConverter(t){return new Xy(this.firestore,t,this._path)}}function Yy(t,e,...n){if(t=fl(t),Ry("collection","path",e),t instanceof Hy){const i=Hd.fromString(e,...n);return Vy(i),new Xy(t,null,i)}{if(!(t instanceof Wy||t instanceof Xy))throw new Td(Cd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Hd.fromString(e,...n));return Vy(i),new Xy(t.firestore,null,i)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Qy="AsyncQueue";class Jy{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new zm(this,"async_queue_retry"),this.bu=()=>{const t=Vm();t&&yd(Qy,"Visibility state changed to "+t.visibilityState),this.a_.t_()},this.Su=t;const e=Vm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const e=Vm();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.bu)}}enqueue(t){if(this.Du(),this.mu)return new Promise((()=>{}));const e=new Sd;return this.vu((()=>this.mu&&this.yu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Vu.push(t),this.Cu())))}async Cu(){if(0!==this.Vu.length){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!ef(t))throw t;yd(Qy,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo((()=>this.Cu()))}}vu(t){const e=this.Su.then((()=>(this.pu=!0,t().catch((t=>{this.gu=t,this.pu=!1;throw vd("INTERNAL UNHANDLED ERROR: ",function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((t=>(this.pu=!1,t))))));return this.Su=e,e}enqueueAfterDelay(t,e,n){this.Du(),this.wu.indexOf(t)>-1&&(e=0);const i=dy.createAndSchedule(this,t,e,n,(t=>this.Fu(t)));return this.fu.push(i),i}Du(){this.gu&&wd()}verifyOperationInProgress(){}async Mu(){let t;do{t=this.Su,await t}while(t!==this.Su)}xu(t){for(const e of this.fu)if(e.timerId===t)return!0;return!1}Ou(t){return this.Mu().then((()=>{this.fu.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.fu)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Mu()}))}Nu(t){this.wu.push(t)}Fu(t){const e=this.fu.indexOf(t);this.fu.splice(e,1)}}class Zy extends Hy{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new Jy,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Jy(t),this._firestoreClient=void 0,await t}}}function tv(t){if(t._terminated)throw new Td(Cd.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||function(t){var e,n,i;const r=t._freezeSettings(),s=function(t,e,n,i){return new Ff(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,Ny(i.experimentalLongPollingOptions),i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new Iy(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(t){const e=null==t?void 0:t._online.build();return{_offline:null==t?void 0:t._offline.build(e),_online:e}}(t._componentsProvider))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t),t._firestoreClient}class ev{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ev(vf.fromBase64String(t))}catch(e){throw new Td(Cd.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new ev(vf.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Td(Cd.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kd(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(t){this._methodName=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Td(Cd.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Td(Cd.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Rd(this._lat,t._lat)||Rd(this._long,t._long)}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(t){this._values=(t||[]).map((t=>t))}toArray(){return this._values.map((t=>t))}isEqual(t){return function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}(this._values,t._values)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=/^__.*__$/;class av{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new bp(t,this.data,this.fieldMask,e,this.fieldTransforms):new Dp(t,this.data,e,this.fieldTransforms)}}function uv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wd()}}class lv{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Bu(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new lv(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.ku({path:n,Qu:!1});return i.$u(t),i}Ku(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.ku({path:n,Qu:!1});return i.Bu(),i}Uu(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return bv(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(0===t.length)throw this.Wu("Document fields must not be empty");if(uv(this.Lu)&&ov.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class cv{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Um(t)}ju(t,e,n,i=!1){return new lv({Lu:t,methodName:e,zu:n,path:Kd.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hv(t){const e=t._freezeSettings(),n=Um(t._databaseId);return new cv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function dv(t,e,n,i,r,s={}){const o=t.ju(s.merge||s.mergeFields?2:0,e,n,r);yv("Data must be an object, but it was:",o,i);const a=pv(i,o);let u,l;if(s.merge)u=new mf(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const i of s.mergeFields){const r=vv(e,i,n);if(!o.contains(r))throw new Td(Cd.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);wv(t,r)||t.push(r)}u=new mf(t),l=o.fieldTransforms.filter((t=>u.covers(t.field)))}else u=null,l=o.fieldTransforms;return new av(new Qf(a),u,l)}class fv extends iv{_toFieldTransform(t){return new lp(t.path,new ep)}isEqual(t){return t instanceof fv}}function gv(t,e){if(mv(t=fl(t)))return yv("Unsupported field value:",e,t),pv(t,e);if(t instanceof iv)return function(t,e){if(!uv(e.Lu))throw e.Wu(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.Wu(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&4!==e.Lu)throw e.Wu("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=gv(r,e.Uu(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=fl(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Yg(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=zd.fromDate(t);return{timestampValue:Lp(e.serializer,n)}}if(t instanceof zd){const n=new zd(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Lp(e.serializer,n)}}if(t instanceof rv)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ev)return{bytesValue:Op(e.serializer,t._byteString)};if(t instanceof Wy){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.Wu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Pp(t.firestore._databaseId||e.databaseId,t._key.path)}}if(t instanceof sv)return n=t,i=e,{mapValue:{fields:{[Of]:{stringValue:Pf},[Rf]:{arrayValue:{values:n.toArray().map((t=>{if("number"!=typeof t)throw i.Wu("VectorValues must only contain numeric values.");return Wg(i.serializer,t)}))}}}}};var n,i;throw e.Wu(`Unsupported field value: ${Uy(t)}`)}(t,e)}function pv(t,e){const n={};return cf(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lf(t,((t,i)=>{const r=gv(i,e.qu(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function mv(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof zd||t instanceof rv||t instanceof ev||t instanceof Wy||t instanceof iv||t instanceof sv)}function yv(t,e,n){if(!mv(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){const i=Uy(n);throw"an object"===i?e.Wu(t+" a custom object"):e.Wu(t+" "+i)}var i}function vv(t,e,n){if((e=fl(e))instanceof nv)return e._internalPath;if("string"==typeof e)return function(t,e,n){if(e.search(Dv)>=0)throw bv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new nv(...e.split("."))._internalPath}catch(i){throw bv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}(t,e);throw bv("Field path arguments must be of type string or ",t,!1,void 0,n)}const Dv=new RegExp("[~\\*/\\[\\]]");function bv(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${i}`),o&&(u+=` in document ${r}`),u+=")"),new Td(Cd.INVALID_ARGUMENT,a+t+u)}function wv(t,e){return t.some((t=>t.isEqual(e)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(t,e){const n=zy(t.firestore,Zy),i=function(t,e,...n){if(t=fl(t),1===arguments.length&&(e=Pd.newId()),Ry("doc","path",e),t instanceof Hy){const i=Hd.fromString(e,...n);return By(i),new Wy(t,null,new Wd(i))}{if(!(t instanceof Wy||t instanceof Xy))throw new Td(Cd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Hd.fromString(e,...n));return By(i),new Wy(t.firestore,t instanceof Xy?t.converter:null,new Wd(i))}}(t),r=function(t,e){let n;return n=t?t.toFirestore(e):e,n}(t.converter,e);return function(t,e){return function(t,e){const n=new Sd;return t.asyncQueue.enqueueAndForget((async()=>Dy(await My(t),e,n))),n.promise}(tv(t),e)}(n,[dv(hv(t.firestore),"addDoc",i._key,r,null!==t.converter,{}).toMutation(i._key,hp.exists(!1))]).then((()=>i))}function Ev(){return new fv("serverTimestamp")}!function(t,e=!0){gd="11.4.0",Cc(new gl("firestore",((t,{instanceIdentifier:n,options:i})=>{const r=t.getProvider("app").getImmediate(),s=new Zy(new Fd(t.getProvider("auth-internal")),new Md(r,t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Td(Cd.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lf(t.options.projectId,e)}(r,n),r);return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),Fc(hd,dd,t),Fc(hd,dd,"esm2017")}();const Cv=Bu.getModuleLogger("analytics-service"),Tv="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||window.location.search.includes("debug=true");(Tv||window.location.search.includes("analytics-debug=true"))&&(window.debugAnalytics=!0);const Sv=new class{constructor(){this.analytics=null,this.isInitialized=!1,this.scrollDepthThresholds=[25,50,75,100],this.trackedScrollDepth=new Set,this.sessionStartTime=Date.now(),this.interactionStarted=!1,this.moduleLogger=Cv}async init(t){if(this.isInitialized)return void this.moduleLogger.warn("Analytics service already initialized");this.moduleLogger.info("Initializing Analytics Service");if(!(await async function(){if(nl())return!1;if(!ol())return!1;if(!rl())return!1;try{return await sl()}catch(t){return!1}}()))return this.moduleLogger.warn("Firebase Analytics is not supported in this environment"),void(Tv&&this.setupDebugMode());this.analytics=t,this.setupScrollDepthTracking(),this.setupTimeOnPageTracking(),this.trackInitialTrafficSource(),window.debugAnalytics&&this.setupDebugMode(),this.isInitialized=!0}setupDebugMode(){this.moduleLogger.info("Setting up analytics debug mode");let t=document.getElementById("analytics-debug-container");if(!t){t=document.createElement("div"),t.id="analytics-debug-container",Object.assign(t.style,{position:"fixed",bottom:"10px",right:"10px",width:"300px",maxHeight:"400px",overflowY:"auto",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"#0F0",zIndex:"9999",padding:"10px",fontFamily:"monospace",fontSize:"12px",borderRadius:"5px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.5)"});const e=document.createElement("div");e.textContent="Analytics Debug",e.style.fontWeight="bold",e.style.marginBottom="5px",e.style.borderBottom="1px solid #0F0",e.style.paddingBottom="5px",t.appendChild(e);const n=document.createElement("div");n.id="analytics-events",t.appendChild(n),document.body.appendChild(t)}this.debugLogEvent=(t,e)=>{this.moduleLogger.debug(`Analytics Event: ${t}`,e);const n=document.getElementById("analytics-events");if(n){const i=document.createElement("div");i.style.marginBottom="8px",i.style.borderBottom="1px dotted #333",i.style.paddingBottom="3px";const r=(new Date).toLocaleTimeString(),s=document.createElement("span");s.textContent=`[${r}] `,s.style.color="#AAA",i.appendChild(s);const o=document.createElement("span");o.textContent=`${t}: `,o.style.color="#FFF",o.style.fontWeight="bold",i.appendChild(o);const a=document.createElement("span");for(a.textContent=JSON.stringify(e),i.appendChild(a),n.insertBefore(i,n.firstChild);n.children.length>20;)n.removeChild(n.lastChild)}this.analytics&&Qh(this.analytics,t,e)},this.debugSetUserProperties=t=>{this.moduleLogger.debug("Analytics User Properties:",t);const e=document.getElementById("analytics-events");if(e){const n=document.createElement("div");n.style.marginBottom="8px",n.style.borderBottom="1px dotted #333",n.style.paddingBottom="3px",n.style.color="#F0F";const i=(new Date).toLocaleTimeString(),r=document.createElement("span");r.textContent=`[${i}] `,r.style.color="#AAA",n.appendChild(r);const s=document.createElement("span");s.textContent="User Properties: ",s.style.color="#F0F",s.style.fontWeight="bold",n.appendChild(s);const o=document.createElement("span");o.textContent=JSON.stringify(t),n.appendChild(o),e.insertBefore(n,e.firstChild)}this.analytics&&Yh(this.analytics,t)}}trackInitialTrafficSource(){try{const t=this.getTrafficSource();this.moduleLogger.debug("Tracking traffic source",{source:t});const e={page_title:document.title,page_location:window.location.href,traffic_source:t};this.debugLogEvent?this.debugLogEvent("page_view",e):this.analytics&&Qh(this.analytics,"page_view",e)}catch(t){this.moduleLogger.error("Error tracking traffic source",t)}}getTrafficSource(){const t=new URLSearchParams(window.location.search),e=t.get("utm_source"),n=t.get("utm_medium"),i=t.get("utm_campaign");if(e)return`${e}${n?"_"+n:""}${i?"_"+i:""}`;const r=document.referrer;if(!r)return"direct";try{const t=new URL(r).hostname;return t.includes("google")?"organic_google":t.includes("bing")?"organic_bing":t.includes("facebook")||t.includes("fb.com")?"social_facebook":t.includes("twitter")||t.includes("t.co")?"social_twitter":t.includes("linkedin")?"social_linkedin":t.includes("instagram")?"social_instagram":t.includes("youtube")?"social_youtube":`referral_${t}`}catch(s){return this.moduleLogger.error("Error parsing referrer",s),"unknown"}}setupScrollDepthTracking(){this.moduleLogger.debug("Setting up scroll depth tracking"),window.addEventListener("scroll",this.debounce((()=>{if(!this.analytics)return;const t=document.documentElement.scrollHeight,e=document.documentElement.clientHeight,n=window.scrollY,i=Math.floor(n/(t-e)*100);this.scrollDepthThresholds.forEach((t=>{if(i>=t&&!this.trackedScrollDepth.has(t)){this.trackedScrollDepth.add(t),this.moduleLogger.debug(`User reached ${t}% scroll depth`);const e={depth_percentage:t,page_title:document.title};this.debugLogEvent?this.debugLogEvent("scroll_depth",e):this.analytics&&Qh(this.analytics,"scroll_depth",e)}}))}),500))}setupTimeOnPageTracking(){this.moduleLogger.debug("Setting up time on page tracking"),window.addEventListener("beforeunload",(()=>{if(!this.analytics)return;const t=Math.floor((Date.now()-this.sessionStartTime)/1e3);this.moduleLogger.debug(`User spent ${t} seconds on page`);const e={time_seconds:t,page_title:document.title,interaction_occurred:this.interactionStarted};this.debugLogEvent?this.debugLogEvent("session_duration",e):this.analytics&&Qh(this.analytics,"session_duration",e)}));const t=["click","scroll","keypress"],e=()=>{if(!this.interactionStarted){this.interactionStarted=!0;const n=Math.floor((Date.now()-this.sessionStartTime)/1e3);this.moduleLogger.debug(`User started engaging after ${n} seconds`);const i={time_to_engage_seconds:n};this.debugLogEvent?this.debugLogEvent("first_interaction",i):this.analytics&&Qh(this.analytics,"first_interaction",i),t.forEach((t=>{document.removeEventListener(t,e)}))}};t.forEach((t=>{document.addEventListener(t,e)}))}trackWaitlistSignup(t,e={}){if(this.analytics||this.debugLogEvent)try{const n=t.split("@")[1];this.moduleLogger.debug("Tracking waitlist signup",{emailDomain:n,hasAdditionalData:Object.keys(e).length>0});const i={email_domain:n,locale:e.locale||"unknown",form_name:"waitlist_signup"},r={signed_up:!0,signup_date:(new Date).toISOString().split("T")[0],preferred_language:e.locale||"unknown"};this.debugLogEvent?(this.debugLogEvent("generate_lead",i),this.debugSetUserProperties(r)):this.analytics&&(Qh(this.analytics,"generate_lead",i),Yh(this.analytics,r))}catch(n){this.moduleLogger.error("Error tracking waitlist signup",n)}else this.moduleLogger.warn("Analytics not initialized, cannot track waitlist signup")}trackFeedbackSubmission(t,e={}){if(this.analytics||this.debugLogEvent)try{this.moduleLogger.debug("Tracking feedback submission",{feedbackLength:t,hasAdditionalData:Object.keys(e).length>0});const n={feedback_length:t,locale:e.locale||"unknown"};this.debugLogEvent?this.debugLogEvent("submit_feedback",n):this.analytics&&Qh(this.analytics,"submit_feedback",n)}catch(n){this.moduleLogger.error("Error tracking feedback submission",n)}else this.moduleLogger.warn("Analytics not initialized, cannot track feedback")}trackCTAClick(t,e,n){if(this.analytics||this.debugLogEvent)try{this.moduleLogger.debug("Tracking CTA click",{ctaId:t,ctaLocation:n});const i={content_type:"cta",content_id:t,content_text:e,content_location:n};this.debugLogEvent?this.debugLogEvent("select_content",i):this.analytics&&Qh(this.analytics,"select_content",i)}catch(i){this.moduleLogger.error("Error tracking CTA click",i)}else this.moduleLogger.warn("Analytics not initialized, cannot track CTA click")}trackLanguageChange(t,e){if(this.analytics||this.debugLogEvent)try{this.moduleLogger.debug("Tracking language change",{previousLocale:t,newLocale:e});const n={previous_language:t,new_language:e},i={preferred_language:e};this.debugLogEvent?(this.debugLogEvent("language_change",n),this.debugSetUserProperties(i)):this.analytics&&(Qh(this.analytics,"language_change",n),Yh(this.analytics,i))}catch(n){this.moduleLogger.error("Error tracking language change",n)}else this.moduleLogger.warn("Analytics not initialized, cannot track language change")}trackSectionView(t,e){if(this.analytics||this.debugLogEvent)try{this.moduleLogger.debug("Tracking section view",{sectionId:t,sectionName:e});const n={section_id:t,section_name:e};this.debugLogEvent?this.debugLogEvent("view_section",n):this.analytics&&Qh(this.analytics,"view_section",n)}catch(n){this.moduleLogger.error("Error tracking section view",n)}else this.moduleLogger.warn("Analytics not initialized, cannot track section view")}debounce(t,e){let n;return function(...i){clearTimeout(n),n=setTimeout((()=>{clearTimeout(n),t(...i)}),e)}}},Av=xc({apiKey:"AIzaSyAK2d6xeIebK9oX6uvEEX724r6rL5cABWk",authDomain:"jynx-app-landing-page.firebaseapp.com",projectId:"jynx-app-landing-page",storageBucket:"jynx-app-landing-page.firebasestorage.app",messagingSenderId:"983342272821",appId:"1:983342272821:web:8a34575722725feddd7c7c"}),xv=function(t=kc()){const e=Tc(t=fl(t),Ah);return e.isInitialized()?e.getImmediate():function(t,e={}){const n=Tc(t,Ah);if(n.isInitialized()){const t=n.getImmediate();if(cl(e,n.getOptions()))return t;throw Fh.create("already-initialized")}const i=n.initialize({options:e});return i}(t)}(Av),kv=function(t){const e="object"==typeof t?t:kc(),n="string"==typeof t?t:If,i=Tc(e,"firestore").getImmediate({identifier:n});if(!i._initialized){const t=Zu("firestore");t&&Gy(i,...t)}return i}(Av),Fv=Bu.getModuleLogger("firebase-service");(async()=>{try{await Sv.init(xv),Fv.info("Analytics service initialized successfully")}catch(t){Fv.error("Failed to initialize analytics service",t)}})();const Iv={app:Av,db:kv,analytics:xv,addToWaitlist:async function(t,e={}){Fv.info("Adding email to waitlist",{email:t.substring(0,3)+"..."});try{Fv.time("waitlist-submission");const n=await _v(Yy(kv,"waitlist"),{email:t,...e,timestamp:Ev(),source:window.location.href,userAgent:navigator.userAgent,browserLanguage:navigator.language||navigator.userLanguage});return Fv.timeEnd("waitlist-submission"),Fv.info("Email added to waitlist successfully",{docId:n.id}),Sv.trackWaitlistSignup(t,e),{success:!0,id:n.id}}catch(n){throw Fv.error("Error adding email to waitlist",n),n}},submitFeedback:async function(t,e={}){Fv.info("Submitting feedback",{feedbackLength:t.length,feedbackPreview:t.substring(0,20)+(t.length>20?"...":"")});try{Fv.time("feedback-submission");const n=await _v(Yy(kv,"feedback"),{feedback:t,...e,timestamp:Ev(),source:window.location.href,userAgent:navigator.userAgent,browserLanguage:navigator.language||navigator.userLanguage,pathname:window.location.pathname});return Fv.timeEnd("feedback-submission"),Fv.info("Feedback submitted successfully",{docId:n.id}),Sv.trackFeedbackSubmission(t.length,e),{success:!0,id:n.id}}catch(n){throw Fv.error("Error submitting feedback",n),n}}},Lv=Bu.getModuleLogger("form-error-handler");const Ov=new class{constructor(){this.errorKeys={"permission-denied":"form.errors.permission_denied","invalid-argument":"form.errors.invalid_argument","not-found":"form.errors.not_found",unavailable:"form.errors.server_unavailable","resource-exhausted":"form.errors.too_many_requests",internal:"form.errors.server_error","network-error":"form.errors.network_error",timeout:"form.errors.timeout","invalid-email":"form.errors.invalid_email","empty-field":"form.errors.empty_field",default:"form.errors.default"}}handleError(t,e,n={}){Lv.error("Form error",t);const i={clearOnFocus:!0,associatedInput:null,...n},r=t.code&&t.code.split("/")[1]||t.code||t.name||"default",s=this.getErrorMessage(r,t.message);return e&&(e.textContent=s,e.setAttribute("role","alert"),e.classList.add("active"),i.clearOnFocus&&i.associatedInput&&i.associatedInput.addEventListener("focus",(()=>{e.textContent="",e.classList.remove("active"),e.removeAttribute("role")}),{once:!0})),s}getErrorMessage(t,e){if(this.errorKeys[t])return zu.translate(this.errorKeys[t]);for(const n in this.errorKeys)if(t.includes(n))return zu.translate(this.errorKeys[n]);return Lv.debug("Unknown error code, using fallback",{code:t,fallback:!!e}),e||zu.translate(this.errorKeys.default)}};const Mv=new class{constructor(){this.isInitialized=!1,this.logger=Bu.getModuleLogger("form-manager"),this.logger.info("FormManager instance created")}init(){if(this.isInitialized)this.logger.warn("FormManager already initialized");else{this.logger.time("form-manager-initialization"),this.logger.info("Initializing form manager");try{this.logger.debug("Setting up forms"),this.setupForms(),this.logger.debug("Setting up feedback system"),this.setupFeedbackSystem(),this.logger.info("Form manager initialization complete")}catch(t){this.logger.error("Form manager initialization failed",t)}finally{this.isInitialized=!0,this.logger.timeEnd("form-manager-initialization")}}}setupForms(){this.logger.debug("Setting up form handlers");const t=document.getElementById("signup-form"),e=document.getElementById("email"),n=document.getElementById("email-error");this.logger.debug("Form elements:",{signupFormFound:!!t,emailInputFound:!!e,emailErrorFound:!!n}),t?(this.logger.debug("Adding event listener to signup form"),t.addEventListener("submit",(async i=>{i.preventDefault(),this.logger.debug("Signup form submitted");const r=e.value.trim();if(this.logger.debug("Validating email",{email:r.substring(0,3)+"..."}),!this.validateEmail(r))return this.logger.debug("Email validation failed"),n.textContent=zu.translate("form.email.error"),void e.focus();n.textContent="",this.logger.debug("Email validation passed, proceeding with submission");try{const e=t.querySelector('button[type="submit"]');ju(e,zu.translate("form.submitting")),this.logger.debug("Form in submission state"),this.logger.time("form-submission");const n=await this.submitWaitlistEmail(r);this.logger.timeEnd("form-submission"),this.logger.info("Form submission successful",{email:r.substring(0,3)+"...",success:n.success,duration:n.duration+"ms"}),this.logger.debug("Animating form success state"),Vu.setupFormAnimation(t,(()=>{t.innerHTML=`<div class="success-message">${zu.translate("form.success")}</div>`;const e=t.querySelector(".success-message");e&&(e.style.opacity="0",e.style.transform="translateY(20px)",e.style.transition="opacity 0.6s ease-out, transform 0.6s ease-out",requestAnimationFrame((()=>{e.style.opacity="1",e.style.transform="translateY(0)"}))),this.logger.debug("Success message displayed")}))}catch(s){this.logger.error("Form submission error:",s);const i=t.querySelector('button[type="submit"]');$u(i),Ov.handleError(s,n,{clearOnFocus:!0,associatedInput:e})}}))):this.logger.warn("Signup form not found, form handlers not initialized"),qu()}setupFeedbackSystem(){this.logger.debug("Setting up feedback system");const t=document.getElementById("feedback-form"),e=document.getElementById("feedback-thanks");this.logger.debug("Feedback elements:",{feedbackFormFound:!!t,feedbackThanksFound:!!e}),t?(this.logger.debug("Setting up feedback form"),t.style.opacity="1",t.style.height="auto",this.logger.debug("Feedback form is always visible"),t.addEventListener("submit",(async n=>{n.preventDefault(),this.logger.debug("Feedback form submitted");const i=document.getElementById("feedback-text").value.trim();if(i){this.logger.debug("Feedback text provided, length:",i.length);try{const n=t.querySelector('button[type="submit"]');ju(n,zu.translate("feedback.submitting")),this.logger.debug("Feedback form in submission state"),this.logger.time("feedback-submission");const r=await this.submitFeedback(i);this.logger.timeEnd("feedback-submission"),this.logger.info("Feedback submission successful",{type:"positive",textLength:i.length,success:r.success}),this.logger.debug("Animating feedback form out"),t.style.transition="height 0.5s ease-in, opacity 0.5s ease-in",t.style.height=t.scrollHeight+"px",requestAnimationFrame((()=>{t.style.height="0",t.style.opacity="0",t.addEventListener("transitionend",(()=>{t.classList.add("hidden"),t.reset(),this.logger.trace("Feedback form hidden and reset"),this.logger.debug("Animating thanks message in"),e.style.opacity="0",e.style.transform="scale(0.9)",e.style.transition="opacity 0.5s ease-out, transform 0.5s ease-out",e.classList.remove("hidden"),requestAnimationFrame((()=>{e.style.opacity="1",e.style.transform="scale(1)",this.logger.debug("Thanks message shown, scheduling auto-hide"),setTimeout((()=>{e.style.opacity="0",e.style.transform="scale(0.9)",e.addEventListener("transitionend",(()=>{e.classList.add("hidden"),$u(n),this.logger.debug("Reset feedback UI state")}),{once:!0})}),3e3)}))}))}))}catch(r){this.logger.error("Feedback submission error:",r);const e=t.querySelector('button[type="submit"]');$u(e);const n=document.createElement("div");n.classList.add("error-message"),t.appendChild(n),Ov.handleError(r,n),setTimeout((()=>{n.parentNode&&n.parentNode.removeChild(n)}),5e3)}}else this.logger.debug("Empty feedback text, submission ignored")}))):this.logger.warn("Some feedback elements not found, feedback system not fully initialized")}validateEmail(t){this.logger.trace("Validating email format");return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase())}async submitWaitlistEmail(t){this.logger.debug("Submitting email to waitlist",{email:t.substring(0,3)+"..."});try{let n="en";try{n=zu.getCurrentLocale()}catch(e){n=(navigator.language||navigator.userLanguage||"en").split("-")[0],this.logger.warn("Could not get current locale, using fallback",{locale:n})}const i={uiLanguage:n};return await Iv.addToWaitlist(t,i)}catch(n){throw this.logger.error("Waitlist submission error",n),n}}async submitFeedback(t){this.logger.debug("Submitting feedback",{feedbackLength:t.length});try{let n="en";try{n=zu.getCurrentLocale()}catch(e){n=(navigator.language||navigator.userLanguage||"en").split("-")[0],this.logger.warn("Could not get current locale, using fallback",{locale:n})}const i={uiLanguage:n};return await Iv.submitFeedback(t,i)}catch(n){throw this.logger.error("Feedback submission error",n),n}}},Nv=Bu.getModuleLogger("animation-helper");const Pv={restartAllAnimations:function(){Nv.info("Restarting all animations"),document.querySelectorAll(".animated").forEach((t=>{t.classList.remove("animated")})),document.body.offsetHeight,setTimeout((()=>{document.querySelectorAll(".will-animate").forEach((t=>{t.classList.add("animated")})),Nv.debug("All animations restarted")}),50)}};const Rv=new class{constructor(){this.log=Bu.getModuleLogger("loading-transition"),this.initialized=!1,this.languageReady=!1,this.uiReady=!1,this.transitionStarted=!1}init(){this.initialized?this.log.warn("LoadingTransitionManager already initialized"):(this.log.info("Initializing loading transition manager"),document.body.classList.add("loading-state"),zu.addObserver((()=>{this.languageReady=!0,this.checkReadyState()})),window.addEventListener("DOMContentLoaded",(()=>{this.uiReady=!0,this.checkReadyState()})),this.fallbackTimeout=setTimeout((()=>{this.log.warn("Fallback timeout reached, forcing transition"),this.startTransition()}),3e3),this.initialized=!0,this.log.info("Loading transition manager initialized"))}checkReadyState(){this.log.debug(`Ready state check - Language: ${this.languageReady}, UI: ${this.uiReady}`),this.languageReady&&this.uiReady&&!this.transitionStarted&&setTimeout((()=>{this.startTransition()}),800)}startTransition(){this.transitionStarted||(this.transitionStarted=!0,clearTimeout(this.fallbackTimeout),this.log.info("Starting transition to loaded state"),requestAnimationFrame((()=>{document.body.classList.remove("loading-state"),document.body.classList.add("loaded"),setTimeout((()=>{this.log.debug("Transition complete, triggering animations"),Pv.restartAllAnimations(),document.dispatchEvent(new CustomEvent("loading-transition-complete"))}),1200)})))}};const Bv=new class{constructor(){this.isInitialized=!1,this.logger=Bu.getModuleLogger("ui-manager"),this.logger.info("UIManager instance created")}init(){if(this.isInitialized)this.logger.warn("UIManager already initialized");else{this.logger.time("ui-initialization"),this.logger.info("Initializing UI manager");try{this.logger.debug("Setting up event listeners"),this.setupEventListeners(),this.logger.debug("Setting up header scroll behavior"),this.setupHeaderScroll(),this.logger.debug("Adding accessibility features"),this.addAccessibilityFeatures(),this.logger.info("UI manager initialization complete")}catch(t){this.logger.error("UI initialization failed",t)}finally{this.isInitialized=!0,this.logger.timeEnd("ui-initialization")}}}setupEventListeners(){const t=document.querySelector(".menu-toggle"),e=document.querySelector("#primary-navigation");this.logger.debug("Setting up event listeners",{menuToggleFound:!!t,primaryNavFound:!!e}),t&&e?t.addEventListener("click",(()=>{const n="true"===t.getAttribute("aria-expanded");this.logger.debug("Menu toggle clicked",{wasExpanded:n}),t.setAttribute("aria-expanded",!n),e.classList.toggle("active"),document.body.style.overflow=n?"":"hidden"})):this.logger.warn("Mobile menu elements not found",{menuToggle:t,primaryNav:e});const n=document.querySelectorAll('a[href^="#"]:not([href="#"])');this.logger.debug(`Found ${n.length} anchor links for smooth scrolling`),n.forEach((n=>{n.addEventListener("click",(function(n){n.preventDefault();const i=this.getAttribute("href"),r=document.querySelector(i);if(r){const n=80,s=r.getBoundingClientRect().top+window.pageYOffset-n;"scrollBehavior"in document.documentElement.style?window.scrollTo({top:s,behavior:"smooth"}):window.scrollTo(0,s),Bu.getModuleLogger("ui-manager").debug("Smooth scrolling to",{targetId:i}),(null==e?void 0:e.classList.contains("active"))&&(t.setAttribute("aria-expanded","false"),e.classList.remove("active"),document.body.style.overflow="",Bu.getModuleLogger("ui-manager").debug("Closed mobile menu after navigation"))}else Bu.getModuleLogger("ui-manager").warn(`Target element not found: ${i}`)}))}));const i=document.querySelectorAll(".nav-links li");this.logger.debug(`Setting up ${i.length} nav items for staggered animation`),i.forEach(((t,e)=>{t.style.setProperty("--item-index",e)}))}setupHeaderScroll(){const t=document.querySelector("header");let e=window.scrollY;this.logger.debug("Setting up header scroll behavior",{headerFound:!!t}),t?window.addEventListener("scroll",this.debounce((()=>{const n=window.scrollY,i=n-e;this.logger.trace("Scroll event",{scrollY:n,scrollDelta:i,lastScrollY:e}),n>10?t.classList.contains("header-scrolled")||(t.classList.add("header-scrolled"),this.logger.debug("Header entered scrolled state")):t.classList.contains("header-scrolled")&&(t.classList.remove("header-scrolled"),this.logger.debug("Header exited scrolled state")),n>e&&n>100?t.classList.contains("header-hidden")||(t.classList.add("header-hidden"),this.logger.debug("Header hidden (scrolling down)")):t.classList.contains("header-hidden")&&(t.classList.remove("header-hidden"),this.logger.debug("Header revealed (scrolling up)")),e=n}),50)):this.logger.warn("Header element not found, scroll behavior not initialized")}addAccessibilityFeatures(){this.logger.debug("Adding accessibility features");window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(this.logger.info("Reduced motion preference detected, adapting animations"),document.body.classList.add("reduced-motion"));const t=document.querySelectorAll("a, button, input, select, textarea");this.logger.debug(`Adding focus handlers to ${t.length} interactive elements`),t.forEach((t=>{t.addEventListener("focus",(()=>{t.classList.add("focus-visible")})),t.addEventListener("blur",(()=>{t.classList.remove("focus-visible")}))})),this.logger.debug("Accessibility features setup complete")}debounce(t,e){let n;return this.logger.trace("Creating debounced function",{wait:e}),function(...i){clearTimeout(n),n=setTimeout((()=>{clearTimeout(n),t(...i)}),e)}}};const Vv=new class{constructor(){this.isInitialized=!1,this.logger=Bu.getModuleLogger("app"),this.logger.info("AppManager instance created")}init(){if(this.isInitialized)this.logger.warn("AppManager already initialized");else{this.logger.time("app-initialization"),this.logger.info("Initializing application");try{this.logger.debug("Initializing Loading Transition manager"),Rv.init(),this.logger.debug("Initializing UI manager"),Bv.init(),this.logger.debug("Initializing Form manager"),Mv.init(),this.setupAnalyticsTracking(),document.addEventListener("loading-transition-complete",(()=>{this.logger.info("Loading transition complete, triggering animations"),Uu.init()})),this.logger.info("Application initialization complete")}catch(t){this.logger.error("Initialization failed",t)}finally{this.isInitialized=!0,this.logger.timeEnd("app-initialization")}}}setupAnalyticsTracking(){this.logger.debug("Setting up analytics tracking"),this.setupCTATracking(),this.setupSectionViewTracking(),this.setupLanguageChangeTracking()}setupCTATracking(){this.logger.debug("Setting up CTA tracking");[{selector:".btn-hero-cta",id:"hero-cta",location:"hero"},{selector:".btn-ghost",id:"hero-features",location:"hero"},{selector:"#signup-form .btn",id:"waitlist-signup",location:"cta"},{selector:"#feedback-form .btn",id:"feedback-submit",location:"feedback"},{selector:'a[href="about.html"]',id:"footer-about",location:"footer"},{selector:'a[href="privacy.html"]',id:"footer-privacy",location:"footer"},{selector:'a[href="terms.html"]',id:"footer-terms",location:"footer"},{selector:".nav-links a",id:"nav-link",location:"header"}].forEach((({selector:t,id:e,location:n})=>{const i=document.querySelectorAll(t);i.forEach(((t,r)=>{const s=i.length>1?`${e}-${r}`:e;t.addEventListener("click",(()=>{const e=t.textContent.trim()||t.getAttribute("data-i18n")||"unknown";Sv.trackCTAClick(s,e,n)}))}))}))}setupSectionViewTracking(){this.logger.debug("Setting up section view tracking");const t=[{id:"hero",name:"Hero"},{id:"features",name:"Features"},{id:"solution",name:"Solution"},{id:"cta",name:"Call to Action"},{id:"feedback",name:"Feedback"}],e=new Set,n=new IntersectionObserver((n=>{n.forEach((n=>{if(n.isIntersecting&&!e.has(n.target.id)){const i=n.target.id,r=t.find((t=>t.id===i));r&&(Sv.trackSectionView(r.id,r.name),e.add(i))}}))}),{threshold:.5});t.forEach((t=>{const e=document.getElementById(t.id);e&&n.observe(e)}))}setupLanguageChangeTracking(){this.logger.debug("Setting up language change tracking");let t=zu.getCurrentLocale();zu.addObserver((e=>{t&&e&&t!==e&&(Sv.trackLanguageChange(t,e),t=e)}))}};document.addEventListener("DOMContentLoaded",(()=>{Vv.init()}));export{Iv as f,Bu as l};
