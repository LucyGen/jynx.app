!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const e=new class{constructor(e="fr"){this.defaultLocale=e,this.translations={},this.observers=new Set,this.loadingPromises={},this.supportedLocales=["en","fr"],this.currentLocale=this.determineLocale(),this.currentLocale!==this.defaultLocale&&this._preloadTranslation(this.defaultLocale)}determineLocale(){const e=new URLSearchParams(window.location.search).get("lang");if(e&&this.supportedLocales.includes(e.toLowerCase()))return localStorage.setItem("userLocale",e.toLowerCase()),e.toLowerCase();const t=localStorage.getItem("userLocale");if(t&&this.supportedLocales.includes(t))return t;const n=navigator.language.split("-")[0];return n&&this.supportedLocales.includes(n)?n:this.defaultLocale}_preloadTranslation(e){return this.loadingPromises[e]||(this.loadingPromises[e]=this._fetchTranslation(e).then((t=>(this.translations[e]=t,t))).catch((t=>(console.warn(`Preloading translations for ${e} failed:`,t),null)))),this.loadingPromises[e]}async _fetchTranslation(e){const t=`/locales/${e}.json`;try{const e=await fetch(t,{headers:{Accept:"application/json","Cache-Control":"no-cache"}});if(!e.ok)throw new Error(`Failed to load translations. Status: ${e.status}`);const n=await e.json();if("object"!=typeof n||null===n)throw new Error("Invalid translation file format");return n}catch(n){throw console.error(`Failed to fetch translation for ${e}:`,n),console.error(`Failed to load locale file from ${t}. Make sure the file exists in the public/locales directory.`),n}}async init(){try{this.loadingPromises[this.currentLocale]?await this.loadingPromises[this.currentLocale]:await this.loadTranslations(this.currentLocale),this.updatePageContent(),this.setupLanguageSwitcher(),this.updateUrlQuery(),this.preloadRemainingLocales()}catch(e){console.error("Failed to initialize i18n:",e),this.currentLocale=this.defaultLocale}}updateUrlQuery(){try{const e=new URL(window.location.href);e.searchParams.get("lang")!==this.currentLocale&&(e.searchParams.set("lang",this.currentLocale),window.history.replaceState(null,"",e.toString()))}catch(e){console.error("Failed to update URL query:",e)}}preloadRemainingLocales(){const e=this.supportedLocales.filter((e=>!this.translations[e]));0!==e.length&&(window.pageLoader?"function"==typeof window.pageLoader.onBackgroundLoadSafe?window.pageLoader.onBackgroundLoadSafe((()=>this._preloadAllLocales(e))):"function"==typeof window.pageLoader.onReady?window.pageLoader.onReady((()=>this._preloadAllLocales(e))):this._schedulePreload(e):this._schedulePreload(e))}_schedulePreload(e){"function"==typeof window.requestIdleCallback?window.requestIdleCallback((()=>this._preloadAllLocales(e))):setTimeout((()=>this._preloadAllLocales(e)),1e3)}_preloadAllLocales(e){e.forEach((e=>{this.translations[e]||e===this.currentLocale||this._preloadTranslation(e)}))}async changeLocale(e){if(e!==this.currentLocale)if(this.supportedLocales.includes(e))try{this._showLoadingIndicator(!0);const t=performance.now();this.translations[e]?this.currentLocale=e:await this.loadTranslations(e),localStorage.setItem("userLocale",e);const n=performance.now()-t;n<200&&await new Promise((e=>setTimeout(e,200-n))),this.updatePageContent(),this.updateUrlQuery(),this.notifyObservers(),document.documentElement.lang=e;const r=performance.now()-t;console.info(`Locale change to ${e} completed in ${Math.round(r)}ms`)}catch(t){console.error(`Failed to change locale to ${e}:`,t)}finally{setTimeout((()=>{this._showLoadingIndicator(!1)}),100)}else console.warn(`Locale ${e} is not supported`)}_showLoadingIndicator(e){const t=document.querySelectorAll("#language-switcher, #language-selector"),n=document.querySelectorAll("[data-i18n], [data-i18n-placeholder], [data-i18n-aria-label]");let r=document.querySelector(".language-transition-container"),i=document.getElementById("i18n-success-icon");e?(i&&(i.style.display="none"),r||(r=document.createElement("div"),r.classList.add("language-transition-container"),document.body.appendChild(r),r.offsetHeight),r.classList.add("active"),t.forEach((e=>{e.classList.add("loading"),e.setAttribute("aria-busy","true")})),n.forEach((e=>{e.classList.add("i18n-loading")})),this._announceToScreenReaders("Changing language. Please wait.")):(r&&(r.classList.remove("active"),setTimeout((()=>{r&&r.parentNode&&r.parentNode.removeChild(r)}),300)),t.forEach((e=>{e.classList.remove("loading"),e.removeAttribute("aria-busy"),e.classList.add("switch-complete"),this._showSuccessIcon(e),setTimeout((()=>{e.classList.remove("switch-complete")}),600)})),n.forEach((e=>{e.classList.remove("i18n-loading")})),this._announceToScreenReaders(`Language changed to ${this.currentLocale}`))}_showSuccessIcon(e){let t=document.getElementById("i18n-success-icon");t||(t=document.createElement("div"),t.setAttribute("id","i18n-success-icon"),t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.zIndex="9999",t.style.pointerEvents="none",t.style.borderRadius="50%",t.style.backgroundColor="var(--color-success, #4CAF50)",t.style.color="white",t.style.width="20px",t.style.height="20px",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.opacity="0",t.style.transition="opacity 0.2s ease-out",t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>',document.body.appendChild(t));const n=e.getBoundingClientRect();t.style.top=n.top+n.height/2-10+"px",t.style.left=`${n.right+10}px`,t.style.opacity="1",setTimeout((()=>{t&&(t.style.opacity="0")}),1500);window.matchMedia("(prefers-reduced-motion: reduce)").matches||t.animate([{transform:"scale(0.8)",opacity:0},{transform:"scale(1.1)",opacity:1},{transform:"scale(1)",opacity:1}],{duration:300,easing:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fill:"forwards"})}_announceToScreenReaders(e){try{let t=document.getElementById("i18n-sr-announcer");t||(t=document.createElement("div"),t.setAttribute("id","i18n-sr-announcer"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.style.position="absolute",t.style.width="1px",t.style.height="1px",t.style.padding="0",t.style.margin="-1px",t.style.overflow="hidden",t.style.clip="rect(0, 0, 0, 0)",t.style.whiteSpace="nowrap",t.style.border="0",document.body.appendChild(t)),t.textContent=e}catch(t){console.error("Failed to announce to screen readers:",t)}}setupLanguageSwitcher(){try{const e=document.querySelectorAll("#language-switcher, #language-selector");if(!e.length)return;const t=document.getElementById("language-selector");if(!t)return;if(this.currentLocale){const e=t.options;if(null==e?void 0:e.length){const n=this.currentLocale.toString().toLowerCase(),r=Array.from(e).find((e=>e.value.toLowerCase()===n));r&&(t.value=r.value)}}e.forEach((n=>{t.value&&(n.value=t.value);const r=n.cloneNode(!0);n.parentNode.replaceChild(r,n),r.addEventListener("change",(t=>{const n=t.target.value;e.forEach((e=>{e.value=n})),this.changeLocale(n)}))}))}catch(e){console.error("Failed to setup language switcher:",e)}}async loadTranslations(e){try{return this.loadingPromises[e]||(this.loadingPromises[e]=this._fetchTranslation(e).then((t=>(this.translations[e]=t,t)))),await this.loadingPromises[e],this.currentLocale=e,this.translations[e]}catch(t){throw console.error(`Failed to load translations for ${e}:`,t),t}}translate(e,t={}){if(!e)return"";const n=e.split(".");let r=this.translations[this.currentLocale];if(!r)return e;for(const i of n)if(r=null==r?void 0:r[i],void 0===r){console.warn(`Translation missing for key: ${e}`),r=this.getFromDefaultLocale(e);break}return"string"!=typeof r?e:r.replace(/\{\{\s*(\w+)\s*\}\}/g,((e,n)=>void 0!==t[n]?t[n]:`{{${n}}}`))}getFromDefaultLocale(e){if(!e)return"";const t=e.split(".");let n=this.translations[this.defaultLocale];if(!n)return e;for(const r of t)if(n=null==n?void 0:n[r],void 0===n)return e;return n}updatePageContent(){try{document.querySelectorAll("[data-i18n]").forEach((e=>{const t=e.getAttribute("data-i18n");e.textContent=this.translate(t),e.classList.add("i18n-transition")})),document.querySelectorAll("[data-i18n-placeholder]").forEach((e=>{const t=e.getAttribute("data-i18n-placeholder");e.placeholder=this.translate(t),e.classList.add("i18n-transition")})),document.querySelectorAll("[data-i18n-aria-label]").forEach((e=>{const t=e.getAttribute("data-i18n-aria-label");e.setAttribute("aria-label",this.translate(t)),e.classList.add("i18n-transition")}))}catch(e){console.error("Failed to update page content:",e)}}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}notifyObservers(){this.observers.forEach((e=>{try{e(this.currentLocale)}catch(t){console.error("Error in i18n observer:",t)}}))}getCurrentLocale(){return this.currentLocale}};function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){i=!0,s=l}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){return Object.getOwnPropertyNames(Object(e)).reduce((function(n,r){var i=Object.getOwnPropertyDescriptor(Object(e),r),s=Object.getOwnPropertyDescriptor(Object(t),r);return Object.defineProperty(n,r,s||i)}),{})}function h(e){return"string"==typeof e}function d(e){return Array.isArray(e)}function f(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=c(t);return void 0!==n.types?e=n.types:void 0!==n.split&&(e=n.split),void 0!==e&&(n.types=(h(e)||d(e)?String(e):"").split(",").map((function(e){return String(e).trim()})).filter((function(e){return/((line)|(word)|(char))/i.test(e)}))),(n.absolute||n.position)&&(n.absolute=n.absolute||/absolute/.test(t.position)),n}function g(e){var t=h(e)||d(e)?String(e):"";return{none:!t,lines:/line/i.test(t),words:/word/i.test(t),chars:/char/i.test(t)}}function p(e){return null!==e&&"object"==typeof e}function m(e){return p(e)&&/^(1|3|11)$/.test(e.nodeType)}function y(e){return d(e)?e:null==e?[]:function(e){return p(e)&&function(e){return"number"==typeof e&&e>-1&&e%1==0}(e.length)}(e)?Array.prototype.slice.call(e):[e]}function v(e){var t=e;return h(e)&&(t=/^(#[a-z]\w+)$/.test(e.trim())?document.getElementById(e.trim().slice(1)):document.querySelectorAll(e)),y(t).reduce((function(e,t){return[].concat(a(e),a(y(t).filter(m)))}),[])}"undefined"!=typeof window&&(window.i18n=e),document.addEventListener("DOMContentLoaded",(()=>{e.init().catch((e=>{console.error("Failed to initialize i18n:",e)}))})),function(){function e(){for(var e=arguments.length,t=0;t<e;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];1===n.nodeType||11===n.nodeType?this.appendChild(n):this.appendChild(document.createTextNode(String(n)))}}function t(){for(;this.lastChild;)this.removeChild(this.lastChild);arguments.length&&this.append.apply(this,arguments)}function n(){for(var e=this.parentNode,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.length;if(e)for(i||e.removeChild(this);i--;){var s=n[i];"object"!=typeof s?s=this.ownerDocument.createTextNode(s):s.parentNode&&s.parentNode.removeChild(s),i?e.insertBefore(this.previousSibling,s):e.replaceChild(s,this)}}"undefined"!=typeof Element&&(Element.prototype.append||(Element.prototype.append=e,DocumentFragment.prototype.append=e),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=t,DocumentFragment.prototype.replaceChildren=t),Element.prototype.replaceWith||(Element.prototype.replaceWith=n,DocumentFragment.prototype.replaceWith=n))}();var b=Object.entries,D="_splittype",w={},_=0;function E(e,t,n){if(!p(e))return console.warn("[data.set] owner is not an object"),null;var r=e[D]||(e[D]=++_),i=w[r]||(w[r]={});return void 0===n?t&&Object.getPrototypeOf(t)===Object.prototype&&(w[r]=s(s({},i),t)):void 0!==t&&(i[t]=n),n}function C(e,t){var n=p(e)?e[D]:null;return n&&w[n]||{}}function T(e){var t=e&&e[D];t&&(delete e[t],delete w[t])}var S="\\ud800-\\udfff",k="\\u0300-\\u036f\\ufe20-\\ufe23",x="\\u20d0-\\u20f0",A="\\ufe0e\\ufe0f",I="[".concat(S,"]"),F="[".concat(k).concat(x,"]"),L="\\ud83c[\\udffb-\\udfff]",M="(?:".concat(F,"|").concat(L,")"),O="[^".concat(S,"]"),P="(?:\\ud83c[\\udde6-\\uddff]){2}",N="[\\ud800-\\udbff][\\udc00-\\udfff]",R="\\u200d",B="".concat(M,"?"),V="[".concat(A,"]?"),U=V+B+("(?:"+R+"(?:"+[O,P,N].join("|")+")"+V+B+")*"),z="(?:".concat(["".concat(O).concat(F,"?"),F,P,N,I].join("|"),"\n)"),j=RegExp("".concat(L,"(?=").concat(L,")|").concat(z).concat(U),"g"),$=RegExp("[".concat([R,S,k,x,A].join(""),"]"));function q(e){return $.test(e)}function H(e){return q(e)?function(e){return e.match(j)||[]}(e):function(e){return e.split("")}(e)}function G(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(e=null==(t=e)?"":String(t))&&h(e)&&!n&&q(e)?H(e):e.split(n)}function W(e,t){var n=document.createElement(e);return t?(Object.keys(t).forEach((function(e){var r=t[e],i=h(r)?r.trim():r;null!==i&&""!==i&&("children"===e?n.append.apply(n,a(y(i))):n.setAttribute(e,i))})),n):n}var K={splitClass:"",lineClass:"line",wordClass:"word",charClass:"char",types:["lines","words","chars"],absolute:!1,tagName:"div"};function X(e,t){var n,r=g((t=c(K,t)).types),i=t.tagName,s=e.nodeValue,o=document.createDocumentFragment(),l=[];return/^\s/.test(s)&&o.append(" "),n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return(e?String(e):"").trim().replace(/\s+/g," ").split(t)}(s).reduce((function(e,n,s,u){var c,h;return r.chars&&(h=G(n).map((function(e){var n=W(i,{class:"".concat(t.splitClass," ").concat(t.charClass),style:"display: inline-block;",children:e});return E(n,"isChar",!0),l=[].concat(a(l),[n]),n}))),r.words||r.lines?(E(c=W(i,{class:"".concat(t.wordClass," ").concat(t.splitClass),style:"display: inline-block; ".concat(r.words&&t.absolute?"position: relative;":""),children:r.chars?h:n}),{isWord:!0,isWordStart:!0,isWordEnd:!0}),o.appendChild(c)):h.forEach((function(e){o.appendChild(e)})),s<u.length-1&&o.append(" "),r.words?e.concat(c):e}),[]),/\s$/.test(s)&&o.append(" "),e.replaceWith(o),{words:n,chars:l}}function Y(e,t){var n=e.nodeType,r={words:[],chars:[]};if(!/(1|3|11)/.test(n))return r;if(3===n&&/\S/.test(e.nodeValue))return X(e,t);var i=y(e.childNodes);if(i.length&&(E(e,"isSplit",!0),!C(e).isRoot)){e.style.display="inline-block",e.style.position="relative";var s=e.nextSibling,o=e.previousSibling,l=e.textContent||"",u=s?s.textContent:" ",c=o?o.textContent:" ";E(e,{isWordEnd:/\s$/.test(l)||/^\s/.test(u),isWordStart:/^\s/.test(l)||/\s$/.test(c)})}return i.reduce((function(e,n){var r=Y(n,t),i=r.words,s=r.chars;return{words:[].concat(a(e.words),a(i)),chars:[].concat(a(e.chars),a(s))}}),r)}function Q(e){C(e).isWord?(T(e),e.replaceWith.apply(e,a(e.childNodes))):y(e.children).forEach((function(e){return Q(e)}))}function J(e,t,n){var r,i,s,a=g(t.types),l=t.tagName,u=e.getElementsByTagName("*"),c=[],h=[],d=null,f=[],p=e.parentElement,m=e.nextElementSibling,v=document.createDocumentFragment(),b=window.getComputedStyle(e),D=b.textAlign,w=.2*parseFloat(b.fontSize);return t.absolute&&(s={left:e.offsetLeft,top:e.offsetTop,width:e.offsetWidth},i=e.offsetWidth,r=e.offsetHeight,E(e,{cssWidth:e.style.width,cssHeight:e.style.height})),y(u).forEach((function(r){var i=r.parentElement===e,s=function(e,t,n,r){if(!n.absolute)return{top:t?e.offsetTop:null};var i=e.offsetParent,s=o(r,2),a=s[0],l=s[1],u=0,c=0;if(i&&i!==document.body){var h=i.getBoundingClientRect();u=h.x+a,c=h.y+l}var d=e.getBoundingClientRect(),f=d.width,g=d.height,p=d.x;return{width:f,height:g,top:d.y+l-c,left:p+a-u}}(r,i,t,n),l=s.width,u=s.height,f=s.top,g=s.left;/^br$/i.test(r.nodeName)||(a.lines&&i&&((null===d||f-d>=w)&&(d=f,c.push(h=[])),h.push(r)),t.absolute&&E(r,{top:f,left:g,width:l,height:u}))})),p&&p.removeChild(e),a.lines&&(f=c.map((function(e){var n=W(l,{class:"".concat(t.splitClass," ").concat(t.lineClass),style:"display: block; text-align: ".concat(D,"; width: 100%;")});E(n,"isLine",!0);var r={height:0,top:1e4};return v.appendChild(n),e.forEach((function(e,t,i){var s=C(e),o=s.isWordEnd,a=s.top,l=s.height,u=i[t+1];r.height=Math.max(r.height,l),r.top=Math.min(r.top,a),n.appendChild(e),o&&C(u).isWordStart&&n.append(" ")})),t.absolute&&E(n,{height:r.height,top:r.top}),n})),a.words||Q(v),e.replaceChildren(v)),t.absolute&&(e.style.width="".concat(e.style.width||i,"px"),e.style.height="".concat(r,"px"),y(u).forEach((function(e){var t=C(e),n=t.isLine,r=t.top,i=t.left,o=t.width,a=t.height,l=C(e.parentElement),u=!n&&l.isLine;e.style.top="".concat(u?r-l.top:r,"px"),e.style.left="".concat(n?s.left:i-(u?s.left:0),"px"),e.style.height="".concat(a,"px"),e.style.width="".concat(n?s.width:o,"px"),e.style.position="absolute"}))),p&&(m?p.insertBefore(e,m):p.appendChild(e)),f}var Z=c(K,{}),ee=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isSplit=!1,this.settings=c(Z,f(n)),this.elements=v(t),this.split()}return n(e,null,[{key:"clearData",value:function(){Object.keys(w).forEach((function(e){delete w[e]}))}},{key:"setDefaults",value:function(e){return Z=c(Z,f(e)),K}},{key:"revert",value:function(e){v(e).forEach((function(e){var t=C(e),n=t.isSplit,r=t.html,i=t.cssWidth,s=t.cssHeight;n&&(e.innerHTML=r,e.style.width=i||"",e.style.height=s||"",T(e))}))}},{key:"create",value:function(t,n){return new e(t,n)}},{key:"data",get:function(){return w}},{key:"defaults",get:function(){return Z},set:function(e){Z=c(Z,f(e))}}]),n(e,[{key:"split",value:function(e){var t=this;this.revert(),this.elements.forEach((function(e){E(e,"html",e.innerHTML)})),this.lines=[],this.words=[],this.chars=[];var n=[window.pageXOffset,window.pageYOffset];void 0!==e&&(this.settings=c(this.settings,f(e)));var r=g(this.settings.types);r.none||(this.elements.forEach((function(e){E(e,"isRoot",!0);var n=Y(e,t.settings),r=n.words,i=n.chars;t.words=[].concat(a(t.words),a(r)),t.chars=[].concat(a(t.chars),a(i))})),this.elements.forEach((function(e){if(r.lines||t.settings.absolute){var i=J(e,t.settings,n);t.lines=[].concat(a(t.lines),a(i))}})),this.isSplit=!0,window.scrollTo(n[0],n[1]),b(w).forEach((function(e){var t=o(e,2),n=t[0],r=t[1],i=r.isRoot,s=r.isSplit;i&&s||(w[n]=null,delete w[n])})))}},{key:"revert",value:function(){this.isSplit&&(this.lines=null,this.words=null,this.chars=null,this.isSplit=!1),e.revert(this.elements)}}]),e}();function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}
/*!
 * GSAP 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var re,ie,se,oe,ae,le,ue,ce,he,de,fe,ge,pe,me,ye,ve,be,De,we,_e,Ee,Ce,Te,Se,ke,xe,Ae,Ie,Fe,Le,Me,Oe,Pe={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Ne={duration:.5,overwrite:!1,delay:0},Re=1e8,Be=1e-8,Ve=2*Math.PI,Ue=Ve/4,ze=0,je=Math.sqrt,$e=Math.cos,qe=Math.sin,He=function(e){return"string"==typeof e},Ge=function(e){return"function"==typeof e},We=function(e){return"number"==typeof e},Ke=function(e){return void 0===e},Xe=function(e){return"object"==typeof e},Ye=function(e){return!1!==e},Qe=function(){return"undefined"!=typeof window},Je=function(e){return Ge(e)||He(e)},Ze="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},et=Array.isArray,tt=/(?:-?\.?\d|\.)+/gi,nt=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,rt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,it=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,st=/[+-]=-?[.\d]+/,ot=/[^,'"\[\]\s]+/gi,at=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,lt={},ut={},ct=function(e){return(ut=Vt(e,lt))&&Ur},ht=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},dt=function(e,t){return!t&&console.warn(e)},ft=function(e,t){return e&&(lt[e]=t)&&ut&&(ut[e]=t)||lt},gt=function(){return 0},pt={suppressEvents:!0,isStart:!0,kill:!1},mt={suppressEvents:!0,kill:!1},yt={suppressEvents:!0},vt={},bt=[],Dt={},wt={},_t={},Et=30,Ct=[],Tt="",St=function(e){var t,n,r=e[0];if(Xe(r)||Ge(r)||(e=[e]),!(t=(r._gsap||{}).harness)){for(n=Ct.length;n--&&!Ct[n].targetTest(r););t=Ct[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new er(e[n],t)))||e.splice(n,1);return e},kt=function(e){return e._gsap||St(yn(e))[0]._gsap},xt=function(e,t,n){return(n=e[t])&&Ge(n)?e[t]():Ke(n)&&e.getAttribute&&e.getAttribute(t)||n},At=function(e,t){return(e=e.split(",")).forEach(t)||e},It=function(e){return Math.round(1e5*e)/1e5||0},Ft=function(e){return Math.round(1e7*e)/1e7||0},Lt=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),"+"===n?e+r:"-"===n?e-r:"*"===n?e*r:e/r},Mt=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},Ot=function(){var e,t,n=bt.length,r=bt.slice(0);for(Dt={},bt.length=0,e=0;e<n;e++)(t=r[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},Pt=function(e,t,n,r){bt.length&&!ie&&Ot(),e.render(t,n,ie&&t<0&&(e._initted||e._startAt)),bt.length&&!ie&&Ot()},Nt=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(ot).length<2?t:He(e)?e.trim():e},Rt=function(e){return e},Bt=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},Vt=function(e,t){for(var n in t)e[n]=t[n];return e},Ut=function e(t,n){for(var r in n)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(t[r]=Xe(n[r])?e(t[r]||(t[r]={}),n[r]):n[r]);return t},zt=function(e,t){var n,r={};for(n in e)n in t||(r[n]=e[n]);return r},jt=function(e){var t,n=e.parent||oe,r=e.keyframes?(t=et(e.keyframes),function(e,n){for(var r in n)r in e||"duration"===r&&t||"ease"===r||(e[r]=n[r])}):Bt;if(Ye(e.inherit))for(;n;)r(e,n.vars.defaults),n=n.parent||n._dp;return e},$t=function(e,t,n,r,i){var s,o=e[r];if(i)for(s=t[i];o&&o[i]>s;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},qt=function(e,t,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var i=t._prev,s=t._next;i?i._next=s:e[n]===t&&(e[n]=s),s?s._prev=i:e[r]===t&&(e[r]=i),t._next=t._prev=t.parent=null},Ht=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Gt=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},Wt=function(e,t,n,r){return e._startAt&&(ie?e._startAt.revert(mt):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},Kt=function e(t){return!t||t._ts&&e(t.parent)},Xt=function(e){return e._repeat?Yt(e._tTime,e=e.duration()+e._rDelay)*e:0},Yt=function(e,t){var n=Math.floor(e=Ft(e/t));return e&&n===e?n-1:n},Qt=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Jt=function(e){return e._end=Ft(e._start+(e._tDur/Math.abs(e._ts||e._rts||Be)||0))},Zt=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=Ft(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Jt(e),n._dirty||Gt(n,e)),e},en=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=Qt(e.rawTime(),t),(!t._dur||fn(0,t.totalDuration(),n)-t._tTime>Be)&&t.render(n,!0)),Gt(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-1e-8}},tn=function(e,t,n,r){return t.parent&&Ht(t),t._start=Ft((We(n)?n:n||e!==oe?cn(e,n,t):e._time)+t._delay),t._end=Ft(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),$t(e,t,"_first","_last",e._sort?"_start":0),on(t)||(e._recent=t),r||en(e,t),e._ts<0&&Zt(e,e._tTime),e},nn=function(e,t){return(lt.ScrollTrigger||ht("scrollTrigger",t))&&lt.ScrollTrigger.create(t,e)},rn=function(e,t,n,r,i){return lr(e,t,i),e._initted?!n&&e._pt&&!ie&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&he!==zn.frame?(bt.push(e),e._lazy=[i,r],1):void 0:1},sn=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},on=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},an=function(e,t,n,r){var i=e._repeat,s=Ft(t)||0,o=e._tTime/e._tDur;return o&&!r&&(e._time*=s/e._dur),e._dur=s,e._tDur=i?i<0?1e10:Ft(s*(i+1)+e._rDelay*i):s,o>0&&!r&&Zt(e,e._tTime=e._tDur*o),e.parent&&Jt(e),n||Gt(e.parent,e),e},ln=function(e){return e instanceof nr?Gt(e):an(e,e._dur)},un={_start:0,endTime:gt,totalDuration:gt},cn=function e(t,n,r){var i,s,o,a=t.labels,l=t._recent||un,u=t.duration()>=Re?l.endTime(!1):t._dur;return He(n)&&(isNaN(n)||n in a)?(s=n.charAt(0),o="%"===n.substr(-1),i=n.indexOf("="),"<"===s||">"===s?(i>=0&&(n=n.replace(/=/,"")),("<"===s?l._start:l.endTime(l._repeat>=0))+(parseFloat(n.substr(1))||0)*(o?(i<0?l:r).totalDuration()/100:1)):i<0?(n in a||(a[n]=u),a[n]):(s=parseFloat(n.charAt(i-1)+n.substr(i+1)),o&&r&&(s=s/100*(et(r)?r[0]:r).totalDuration()),i>1?e(t,n.substr(0,i-1),r)+s:u+s)):null==n?u:+n},hn=function(e,t,n){var r,i,s=We(t[1]),o=(s?2:1)+(e<2?0:1),a=t[o];if(s&&(a.duration=t[1]),a.parent=n,e){for(r=a,i=n;i&&!("immediateRender"in r);)r=i.vars.defaults||{},i=Ye(i.vars.inherit)&&i.parent;a.immediateRender=Ye(r.immediateRender),e<2?a.runBackwards=1:a.startAt=t[o-1]}return new fr(t[0],a,t[o+1])},dn=function(e,t){return e||0===e?t(e):t},fn=function(e,t,n){return n<e?e:n>t?t:n},gn=function(e,t){return He(e)&&(t=at.exec(e))?t[1]:""},pn=[].slice,mn=function(e,t){return e&&Xe(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Xe(e[0]))&&!e.nodeType&&e!==ae},yn=function(e,t,n){return se&&!t&&se.selector?se.selector(e):!He(e)||n||!le&&jn()?et(e)?function(e,t,n){return void 0===n&&(n=[]),e.forEach((function(e){var r;return He(e)&&!t||mn(e,1)?(r=n).push.apply(r,yn(e)):n.push(e)}))||n}(e,n):mn(e)?pn.call(e,0):e?[e]:[]:pn.call((t||ue).querySelectorAll(e),0)},vn=function(e){return e=yn(e)[0]||dt("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return yn(t,n.querySelectorAll?n:n===e?dt("Invalid scope")||ue.createElement("div"):e)}},bn=function(e){return e.sort((function(){return.5-Math.random()}))},Dn=function(e){if(Ge(e))return e;var t=Xe(e)?e:{each:e},n=Xn(t.ease),r=t.from||0,i=parseFloat(t.base)||0,s={},o=r>0&&r<1,a=isNaN(r)||o,l=t.axis,u=r,c=r;return He(r)?u=c={center:.5,edges:.5,end:1}[r]||0:!o&&a&&(u=r[0],c=r[1]),function(e,o,h){var d,f,g,p,m,y,v,b,D,w=(h||t).length,_=s[w];if(!_){if(!(D="auto"===t.grid?0:(t.grid||[1,Re])[1])){for(v=-1e8;v<(v=h[D++].getBoundingClientRect().left)&&D<w;);D<w&&D--}for(_=s[w]=[],d=a?Math.min(D,w)*u-.5:r%D,f=D===Re?0:a?w*c/D-.5:r/D|0,v=0,b=Re,y=0;y<w;y++)g=y%D-d,p=f-(y/D|0),_[y]=m=l?Math.abs("y"===l?p:g):je(g*g+p*p),m>v&&(v=m),m<b&&(b=m);"random"===r&&bn(_),_.max=v-b,_.min=b,_.v=w=(parseFloat(t.amount)||parseFloat(t.each)*(D>w?w-1:l?"y"===l?w/D:D:Math.max(D,w/D))||0)*("edges"===r?-1:1),_.b=w<0?i-w:i,_.u=gn(t.amount||t.each)||0,n=n&&w<0?Wn(n):n}return w=(_[e]-_.min)/_.max||0,Ft(_.b+(n?n(w):w)*_.v)+_.u}},wn=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=Ft(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(We(n)?0:gn(n))}},_n=function(e,t){var n,r,i=et(e);return!i&&Xe(e)&&(n=i=e.radius||Re,e.values?(e=yn(e.values),(r=!We(e[0]))&&(n*=n)):e=wn(e.increment)),dn(t,i?Ge(e)?function(t){return r=e(t),Math.abs(r-t)<=n?r:t}:function(t){for(var i,s,o=parseFloat(r?t.x:t),a=parseFloat(r?t.y:0),l=Re,u=0,c=e.length;c--;)(i=r?(i=e[c].x-o)*i+(s=e[c].y-a)*s:Math.abs(e[c]-o))<l&&(l=i,u=c);return u=!n||l<=n?e[u]:t,r||u===t||We(t)?u:u+gn(t)}:wn(e))},En=function(e,t,n,r){return dn(et(e)?!t:!0===n?!!(n=0):!r,(function(){return et(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*r)/r}))},Cn=function(e,t,n){return dn(n,(function(n){return e[~~t(n)]}))},Tn=function(e){for(var t,n,r,i,s=0,o="";~(t=e.indexOf("random(",s));)r=e.indexOf(")",t),i="["===e.charAt(t+7),n=e.substr(t+7,r-t-7).match(i?ot:tt),o+=e.substr(s,t-s)+En(i?n:+n[0],i?0:+n[1],+n[2]||1e-5),s=r+1;return o+e.substr(s,e.length-s)},Sn=function(e,t,n,r,i){var s=t-e,o=r-n;return dn(i,(function(t){return n+((t-e)/s*o||0)}))},kn=function(e,t,n){var r,i,s,o=e.labels,a=Re;for(r in o)(i=o[r]-t)<0==!!n&&i&&a>(i=Math.abs(i))&&(s=r,a=i);return s},xn=function(e,t,n){var r,i,s,o=e.vars,a=o[t],l=se,u=e._ctx;if(a)return r=o[t+"Params"],i=o.callbackScope||e,n&&bt.length&&Ot(),u&&(se=u),s=r?a.apply(i,r):a.call(i),se=l,s},An=function(e){return Ht(e),e.scrollTrigger&&e.scrollTrigger.kill(!!ie),e.progress()<1&&xn(e,"onInterrupt"),e},In=[],Fn=function(e){if(e)if(e=!e.name&&e.default||e,Qe()||e.headless){var t=e.name,n=Ge(e),r=t&&!n&&e.init?function(){this._props=[]}:e,i={init:gt,render:_r,add:or,kill:Cr,modifier:Er,rawVars:0},s={targetTest:0,get:0,getSetter:vr,aliases:{},register:0};if(jn(),e!==r){if(wt[t])return;Bt(r,Bt(zt(e,i),s)),Vt(r.prototype,Vt(i,zt(e,s))),wt[r.prop=t]=r,e.targetTest&&(Ct.push(r),vt[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}ft(t,r),e.register&&e.register(Ur,r,kr)}else In.push(e)},Ln=255,Mn={aqua:[0,Ln,Ln],lime:[0,Ln,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ln],navy:[0,0,128],white:[Ln,Ln,Ln],olive:[128,128,0],yellow:[Ln,Ln,0],orange:[Ln,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ln,0,0],pink:[Ln,192,203],cyan:[0,Ln,Ln],transparent:[Ln,Ln,Ln,0]},On=function(e,t,n){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)*Ln+.5|0},Pn=function(e,t,n){var r,i,s,o,a,l,u,c,h,d,f=e?We(e)?[e>>16,e>>8&Ln,e&Ln]:0:Mn.black;if(!f){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),Mn[e])f=Mn[e];else if("#"===e.charAt(0)){if(e.length<6&&(r=e.charAt(1),i=e.charAt(2),s=e.charAt(3),e="#"+r+r+i+i+s+s+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(f=parseInt(e.substr(1,6),16))>>16,f>>8&Ln,f&Ln,parseInt(e.substr(7),16)/255];f=[(e=parseInt(e.substr(1),16))>>16,e>>8&Ln,e&Ln]}else if("hsl"===e.substr(0,3))if(f=d=e.match(tt),t){if(~e.indexOf("="))return f=e.match(nt),n&&f.length<4&&(f[3]=1),f}else o=+f[0]%360/360,a=+f[1]/100,r=2*(l=+f[2]/100)-(i=l<=.5?l*(a+1):l+a-l*a),f.length>3&&(f[3]*=1),f[0]=On(o+1/3,r,i),f[1]=On(o,r,i),f[2]=On(o-1/3,r,i);else f=e.match(tt)||Mn.transparent;f=f.map(Number)}return t&&!d&&(r=f[0]/Ln,i=f[1]/Ln,s=f[2]/Ln,l=((u=Math.max(r,i,s))+(c=Math.min(r,i,s)))/2,u===c?o=a=0:(h=u-c,a=l>.5?h/(2-u-c):h/(u+c),o=u===r?(i-s)/h+(i<s?6:0):u===i?(s-r)/h+2:(r-i)/h+4,o*=60),f[0]=~~(o+.5),f[1]=~~(100*a+.5),f[2]=~~(100*l+.5)),n&&f.length<4&&(f[3]=1),f},Nn=function(e){var t=[],n=[],r=-1;return e.split(Bn).forEach((function(e){var i=e.match(rt)||[];t.push.apply(t,i),n.push(r+=i.length+1)})),t.c=n,t},Rn=function(e,t,n){var r,i,s,o,a="",l=(e+a).match(Bn),u=t?"hsla(":"rgba(",c=0;if(!l)return e;if(l=l.map((function(e){return(e=Pn(e,t,1))&&u+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"})),n&&(s=Nn(e),(r=n.c).join(a)!==s.c.join(a)))for(o=(i=e.replace(Bn,"1").split(rt)).length-1;c<o;c++)a+=i[c]+(~r.indexOf(c)?l.shift()||u+"0,0,0,0)":(s.length?s:l.length?l:n).shift());if(!i)for(o=(i=e.split(Bn)).length-1;c<o;c++)a+=i[c]+l[c];return a+i[o]},Bn=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in Mn)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),Vn=/hsl[a]?\(/,Un=function(e){var t,n=e.join(" ");if(Bn.lastIndex=0,Bn.test(n))return t=Vn.test(n),e[1]=Rn(e[1],t),e[0]=Rn(e[0],t,Nn(e[1])),!0},zn=(De=Date.now,we=500,_e=33,Ee=De(),Ce=Ee,Se=Te=1e3/240,xe=function e(t){var n,r,i,s,o=De()-Ce,a=!0===t;if((o>we||o<0)&&(Ee+=o-_e),((n=(i=(Ce+=o)-Ee)-Se)>0||a)&&(s=++ye.frame,ve=i-1e3*ye.time,ye.time=i/=1e3,Se+=n+(n>=Te?4:Te-n),r=1),a||(ge=pe(e)),r)for(be=0;be<ke.length;be++)ke[be](i,ve,s,t)},ye={time:0,frame:0,tick:function(){xe(!0)},deltaRatio:function(e){return ve/(1e3/(e||60))},wake:function(){ce&&(!le&&Qe()&&(ae=le=window,ue=ae.document||{},lt.gsap=Ur,(ae.gsapVersions||(ae.gsapVersions=[])).push(Ur.version),ct(ut||ae.GreenSockGlobals||!ae.gsap&&ae||{}),In.forEach(Fn)),me="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,ge&&ye.sleep(),pe=me||function(e){return setTimeout(e,Se-1e3*ye.time+1|0)},fe=1,xe(2))},sleep:function(){(me?cancelAnimationFrame:clearTimeout)(ge),fe=0,pe=gt},lagSmoothing:function(e,t){we=e||1/0,_e=Math.min(t||33,we)},fps:function(e){Te=1e3/(e||240),Se=1e3*ye.time+Te},add:function(e,t,n){var r=t?function(t,n,i,s){e(t,n,i,s),ye.remove(r)}:e;return ye.remove(e),ke[n?"unshift":"push"](r),jn(),r},remove:function(e,t){~(t=ke.indexOf(e))&&ke.splice(t,1)&&be>=t&&be--},_listeners:ke=[]}),jn=function(){return!fe&&zn.wake()},$n={},qn=/^[\d.\-M][\d.\-,\s]/,Hn=/["']/g,Gn=function(e){for(var t,n,r,i={},s=e.substr(1,e.length-3).split(":"),o=s[0],a=1,l=s.length;a<l;a++)n=s[a],t=a!==l-1?n.lastIndexOf(","):n.length,r=n.substr(0,t),i[o]=isNaN(r)?r.replace(Hn,"").trim():+r,o=n.substr(t+1).trim();return i},Wn=function(e){return function(t){return 1-e(1-t)}},Kn=function e(t,n){for(var r,i=t._first;i;)i instanceof nr?e(i,n):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===n||(i.timeline?e(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},Xn=function(e,t){return e&&(Ge(e)?e:$n[e]||function(e){var t,n,r,i,s=(e+"").split("("),o=$n[s[0]];return o&&s.length>1&&o.config?o.config.apply(null,~e.indexOf("{")?[Gn(s[1])]:(t=e,n=t.indexOf("(")+1,r=t.indexOf(")"),i=t.indexOf("(",n),t.substring(n,~i&&i<r?t.indexOf(")",r+1):r)).split(",").map(Nt)):$n._CE&&qn.test(e)?$n._CE("",e):o}(e))||t},Yn=function(e,t,n,r){void 0===n&&(n=function(e){return 1-t(1-e)}),void 0===r&&(r=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var i,s={easeIn:t,easeOut:n,easeInOut:r};return At(e,(function(e){for(var t in $n[e]=lt[e]=s,$n[i=e.toLowerCase()]=n,s)$n[i+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=$n[e+"."+t]=s[t]})),s},Qn=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},Jn=function e(t,n,r){var i=n>=1?n:1,s=(r||(t?.3:.45))/(n<1?n:1),o=s/Ve*(Math.asin(1/i)||0),a=function(e){return 1===e?1:i*Math.pow(2,-10*e)*qe((e-o)*s)+1},l="out"===t?a:"in"===t?function(e){return 1-a(1-e)}:Qn(a);return s=Ve/s,l.config=function(n,r){return e(t,n,r)},l},Zn=function e(t,n){void 0===n&&(n=1.70158);var r=function(e){return e?--e*e*((n+1)*e+n)+1:0},i="out"===t?r:"in"===t?function(e){return 1-r(1-e)}:Qn(r);return i.config=function(n){return e(t,n)},i};At("Linear,Quad,Cubic,Quart,Quint,Strong",(function(e,t){var n=t<5?t+1:t;Yn(e+",Power"+(n-1),t?function(e){return Math.pow(e,n)}:function(e){return e},(function(e){return 1-Math.pow(1-e,n)}),(function(e){return e<.5?Math.pow(2*e,n)/2:1-Math.pow(2*(1-e),n)/2}))})),$n.Linear.easeNone=$n.none=$n.Linear.easeIn,Yn("Elastic",Jn("in"),Jn("out"),Jn()),Ae=7.5625,Le=2*(Fe=1/(Ie=2.75)),Me=2.5*Fe,Yn("Bounce",(function(e){return 1-Oe(1-e)}),Oe=function(e){return e<Fe?Ae*e*e:e<Le?Ae*Math.pow(e-1.5/Ie,2)+.75:e<Me?Ae*(e-=2.25/Ie)*e+.9375:Ae*Math.pow(e-2.625/Ie,2)+.984375}),Yn("Expo",(function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)})),Yn("Circ",(function(e){return-(je(1-e*e)-1)})),Yn("Sine",(function(e){return 1===e?1:1-$e(e*Ue)})),Yn("Back",Zn("in"),Zn("out"),Zn()),$n.SteppedEase=$n.steps=lt.SteppedEase={config:function(e,t){void 0===e&&(e=1);var n=1/e,r=e+(t?0:1),i=t?1:0;return function(e){return((r*fn(0,.99999999,e)|0)+i)*n}}},Ne.ease=$n["quad.out"],At("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(e){return Tt+=e+","+e+"Params,"}));var er=function(e,t){this.id=ze++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:xt,this.set=t?t.getSetter:vr},tr=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,an(this,+e.duration,1,1),this.data=e.data,se&&(this._ctx=se,se.data.push(this)),fe||zn.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,an(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(jn(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Zt(this,e),!n._dp||n.parent||en(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&tn(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===Be||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),Pt(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+Xt(this))%(this._dur+this._rDelay)||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+Xt(this),t):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(e,t){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,t):this._repeat?Yt(this._tTime,n)+1:1},t.timeScale=function(e,t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var n=this.parent&&this._ts?Qt(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,this.totalTime(fn(-Math.abs(this._delay),this._tDur,n),!1!==t),Jt(this),function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e}(this)},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(jn(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==Be&&(this._tTime-=Be)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&tn(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(Ye(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Qt(t.rawTime(e),this):this._tTime:this._tTime},t.revert=function(e){void 0===e&&(e=yt);var t=ie;return ie=e,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),"nested"!==this.data&&!1!==e.kill&&this.kill(),ie=t,this},t.globalTime=function(e){for(var t=this,n=arguments.length?e:t.rawTime();t;)n=t._start+n/(Math.abs(t._ts)||1),t=t._dp;return!this.parent&&this._sat?this._sat.globalTime(e):n},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,ln(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var t=this._time;return this._rDelay=e,ln(this),t?this.time(t):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(cn(this,e),Ye(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,Ye(t)),this._dur||(this._zTime=-1e-8),this},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,n=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<this.endTime(!0)-Be))},t.eventCallback=function(e,t,n){var r=this.vars;return arguments.length>1?(t?(r[e]=t,n&&(r[e+"Params"]=n),"onUpdate"===e&&(this._onUpdate=t)):delete r[e],this):r[e]},t.then=function(e){var t=this;return new Promise((function(n){var r=Ge(e)?e:Rt,i=function(){var e=t.then;t.then=null,Ge(r)&&(r=r(t))&&(r.then||r===t)&&(t.then=e),n(r),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?i():t._prom=i}))},t.kill=function(){An(this)},e}();Bt(tr.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var nr=function(e){function t(t,n){var r;return void 0===t&&(t={}),(r=e.call(this,t)||this).labels={},r.smoothChildTiming=!!t.smoothChildTiming,r.autoRemoveChildren=!!t.autoRemoveChildren,r._sort=Ye(t.sortChildren),oe&&tn(t.parent||oe,te(r),n),t.reversed&&r.reverse(),t.paused&&r.paused(!0),t.scrollTrigger&&nn(te(r),t.scrollTrigger),r}ne(t,e);var n=t.prototype;return n.to=function(e,t,n){return hn(0,arguments,this),this},n.from=function(e,t,n){return hn(1,arguments,this),this},n.fromTo=function(e,t,n,r){return hn(2,arguments,this),this},n.set=function(e,t,n){return t.duration=0,t.parent=this,jt(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new fr(e,t,cn(this,n),1),this},n.call=function(e,t,n){return tn(this,fr.delayedCall(0,e,t),n)},n.staggerTo=function(e,t,n,r,i,s,o){return n.duration=t,n.stagger=n.stagger||r,n.onComplete=s,n.onCompleteParams=o,n.parent=this,new fr(e,n,cn(this,i)),this},n.staggerFrom=function(e,t,n,r,i,s,o){return n.runBackwards=1,jt(n).immediateRender=Ye(n.immediateRender),this.staggerTo(e,t,n,r,i,s,o)},n.staggerFromTo=function(e,t,n,r,i,s,o,a){return r.startAt=n,jt(r).immediateRender=Ye(r.immediateRender),this.staggerTo(e,t,r,i,s,o,a)},n.render=function(e,t,n){var r,i,s,o,a,l,u,c,h,d,f,g,p=this._time,m=this._dirty?this.totalDuration():this._tDur,y=this._dur,v=e<=0?0:Ft(e),b=this._zTime<0!=e<0&&(this._initted||!y);if(this!==oe&&v>m&&e>=0&&(v=m),v!==this._tTime||n||b){if(p!==this._time&&y&&(v+=this._time-p,e+=this._time-p),r=v,h=this._start,l=!(c=this._ts),b&&(y||(p=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(f=this._yoyo,a=y+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*a+e,t,n);if(r=Ft(v%a),v===m?(o=this._repeat,r=y):((o=~~(d=Ft(v/a)))&&o===d&&(r=y,o--),r>y&&(r=y)),d=Yt(this._tTime,a),!p&&this._tTime&&d!==o&&this._tTime-d*a-this._dur<=0&&(d=o),f&&1&o&&(r=y-r,g=1),o!==d&&!this._lock){var D=f&&1&d,w=D===(f&&1&o);if(o<d&&(D=!D),p=D?0:v%y?y:v,this._lock=1,this.render(p||(g?0:Ft(o*a)),t,!y)._lock=0,this._tTime=v,!t&&this.parent&&xn(this,"onRepeat"),this.vars.repeatRefresh&&!g&&(this.invalidate()._lock=1),p&&p!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(y=this._dur,m=this._tDur,w&&(this._lock=2,p=D?y:-1e-4,this.render(p,!0),this.vars.repeatRefresh&&!g&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;Kn(this,g)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(u=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if("isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if("isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,Ft(p),Ft(r)),u&&(v-=r-(r=u._start))),this._tTime=v,this._time=r,this._act=!c,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,p=0),!p&&r&&!t&&!o&&(xn(this,"onStart"),this._tTime!==v))return this;if(r>=p&&e>=0)for(i=this._first;i;){if(s=i._next,(i._act||r>=i._start)&&i._ts&&u!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(r-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(r-i._start)*i._ts,t,n),r!==this._time||!this._ts&&!l){u=0,s&&(v+=this._zTime=-1e-8);break}}i=s}else{i=this._last;for(var _=e<0?e:r;i;){if(s=i._prev,(i._act||_<=i._end)&&i._ts&&u!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(_-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(_-i._start)*i._ts,t,n||ie&&(i._initted||i._startAt)),r!==this._time||!this._ts&&!l){u=0,s&&(v+=this._zTime=_?-1e-8:Be);break}}i=s}}if(u&&!t&&(this.pause(),u.render(r>=p?0:-1e-8)._zTime=r>=p?1:-1,this._ts))return this._start=h,Jt(this),this.render(e,t,n);this._onUpdate&&!t&&xn(this,"onUpdate",!0),(v===m&&this._tTime>=this.totalDuration()||!v&&p)&&(h!==this._start&&Math.abs(c)===Math.abs(this._ts)||this._lock||((e||!y)&&(v===m&&this._ts>0||!v&&this._ts<0)&&Ht(this,1),t||e<0&&!p||!v&&!p&&m||(xn(this,v===m&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(v<m&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(e,t){var n=this;if(We(t)||(t=cn(this,t,e)),!(e instanceof tr)){if(et(e))return e.forEach((function(e){return n.add(e,t)})),this;if(He(e))return this.addLabel(e,t);if(!Ge(e))return this;e=fr.delayedCall(0,e)}return this!==e?tn(this,e,t):this},n.getChildren=function(e,t,n,r){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===r&&(r=-1e8);for(var i=[],s=this._first;s;)s._start>=r&&(s instanceof fr?t&&i.push(s):(n&&i.push(s),e&&i.push.apply(i,s.getChildren(!0,t,n)))),s=s._next;return i},n.getById=function(e){for(var t=this.getChildren(1,1,1),n=t.length;n--;)if(t[n].vars.id===e)return t[n]},n.remove=function(e){return He(e)?this.removeLabel(e):Ge(e)?this.killTweensOf(e):(e.parent===this&&qt(this,e),e===this._recent&&(this._recent=this._last),Gt(this))},n.totalTime=function(t,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ft(zn.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,n),this._forcing=0,this):this._tTime},n.addLabel=function(e,t){return this.labels[e]=cn(this,t),this},n.removeLabel=function(e){return delete this.labels[e],this},n.addPause=function(e,t,n){var r=fr.delayedCall(0,t||gt,n);return r.data="isPause",this._hasPause=1,tn(this,r,cn(this,e))},n.removePause=function(e){var t=this._first;for(e=cn(this,e);t;)t._start===e&&"isPause"===t.data&&Ht(t),t=t._next},n.killTweensOf=function(e,t,n){for(var r=this.getTweensOf(e,n),i=r.length;i--;)rr!==r[i]&&r[i].kill(e,t);return this},n.getTweensOf=function(e,t){for(var n,r=[],i=yn(e),s=this._first,o=We(t);s;)s instanceof fr?Mt(s._targets,i)&&(o?(!rr||s._initted&&s._ts)&&s.globalTime(0)<=t&&s.globalTime(s.totalDuration())>t:!t||s.isActive())&&r.push(s):(n=s.getTweensOf(i,t)).length&&r.push.apply(r,n),s=s._next;return r},n.tweenTo=function(e,t){t=t||{};var n,r=this,i=cn(r,e),s=t,o=s.startAt,a=s.onStart,l=s.onStartParams,u=s.immediateRender,c=fr.to(r,Bt({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:i,overwrite:"auto",duration:t.duration||Math.abs((i-(o&&"time"in o?o.time:r._time))/r.timeScale())||Be,onStart:function(){if(r.pause(),!n){var e=t.duration||Math.abs((i-(o&&"time"in o?o.time:r._time))/r.timeScale());c._dur!==e&&an(c,e,0,1).render(c._time,!0,!0),n=1}a&&a.apply(c,l||[])}},t));return u?c.render(0):c},n.tweenFromTo=function(e,t,n){return this.tweenTo(t,Bt({startAt:{time:cn(this,e)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(e){return void 0===e&&(e=this._time),kn(this,cn(this,e))},n.previousLabel=function(e){return void 0===e&&(e=this._time),kn(this,cn(this,e),1)},n.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+Be)},n.shiftChildren=function(e,t,n){void 0===n&&(n=0);for(var r,i=this._first,s=this.labels;i;)i._start>=n&&(i._start+=e,i._end+=e),i=i._next;if(t)for(r in s)s[r]>=n&&(s[r]+=e);return Gt(this)},n.invalidate=function(t){var n=this._first;for(this._lock=0;n;)n.invalidate(t),n=n._next;return e.prototype.invalidate.call(this,t)},n.clear=function(e){void 0===e&&(e=!0);for(var t,n=this._first;n;)t=n._next,this.remove(n),n=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),Gt(this)},n.totalDuration=function(e){var t,n,r,i=0,s=this,o=s._last,a=Re;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-e:e));if(s._dirty){for(r=s.parent;o;)t=o._prev,o._dirty&&o.totalDuration(),(n=o._start)>a&&s._sort&&o._ts&&!s._lock?(s._lock=1,tn(s,o,n-o._delay,1)._lock=0):a=n,n<0&&o._ts&&(i-=n,(!r&&!s._dp||r&&r.smoothChildTiming)&&(s._start+=n/s._ts,s._time-=n,s._tTime-=n),s.shiftChildren(-n,!1,-1/0),a=0),o._end>i&&o._ts&&(i=o._end),o=t;an(s,s===oe&&s._time>i?s._time:i,1,1),s._dirty=0}return s._tDur},t.updateRoot=function(e){if(oe._ts&&(Pt(oe,Qt(e,oe)),he=zn.frame),zn.frame>=Et){Et+=Pe.autoSleep||120;var t=oe._first;if((!t||!t._ts)&&Pe.autoSleep&&zn._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||zn.sleep()}}},t}(tr);Bt(nr.prototype,{_lock:0,_hasPause:0,_forcing:0});var rr,ir,sr=function(e,t,n,r,i,s,o){var a,l,u,c,h,d,f,g,p=new kr(this._pt,e,t,0,1,wr,null,i),m=0,y=0;for(p.b=n,p.e=r,n+="",(f=~(r+="").indexOf("random("))&&(r=Tn(r)),s&&(s(g=[n,r],e,t),n=g[0],r=g[1]),l=n.match(it)||[];a=it.exec(r);)c=a[0],h=r.substring(m,a.index),u?u=(u+1)%5:"rgba("===h.substr(-5)&&(u=1),c!==l[y++]&&(d=parseFloat(l[y-1])||0,p._pt={_next:p._pt,p:h||1===y?h:",",s:d,c:"="===c.charAt(1)?Lt(d,c)-d:parseFloat(c)-d,m:u&&u<4?Math.round:0},m=it.lastIndex);return p.c=m<r.length?r.substring(m,r.length):"",p.fp=o,(st.test(r)||f)&&(p.e=0),this._pt=p,p},or=function(e,t,n,r,i,s,o,a,l,u){Ge(r)&&(r=r(i||0,e,s));var c,h=e[t],d="get"!==n?n:Ge(h)?l?e[t.indexOf("set")||!Ge(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():h,f=Ge(h)?l?mr:pr:gr;if(He(r)&&(~r.indexOf("random(")&&(r=Tn(r)),"="===r.charAt(1)&&((c=Lt(d,r)+(gn(d)||0))||0===c)&&(r=c)),!u||d!==r||ir)return isNaN(d*r)||""===r?(!h&&!(t in e)&&ht(t,r),sr.call(this,e,t,d,r,f,a||Pe.stringFilter,l)):(c=new kr(this._pt,e,t,+d||0,r-(d||0),"boolean"==typeof h?Dr:br,0,f),l&&(c.fp=l),o&&c.modifier(o,this,e),this._pt=c)},ar=function(e,t,n,r,i,s){var o,a,l,u;if(wt[e]&&!1!==(o=new wt[e]).init(i,o.rawVars?t[e]:function(e,t,n,r,i){if(Ge(e)&&(e=cr(e,i,t,n,r)),!Xe(e)||e.style&&e.nodeType||et(e)||Ze(e))return He(e)?cr(e,i,t,n,r):e;var s,o={};for(s in e)o[s]=cr(e[s],i,t,n,r);return o}(t[e],r,i,s,n),n,r,s)&&(n._pt=a=new kr(n._pt,i,e,0,1,o.render,o,0,o.priority),n!==de))for(l=n._ptLookup[n._targets.indexOf(i)],u=o._props.length;u--;)l[o._props[u]]=a;return o},lr=function e(t,n,r){var i,s,o,a,l,u,c,h,d,f,g,p,m,y=t.vars,v=y.ease,b=y.startAt,D=y.immediateRender,w=y.lazy,_=y.onUpdate,E=y.runBackwards,C=y.yoyoEase,T=y.keyframes,S=y.autoRevert,k=t._dur,x=t._startAt,A=t._targets,I=t.parent,F=I&&"nested"===I.data?I.vars.targets:A,L="auto"===t._overwrite&&!re,M=t.timeline;if(M&&(!T||!v)&&(v="none"),t._ease=Xn(v,Ne.ease),t._yEase=C?Wn(Xn(!0===C?v:C,Ne.ease)):0,C&&t._yoyo&&!t._repeat&&(C=t._yEase,t._yEase=t._ease,t._ease=C),t._from=!M&&!!y.runBackwards,!M||T&&!y.stagger){if(p=(h=A[0]?kt(A[0]).harness:0)&&y[h.prop],i=zt(y,vt),x&&(x._zTime<0&&x.progress(1),n<0&&E&&D&&!S?x.render(-1,!0):x.revert(E&&k?mt:pt),x._lazy=0),b){if(Ht(t._startAt=fr.set(A,Bt({data:"isStart",overwrite:!1,parent:I,immediateRender:!0,lazy:!x&&Ye(w),startAt:null,delay:0,onUpdate:_&&function(){return xn(t,"onUpdate")},stagger:0},b))),t._startAt._dp=0,t._startAt._sat=t,n<0&&(ie||!D&&!S)&&t._startAt.revert(mt),D&&k&&n<=0&&r<=0)return void(n&&(t._zTime=n))}else if(E&&k&&!x)if(n&&(D=!1),o=Bt({overwrite:!1,data:"isFromStart",lazy:D&&!x&&Ye(w),immediateRender:D,stagger:0,parent:I},i),p&&(o[h.prop]=p),Ht(t._startAt=fr.set(A,o)),t._startAt._dp=0,t._startAt._sat=t,n<0&&(ie?t._startAt.revert(mt):t._startAt.render(-1,!0)),t._zTime=n,D){if(!n)return}else e(t._startAt,Be,Be);for(t._pt=t._ptCache=0,w=k&&Ye(w)||w&&!k,s=0;s<A.length;s++){if(c=(l=A[s])._gsap||St(A)[s]._gsap,t._ptLookup[s]=f={},Dt[c.id]&&bt.length&&Ot(),g=F===A?s:F.indexOf(l),h&&!1!==(d=new h).init(l,p||i,t,g,F)&&(t._pt=a=new kr(t._pt,l,d.name,0,1,d.render,d,0,d.priority),d._props.forEach((function(e){f[e]=a})),d.priority&&(u=1)),!h||p)for(o in i)wt[o]&&(d=ar(o,i,t,g,l,F))?d.priority&&(u=1):f[o]=a=or.call(t,l,o,"get",i[o],g,F,0,y.stringFilter);t._op&&t._op[s]&&t.kill(l,t._op[s]),L&&t._pt&&(rr=t,oe.killTweensOf(l,f,t.globalTime(n)),m=!t.parent,rr=0),t._pt&&w&&(Dt[c.id]=1)}u&&Sr(t),t._onInit&&t._onInit(t)}t._onUpdate=_,t._initted=(!t._op||t._pt)&&!m,T&&n<=0&&M.render(Re,!0,!0)},ur=function(e,t,n,r){var i,s,o=t.ease||r||"power1.inOut";if(et(t))s=n[e]||(n[e]=[]),t.forEach((function(e,n){return s.push({t:n/(t.length-1)*100,v:e,e:o})}));else for(i in t)s=n[i]||(n[i]=[]),"ease"===i||s.push({t:parseFloat(e),v:t[i],e:o})},cr=function(e,t,n,r,i){return Ge(e)?e.call(t,n,r,i):He(e)&&~e.indexOf("random(")?Tn(e):e},hr=Tt+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",dr={};At(hr+",id,stagger,delay,duration,paused,scrollTrigger",(function(e){return dr[e]=1}));var fr=function(e){function t(t,n,r,i){var s;"number"==typeof n&&(r.duration=n,n=r,r=null);var o,a,l,u,c,h,d,f,g=(s=e.call(this,i?n:jt(n))||this).vars,p=g.duration,m=g.delay,y=g.immediateRender,v=g.stagger,b=g.overwrite,D=g.keyframes,w=g.defaults,_=g.scrollTrigger,E=g.yoyoEase,C=n.parent||oe,T=(et(t)||Ze(t)?We(t[0]):"length"in n)?[t]:yn(t);if(s._targets=T.length?St(T):dt("GSAP target "+t+" not found. https://gsap.com",!Pe.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=b,D||v||Je(p)||Je(m)){if(n=s.vars,(o=s.timeline=new nr({data:"nested",defaults:w||{},targets:C&&"nested"===C.data?C.vars.targets:T})).kill(),o.parent=o._dp=te(s),o._start=0,v||Je(p)||Je(m)){if(u=T.length,d=v&&Dn(v),Xe(v))for(c in v)~hr.indexOf(c)&&(f||(f={}),f[c]=v[c]);for(a=0;a<u;a++)(l=zt(n,dr)).stagger=0,E&&(l.yoyoEase=E),f&&Vt(l,f),h=T[a],l.duration=+cr(p,te(s),a,h,T),l.delay=(+cr(m,te(s),a,h,T)||0)-s._delay,!v&&1===u&&l.delay&&(s._delay=m=l.delay,s._start+=m,l.delay=0),o.to(h,l,d?d(a,h,T):0),o._ease=$n.none;o.duration()?p=m=0:s.timeline=0}else if(D){jt(Bt(o.vars.defaults,{ease:"none"})),o._ease=Xn(D.ease||n.ease||"none");var S,k,x,A=0;if(et(D))D.forEach((function(e){return o.to(T,e,">")})),o.duration();else{for(c in l={},D)"ease"===c||"easeEach"===c||ur(c,D[c],l,D.easeEach);for(c in l)for(S=l[c].sort((function(e,t){return e.t-t.t})),A=0,a=0;a<S.length;a++)(x={ease:(k=S[a]).e,duration:(k.t-(a?S[a-1].t:0))/100*p})[c]=k.v,o.to(T,x,A),A+=x.duration;o.duration()<p&&o.to({},{duration:p-o.duration()})}}p||s.duration(p=o.duration())}else s.timeline=0;return!0!==b||re||(rr=te(s),oe.killTweensOf(T),rr=0),tn(C,te(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),(y||!p&&!D&&s._start===Ft(C._time)&&Ye(y)&&Kt(te(s))&&"nested"!==C.data)&&(s._tTime=-1e-8,s.render(Math.max(0,-m)||0)),_&&nn(te(s),_),s}ne(t,e);var n=t.prototype;return n.render=function(e,t,n){var r,i,s,o,a,l,u,c,h,d=this._time,f=this._tDur,g=this._dur,p=e<0,m=e>f-Be&&!p?f:e<Be?0:e;if(g){if(m!==this._tTime||!e||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==p||this._lazy){if(r=m,c=this.timeline,this._repeat){if(o=g+this._rDelay,this._repeat<-1&&p)return this.totalTime(100*o+e,t,n);if(r=Ft(m%o),m===f?(s=this._repeat,r=g):(s=~~(a=Ft(m/o)))&&s===a?(r=g,s--):r>g&&(r=g),(l=this._yoyo&&1&s)&&(h=this._yEase,r=g-r),a=Yt(this._tTime,o),r===d&&!n&&this._initted&&s===a)return this._tTime=m,this;s!==a&&(c&&this._yEase&&Kn(c,l),this.vars.repeatRefresh&&!l&&!this._lock&&r!==o&&this._initted&&(this._lock=n=1,this.render(Ft(o*s),!0).invalidate()._lock=0))}if(!this._initted){if(rn(this,p?e:r,n,t,m))return this._tTime=0,this;if(!(d===this._time||n&&this.vars.repeatRefresh&&s!==a))return this;if(g!==this._dur)return this.render(e,t,n)}if(this._tTime=m,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=u=(h||this._ease)(r/g),this._from&&(this.ratio=u=1-u),r&&!d&&!t&&!s&&(xn(this,"onStart"),this._tTime!==m))return this;for(i=this._pt;i;)i.r(u,i.d),i=i._next;c&&c.render(e<0?e:c._dur*c._ease(r/this._dur),t,n)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(p&&Wt(this,e,0,n),xn(this,"onUpdate")),this._repeat&&s!==a&&this.vars.onRepeat&&!t&&this.parent&&xn(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(p&&!this._onUpdate&&Wt(this,e,0,!0),(e||!g)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&Ht(this,1),t||p&&!d||!(m||d||l)||(xn(this,m===f?"onComplete":"onReverseComplete",!0),this._prom&&!(m<f&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,n,r){var i,s,o,a=e.ratio,l=t<0||!t&&(!e._start&&sn(e)&&(e._initted||!on(e))||(e._ts<0||e._dp._ts<0)&&!on(e))?0:1,u=e._rDelay,c=0;if(u&&e._repeat&&(c=fn(0,e._tDur,t),s=Yt(c,u),e._yoyo&&1&s&&(l=1-l),s!==Yt(e._tTime,u)&&(a=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==a||ie||r||e._zTime===Be||!t&&e._zTime){if(!e._initted&&rn(e,t,r,n,c))return;for(o=e._zTime,e._zTime=t||(n?Be:0),n||(n=t&&!o),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=c,i=e._pt;i;)i.r(l,i.d),i=i._next;t<0&&Wt(e,t,0,!0),e._onUpdate&&!n&&xn(e,"onUpdate"),c&&e._repeat&&!n&&e.parent&&xn(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===l&&(l&&Ht(e,1),n||ie||(xn(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,n);return this},n.targets=function(){return this._targets},n.invalidate=function(t){return(!t||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(t),e.prototype.invalidate.call(this,t)},n.resetTo=function(e,t,n,r,i){fe||zn.wake(),this._ts||this.play();var s=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||lr(this,s),function(e,t,n,r,i,s,o,a){var l,u,c,h,d=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!d)for(d=e._ptCache[t]=[],c=e._ptLookup,h=e._targets.length;h--;){if((l=c[h][t])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return ir=1,e.vars[t]="+=0",lr(e,o),ir=0,a?dt(t+" not eligible for reset"):1;d.push(l)}for(h=d.length;h--;)(l=(u=d[h])._pt||u).s=!r&&0!==r||i?l.s+(r||0)+s*l.c:r,l.c=n-l.s,u.e&&(u.e=It(n)+gn(u.e)),u.b&&(u.b=l.s+gn(u.b))}(this,e,t,n,r,this._ease(s/this._dur),s,i)?this.resetTo(e,t,n,r,1):(Zt(this,0),this.parent||$t(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(e,t){if(void 0===t&&(t="all"),!(e||t&&"all"!==t))return this._lazy=this._pt=0,this.parent?An(this):this.scrollTrigger&&this.scrollTrigger.kill(!!ie),this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,rr&&!0!==rr.vars.overwrite)._first||An(this),this.parent&&n!==this.timeline.totalDuration()&&an(this,this._dur*this.timeline._tDur/n,0,1),this}var r,i,s,o,a,l,u,c=this._targets,h=e?yn(e):c,d=this._ptLookup,f=this._pt;if((!t||"all"===t)&&function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0}(c,h))return"all"===t&&(this._pt=0),An(this);for(r=this._op=this._op||[],"all"!==t&&(He(t)&&(a={},At(t,(function(e){return a[e]=1})),t=a),t=function(e,t){var n,r,i,s,o=e[0]?kt(e[0]).harness:0,a=o&&o.aliases;if(!a)return t;for(r in n=Vt({},t),a)if(r in n)for(i=(s=a[r].split(",")).length;i--;)n[s[i]]=n[r];return n}(c,t)),u=c.length;u--;)if(~h.indexOf(c[u]))for(a in i=d[u],"all"===t?(r[u]=t,o=i,s={}):(s=r[u]=r[u]||{},o=t),o)(l=i&&i[a])&&("kill"in l.d&&!0!==l.d.kill(a)||qt(this,l,"_pt"),delete i[a]),"all"!==s&&(s[a]=1);return this._initted&&!this._pt&&f&&An(this),this},t.to=function(e,n){return new t(e,n,arguments[2])},t.from=function(e,t){return hn(1,arguments)},t.delayedCall=function(e,n,r,i){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:i})},t.fromTo=function(e,t,n){return hn(2,arguments)},t.set=function(e,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(e,n)},t.killTweensOf=function(e,t,n){return oe.killTweensOf(e,t,n)},t}(tr);Bt(fr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),At("staggerTo,staggerFrom,staggerFromTo",(function(e){fr[e]=function(){var t=new nr,n=pn.call(arguments,0);return n.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,n)}}));var gr=function(e,t,n){return e[t]=n},pr=function(e,t,n){return e[t](n)},mr=function(e,t,n,r){return e[t](r.fp,n)},yr=function(e,t,n){return e.setAttribute(t,n)},vr=function(e,t){return Ge(e[t])?pr:Ke(e[t])&&e.setAttribute?yr:gr},br=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},Dr=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},wr=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},_r=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},Er=function(e,t,n,r){for(var i,s=this._pt;s;)i=s._next,s.p===r&&s.modifier(e,t,n),s=i},Cr=function(e){for(var t,n,r=this._pt;r;)n=r._next,r.p===e&&!r.op||r.op===e?qt(this,r,"_pt"):r.dep||(t=1),r=n;return!t},Tr=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},Sr=function(e){for(var t,n,r,i,s=e._pt;s;){for(t=s._next,n=r;n&&n.pr>s.pr;)n=n._next;(s._prev=n?n._prev:i)?s._prev._next=s:r=s,(s._next=n)?n._prev=s:i=s,s=t}e._pt=r},kr=function(){function e(e,t,n,r,i,s,o,a,l){this.t=t,this.s=r,this.c=i,this.p=n,this.r=s||br,this.d=o||this,this.set=a||gr,this.pr=l||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,n){this.mSet=this.mSet||this.set,this.set=Tr,this.m=e,this.mt=n,this.tween=t},e}();At(Tt+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(e){return vt[e]=1})),lt.TweenMax=lt.TweenLite=fr,lt.TimelineLite=lt.TimelineMax=nr,oe=new nr({sortChildren:!1,defaults:Ne,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Pe.stringFilter=Un;var xr=[],Ar={},Ir=[],Fr=0,Lr=0,Mr=function(e){return(Ar[e]||Ir).map((function(e){return e()}))},Or=function(){var e=Date.now(),t=[];e-Fr>2&&(Mr("matchMediaInit"),xr.forEach((function(e){var n,r,i,s,o=e.queries,a=e.conditions;for(r in o)(n=ae.matchMedia(o[r]).matches)&&(i=1),n!==a[r]&&(a[r]=n,s=1);s&&(e.revert(),i&&t.push(e))})),Mr("matchMediaRevert"),t.forEach((function(e){return e.onMatch(e,(function(t){return e.add(null,t)}))})),Fr=e,Mr("matchMedia"))},Pr=function(){function e(e,t){this.selector=t&&vn(t),this.data=[],this._r=[],this.isReverted=!1,this.id=Lr++,e&&this.add(e)}var t=e.prototype;return t.add=function(e,t,n){Ge(e)&&(n=t,t=e,e=Ge);var r=this,i=function(){var e,i=se,s=r.selector;return i&&i!==r&&i.data.push(r),n&&(r.selector=vn(n)),se=r,e=t.apply(r,arguments),Ge(e)&&r._r.push(e),se=i,r.selector=s,r.isReverted=!1,e};return r.last=i,e===Ge?i(r,(function(e){return r.add(null,e)})):e?r[e]=i:i},t.ignore=function(e){var t=se;se=null,e(this),se=t},t.getTweens=function(){var t=[];return this.data.forEach((function(n){return n instanceof e?t.push.apply(t,n.getTweens()):n instanceof fr&&!(n.parent&&"nested"===n.parent.data)&&t.push(n)})),t},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(e,t){var n=this;if(e?function(){for(var t,r=n.getTweens(),i=n.data.length;i--;)"isFlip"===(t=n.data[i]).data&&(t.revert(),t.getChildren(!0,!0,!1).forEach((function(e){return r.splice(r.indexOf(e),1)})));for(r.map((function(e){return{g:e._dur||e._delay||e._sat&&!e._sat.vars.immediateRender?e.globalTime(0):-1/0,t:e}})).sort((function(e,t){return t.g-e.g||-1/0})).forEach((function(t){return t.t.revert(e)})),i=n.data.length;i--;)(t=n.data[i])instanceof nr?"nested"!==t.data&&(t.scrollTrigger&&t.scrollTrigger.revert(),t.kill()):!(t instanceof fr)&&t.revert&&t.revert(e);n._r.forEach((function(t){return t(e,n)})),n.isReverted=!0}():this.data.forEach((function(e){return e.kill&&e.kill()})),this.clear(),t)for(var r=xr.length;r--;)xr[r].id===this.id&&xr.splice(r,1)},t.revert=function(e){this.kill(e||{})},e}(),Nr=function(){function e(e){this.contexts=[],this.scope=e,se&&se.data.push(this)}var t=e.prototype;return t.add=function(e,t,n){Xe(e)||(e={matches:e});var r,i,s,o=new Pr(0,n||this.scope),a=o.conditions={};for(i in se&&!o.selector&&(o.selector=se.selector),this.contexts.push(o),t=o.add("onMatch",t),o.queries=e,e)"all"===i?s=1:(r=ae.matchMedia(e[i]))&&(xr.indexOf(o)<0&&xr.push(o),(a[i]=r.matches)&&(s=1),r.addListener?r.addListener(Or):r.addEventListener("change",Or));return s&&t(o,(function(e){return o.add(null,e)})),this},t.revert=function(e){this.kill(e||{})},t.kill=function(e){this.contexts.forEach((function(t){return t.kill(e,!0)}))},e}(),Rr={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((function(e){return Fn(e)}))},timeline:function(e){return new nr(e)},getTweensOf:function(e,t){return oe.getTweensOf(e,t)},getProperty:function(e,t,n,r){He(e)&&(e=yn(e)[0]);var i=kt(e||{}).get,s=n?Rt:Nt;return"native"===n&&(n=""),e?t?s((wt[t]&&wt[t].get||i)(e,t,n,r)):function(t,n,r){return s((wt[t]&&wt[t].get||i)(e,t,n,r))}:e},quickSetter:function(e,t,n){if((e=yn(e)).length>1){var r=e.map((function(e){return Ur.quickSetter(e,t,n)})),i=r.length;return function(e){for(var t=i;t--;)r[t](e)}}e=e[0]||{};var s=wt[t],o=kt(e),a=o.harness&&(o.harness.aliases||{})[t]||t,l=s?function(t){var r=new s;de._pt=0,r.init(e,n?t+n:t,de,0,[e]),r.render(1,r),de._pt&&_r(1,de)}:o.set(e,a);return s?l:function(t){return l(e,a,n?t+n:t,o,1)}},quickTo:function(e,t,n){var r,i=Ur.to(e,Bt(((r={})[t]="+=0.1",r.paused=!0,r.stagger=0,r),n||{})),s=function(e,n,r){return i.resetTo(t,e,n,r)};return s.tween=i,s},isTweening:function(e){return oe.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Xn(e.ease,Ne.ease)),Ut(Ne,e||{})},config:function(e){return Ut(Pe,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,i=e.defaults,s=e.extendTimeline;(r||"").split(",").forEach((function(e){return e&&!wt[e]&&!lt[e]&&dt(t+" effect requires "+e+" plugin.")})),_t[t]=function(e,t,r){return n(yn(e),Bt(t||{},i),r)},s&&(nr.prototype[t]=function(e,n,r){return this.add(_t[t](e,Xe(n)?n:(r=n)&&{},this),r)})},registerEase:function(e,t){$n[e]=Xn(t)},parseEase:function(e,t){return arguments.length?Xn(e,t):$n},getById:function(e){return oe.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var n,r,i=new nr(e);for(i.smoothChildTiming=Ye(e.smoothChildTiming),oe.remove(i),i._dp=0,i._time=i._tTime=oe._time,n=oe._first;n;)r=n._next,!t&&!n._dur&&n instanceof fr&&n.vars.onComplete===n._targets[0]||tn(i,n,n._start-n._delay),n=r;return tn(oe,i,0),i},context:function(e,t){return e?new Pr(e,t):se},matchMedia:function(e){return new Nr(e)},matchMediaRefresh:function(){return xr.forEach((function(e){var t,n,r=e.conditions;for(n in r)r[n]&&(r[n]=!1,t=1);t&&e.revert()}))||Or()},addEventListener:function(e,t){var n=Ar[e]||(Ar[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=Ar[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:function e(t,n,r){var i=n-t;return et(t)?Cn(t,e(0,t.length),n):dn(r,(function(e){return(i+(e-t)%i)%i+t}))},wrapYoyo:function e(t,n,r){var i=n-t,s=2*i;return et(t)?Cn(t,e(0,t.length-1),n):dn(r,(function(e){return t+((e=(s+(e-t)%s)%s||0)>i?s-e:e)}))},distribute:Dn,random:En,snap:_n,normalize:function(e,t,n){return Sn(e,t,0,1,n)},getUnit:gn,clamp:function(e,t,n){return dn(n,(function(n){return fn(e,t,n)}))},splitColor:Pn,toArray:yn,selector:vn,mapRange:Sn,pipe:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},unitize:function(e,t){return function(n){return e(parseFloat(n))+(t||gn(n))}},interpolate:function e(t,n,r,i){var s=isNaN(t+n)?0:function(e){return(1-e)*t+e*n};if(!s){var o,a,l,u,c,h=He(t),d={};if(!0===r&&(i=1)&&(r=null),h)t={p:t},n={p:n};else if(et(t)&&!et(n)){for(l=[],u=t.length,c=u-2,a=1;a<u;a++)l.push(e(t[a-1],t[a]));u--,s=function(e){e*=u;var t=Math.min(c,~~e);return l[t](e-t)},r=n}else i||(t=Vt(et(t)?[]:{},t));if(!l){for(o in n)or.call(d,t,o,"get",n[o]);s=function(e){return _r(e,d)||(h?t.p:t)}}}return dn(r,s)},shuffle:bn},install:ct,effects:_t,ticker:zn,updateRoot:nr.updateRoot,plugins:wt,globalTimeline:oe,core:{PropTween:kr,globals:ft,Tween:fr,Timeline:nr,Animation:tr,getCache:kt,_removeLinkedListItem:qt,reverting:function(){return ie},context:function(e){return e&&se&&(se.data.push(e),e._ctx=se),se},suppressOverwrites:function(e){return re=e}}};At("to,from,fromTo,delayedCall,set,killTweensOf",(function(e){return Rr[e]=fr[e]})),zn.add(nr.updateRoot),de=Rr.to({},{duration:0});var Br=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},Vr=function(e,t){return{name:e,rawVars:1,init:function(e,n,r){r._onInit=function(e){var r,i;if(He(n)&&(r={},At(n,(function(e){return r[e]=1})),n=r),t){for(i in r={},n)r[i]=t(n[i]);n=r}!function(e,t){var n,r,i,s=e._targets;for(n in t)for(r=s.length;r--;)(i=e._ptLookup[r][n])&&(i=i.d)&&(i._pt&&(i=Br(i,n)),i&&i.modifier&&i.modifier(t[n],e,s[r],n))}(e,n)}}}},Ur=Rr.registerPlugin({name:"attr",init:function(e,t,n,r,i){var s,o,a;for(s in this.tween=n,t)a=e.getAttribute(s)||"",(o=this.add(e,"setAttribute",(a||0)+"",t[s],r,i,0,0,s)).op=s,o.b=a,this._props.push(s)},render:function(e,t){for(var n=t._pt;n;)ie?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},Vr("roundProps",wn),Vr("modifiers"),Vr("snap",_n))||Rr;fr.version=nr.version=Ur.version="3.12.7",ce=1,Qe()&&jn(),$n.Power0,$n.Power1,$n.Power2,$n.Power3,$n.Power4,$n.Linear,$n.Quad,$n.Cubic,$n.Quart,$n.Quint,$n.Strong,$n.Elastic,$n.Back,$n.SteppedEase,$n.Bounce,$n.Sine,$n.Expo,$n.Circ;
/*!
 * CSSPlugin 3.12.7
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
var zr,jr,$r,qr,Hr,Gr,Wr,Kr,Xr={},Yr=180/Math.PI,Qr=Math.PI/180,Jr=Math.atan2,Zr=/([A-Z])/g,ei=/(left|right|width|margin|padding|x)/i,ti=/[\s,\(]\S/,ni={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},ri=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},ii=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},si=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},oi=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},ai=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},li=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},ui=function(e,t,n){return e.style[t]=n},ci=function(e,t,n){return e.style.setProperty(t,n)},hi=function(e,t,n){return e._gsap[t]=n},di=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},fi=function(e,t,n,r,i){var s=e._gsap;s.scaleX=s.scaleY=n,s.renderTransform(i,s)},gi=function(e,t,n,r,i){var s=e._gsap;s[t]=n,s.renderTransform(i,s)},pi="transform",mi=pi+"Origin",yi=function e(t,n){var r=this,i=this.target,s=i.style,o=i._gsap;if(t in Xr&&s){if(this.tfm=this.tfm||{},"transform"===t)return ni.transform.split(",").forEach((function(t){return e.call(r,t,n)}));if(~(t=ni[t]||t).indexOf(",")?t.split(",").forEach((function(e){return r.tfm[e]=Pi(i,e)})):this.tfm[t]=o.x?o[t]:Pi(i,t),t===mi&&(this.tfm.zOrigin=o.zOrigin),this.props.indexOf(pi)>=0)return;o.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(mi,n,"")),t=pi}(s||n)&&this.props.push(t,n,s[t])},vi=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},bi=function(){var e,t,n=this.props,r=this.target,i=r.style,s=r._gsap;for(e=0;e<n.length;e+=3)n[e+1]?2===n[e+1]?r[n[e]](n[e+2]):r[n[e]]=n[e+2]:n[e+2]?i[n[e]]=n[e+2]:i.removeProperty("--"===n[e].substr(0,2)?n[e]:n[e].replace(Zr,"-$1").toLowerCase());if(this.tfm){for(t in this.tfm)s[t]=this.tfm[t];s.svg&&(s.renderTransform(),r.setAttribute("data-svg-origin",this.svgo||"")),(e=Wr())&&e.isStart||i[pi]||(vi(i),s.zOrigin&&i[mi]&&(i[mi]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},Di=function(e,t){var n={target:e,props:[],revert:bi,save:yi};return e._gsap||Ur.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach((function(e){return n.save(e)})),n},wi=function(e,t){var n=jr.createElementNS?jr.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):jr.createElement(e);return n&&n.style?n:jr.createElement(e)},_i=function e(t,n,r){var i=getComputedStyle(t);return i[n]||i.getPropertyValue(n.replace(Zr,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&e(t,Ci(n)||n,1)||""},Ei="O,Moz,ms,Ms,Webkit".split(","),Ci=function(e,t,n){var r=(t||Hr).style,i=5;if(e in r&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);i--&&!(Ei[i]+e in r););return i<0?null:(3===i?"ms":i>=0?Ei[i]:"")+e},Ti=function(){"undefined"!=typeof window&&window.document&&(zr=window,jr=zr.document,$r=jr.documentElement,Hr=wi("div")||{style:{}},wi("div"),pi=Ci(pi),mi=pi+"Origin",Hr.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Kr=!!Ci("perspective"),Wr=Ur.core.reverting,qr=1)},Si=function(e){var t,n=e.ownerSVGElement,r=wi("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0);i.style.display="block",r.appendChild(i),$r.appendChild(r);try{t=i.getBBox()}catch(s){}return r.removeChild(i),$r.removeChild(r),t},ki=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},xi=function(e){var t,n;try{t=e.getBBox()}catch(r){t=Si(e),n=1}return t&&(t.width||t.height)||n||(t=Si(e)),!t||t.width||t.x||t.y?t:{x:+ki(e,["x","cx","x1"])||0,y:+ki(e,["y","cy","y1"])||0,width:0,height:0}},Ai=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!xi(e))},Ii=function(e,t){if(t){var n,r=e.style;t in Xr&&t!==mi&&(t=pi),r.removeProperty?("ms"!==(n=t.substr(0,2))&&"webkit"!==t.substr(0,6)||(t="-"+t),r.removeProperty("--"===n?t:t.replace(Zr,"-$1").toLowerCase())):r.removeAttribute(t)}},Fi=function(e,t,n,r,i,s){var o=new kr(e._pt,t,n,0,1,s?li:ai);return e._pt=o,o.b=r,o.e=i,e._props.push(n),o},Li={deg:1,rad:1,turn:1},Mi={grid:1,flex:1},Oi=function e(t,n,r,i){var s,o,a,l,u=parseFloat(r)||0,c=(r+"").trim().substr((u+"").length)||"px",h=Hr.style,d=ei.test(n),f="svg"===t.tagName.toLowerCase(),g=(f?"client":"offset")+(d?"Width":"Height"),p=100,m="px"===i,y="%"===i;if(i===c||!u||Li[i]||Li[c])return u;if("px"!==c&&!m&&(u=e(t,n,r,"px")),l=t.getCTM&&Ai(t),(y||"%"===c)&&(Xr[n]||~n.indexOf("adius")))return s=l?t.getBBox()[d?"width":"height"]:t[g],It(y?u/s*p:u/100*s);if(h[d?"width":"height"]=p+(m?c:i),o="rem"!==i&&~n.indexOf("adius")||"em"===i&&t.appendChild&&!f?t:t.parentNode,l&&(o=(t.ownerSVGElement||{}).parentNode),o&&o!==jr&&o.appendChild||(o=jr.body),(a=o._gsap)&&y&&a.width&&d&&a.time===zn.time&&!a.uncache)return It(u/a.width*p);if(!y||"height"!==n&&"width"!==n)(y||"%"===c)&&!Mi[_i(o,"display")]&&(h.position=_i(t,"position")),o===t&&(h.position="static"),o.appendChild(Hr),s=Hr[g],o.removeChild(Hr),h.position="absolute";else{var v=t.style[n];t.style[n]=p+i,s=t[g],v?t.style[n]=v:Ii(t,n)}return d&&y&&((a=kt(o)).time=zn.time,a.width=o[g]),It(m?s*u/p:s&&u?p/s*u:0)},Pi=function(e,t,n,r){var i;return qr||Ti(),t in ni&&"transform"!==t&&~(t=ni[t]).indexOf(",")&&(t=t.split(",")[0]),Xr[t]&&"transform"!==t?(i=Gi(e,r),i="transformOrigin"!==t?i[t]:i.svg?i.origin:Wi(_i(e,mi))+" "+i.zOrigin+"px"):(!(i=e.style[t])||"auto"===i||r||~(i+"").indexOf("calc("))&&(i=Vi[t]&&Vi[t](e,t,n)||_i(e,t)||xt(e,t)||("opacity"===t?1:0)),n&&!~(i+"").trim().indexOf(" ")?Oi(e,t,i,n)+n:i},Ni=function(e,t,n,r){if(!n||"none"===n){var i=Ci(t,e,1),s=i&&_i(e,i,1);s&&s!==n?(t=i,n=s):"borderColor"===t&&(n=_i(e,"borderTopColor"))}var o,a,l,u,c,h,d,f,g,p,m,y=new kr(this._pt,e.style,t,0,1,wr),v=0,b=0;if(y.b=n,y.e=r,n+="","auto"===(r+="")&&(h=e.style[t],e.style[t]=r,r=_i(e,t)||r,h?e.style[t]=h:Ii(e,t)),Un(o=[n,r]),r=o[1],l=(n=o[0]).match(rt)||[],(r.match(rt)||[]).length){for(;a=rt.exec(r);)d=a[0],g=r.substring(v,a.index),c?c=(c+1)%5:"rgba("!==g.substr(-5)&&"hsla("!==g.substr(-5)||(c=1),d!==(h=l[b++]||"")&&(u=parseFloat(h)||0,m=h.substr((u+"").length),"="===d.charAt(1)&&(d=Lt(u,d)+m),f=parseFloat(d),p=d.substr((f+"").length),v=rt.lastIndex-p.length,p||(p=p||Pe.units[t]||m,v===r.length&&(r+=p,y.e+=p)),m!==p&&(u=Oi(e,t,h,p)||0),y._pt={_next:y._pt,p:g||1===b?g:",",s:u,c:f-u,m:c&&c<4||"zIndex"===t?Math.round:0});y.c=v<r.length?r.substring(v,r.length):""}else y.r="display"===t&&"none"===r?li:ai;return st.test(r)&&(y.e=0),this._pt=y,y},Ri={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Bi=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n,r,i,s=t.t,o=s.style,a=t.u,l=s._gsap;if("all"===a||!0===a)o.cssText="",r=1;else for(i=(a=a.split(",")).length;--i>-1;)n=a[i],Xr[n]&&(r=1,n="transformOrigin"===n?mi:pi),Ii(s,n);r&&(Ii(s,pi),l&&(l.svg&&s.removeAttribute("transform"),o.scale=o.rotate=o.translate="none",Gi(s,1),l.uncache=1,vi(o)))}},Vi={clearProps:function(e,t,n,r,i){if("isFromStart"!==i.data){var s=e._pt=new kr(e._pt,t,n,0,0,Bi);return s.u=r,s.pr=-10,s.tween=i,e._props.push(n),1}}},Ui=[1,0,0,1,0,0],zi={},ji=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},$i=function(e){var t=_i(e,pi);return ji(t)?Ui:t.substr(7).match(nt).map(It)},qi=function(e,t){var n,r,i,s,o=e._gsap||kt(e),a=e.style,l=$i(e);return o.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(i=e.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?Ui:l:(l!==Ui||e.offsetParent||e===$r||o.svg||(i=a.display,a.display="block",(n=e.parentNode)&&(e.offsetParent||e.getBoundingClientRect().width)||(s=1,r=e.nextElementSibling,$r.appendChild(e)),l=$i(e),i?a.display=i:Ii(e,"display"),s&&(r?n.insertBefore(e,r):n?n.appendChild(e):$r.removeChild(e))),t&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},Hi=function(e,t,n,r,i,s){var o,a,l,u=e._gsap,c=i||qi(e,!0),h=u.xOrigin||0,d=u.yOrigin||0,f=u.xOffset||0,g=u.yOffset||0,p=c[0],m=c[1],y=c[2],v=c[3],b=c[4],D=c[5],w=t.split(" "),_=parseFloat(w[0])||0,E=parseFloat(w[1])||0;n?c!==Ui&&(a=p*v-m*y)&&(l=_*(-m/a)+E*(p/a)-(p*D-m*b)/a,_=_*(v/a)+E*(-y/a)+(y*D-v*b)/a,E=l):(_=(o=xi(e)).x+(~w[0].indexOf("%")?_/100*o.width:_),E=o.y+(~(w[1]||w[0]).indexOf("%")?E/100*o.height:E)),r||!1!==r&&u.smooth?(b=_-h,D=E-d,u.xOffset=f+(b*p+D*y)-b,u.yOffset=g+(b*m+D*v)-D):u.xOffset=u.yOffset=0,u.xOrigin=_,u.yOrigin=E,u.smooth=!!r,u.origin=t,u.originIsAbsolute=!!n,e.style[mi]="0px 0px",s&&(Fi(s,u,"xOrigin",h,_),Fi(s,u,"yOrigin",d,E),Fi(s,u,"xOffset",f,u.xOffset),Fi(s,u,"yOffset",g,u.yOffset)),e.setAttribute("data-svg-origin",_+" "+E)},Gi=function(e,t){var n=e._gsap||new er(e);if("x"in n&&!t&&!n.uncache)return n;var r,i,s,o,a,l,u,c,h,d,f,g,p,m,y,v,b,D,w,_,E,C,T,S,k,x,A,I,F,L,M,O,P=e.style,N=n.scaleX<0,R="px",B="deg",V=getComputedStyle(e),U=_i(e,mi)||"0";return r=i=s=l=u=c=h=d=f=0,o=a=1,n.svg=!(!e.getCTM||!Ai(e)),V.translate&&("none"===V.translate&&"none"===V.scale&&"none"===V.rotate||(P[pi]=("none"!==V.translate?"translate3d("+(V.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==V.rotate?"rotate("+V.rotate+") ":"")+("none"!==V.scale?"scale("+V.scale.split(" ").join(",")+") ":"")+("none"!==V[pi]?V[pi]:"")),P.scale=P.rotate=P.translate="none"),m=qi(e,n.svg),n.svg&&(n.uncache?(k=e.getBBox(),U=n.xOrigin-k.x+"px "+(n.yOrigin-k.y)+"px",S=""):S=!t&&e.getAttribute("data-svg-origin"),Hi(e,S||U,!!S||n.originIsAbsolute,!1!==n.smooth,m)),g=n.xOrigin||0,p=n.yOrigin||0,m!==Ui&&(D=m[0],w=m[1],_=m[2],E=m[3],r=C=m[4],i=T=m[5],6===m.length?(o=Math.sqrt(D*D+w*w),a=Math.sqrt(E*E+_*_),l=D||w?Jr(w,D)*Yr:0,(h=_||E?Jr(_,E)*Yr+l:0)&&(a*=Math.abs(Math.cos(h*Qr))),n.svg&&(r-=g-(g*D+p*_),i-=p-(g*w+p*E))):(O=m[6],L=m[7],A=m[8],I=m[9],F=m[10],M=m[11],r=m[12],i=m[13],s=m[14],u=(y=Jr(O,F))*Yr,y&&(S=C*(v=Math.cos(-y))+A*(b=Math.sin(-y)),k=T*v+I*b,x=O*v+F*b,A=C*-b+A*v,I=T*-b+I*v,F=O*-b+F*v,M=L*-b+M*v,C=S,T=k,O=x),c=(y=Jr(-_,F))*Yr,y&&(v=Math.cos(-y),M=E*(b=Math.sin(-y))+M*v,D=S=D*v-A*b,w=k=w*v-I*b,_=x=_*v-F*b),l=(y=Jr(w,D))*Yr,y&&(S=D*(v=Math.cos(y))+w*(b=Math.sin(y)),k=C*v+T*b,w=w*v-D*b,T=T*v-C*b,D=S,C=k),u&&Math.abs(u)+Math.abs(l)>359.9&&(u=l=0,c=180-c),o=It(Math.sqrt(D*D+w*w+_*_)),a=It(Math.sqrt(T*T+O*O)),y=Jr(C,T),h=Math.abs(y)>2e-4?y*Yr:0,f=M?1/(M<0?-M:M):0),n.svg&&(S=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!ji(_i(e,pi)),S&&e.setAttribute("transform",S))),Math.abs(h)>90&&Math.abs(h)<270&&(N?(o*=-1,h+=l<=0?180:-180,l+=l<=0?180:-180):(a*=-1,h+=h<=0?180:-180)),t=t||n.uncache,n.x=r-((n.xPercent=r&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-r)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+R,n.y=i-((n.yPercent=i&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-i)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+R,n.z=s+R,n.scaleX=It(o),n.scaleY=It(a),n.rotation=It(l)+B,n.rotationX=It(u)+B,n.rotationY=It(c)+B,n.skewX=h+B,n.skewY=d+B,n.transformPerspective=f+R,(n.zOrigin=parseFloat(U.split(" ")[2])||!t&&n.zOrigin||0)&&(P[mi]=Wi(U)),n.xOffset=n.yOffset=0,n.force3D=Pe.force3D,n.renderTransform=n.svg?es:Kr?Zi:Xi,n.uncache=0,n},Wi=function(e){return(e=e.split(" "))[0]+" "+e[1]},Ki=function(e,t,n){var r=gn(t);return It(parseFloat(t)+parseFloat(Oi(e,"x",n+"px",r)))+r},Xi=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Zi(e,t)},Yi="0deg",Qi="0px",Ji=") ",Zi=function(e,t){var n=t||this,r=n.xPercent,i=n.yPercent,s=n.x,o=n.y,a=n.z,l=n.rotation,u=n.rotationY,c=n.rotationX,h=n.skewX,d=n.skewY,f=n.scaleX,g=n.scaleY,p=n.transformPerspective,m=n.force3D,y=n.target,v=n.zOrigin,b="",D="auto"===m&&e&&1!==e||!0===m;if(v&&(c!==Yi||u!==Yi)){var w,_=parseFloat(u)*Qr,E=Math.sin(_),C=Math.cos(_);_=parseFloat(c)*Qr,w=Math.cos(_),s=Ki(y,s,E*w*-v),o=Ki(y,o,-Math.sin(_)*-v),a=Ki(y,a,C*w*-v+v)}p!==Qi&&(b+="perspective("+p+Ji),(r||i)&&(b+="translate("+r+"%, "+i+"%) "),(D||s!==Qi||o!==Qi||a!==Qi)&&(b+=a!==Qi||D?"translate3d("+s+", "+o+", "+a+") ":"translate("+s+", "+o+Ji),l!==Yi&&(b+="rotate("+l+Ji),u!==Yi&&(b+="rotateY("+u+Ji),c!==Yi&&(b+="rotateX("+c+Ji),h===Yi&&d===Yi||(b+="skew("+h+", "+d+Ji),1===f&&1===g||(b+="scale("+f+", "+g+Ji),y.style[pi]=b||"translate(0, 0)"},es=function(e,t){var n,r,i,s,o,a=t||this,l=a.xPercent,u=a.yPercent,c=a.x,h=a.y,d=a.rotation,f=a.skewX,g=a.skewY,p=a.scaleX,m=a.scaleY,y=a.target,v=a.xOrigin,b=a.yOrigin,D=a.xOffset,w=a.yOffset,_=a.forceCSS,E=parseFloat(c),C=parseFloat(h);d=parseFloat(d),f=parseFloat(f),(g=parseFloat(g))&&(f+=g=parseFloat(g),d+=g),d||f?(d*=Qr,f*=Qr,n=Math.cos(d)*p,r=Math.sin(d)*p,i=Math.sin(d-f)*-m,s=Math.cos(d-f)*m,f&&(g*=Qr,o=Math.tan(f-g),i*=o=Math.sqrt(1+o*o),s*=o,g&&(o=Math.tan(g),n*=o=Math.sqrt(1+o*o),r*=o)),n=It(n),r=It(r),i=It(i),s=It(s)):(n=p,s=m,r=i=0),(E&&!~(c+"").indexOf("px")||C&&!~(h+"").indexOf("px"))&&(E=Oi(y,"x",c,"px"),C=Oi(y,"y",h,"px")),(v||b||D||w)&&(E=It(E+v-(v*n+b*i)+D),C=It(C+b-(v*r+b*s)+w)),(l||u)&&(o=y.getBBox(),E=It(E+l/100*o.width),C=It(C+u/100*o.height)),o="matrix("+n+","+r+","+i+","+s+","+E+","+C+")",y.setAttribute("transform",o),_&&(y.style[pi]=o)},ts=function(e,t,n,r,i){var s,o,a=360,l=He(i),u=parseFloat(i)*(l&&~i.indexOf("rad")?Yr:1)-r,c=r+u+"deg";return l&&("short"===(s=i.split("_")[1])&&(u%=a)!==u%180&&(u+=u<0?a:-360),"cw"===s&&u<0?u=(u+36e9)%a-~~(u/a)*a:"ccw"===s&&u>0&&(u=(u-36e9)%a-~~(u/a)*a)),e._pt=o=new kr(e._pt,t,n,r,u,ii),o.e=c,o.u="deg",e._props.push(n),o},ns=function(e,t){for(var n in t)e[n]=t[n];return e},rs=function(e,t,n){var r,i,s,o,a,l,u,c=ns({},n._gsap),h=n.style;for(i in c.svg?(s=n.getAttribute("transform"),n.setAttribute("transform",""),h[pi]=t,r=Gi(n,1),Ii(n,pi),n.setAttribute("transform",s)):(s=getComputedStyle(n)[pi],h[pi]=t,r=Gi(n,1),h[pi]=s),Xr)(s=c[i])!==(o=r[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(a=gn(s)!==(u=gn(o))?Oi(n,i,s,u):parseFloat(s),l=parseFloat(o),e._pt=new kr(e._pt,r,i,a,l-a,ri),e._pt.u=u||0,e._props.push(i));ns(r,c)};At("padding,margin,Width,Radius",(function(e,t){var n="Top",r="Right",i="Bottom",s="Left",o=(t<3?[n,r,i,s]:[n+s,n+r,i+r,i+s]).map((function(n){return t<2?e+n:"border"+n+e}));Vi[t>1?"border"+e:e]=function(e,t,n,r,i){var s,a;if(arguments.length<4)return s=o.map((function(t){return Pi(e,t,n)})),5===(a=s.join(" ")).split(s[0]).length?s[0]:a;s=(r+"").split(" "),a={},o.forEach((function(e,t){return a[e]=s[t]=s[t]||s[(t-1)/2|0]})),e.init(t,a,i)}}));var is,ss,os,as={name:"css",register:Ti,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,i){var s,o,a,l,u,c,h,d,f,g,p,m,y,v,b,D,w,_,E,C,T=this._props,S=e.style,k=n.vars.startAt;for(h in qr||Ti(),this.styles=this.styles||Di(e),D=this.styles.props,this.tween=n,t)if("autoRound"!==h&&(o=t[h],!wt[h]||!ar(h,t,n,r,e,i)))if(u=typeof o,c=Vi[h],"function"===u&&(u=typeof(o=o.call(n,r,e,i))),"string"===u&&~o.indexOf("random(")&&(o=Tn(o)),c)c(this,e,h,o,n)&&(b=1);else if("--"===h.substr(0,2))s=(getComputedStyle(e).getPropertyValue(h)+"").trim(),o+="",Bn.lastIndex=0,Bn.test(s)||(d=gn(s),f=gn(o)),f?d!==f&&(s=Oi(e,h,s,f)+f):d&&(o+=d),this.add(S,"setProperty",s,o,r,i,0,0,h),T.push(h),D.push(h,0,S[h]);else if("undefined"!==u){if(k&&h in k?(s="function"==typeof k[h]?k[h].call(n,r,e,i):k[h],He(s)&&~s.indexOf("random(")&&(s=Tn(s)),gn(s+"")||"auto"===s||(s+=Pe.units[h]||gn(Pi(e,h))||""),"="===(s+"").charAt(1)&&(s=Pi(e,h))):s=Pi(e,h),l=parseFloat(s),(g="string"===u&&"="===o.charAt(1)&&o.substr(0,2))&&(o=o.substr(2)),a=parseFloat(o),h in ni&&("autoAlpha"===h&&(1===l&&"hidden"===Pi(e,"visibility")&&a&&(l=0),D.push("visibility",0,S.visibility),Fi(this,S,"visibility",l?"inherit":"hidden",a?"inherit":"hidden",!a)),"scale"!==h&&"transform"!==h&&~(h=ni[h]).indexOf(",")&&(h=h.split(",")[0])),p=h in Xr)if(this.styles.save(h),m||((y=e._gsap).renderTransform&&!t.parseTransform||Gi(e,t.parseTransform),v=!1!==t.smoothOrigin&&y.smooth,(m=this._pt=new kr(this._pt,S,pi,0,1,y.renderTransform,y,0,-1)).dep=1),"scale"===h)this._pt=new kr(this._pt,y,"scaleY",y.scaleY,(g?Lt(y.scaleY,g+a):a)-y.scaleY||0,ri),this._pt.u=0,T.push("scaleY",h),h+="X";else{if("transformOrigin"===h){D.push(mi,0,S[mi]),_=void 0,E=void 0,C=void 0,_=(w=o).split(" "),E=_[0],C=_[1]||"50%","top"!==E&&"bottom"!==E&&"left"!==C&&"right"!==C||(w=E,E=C,C=w),_[0]=Ri[E]||E,_[1]=Ri[C]||C,o=_.join(" "),y.svg?Hi(e,o,0,v,0,this):((f=parseFloat(o.split(" ")[2])||0)!==y.zOrigin&&Fi(this,y,"zOrigin",y.zOrigin,f),Fi(this,S,h,Wi(s),Wi(o)));continue}if("svgOrigin"===h){Hi(e,o,1,v,0,this);continue}if(h in zi){ts(this,y,h,l,g?Lt(l,g+o):o);continue}if("smoothOrigin"===h){Fi(this,y,"smooth",y.smooth,o);continue}if("force3D"===h){y[h]=o;continue}if("transform"===h){rs(this,o,e);continue}}else h in S||(h=Ci(h)||h);if(p||(a||0===a)&&(l||0===l)&&!ti.test(o)&&h in S)a||(a=0),(d=(s+"").substr((l+"").length))!==(f=gn(o)||(h in Pe.units?Pe.units[h]:d))&&(l=Oi(e,h,s,f)),this._pt=new kr(this._pt,p?y:S,h,l,(g?Lt(l,g+a):a)-l,p||"px"!==f&&"zIndex"!==h||!1===t.autoRound?ri:oi),this._pt.u=f||0,d!==f&&"%"!==f&&(this._pt.b=s,this._pt.r=si);else if(h in S)Ni.call(this,e,h,s,g?g+o:o);else if(h in e)this.add(e,h,s||e[h],g?g+o:o,r,i);else if("parseTransform"!==h){ht(h,o);continue}p||(h in S?D.push(h,0,S[h]):"function"==typeof e[h]?D.push(h,2,e[h]()):D.push(h,1,s||e[h])),T.push(h)}b&&Sr(this)},render:function(e,t){if(t.tween._time||!Wr())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:Pi,aliases:ni,getSetter:function(e,t,n){var r=ni[t];return r&&r.indexOf(",")<0&&(t=r),t in Xr&&t!==mi&&(e._gsap.x||Pi(e,"x"))?n&&Gr===n?"scale"===t?di:hi:(Gr=n||{})&&("scale"===t?fi:gi):e.style&&!Ke(e.style[t])?ui:~t.indexOf("-")?ci:vr(e,t)},core:{_removeProperty:Ii,_getMatrix:qi}};Ur.utils.checkPrefix=Ci,Ur.core.getStyleSaver=Di,os=At((is="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(ss="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(e){Xr[e]=1})),At(ss,(function(e){Pe.units[e]="deg",zi[e]=1})),ni[os[13]]=is+","+ss,At("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(e){var t=e.split(":");ni[t[1]]=os[t[0]]})),At("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(e){Pe.units[e]="px"})),Ur.registerPlugin(as);var ls=Ur.registerPlugin(as)||Ur;function us(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}
/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/ls.core.Tween;var cs,hs,ds,fs,gs,ps,ms,ys,vs,bs,Ds,ws,_s,Es=function(){return cs||"undefined"!=typeof window&&(cs=window.gsap)&&cs.registerPlugin&&cs},Cs=1,Ts=[],Ss=[],ks=[],xs=Date.now,As=function(e,t){return t},Is=function(e,t){return~ks.indexOf(e)&&ks[ks.indexOf(e)+1][t]},Fs=function(e){return!!~bs.indexOf(e)},Ls=function(e,t,n,r,i){return e.addEventListener(t,n,{passive:!1!==r,capture:!!i})},Ms=function(e,t,n,r){return e.removeEventListener(t,n,!!r)},Os="scrollLeft",Ps="scrollTop",Ns=function(){return Ds&&Ds.isPressed||Ss.cache++},Rs=function(e,t){var n=function n(r){if(r||0===r){Cs&&(ds.history.scrollRestoration="manual");var i=Ds&&Ds.isPressed;r=n.v=Math.round(r)||(Ds&&Ds.iOS?1:0),e(r),n.cacheID=Ss.cache,i&&As("ss",r)}else(t||Ss.cache!==n.cacheID||As("ref"))&&(n.cacheID=Ss.cache,n.v=e());return n.v+n.offset};return n.offset=0,e&&n},Bs={s:Os,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Rs((function(e){return arguments.length?ds.scrollTo(e,Vs.sc()):ds.pageXOffset||fs[Os]||gs[Os]||ps[Os]||0}))},Vs={s:Ps,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Bs,sc:Rs((function(e){return arguments.length?ds.scrollTo(Bs.sc(),e):ds.pageYOffset||fs[Ps]||gs[Ps]||ps[Ps]||0}))},Us=function(e,t){return(t&&t._ctx&&t._ctx.selector||cs.utils.toArray)(e)[0]||("string"==typeof e&&!1!==cs.config().nullTargetWarn?console.warn("Element not found:",e):null)},zs=function(e,t){var n=t.s,r=t.sc;Fs(e)&&(e=fs.scrollingElement||gs);var i=Ss.indexOf(e),s=r===Vs.sc?1:2;!~i&&(i=Ss.push(e)-1),Ss[i+s]||Ls(e,"scroll",Ns);var o=Ss[i+s],a=o||(Ss[i+s]=Rs(Is(e,n),!0)||(Fs(e)?r:Rs((function(t){return arguments.length?e[n]=t:e[n]}))));return a.target=e,o||(a.smooth="smooth"===cs.getProperty(e,"scrollBehavior")),a},js=function(e,t,n){var r=e,i=e,s=xs(),o=s,a=t||50,l=Math.max(500,3*a),u=function(e,t){var l=xs();t||l-s>a?(i=r,r=e,o=s,s=l):n?r+=e:r=i+(e-i)/(l-o)*(s-o)};return{update:u,reset:function(){i=r=n?0:r,o=s=0},getVelocity:function(e){var t=o,a=i,c=xs();return(e||0===e)&&e!==r&&u(e),s===o||c-o>l?0:(r+(n?a:-a))/((n?c:s)-t)*1e3}}},$s=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},qs=function(e){var t=Math.max.apply(Math,e),n=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(n)?t:n},Hs=function(){var e,t,n,r;(vs=cs.core.globals().ScrollTrigger)&&vs.core&&(e=vs.core,t=e.bridge||{},n=e._scrollers,r=e._proxies,n.push.apply(n,Ss),r.push.apply(r,ks),Ss=n,ks=r,As=function(e,n){return t[e](n)})},Gs=function(e){return cs=e||Es(),!hs&&cs&&"undefined"!=typeof document&&document.body&&(ds=window,fs=document,gs=fs.documentElement,ps=fs.body,bs=[ds,fs,gs,ps],cs.utils.clamp,_s=cs.core.context||function(){},ys="onpointerenter"in ps?"pointer":"mouse",ms=Ws.isTouch=ds.matchMedia&&ds.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in ds||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,ws=Ws.eventTypes=("ontouchstart"in gs?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in gs?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout((function(){return Cs=0}),500),Hs(),hs=1),hs};Bs.op=Vs,Ss.cache=0;var Ws=function(){function e(e){this.init(e)}return e.prototype.init=function(e){hs||Gs(cs)||console.warn("Please gsap.registerPlugin(Observer)"),vs||Hs();var t=e.tolerance,n=e.dragMinimum,r=e.type,i=e.target,s=e.lineHeight,o=e.debounce,a=e.preventDefault,l=e.onStop,u=e.onStopDelay,c=e.ignore,h=e.wheelSpeed,d=e.event,f=e.onDragStart,g=e.onDragEnd,p=e.onDrag,m=e.onPress,y=e.onRelease,v=e.onRight,b=e.onLeft,D=e.onUp,w=e.onDown,_=e.onChangeX,E=e.onChangeY,C=e.onChange,T=e.onToggleX,S=e.onToggleY,k=e.onHover,x=e.onHoverEnd,A=e.onMove,I=e.ignoreCheck,F=e.isNormalizer,L=e.onGestureStart,M=e.onGestureEnd,O=e.onWheel,P=e.onEnable,N=e.onDisable,R=e.onClick,B=e.scrollSpeed,V=e.capture,U=e.allowClicks,z=e.lockAxis,j=e.onLockAxis;this.target=i=Us(i)||gs,this.vars=e,c&&(c=cs.utils.toArray(c)),t=t||1e-9,n=n||0,h=h||1,B=B||1,r=r||"wheel,touch,pointer",o=!1!==o,s||(s=parseFloat(ds.getComputedStyle(ps).lineHeight)||22);var $,q,H,G,W,K,X,Y=this,Q=0,J=0,Z=e.passive||!a&&!1!==e.passive,ee=zs(i,Bs),te=zs(i,Vs),ne=ee(),re=te(),ie=~r.indexOf("touch")&&!~r.indexOf("pointer")&&"pointerdown"===ws[0],se=Fs(i),oe=i.ownerDocument||fs,ae=[0,0,0],le=[0,0,0],ue=0,ce=function(){return ue=xs()},he=function(e,t){return(Y.event=e)&&c&&~c.indexOf(e.target)||t&&ie&&"touch"!==e.pointerType||I&&I(e,t)},de=function(){var e=Y.deltaX=qs(ae),n=Y.deltaY=qs(le),r=Math.abs(e)>=t,i=Math.abs(n)>=t;C&&(r||i)&&C(Y,e,n,ae,le),r&&(v&&Y.deltaX>0&&v(Y),b&&Y.deltaX<0&&b(Y),_&&_(Y),T&&Y.deltaX<0!=Q<0&&T(Y),Q=Y.deltaX,ae[0]=ae[1]=ae[2]=0),i&&(w&&Y.deltaY>0&&w(Y),D&&Y.deltaY<0&&D(Y),E&&E(Y),S&&Y.deltaY<0!=J<0&&S(Y),J=Y.deltaY,le[0]=le[1]=le[2]=0),(G||H)&&(A&&A(Y),H&&(f&&1===H&&f(Y),p&&p(Y),H=0),G=!1),K&&!(K=!1)&&j&&j(Y),W&&(O(Y),W=!1),$=0},fe=function(e,t,n){ae[n]+=e,le[n]+=t,Y._vx.update(e),Y._vy.update(t),o?$||($=requestAnimationFrame(de)):de()},ge=function(e,t){z&&!X&&(Y.axis=X=Math.abs(e)>Math.abs(t)?"x":"y",K=!0),"y"!==X&&(ae[2]+=e,Y._vx.update(e,!0)),"x"!==X&&(le[2]+=t,Y._vy.update(t,!0)),o?$||($=requestAnimationFrame(de)):de()},pe=function(e){if(!he(e,1)){var t=(e=$s(e,a)).clientX,r=e.clientY,i=t-Y.x,s=r-Y.y,o=Y.isDragging;Y.x=t,Y.y=r,(o||(i||s)&&(Math.abs(Y.startX-t)>=n||Math.abs(Y.startY-r)>=n))&&(H=o?2:1,o||(Y.isDragging=!0),ge(i,s))}},me=Y.onPress=function(e){he(e,1)||e&&e.button||(Y.axis=X=null,q.pause(),Y.isPressed=!0,e=$s(e),Q=J=0,Y.startX=Y.x=e.clientX,Y.startY=Y.y=e.clientY,Y._vx.reset(),Y._vy.reset(),Ls(F?i:oe,ws[1],pe,Z,!0),Y.deltaX=Y.deltaY=0,m&&m(Y))},ye=Y.onRelease=function(e){if(!he(e,1)){Ms(F?i:oe,ws[1],pe,!0);var t=!isNaN(Y.y-Y.startY),n=Y.isDragging,r=n&&(Math.abs(Y.x-Y.startX)>3||Math.abs(Y.y-Y.startY)>3),s=$s(e);!r&&t&&(Y._vx.reset(),Y._vy.reset(),a&&U&&cs.delayedCall(.08,(function(){if(xs()-ue>300&&!e.defaultPrevented)if(e.target.click)e.target.click();else if(oe.createEvent){var t=oe.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,ds,1,s.screenX,s.screenY,s.clientX,s.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(t)}}))),Y.isDragging=Y.isGesturing=Y.isPressed=!1,l&&n&&!F&&q.restart(!0),H&&de(),g&&n&&g(Y),y&&y(Y,r)}},ve=function(e){return e.touches&&e.touches.length>1&&(Y.isGesturing=!0)&&L(e,Y.isDragging)},be=function(){return(Y.isGesturing=!1)||M(Y)},De=function(e){if(!he(e)){var t=ee(),n=te();fe((t-ne)*B,(n-re)*B,1),ne=t,re=n,l&&q.restart(!0)}},we=function(e){if(!he(e)){e=$s(e,a),O&&(W=!0);var t=(1===e.deltaMode?s:2===e.deltaMode?ds.innerHeight:1)*h;fe(e.deltaX*t,e.deltaY*t,0),l&&!F&&q.restart(!0)}},_e=function(e){if(!he(e)){var t=e.clientX,n=e.clientY,r=t-Y.x,i=n-Y.y;Y.x=t,Y.y=n,G=!0,l&&q.restart(!0),(r||i)&&ge(r,i)}},Ee=function(e){Y.event=e,k(Y)},Ce=function(e){Y.event=e,x(Y)},Te=function(e){return he(e)||$s(e,a)&&R(Y)};q=Y._dc=cs.delayedCall(u||.25,(function(){Y._vx.reset(),Y._vy.reset(),q.pause(),l&&l(Y)})).pause(),Y.deltaX=Y.deltaY=0,Y._vx=js(0,50,!0),Y._vy=js(0,50,!0),Y.scrollX=ee,Y.scrollY=te,Y.isDragging=Y.isGesturing=Y.isPressed=!1,_s(this),Y.enable=function(e){return Y.isEnabled||(Ls(se?oe:i,"scroll",Ns),r.indexOf("scroll")>=0&&Ls(se?oe:i,"scroll",De,Z,V),r.indexOf("wheel")>=0&&Ls(i,"wheel",we,Z,V),(r.indexOf("touch")>=0&&ms||r.indexOf("pointer")>=0)&&(Ls(i,ws[0],me,Z,V),Ls(oe,ws[2],ye),Ls(oe,ws[3],ye),U&&Ls(i,"click",ce,!0,!0),R&&Ls(i,"click",Te),L&&Ls(oe,"gesturestart",ve),M&&Ls(oe,"gestureend",be),k&&Ls(i,ys+"enter",Ee),x&&Ls(i,ys+"leave",Ce),A&&Ls(i,ys+"move",_e)),Y.isEnabled=!0,Y.isDragging=Y.isGesturing=Y.isPressed=G=H=!1,Y._vx.reset(),Y._vy.reset(),ne=ee(),re=te(),e&&e.type&&me(e),P&&P(Y)),Y},Y.disable=function(){Y.isEnabled&&(Ts.filter((function(e){return e!==Y&&Fs(e.target)})).length||Ms(se?oe:i,"scroll",Ns),Y.isPressed&&(Y._vx.reset(),Y._vy.reset(),Ms(F?i:oe,ws[1],pe,!0)),Ms(se?oe:i,"scroll",De,V),Ms(i,"wheel",we,V),Ms(i,ws[0],me,V),Ms(oe,ws[2],ye),Ms(oe,ws[3],ye),Ms(i,"click",ce,!0),Ms(i,"click",Te),Ms(oe,"gesturestart",ve),Ms(oe,"gestureend",be),Ms(i,ys+"enter",Ee),Ms(i,ys+"leave",Ce),Ms(i,ys+"move",_e),Y.isEnabled=Y.isPressed=Y.isDragging=!1,N&&N(Y))},Y.kill=Y.revert=function(){Y.disable();var e=Ts.indexOf(Y);e>=0&&Ts.splice(e,1),Ds===Y&&(Ds=0)},Ts.push(Y),F&&Fs(i)&&(Ds=Y),Y.enable(d)},us(e,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),e}();Ws.version="3.12.7",Ws.create=function(e){return new Ws(e)},Ws.register=Gs,Ws.getAll=function(){return Ts.slice()},Ws.getById=function(e){return Ts.filter((function(t){return t.vars.id===e}))[0]},Es()&&cs.registerPlugin(Ws);
/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
var Ks,Xs,Ys,Qs,Js,Zs,eo,to,no,ro,io,so,oo,ao,lo,uo,co,ho,fo,go,po,mo,yo,vo,bo,Do,wo,_o,Eo,Co,To,So,ko,xo,Ao,Io,Fo,Lo,Mo=1,Oo=Date.now,Po=Oo(),No=0,Ro=0,Bo=function(e,t,n){var r=Jo(e)&&("clamp("===e.substr(0,6)||e.indexOf("max")>-1);return n["_"+t+"Clamp"]=r,r?e.substr(6,e.length-7):e},Vo=function(e,t){return!t||Jo(e)&&"clamp("===e.substr(0,6)?e:"clamp("+e+")"},Uo=function e(){return Ro&&requestAnimationFrame(e)},zo=function(){return ao=1},jo=function(){return ao=0},$o=function(e){return e},qo=function(e){return Math.round(1e5*e)/1e5||0},Ho=function(){return"undefined"!=typeof window},Go=function(){return Ks||Ho()&&(Ks=window.gsap)&&Ks.registerPlugin&&Ks},Wo=function(e){return!!~eo.indexOf(e)},Ko=function(e){return("Height"===e?To:Ys["inner"+e])||Js["client"+e]||Zs["client"+e]},Xo=function(e){return Is(e,"getBoundingClientRect")||(Wo(e)?function(){return ll.width=Ys.innerWidth,ll.height=To,ll}:function(){return wa(e)})},Yo=function(e,t){var n=t.s,r=t.d2,i=t.d,s=t.a;return Math.max(0,(n="scroll"+r)&&(s=Is(e,n))?s()-Xo(e)()[i]:Wo(e)?(Js[n]||Zs[n])-Ko(r):e[n]-e["offset"+r])},Qo=function(e,t){for(var n=0;n<fo.length;n+=3)(!t||~t.indexOf(fo[n+1]))&&e(fo[n],fo[n+1],fo[n+2])},Jo=function(e){return"string"==typeof e},Zo=function(e){return"function"==typeof e},ea=function(e){return"number"==typeof e},ta=function(e){return"object"==typeof e},na=function(e,t,n){return e&&e.progress(t?0:1)&&n&&e.pause()},ra=function(e,t){if(e.enabled){var n=e._ctx?e._ctx.add((function(){return t(e)})):t(e);n&&n.totalTime&&(e.callbackAnimation=n)}},ia=Math.abs,sa="left",oa="right",aa="bottom",la="width",ua="height",ca="Right",ha="Left",da="Top",fa="Bottom",ga="padding",pa="margin",ma="Width",ya="Height",va="px",ba=function(e){return Ys.getComputedStyle(e)},Da=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},wa=function(e,t){var n=t&&"matrix(1, 0, 0, 1, 0, 0)"!==ba(e)[lo]&&Ks.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=e.getBoundingClientRect();return n&&n.progress(0).kill(),r},_a=function(e,t){var n=t.d2;return e["offset"+n]||e["client"+n]||0},Ea=function(e){var t,n=[],r=e.labels,i=e.duration();for(t in r)n.push(r[t]/i);return n},Ca=function(e){var t=Ks.utils.snap(e),n=Array.isArray(e)&&e.slice(0).sort((function(e,t){return e-t}));return n?function(e,r,i){var s;if(void 0===i&&(i=.001),!r)return t(e);if(r>0){for(e-=i,s=0;s<n.length;s++)if(n[s]>=e)return n[s];return n[s-1]}for(s=n.length,e+=i;s--;)if(n[s]<=e)return n[s];return n[0]}:function(n,r,i){void 0===i&&(i=.001);var s=t(n);return!r||Math.abs(s-n)<i||s-n<0==r<0?s:t(r<0?n-e:n+e)}},Ta=function(e,t,n,r){return n.split(",").forEach((function(n){return e(t,n,r)}))},Sa=function(e,t,n,r,i){return e.addEventListener(t,n,{passive:!r,capture:!!i})},ka=function(e,t,n,r){return e.removeEventListener(t,n,!!r)},xa=function(e,t,n){(n=n&&n.wheelHandler)&&(e(t,"wheel",n),e(t,"touchmove",n))},Aa={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},Ia={toggleActions:"play",anticipatePin:0},Fa={top:0,left:0,center:.5,bottom:1,right:1},La=function(e,t){if(Jo(e)){var n=e.indexOf("="),r=~n?+(e.charAt(n-1)+1)*parseFloat(e.substr(n+1)):0;~n&&(e.indexOf("%")>n&&(r*=t/100),e=e.substr(0,n-1)),e=r+(e in Fa?Fa[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},Ma=function(e,t,n,r,i,s,o,a){var l=i.startColor,u=i.endColor,c=i.fontSize,h=i.indent,d=i.fontWeight,f=Qs.createElement("div"),g=Wo(n)||"fixed"===Is(n,"pinType"),p=-1!==e.indexOf("scroller"),m=g?Zs:n,y=-1!==e.indexOf("start"),v=y?l:u,b="border-color:"+v+";font-size:"+c+";color:"+v+";font-weight:"+d+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return b+="position:"+((p||a)&&g?"fixed;":"absolute;"),(p||a||!g)&&(b+=(r===Vs?oa:aa)+":"+(s+parseFloat(h))+"px;"),o&&(b+="box-sizing:border-box;text-align:left;width:"+o.offsetWidth+"px;"),f._isStart=y,f.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),f.style.cssText=b,f.innerText=t||0===t?e+"-"+t:e,m.children[0]?m.insertBefore(f,m.children[0]):m.appendChild(f),f._offset=f["offset"+r.op.d2],Oa(f,0,r,y),f},Oa=function(e,t,n,r){var i={display:"block"},s=n[r?"os2":"p2"],o=n[r?"p2":"os2"];e._isFlipped=r,i[n.a+"Percent"]=r?-100:0,i[n.a]=r?"1px":0,i["border"+s+ma]=1,i["border"+o+ma]=0,i[n.p]=t+"px",Ks.set(e,i)},Pa=[],Na={},Ra=function(){return Oo()-No>34&&(Ao||(Ao=requestAnimationFrame(tl)))},Ba=function(){(!yo||!yo.isPressed||yo.startX>Zs.clientWidth)&&(Ss.cache++,yo?Ao||(Ao=requestAnimationFrame(tl)):tl(),No||qa("scrollStart"),No=Oo())},Va=function(){Do=Ys.innerWidth,bo=Ys.innerHeight},Ua=function(e){Ss.cache++,(!0===e||!oo&&!mo&&!Qs.fullscreenElement&&!Qs.webkitFullscreenElement&&(!vo||Do!==Ys.innerWidth||Math.abs(Ys.innerHeight-bo)>.25*Ys.innerHeight))&&to.restart(!0)},za={},ja=[],$a=function e(){return ka(pl,"scrollEnd",e)||Ja(!0)},qa=function(e){return za[e]&&za[e].map((function(e){return e()}))||ja},Ha=[],Ga=function(e){for(var t=0;t<Ha.length;t+=5)(!e||Ha[t+4]&&Ha[t+4].query===e)&&(Ha[t].style.cssText=Ha[t+1],Ha[t].getBBox&&Ha[t].setAttribute("transform",Ha[t+2]||""),Ha[t+3].uncache=1)},Wa=function(e,t){var n;for(uo=0;uo<Pa.length;uo++)!(n=Pa[uo])||t&&n._ctx!==t||(e?n.kill(1):n.revert(!0,!0));So=!0,t&&Ga(t),t||qa("revert")},Ka=function(e,t){Ss.cache++,(t||!Io)&&Ss.forEach((function(e){return Zo(e)&&e.cacheID++&&(e.rec=0)})),Jo(e)&&(Ys.history.scrollRestoration=Eo=e)},Xa=0,Ya=function(){Zs.appendChild(Co),To=!yo&&Co.offsetHeight||Ys.innerHeight,Zs.removeChild(Co)},Qa=function(e){return no(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach((function(t){return t.style.display=e?"none":"block"}))},Ja=function(e,t){if(Js=Qs.documentElement,Zs=Qs.body,eo=[Ys,Qs,Js,Zs],!No||e||So){Ya(),Io=pl.isRefreshing=!0,Ss.forEach((function(e){return Zo(e)&&++e.cacheID&&(e.rec=e())}));var n=qa("refreshInit");go&&pl.sort(),t||Wa(),Ss.forEach((function(e){Zo(e)&&(e.smooth&&(e.target.style.scrollBehavior="auto"),e(0))})),Pa.slice(0).forEach((function(e){return e.refresh()})),So=!1,Pa.forEach((function(e){if(e._subPinOffset&&e.pin){var t=e.vars.horizontal?"offsetWidth":"offsetHeight",n=e.pin[t];e.revert(!0,1),e.adjustPinSpacing(e.pin[t]-n),e.refresh()}})),ko=1,Qa(!0),Pa.forEach((function(e){var t=Yo(e.scroller,e._dir),n="max"===e.vars.end||e._endClamp&&e.end>t,r=e._startClamp&&e.start>=t;(n||r)&&e.setPositions(r?t-1:e.start,n?Math.max(r?t:e.start+1,t):e.end,!0)})),Qa(!1),ko=0,n.forEach((function(e){return e&&e.render&&e.render(-1)})),Ss.forEach((function(e){Zo(e)&&(e.smooth&&requestAnimationFrame((function(){return e.target.style.scrollBehavior="smooth"})),e.rec&&e(e.rec))})),Ka(Eo,1),to.pause(),Xa++,Io=2,tl(2),Pa.forEach((function(e){return Zo(e.vars.onRefresh)&&e.vars.onRefresh(e)})),Io=pl.isRefreshing=!1,qa("refresh")}else Sa(pl,"scrollEnd",$a)},Za=0,el=1,tl=function(e){if(2===e||!Io&&!So){pl.isUpdating=!0,Lo&&Lo.update(0);var t=Pa.length,n=Oo(),r=n-Po>=50,i=t&&Pa[0].scroll();if(el=Za>i?-1:1,Io||(Za=i),r&&(No&&!ao&&n-No>200&&(No=0,qa("scrollEnd")),io=Po,Po=n),el<0){for(uo=t;uo-- >0;)Pa[uo]&&Pa[uo].update(0,r);el=1}else for(uo=0;uo<t;uo++)Pa[uo]&&Pa[uo].update(0,r);pl.isUpdating=!1}Ao=0},nl=[sa,"top",aa,oa,pa+fa,pa+ca,pa+da,pa+ha,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],rl=nl.concat([la,ua,"boxSizing","max"+ma,"max"+ya,"position",pa,ga,ga+da,ga+ca,ga+fa,ga+ha]),il=function(e,t,n,r){if(!e._gsap.swappedIn){for(var i,s=nl.length,o=t.style,a=e.style;s--;)o[i=nl[s]]=n[i];o.position="absolute"===n.position?"absolute":"relative","inline"===n.display&&(o.display="inline-block"),a[aa]=a[oa]="auto",o.flexBasis=n.flexBasis||"auto",o.overflow="visible",o.boxSizing="border-box",o[la]=_a(e,Bs)+va,o[ua]=_a(e,Vs)+va,o[ga]=a[pa]=a.top=a[sa]="0",ol(r),a[la]=a["max"+ma]=n[la],a[ua]=a["max"+ya]=n[ua],a[ga]=n[ga],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},sl=/([A-Z])/g,ol=function(e){if(e){var t,n,r=e.t.style,i=e.length,s=0;for((e.t._gsap||Ks.core.getCache(e.t)).uncache=1;s<i;s+=2)n=e[s+1],t=e[s],n?r[t]=n:r[t]&&r.removeProperty(t.replace(sl,"-$1").toLowerCase())}},al=function(e){for(var t=rl.length,n=e.style,r=[],i=0;i<t;i++)r.push(rl[i],n[rl[i]]);return r.t=e,r},ll={left:0,top:0},ul=function(e,t,n,r,i,s,o,a,l,u,c,h,d,f){Zo(e)&&(e=e(a)),Jo(e)&&"max"===e.substr(0,3)&&(e=h+("="===e.charAt(4)?La("0"+e.substr(3),n):0));var g,p,m,y=d?d.time():0;if(d&&d.seek(0),isNaN(e)||(e=+e),ea(e))d&&(e=Ks.utils.mapRange(d.scrollTrigger.start,d.scrollTrigger.end,0,h,e)),o&&Oa(o,n,r,!0);else{Zo(t)&&(t=t(a));var v,b,D,w,_=(e||"0").split(" ");m=Us(t,a)||Zs,(v=wa(m)||{})&&(v.left||v.top)||"none"!==ba(m).display||(w=m.style.display,m.style.display="block",v=wa(m),w?m.style.display=w:m.style.removeProperty("display")),b=La(_[0],v[r.d]),D=La(_[1]||"0",n),e=v[r.p]-l[r.p]-u+b+i-D,o&&Oa(o,D,r,n-D<20||o._isStart&&D>20),n-=n-D}if(f&&(a[f]=e||-.001,e<0&&(e=0)),s){var E=e+n,C=s._isStart;g="scroll"+r.d2,Oa(s,E,r,C&&E>20||!C&&(c?Math.max(Zs[g],Js[g]):s.parentNode[g])<=E+1),c&&(l=wa(o),c&&(s.style[r.op.p]=l[r.op.p]-r.op.m-s._offset+va))}return d&&m&&(g=wa(m),d.seek(h),p=wa(m),d._caScrollDist=g[r.p]-p[r.p],e=e/d._caScrollDist*h),d&&d.seek(y),d?e:Math.round(e)},cl=/(webkit|moz|length|cssText|inset)/i,hl=function(e,t,n,r){if(e.parentNode!==t){var i,s,o=e.style;if(t===Zs){for(i in e._stOrig=o.cssText,s=ba(e))+i||cl.test(i)||!s[i]||"string"!=typeof o[i]||"0"===i||(o[i]=s[i]);o.top=n,o.left=r}else o.cssText=e._stOrig;Ks.core.getCache(e).uncache=1,t.appendChild(e)}},dl=function(e,t,n){var r=t,i=r;return function(t){var s=Math.round(e());return s!==r&&s!==i&&Math.abs(s-r)>3&&Math.abs(s-i)>3&&(t=s,n&&n()),i=r,r=Math.round(t)}},fl=function(e,t,n){var r={};r[t.p]="+="+n,Ks.set(e,r)},gl=function(e,t){var n=zs(e,t),r="_scroll"+t.p2,i=function t(i,s,o,a,l){var u=t.tween,c=s.onComplete,h={};o=o||n();var d=dl(n,o,(function(){u.kill(),t.tween=0}));return l=a&&l||0,a=a||i-o,u&&u.kill(),s[r]=i,s.inherit=!1,s.modifiers=h,h[r]=function(){return d(o+a*u.ratio+l*u.ratio*u.ratio)},s.onUpdate=function(){Ss.cache++,t.tween&&tl()},s.onComplete=function(){t.tween=0,c&&c.call(u)},u=t.tween=Ks.to(e,s)};return e[r]=n,n.wheelHandler=function(){return i.tween&&i.tween.kill()&&(i.tween=0)},Sa(e,"wheel",n.wheelHandler),pl.isTouch&&Sa(e,"touchmove",n.wheelHandler),i},pl=function(){function e(t,n){Xs||e.register(Ks)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),_o(this),this.init(t,n)}return e.prototype.init=function(t,n){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),Ro){var r,i,s,o,a,l,u,c,h,d,f,g,p,m,y,v,b,D,w,_,E,C,T,S,k,x,A,I,F,L,M,O,P,N,R,B,V,U,z,j,$,q,H=t=Da(Jo(t)||ea(t)||t.nodeType?{trigger:t}:t,Ia),G=H.onUpdate,W=H.toggleClass,K=H.id,X=H.onToggle,Y=H.onRefresh,Q=H.scrub,J=H.trigger,Z=H.pin,ee=H.pinSpacing,te=H.invalidateOnRefresh,ne=H.anticipatePin,re=H.onScrubComplete,ie=H.onSnapComplete,se=H.once,oe=H.snap,ae=H.pinReparent,le=H.pinSpacer,ue=H.containerAnimation,ce=H.fastScrollEnd,he=H.preventOverlaps,de=t.horizontal||t.containerAnimation&&!1!==t.horizontal?Bs:Vs,fe=!Q&&0!==Q,ge=Us(t.scroller||Ys),pe=Ks.core.getCache(ge),me=Wo(ge),ye="fixed"===("pinType"in t?t.pinType:Is(ge,"pinType")||me&&"fixed"),ve=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],be=fe&&t.toggleActions.split(" "),De="markers"in t?t.markers:Ia.markers,we=me?0:parseFloat(ba(ge)["border"+de.p2+ma])||0,_e=this,Ee=t.onRefreshInit&&function(){return t.onRefreshInit(_e)},Ce=function(e,t,n){var r=n.d,i=n.d2,s=n.a;return(s=Is(e,"getBoundingClientRect"))?function(){return s()[r]}:function(){return(t?Ko(i):e["client"+i])||0}}(ge,me,de),Te=function(e,t){return!t||~ks.indexOf(e)?Xo(e):function(){return ll}}(ge,me),Se=0,ke=0,xe=0,Ae=zs(ge,de);if(_e._startClamp=_e._endClamp=!1,_e._dir=de,ne*=45,_e.scroller=ge,_e.scroll=ue?ue.time.bind(ue):Ae,o=Ae(),_e.vars=t,n=n||t.animation,"refreshPriority"in t&&(go=1,-9999===t.refreshPriority&&(Lo=_e)),pe.tweenScroll=pe.tweenScroll||{top:gl(ge,Vs),left:gl(ge,Bs)},_e.tweenTo=r=pe.tweenScroll[de.p],_e.scrubDuration=function(e){(P=ea(e)&&e)?O?O.duration(e):O=Ks.to(n,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:P,paused:!0,onComplete:function(){return re&&re(_e)}}):(O&&O.progress(1).kill(),O=0)},n&&(n.vars.lazy=!1,n._initted&&!_e.isReverted||!1!==n.vars.immediateRender&&!1!==t.immediateRender&&n.duration()&&n.render(0,!0,!0),_e.animation=n.pause(),n.scrollTrigger=_e,_e.scrubDuration(Q),L=0,K||(K=n.vars.id)),oe&&(ta(oe)&&!oe.push||(oe={snapTo:oe}),"scrollBehavior"in Zs.style&&Ks.set(me?[Zs,Js]:ge,{scrollBehavior:"auto"}),Ss.forEach((function(e){return Zo(e)&&e.target===(me?Qs.scrollingElement||Js:ge)&&(e.smooth=!1)})),s=Zo(oe.snapTo)?oe.snapTo:"labels"===oe.snapTo?function(e){return function(t){return Ks.utils.snap(Ea(e),t)}}(n):"labelsDirectional"===oe.snapTo?(j=n,function(e,t){return Ca(Ea(j))(e,t.direction)}):!1!==oe.directional?function(e,t){return Ca(oe.snapTo)(e,Oo()-ke<500?0:t.direction)}:Ks.utils.snap(oe.snapTo),N=oe.duration||{min:.1,max:2},N=ta(N)?ro(N.min,N.max):ro(N,N),R=Ks.delayedCall(oe.delay||P/2||.1,(function(){var e=Ae(),t=Oo()-ke<500,i=r.tween;if(!(t||Math.abs(_e.getVelocity())<10)||i||ao||Se===e)_e.isActive&&Se!==e&&R.restart(!0);else{var o,a,c=(e-l)/m,h=n&&!fe?n.totalProgress():c,d=t?0:(h-M)/(Oo()-io)*1e3||0,f=Ks.utils.clamp(-c,1-c,ia(d/2)*d/.185),g=c+(!1===oe.inertia?0:f),p=oe,y=p.onStart,v=p.onInterrupt,b=p.onComplete;if(o=s(g,_e),ea(o)||(o=g),a=Math.max(0,Math.round(l+o*m)),e<=u&&e>=l&&a!==e){if(i&&!i._initted&&i.data<=ia(a-e))return;!1===oe.inertia&&(f=o-c),r(a,{duration:N(ia(.185*Math.max(ia(g-h),ia(o-h))/d/.05||0)),ease:oe.ease||"power3",data:ia(a-e),onInterrupt:function(){return R.restart(!0)&&v&&v(_e)},onComplete:function(){_e.update(),Se=Ae(),n&&!fe&&(O?O.resetTo("totalProgress",o,n._tTime/n._tDur):n.progress(o)),L=M=n&&!fe?n.totalProgress():_e.progress,ie&&ie(_e),b&&b(_e)}},e,f*m,a-e-f*m),y&&y(_e,r.tween)}}})).pause()),K&&(Na[K]=_e),(z=(J=_e.trigger=Us(J||!0!==Z&&Z))&&J._gsap&&J._gsap.stRevert)&&(z=z(_e)),Z=!0===Z?J:Us(Z),Jo(W)&&(W={targets:J,className:W}),Z&&(!1===ee||ee===pa||(ee=!(!ee&&Z.parentNode&&Z.parentNode.style&&"flex"===ba(Z.parentNode).display)&&ga),_e.pin=Z,(i=Ks.core.getCache(Z)).spacer?y=i.pinState:(le&&((le=Us(le))&&!le.nodeType&&(le=le.current||le.nativeElement),i.spacerIsNative=!!le,le&&(i.spacerState=al(le))),i.spacer=D=le||Qs.createElement("div"),D.classList.add("pin-spacer"),K&&D.classList.add("pin-spacer-"+K),i.pinState=y=al(Z)),!1!==t.force3D&&Ks.set(Z,{force3D:!0}),_e.spacer=D=i.spacer,F=ba(Z),S=F[ee+de.os2],_=Ks.getProperty(Z),E=Ks.quickSetter(Z,de.a,va),il(Z,D,F),b=al(Z)),De){g=ta(De)?Da(De,Aa):Aa,d=Ma("scroller-start",K,ge,de,g,0),f=Ma("scroller-end",K,ge,de,g,0,d),w=d["offset"+de.op.d2];var Ie=Us(Is(ge,"content")||ge);c=this.markerStart=Ma("start",K,Ie,de,g,w,0,ue),h=this.markerEnd=Ma("end",K,Ie,de,g,w,0,ue),ue&&(U=Ks.quickSetter([c,h],de.a,va)),ye||ks.length&&!0===Is(ge,"fixedMarkers")||(q=ba($=me?Zs:ge).position,$.style.position="absolute"===q||"fixed"===q?q:"relative",Ks.set([d,f],{force3D:!0}),x=Ks.quickSetter(d,de.a,va),I=Ks.quickSetter(f,de.a,va))}if(ue){var Fe=ue.vars.onUpdate,Le=ue.vars.onUpdateParams;ue.eventCallback("onUpdate",(function(){_e.update(0,0,1),Fe&&Fe.apply(ue,Le||[])}))}if(_e.previous=function(){return Pa[Pa.indexOf(_e)-1]},_e.next=function(){return Pa[Pa.indexOf(_e)+1]},_e.revert=function(e,t){if(!t)return _e.kill(!0);var r=!1!==e||!_e.enabled,i=oo;r!==_e.isReverted&&(r&&(B=Math.max(Ae(),_e.scroll.rec||0),xe=_e.progress,V=n&&n.progress()),c&&[c,h,d,f].forEach((function(e){return e.style.display=r?"none":"block"})),r&&(oo=_e,_e.update(r)),!Z||ae&&_e.isActive||(r?function(e,t,n){ol(n);var r=e._gsap;if(r.spacerIsNative)ol(r.spacerState);else if(e._gsap.swappedIn){var i=t.parentNode;i&&(i.insertBefore(e,t),i.removeChild(t))}e._gsap.swappedIn=!1}(Z,D,y):il(Z,D,ba(Z),k)),r||_e.update(r),oo=i,_e.isReverted=r)},_e.refresh=function(i,s,g,w){if(!oo&&_e.enabled||s)if(Z&&i&&No)Sa(e,"scrollEnd",$a);else{!Io&&Ee&&Ee(_e),oo=_e,r.tween&&!g&&(r.tween.kill(),r.tween=0),O&&O.pause(),te&&n&&n.revert({kill:!1}).invalidate(),_e.isReverted||_e.revert(!0,!0),_e._subPinOffset=!1;var E,S,x,I,F,L,M,P,N,U,z,j,$,q=Ce(),H=Te(),G=ue?ue.duration():Yo(ge,de),W=m<=.01,K=0,X=w||0,Q=ta(g)?g.end:t.end,ne=t.endTrigger||J,re=ta(g)?g.start:t.start||(0!==t.start&&J?Z?"0 0":"0 100%":0),ie=_e.pinnedContainer=t.pinnedContainer&&Us(t.pinnedContainer,_e),se=J&&Math.max(0,Pa.indexOf(_e))||0,oe=se;for(De&&ta(g)&&(j=Ks.getProperty(d,de.p),$=Ks.getProperty(f,de.p));oe-- >0;)(L=Pa[oe]).end||L.refresh(0,1)||(oo=_e),!(M=L.pin)||M!==J&&M!==Z&&M!==ie||L.isReverted||(U||(U=[]),U.unshift(L),L.revert(!0,!0)),L!==Pa[oe]&&(se--,oe--);for(Zo(re)&&(re=re(_e)),re=Bo(re,"start",_e),l=ul(re,J,q,de,Ae(),c,d,_e,H,we,ye,G,ue,_e._startClamp&&"_startClamp")||(Z?-.001:0),Zo(Q)&&(Q=Q(_e)),Jo(Q)&&!Q.indexOf("+=")&&(~Q.indexOf(" ")?Q=(Jo(re)?re.split(" ")[0]:"")+Q:(K=La(Q.substr(2),q),Q=Jo(re)?re:(ue?Ks.utils.mapRange(0,ue.duration(),ue.scrollTrigger.start,ue.scrollTrigger.end,l):l)+K,ne=J)),Q=Bo(Q,"end",_e),u=Math.max(l,ul(Q||(ne?"100% 0":G),ne,q,de,Ae()+K,h,f,_e,H,we,ye,G,ue,_e._endClamp&&"_endClamp"))||-.001,K=0,oe=se;oe--;)(M=(L=Pa[oe]).pin)&&L.start-L._pinPush<=l&&!ue&&L.end>0&&(E=L.end-(_e._startClamp?Math.max(0,L.start):L.start),(M===J&&L.start-L._pinPush<l||M===ie)&&isNaN(re)&&(K+=E*(1-L.progress)),M===Z&&(X+=E));if(l+=K,u+=K,_e._startClamp&&(_e._startClamp+=K),_e._endClamp&&!Io&&(_e._endClamp=u||-.001,u=Math.min(u,Yo(ge,de))),m=u-l||(l-=.01)&&.001,W&&(xe=Ks.utils.clamp(0,1,Ks.utils.normalize(l,u,B))),_e._pinPush=X,c&&K&&((E={})[de.a]="+="+K,ie&&(E[de.p]="-="+Ae()),Ks.set([c,h],E)),!Z||ko&&_e.end>=Yo(ge,de)){if(J&&Ae()&&!ue)for(S=J.parentNode;S&&S!==Zs;)S._pinOffset&&(l-=S._pinOffset,u-=S._pinOffset),S=S.parentNode}else E=ba(Z),I=de===Vs,x=Ae(),C=parseFloat(_(de.a))+X,!G&&u>1&&(z={style:z=(me?Qs.scrollingElement||Js:ge).style,value:z["overflow"+de.a.toUpperCase()]},me&&"scroll"!==ba(Zs)["overflow"+de.a.toUpperCase()]&&(z.style["overflow"+de.a.toUpperCase()]="scroll")),il(Z,D,E),b=al(Z),S=wa(Z,!0),P=ye&&zs(ge,I?Bs:Vs)(),ee?((k=[ee+de.os2,m+X+va]).t=D,(oe=ee===ga?_a(Z,de)+m+X:0)&&(k.push(de.d,oe+va),"auto"!==D.style.flexBasis&&(D.style.flexBasis=oe+va)),ol(k),ie&&Pa.forEach((function(e){e.pin===ie&&!1!==e.vars.pinSpacing&&(e._subPinOffset=!0)})),ye&&Ae(B)):(oe=_a(Z,de))&&"auto"!==D.style.flexBasis&&(D.style.flexBasis=oe+va),ye&&((F={top:S.top+(I?x-l:P)+va,left:S.left+(I?P:x-l)+va,boxSizing:"border-box",position:"fixed"})[la]=F["max"+ma]=Math.ceil(S.width)+va,F[ua]=F["max"+ya]=Math.ceil(S.height)+va,F[pa]=F[pa+da]=F[pa+ca]=F[pa+fa]=F[pa+ha]="0",F[ga]=E[ga],F[ga+da]=E[ga+da],F[ga+ca]=E[ga+ca],F[ga+fa]=E[ga+fa],F[ga+ha]=E[ga+ha],v=function(e,t,n){for(var r,i=[],s=e.length,o=n?8:0;o<s;o+=2)r=e[o],i.push(r,r in t?t[r]:e[o+1]);return i.t=e.t,i}(y,F,ae),Io&&Ae(0)),n?(N=n._initted,po(1),n.render(n.duration(),!0,!0),T=_(de.a)-C+m+X,A=Math.abs(m-T)>1,ye&&A&&v.splice(v.length-2,2),n.render(0,!0,!0),N||n.invalidate(!0),n.parent||n.totalTime(n.totalTime()),po(0)):T=m,z&&(z.value?z.style["overflow"+de.a.toUpperCase()]=z.value:z.style.removeProperty("overflow-"+de.a));U&&U.forEach((function(e){return e.revert(!1,!0)})),_e.start=l,_e.end=u,o=a=Io?B:Ae(),ue||Io||(o<B&&Ae(B),_e.scroll.rec=0),_e.revert(!1,!0),ke=Oo(),R&&(Se=-1,R.restart(!0)),oo=0,n&&fe&&(n._initted||V)&&n.progress()!==V&&n.progress(V||0,!0).render(n.time(),!0,!0),(W||xe!==_e.progress||ue||te||n&&!n._initted)&&(n&&!fe&&n.totalProgress(ue&&l<-.001&&!xe?Ks.utils.normalize(l,u,0):xe,!0),_e.progress=W||(o-l)/m===xe?0:xe),Z&&ee&&(D._pinOffset=Math.round(_e.progress*T)),O&&O.invalidate(),isNaN(j)||(j-=Ks.getProperty(d,de.p),$-=Ks.getProperty(f,de.p),fl(d,de,j),fl(c,de,j-(w||0)),fl(f,de,$),fl(h,de,$-(w||0))),W&&!Io&&_e.update(),!Y||Io||p||(p=!0,Y(_e),p=!1)}},_e.getVelocity=function(){return(Ae()-a)/(Oo()-io)*1e3||0},_e.endAnimation=function(){na(_e.callbackAnimation),n&&(O?O.progress(1):n.paused()?fe||na(n,_e.direction<0,1):na(n,n.reversed()))},_e.labelToScroll=function(e){return n&&n.labels&&(l||_e.refresh()||l)+n.labels[e]/n.duration()*m||0},_e.getTrailing=function(e){var t=Pa.indexOf(_e),n=_e.direction>0?Pa.slice(0,t).reverse():Pa.slice(t+1);return(Jo(e)?n.filter((function(t){return t.vars.preventOverlaps===e})):n).filter((function(e){return _e.direction>0?e.end<=l:e.start>=u}))},_e.update=function(e,t,i){if(!ue||i||e){var s,c,h,f,g,p,y,w=!0===Io?B:_e.scroll(),_=e?0:(w-l)/m,k=_<0?0:_>1?1:_||0,F=_e.progress;if(t&&(a=o,o=ue?Ae():w,oe&&(M=L,L=n&&!fe?n.totalProgress():k)),ne&&Z&&!oo&&!Mo&&No&&(!k&&l<w+(w-a)/(Oo()-io)*ne?k=1e-4:1===k&&u>w+(w-a)/(Oo()-io)*ne&&(k=.9999)),k!==F&&_e.enabled){if(f=(g=(s=_e.isActive=!!k&&k<1)!==(!!F&&F<1))||!!k!=!!F,_e.direction=k>F?1:-1,_e.progress=k,f&&!oo&&(c=k&&!F?0:1===k?1:1===F?2:3,fe&&(h=!g&&"none"!==be[c+1]&&be[c+1]||be[c],y=n&&("complete"===h||"reset"===h||h in n))),he&&(g||y)&&(y||Q||!n)&&(Zo(he)?he(_e):_e.getTrailing(he).forEach((function(e){return e.endAnimation()}))),fe||(!O||oo||Mo?n&&n.totalProgress(k,!(!oo||!ke&&!e)):(O._dp._time-O._start!==O._time&&O.render(O._dp._time-O._start),O.resetTo?O.resetTo("totalProgress",k,n._tTime/n._tDur):(O.vars.totalProgress=k,O.invalidate().restart()))),Z)if(e&&ee&&(D.style[ee+de.os2]=S),ye){if(f){if(p=!e&&k>F&&u+1>w&&w+1>=Yo(ge,de),ae)if(e||!s&&!p)hl(Z,D);else{var P=wa(Z,!0),N=w-l;hl(Z,Zs,P.top+(de===Vs?N:0)+va,P.left+(de===Vs?0:N)+va)}ol(s||p?v:b),A&&k<1&&s||E(C+(1!==k||p?0:T))}}else E(qo(C+T*k));oe&&!r.tween&&!oo&&!Mo&&R.restart(!0),W&&(g||se&&k&&(k<1||!xo))&&no(W.targets).forEach((function(e){return e.classList[s||se?"add":"remove"](W.className)})),G&&!fe&&!e&&G(_e),f&&!oo?(fe&&(y&&("complete"===h?n.pause().totalProgress(1):"reset"===h?n.restart(!0).pause():"restart"===h?n.restart(!0):n[h]()),G&&G(_e)),!g&&xo||(X&&g&&ra(_e,X),ve[c]&&ra(_e,ve[c]),se&&(1===k?_e.kill(!1,1):ve[c]=0),g||ve[c=1===k?1:3]&&ra(_e,ve[c])),ce&&!s&&Math.abs(_e.getVelocity())>(ea(ce)?ce:2500)&&(na(_e.callbackAnimation),O?O.progress(1):na(n,"reverse"===h?1:!k,1))):fe&&G&&!oo&&G(_e)}if(I){var V=ue?w/ue.duration()*(ue._caScrollDist||0):w;x(V+(d._isFlipped?1:0)),I(V)}U&&U(-w/ue.duration()*(ue._caScrollDist||0))}},_e.enable=function(t,n){_e.enabled||(_e.enabled=!0,Sa(ge,"resize",Ua),me||Sa(ge,"scroll",Ba),Ee&&Sa(e,"refreshInit",Ee),!1!==t&&(_e.progress=xe=0,o=a=Se=Ae()),!1!==n&&_e.refresh())},_e.getTween=function(e){return e&&r?r.tween:O},_e.setPositions=function(e,t,n,r){if(ue){var i=ue.scrollTrigger,s=ue.duration(),o=i.end-i.start;e=i.start+o*e/s,t=i.start+o*t/s}_e.refresh(!1,!1,{start:Vo(e,n&&!!_e._startClamp),end:Vo(t,n&&!!_e._endClamp)},r),_e.update()},_e.adjustPinSpacing=function(e){if(k&&e){var t=k.indexOf(de.d)+1;k[t]=parseFloat(k[t])+e+va,k[1]=parseFloat(k[1])+e+va,ol(k)}},_e.disable=function(t,n){if(_e.enabled&&(!1!==t&&_e.revert(!0,!0),_e.enabled=_e.isActive=!1,n||O&&O.pause(),B=0,i&&(i.uncache=1),Ee&&ka(e,"refreshInit",Ee),R&&(R.pause(),r.tween&&r.tween.kill()&&(r.tween=0)),!me)){for(var s=Pa.length;s--;)if(Pa[s].scroller===ge&&Pa[s]!==_e)return;ka(ge,"resize",Ua),me||ka(ge,"scroll",Ba)}},_e.kill=function(e,r){_e.disable(e,r),O&&!r&&O.kill(),K&&delete Na[K];var s=Pa.indexOf(_e);s>=0&&Pa.splice(s,1),s===uo&&el>0&&uo--,s=0,Pa.forEach((function(e){return e.scroller===_e.scroller&&(s=1)})),s||Io||(_e.scroll.rec=0),n&&(n.scrollTrigger=null,e&&n.revert({kill:!1}),r||n.kill()),c&&[c,h,d,f].forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),Lo===_e&&(Lo=0),Z&&(i&&(i.uncache=1),s=0,Pa.forEach((function(e){return e.pin===Z&&s++})),s||(i.spacer=0)),t.onKill&&t.onKill(_e)},Pa.push(_e),_e.enable(!1,!1),z&&z(_e),n&&n.add&&!m){var Me=_e.update;_e.update=function(){_e.update=Me,Ss.cache++,l||u||_e.refresh()},Ks.delayedCall(.01,_e.update),m=.01,l=u=0}else _e.refresh();Z&&function(){if(Fo!==Xa){var e=Fo=Xa;requestAnimationFrame((function(){return e===Xa&&Ja(!0)}))}}()}else this.update=this.refresh=this.kill=$o},e.register=function(t){return Xs||(Ks=t||Go(),Ho()&&window.document&&e.enable(),Xs=Ro),Xs},e.defaults=function(e){if(e)for(var t in e)Ia[t]=e[t];return Ia},e.disable=function(e,t){Ro=0,Pa.forEach((function(n){return n[t?"kill":"disable"](e)})),ka(Ys,"wheel",Ba),ka(Qs,"scroll",Ba),clearInterval(so),ka(Qs,"touchcancel",$o),ka(Zs,"touchstart",$o),Ta(ka,Qs,"pointerdown,touchstart,mousedown",zo),Ta(ka,Qs,"pointerup,touchend,mouseup",jo),to.kill(),Qo(ka);for(var n=0;n<Ss.length;n+=3)xa(ka,Ss[n],Ss[n+1]),xa(ka,Ss[n],Ss[n+2])},e.enable=function(){if(Ys=window,Qs=document,Js=Qs.documentElement,Zs=Qs.body,Ks&&(no=Ks.utils.toArray,ro=Ks.utils.clamp,_o=Ks.core.context||$o,po=Ks.core.suppressOverwrites||$o,Eo=Ys.history.scrollRestoration||"auto",Za=Ys.pageYOffset||0,Ks.core.globals("ScrollTrigger",e),Zs)){Ro=1,(Co=document.createElement("div")).style.height="100vh",Co.style.position="absolute",Ya(),Uo(),Ws.register(Ks),e.isTouch=Ws.isTouch,wo=Ws.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),vo=1===Ws.isTouch,Sa(Ys,"wheel",Ba),eo=[Ys,Qs,Js,Zs],Ks.matchMedia?(e.matchMedia=function(e){var t,n=Ks.matchMedia();for(t in e)n.add(t,e[t]);return n},Ks.addEventListener("matchMediaInit",(function(){return Wa()})),Ks.addEventListener("matchMediaRevert",(function(){return Ga()})),Ks.addEventListener("matchMedia",(function(){Ja(0,1),qa("matchMedia")})),Ks.matchMedia().add("(orientation: portrait)",(function(){return Va(),Va}))):console.warn("Requires GSAP 3.11.0 or later"),Va(),Sa(Qs,"scroll",Ba);var t,n,r=Zs.hasAttribute("style"),i=Zs.style,s=i.borderTopStyle,o=Ks.core.Animation.prototype;for(o.revert||Object.defineProperty(o,"revert",{value:function(){return this.time(-.01,!0)}}),i.borderTopStyle="solid",t=wa(Zs),Vs.m=Math.round(t.top+Vs.sc())||0,Bs.m=Math.round(t.left+Bs.sc())||0,s?i.borderTopStyle=s:i.removeProperty("border-top-style"),r||(Zs.setAttribute("style",""),Zs.removeAttribute("style")),so=setInterval(Ra,250),Ks.delayedCall(.5,(function(){return Mo=0})),Sa(Qs,"touchcancel",$o),Sa(Zs,"touchstart",$o),Ta(Sa,Qs,"pointerdown,touchstart,mousedown",zo),Ta(Sa,Qs,"pointerup,touchend,mouseup",jo),lo=Ks.utils.checkPrefix("transform"),rl.push(lo),Xs=Oo(),to=Ks.delayedCall(.2,Ja).pause(),fo=[Qs,"visibilitychange",function(){var e=Ys.innerWidth,t=Ys.innerHeight;Qs.hidden?(co=e,ho=t):co===e&&ho===t||Ua()},Qs,"DOMContentLoaded",Ja,Ys,"load",Ja,Ys,"resize",Ua],Qo(Sa),Pa.forEach((function(e){return e.enable(0,1)})),n=0;n<Ss.length;n+=3)xa(ka,Ss[n],Ss[n+1]),xa(ka,Ss[n],Ss[n+2])}},e.config=function(t){"limitCallbacks"in t&&(xo=!!t.limitCallbacks);var n=t.syncInterval;n&&clearInterval(so)||(so=n)&&setInterval(Ra,n),"ignoreMobileResize"in t&&(vo=1===e.isTouch&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(Qo(ka)||Qo(Sa,t.autoRefreshEvents||"none"),mo=-1===(t.autoRefreshEvents+"").indexOf("resize"))},e.scrollerProxy=function(e,t){var n=Us(e),r=Ss.indexOf(n),i=Wo(n);~r&&Ss.splice(r,i?6:2),t&&(i?ks.unshift(Ys,t,Zs,t,Js,t):ks.unshift(n,t))},e.clearMatchMedia=function(e){Pa.forEach((function(t){return t._ctx&&t._ctx.query===e&&t._ctx.kill(!0,!0)}))},e.isInViewport=function(e,t,n){var r=(Jo(e)?Us(e):e).getBoundingClientRect(),i=r[n?la:ua]*t||0;return n?r.right-i>0&&r.left+i<Ys.innerWidth:r.bottom-i>0&&r.top+i<Ys.innerHeight},e.positionInViewport=function(e,t,n){Jo(e)&&(e=Us(e));var r=e.getBoundingClientRect(),i=r[n?la:ua],s=null==t?i/2:t in Fa?Fa[t]*i:~t.indexOf("%")?parseFloat(t)*i/100:parseFloat(t)||0;return n?(r.left+s)/Ys.innerWidth:(r.top+s)/Ys.innerHeight},e.killAll=function(e){if(Pa.slice(0).forEach((function(e){return"ScrollSmoother"!==e.vars.id&&e.kill()})),!0!==e){var t=za.killAll||[];za={},t.forEach((function(e){return e()}))}},e}();pl.version="3.12.7",pl.saveStyles=function(e){return e?no(e).forEach((function(e){if(e&&e.style){var t=Ha.indexOf(e);t>=0&&Ha.splice(t,5),Ha.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),Ks.core.getCache(e),_o())}})):Ha},pl.revert=function(e,t){return Wa(!e,t)},pl.create=function(e,t){return new pl(e,t)},pl.refresh=function(e){return e?Ua(!0):(Xs||pl.register())&&Ja(!0)},pl.update=function(e){return++Ss.cache&&tl(!0===e?2:0)},pl.clearScrollMemory=Ka,pl.maxScroll=function(e,t){return Yo(e,t?Bs:Vs)},pl.getScrollFunc=function(e,t){return zs(Us(e),t?Bs:Vs)},pl.getById=function(e){return Na[e]},pl.getAll=function(){return Pa.filter((function(e){return"ScrollSmoother"!==e.vars.id}))},pl.isScrolling=function(){return!!No},pl.snapDirectional=Ca,pl.addEventListener=function(e,t){var n=za[e]||(za[e]=[]);~n.indexOf(t)||n.push(t)},pl.removeEventListener=function(e,t){var n=za[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},pl.batch=function(e,t){var n,r=[],i={},s=t.interval||.016,o=t.batchMax||1e9,a=function(e,t){var n=[],r=[],i=Ks.delayedCall(s,(function(){t(n,r),n=[],r=[]})).pause();return function(e){n.length||i.restart(!0),n.push(e.trigger),r.push(e),o<=n.length&&i.progress(1)}};for(n in t)i[n]="on"===n.substr(0,2)&&Zo(t[n])&&"onRefreshInit"!==n?a(0,t[n]):t[n];return Zo(o)&&(o=o(),Sa(pl,"refresh",(function(){return o=t.batchMax()}))),no(e).forEach((function(e){var t={};for(n in i)t[n]=i[n];t.trigger=e,r.push(pl.create(t))})),r};var ml,yl=function(e,t,n,r){return t>r?e(r):t<0&&e(0),n>r?(r-t)/(n-t):n<0?t/(t-n):1},vl=function e(t,n){!0===n?t.style.removeProperty("touch-action"):t.style.touchAction=!0===n?"auto":n?"pan-"+n+(Ws.isTouch?" pinch-zoom":""):"none",t===Js&&e(Zs,n)},bl={auto:1,scroll:1},Dl=function(e){var t,n=e.event,r=e.target,i=e.axis,s=(n.changedTouches?n.changedTouches[0]:n).target,o=s._gsap||Ks.core.getCache(s),a=Oo();if(!o._isScrollT||a-o._isScrollT>2e3){for(;s&&s!==Zs&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!bl[(t=ba(s)).overflowY]&&!bl[t.overflowX]);)s=s.parentNode;o._isScroll=s&&s!==r&&!Wo(s)&&(bl[(t=ba(s)).overflowY]||bl[t.overflowX]),o._isScrollT=a}(o._isScroll||"x"===i)&&(n.stopPropagation(),n._gsapAllow=!0)},wl=function(e,t,n,r){return Ws.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:r=r&&Dl,onPress:r,onDrag:r,onScroll:r,onEnable:function(){return n&&Sa(Qs,Ws.eventTypes[0],El,!1,!0)},onDisable:function(){return ka(Qs,Ws.eventTypes[0],El,!0)}})},_l=/(input|label|select|textarea)/i,El=function(e){var t=_l.test(e.target.tagName);(t||ml)&&(e._gsapAllow=!0,ml=t)},Cl=function(e){ta(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t,n,r,i,s,o,a,l,u=e,c=u.normalizeScrollX,h=u.momentum,d=u.allowNestedScroll,f=u.onRelease,g=Us(e.target)||Js,p=Ks.core.globals().ScrollSmoother,m=p&&p.get(),y=wo&&(e.content&&Us(e.content)||m&&!1!==e.content&&!m.smooth()&&m.content()),v=zs(g,Vs),b=zs(g,Bs),D=1,w=(Ws.isTouch&&Ys.visualViewport?Ys.visualViewport.scale*Ys.visualViewport.width:Ys.outerWidth)/Ys.innerWidth,_=0,E=Zo(h)?function(){return h(t)}:function(){return h||2.8},C=wl(g,e.type,!0,d),T=function(){return i=!1},S=$o,k=$o,x=function(){n=Yo(g,Vs),k=ro(wo?1:0,n),c&&(S=ro(0,Yo(g,Bs))),r=Xa},A=function(){y._gsap.y=qo(parseFloat(y._gsap.y)+v.offset)+"px",y.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(y._gsap.y)+", 0, 1)",v.offset=v.cacheID=0},I=function(){x(),s.isActive()&&s.vars.scrollY>n&&(v()>n?s.progress(1)&&v(n):s.resetTo("scrollY",n))};return y&&Ks.set(y,{y:"+=0"}),e.ignoreCheck=function(e){return wo&&"touchmove"===e.type&&function(){if(i){requestAnimationFrame(T);var e=qo(t.deltaY/2),n=k(v.v-e);if(y&&n!==v.v+v.offset){v.offset=n-v.v;var r=qo((parseFloat(y&&y._gsap.y)||0)-v.offset);y.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+r+", 0, 1)",y._gsap.y=r+"px",v.cacheID=Ss.cache,tl()}return!0}v.offset&&A(),i=!0}()||D>1.05&&"touchstart"!==e.type||t.isGesturing||e.touches&&e.touches.length>1},e.onPress=function(){i=!1;var e=D;D=qo((Ys.visualViewport&&Ys.visualViewport.scale||1)/w),s.pause(),e!==D&&vl(g,D>1.01||!c&&"x"),o=b(),a=v(),x(),r=Xa},e.onRelease=e.onGestureStart=function(e,t){if(v.offset&&A(),t){Ss.cache++;var r,i,o=E();c&&(i=(r=b())+.05*o*-e.velocityX/.227,o*=yl(b,r,i,Yo(g,Bs)),s.vars.scrollX=S(i)),i=(r=v())+.05*o*-e.velocityY/.227,o*=yl(v,r,i,Yo(g,Vs)),s.vars.scrollY=k(i),s.invalidate().duration(o).play(.01),(wo&&s.vars.scrollY>=n||r>=n-1)&&Ks.to({},{onUpdate:I,duration:o})}else l.restart(!0);f&&f(e)},e.onWheel=function(){s._ts&&s.pause(),Oo()-_>1e3&&(r=0,_=Oo())},e.onChange=function(e,t,n,i,s){if(Xa!==r&&x(),t&&c&&b(S(i[2]===t?o+(e.startX-e.x):b()+t-i[1])),n){v.offset&&A();var l=s[2]===n,u=l?a+e.startY-e.y:v()+n-s[1],h=k(u);l&&u!==h&&(a+=h-u),v(h)}(n||t)&&tl()},e.onEnable=function(){vl(g,!c&&"x"),pl.addEventListener("refresh",I),Sa(Ys,"resize",I),v.smooth&&(v.target.style.scrollBehavior="auto",v.smooth=b.smooth=!1),C.enable()},e.onDisable=function(){vl(g,!0),ka(Ys,"resize",I),pl.removeEventListener("refresh",I),C.kill()},e.lockAxis=!1!==e.lockAxis,(t=new Ws(e)).iOS=wo,wo&&!v()&&v(1),wo&&Ks.ticker.add($o),l=t._dc,s=Ks.to(t,{ease:"power4",paused:!0,inherit:!1,scrollX:c?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:dl(v,v(),(function(){return s.pause()}))},onUpdate:tl,onComplete:l.vars.onComplete}),t};pl.sort=function(e){if(Zo(e))return Pa.sort(e);var t=Ys.pageYOffset||0;return pl.getAll().forEach((function(e){return e._sortY=e.trigger?t+e.trigger.getBoundingClientRect().top:e.start+Ys.innerHeight})),Pa.sort(e||function(e,t){return-1e6*(e.vars.refreshPriority||0)+(e.vars.containerAnimation?1e6:e._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+-1e6*(t.vars.refreshPriority||0))})},pl.observe=function(e){return new Ws(e)},pl.normalizeScroll=function(e){if(void 0===e)return yo;if(!0===e&&yo)return yo.enable();if(!1===e)return yo&&yo.kill(),void(yo=e);var t=e instanceof Ws?e:Cl(e);return yo&&yo.target===t.target&&yo.kill(),Wo(t.target)&&(yo=t),t},pl.core={_getVelocityProp:js,_inputObserver:wl,_scrollers:Ss,_proxies:ks,bridge:{ss:function(){No||qa("scrollStart"),No=Oo()},ref:function(){return oo}}},Go()&&Ks.registerPlugin(pl);
/*!
 * strings: 3.12.7
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
var Tl=/(?:^\s+|\s+$)/g,Sl=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2642\u2640]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDD27\uDCBC\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCC\uDFCB]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function kl(e,t,n,r,i){for(var s,o=e.firstChild,a=[];o;)3===o.nodeType?(s=(o.nodeValue+"").replace(/^\n+/g,""),r||(s=s.replace(/\s+/g," ")),a.push.apply(a,xl(s,t,n,r,i))):"br"===(o.nodeName+"").toLowerCase()?a[a.length-1]+="<br>":a.push(o.outerHTML),o=o.nextSibling;if(!i)for(s=a.length;s--;)"&"===a[s]&&a.splice(s,1,"&amp;");return a}function xl(e,t,n,r,i){if(e+="",n&&(e=e.trim?e.trim():e.replace(Tl,"")),t&&""!==t)return e.replace(/>/g,"&gt;").replace(/</g,"&lt;").split(t);for(var s,o,a=[],l=e.length,u=0;u<l;u++)((o=e.charAt(u)).charCodeAt(0)>=55296&&o.charCodeAt(0)<=56319||e.charCodeAt(u+1)>=65024&&e.charCodeAt(u+1)<=65039)&&(s=((e.substr(u,12).split(Sl)||[])[1]||"").length||2,o=e.substr(u,s),a.emoji=1,u+=s-1),a.push(i?o:">"===o?"&gt;":"<"===o?"&lt;":!r||" "!==o||" "!==e.charAt(u-1)&&" "!==e.charAt(u+1)?o:"&nbsp;");return a}
/*!
 * TextPlugin 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Al,Il,Fl={version:"3.12.7",name:"text",init:function(e,t,n){"object"!=typeof t&&(t={value:t});var r,i,s,o,a,l,u,c,h=e.nodeName.toUpperCase(),d=this,f=t,g=f.newClass,p=f.oldClass,m=f.preserveSpaces,y=f.rtl,v=d.delimiter=t.delimiter||"",b=d.fillChar=t.fillChar||(t.padSpace?"&nbsp;":"");if(d.svg=e.getBBox&&("TEXT"===h||"TSPAN"===h),!("innerHTML"in e)&&!d.svg)return!1;if(d.target=e,"value"in t){for(s=kl(e,v,!1,m,d.svg),Il||(Il=document.createElement("div")),Il.innerHTML=t.value,i=kl(Il,v,!1,m,d.svg),d.from=n._from,!d.from&&!y||y&&d.from||(h=s,s=i,i=h),d.hasClass=!(!g&&!p),d.newClass=y?p:g,d.oldClass=y?g:p,r=(h=s.length-i.length)<0?s:i,h<0&&(h=-h);--h>-1;)r.push(b);if("diff"===t.type){for(o=0,a=[],l=[],u="",h=0;h<i.length;h++)(c=i[h])===s[h]?u+=c:(a[o]=u+c,l[o++]=u+s[h],u="");i=a,s=l,u&&(i.push(u),s.push(u))}t.speed&&n.duration(Math.min(.05/t.speed*r.length,t.maxDuration||9999)),d.rtl=y,d.original=s,d.text=i,d._props.push("text")}else d.text=d.original=[""]},render:function(e,t){e>1?e=1:e<0&&(e=0),t.from&&(e=1-e);var n,r,i,s=t.text,o=t.hasClass,a=t.newClass,l=t.oldClass,u=t.delimiter,c=t.target,h=t.fillChar,d=t.original,f=t.rtl,g=s.length,p=(f?1-e:e)*g+.5|0;o&&e?(r=l&&p!==g,i=((n=a&&p)?"<span class='"+a+"'>":"")+s.slice(0,p).join(u)+(n?"</span>":"")+(r?"<span class='"+l+"'>":"")+u+d.slice(p).join(u)+(r?"</span>":"")):i=s.slice(0,p).join(u)+u+d.slice(p).join(u),t.svg?c.textContent=i:c.innerHTML="&nbsp;"===h&&~i.indexOf("  ")?i.split("  ").join("&nbsp;&nbsp;"):i}};Fl.splitInnerHTML=kl,Fl.emojiSafeSplit=xl,Fl.getText=function e(t){var n=t.nodeType,r="";if(1===n||9===n||11===n){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)r+=e(t)}else if(3===n||4===n)return t.nodeValue;return r},(Al||"undefined"!=typeof window&&(Al=window.gsap)&&Al.registerPlugin&&Al)&&Al.registerPlugin(Fl);const Ll=0,Ml=1,Ol=2,Pl=3,Nl=4,Rl=5,Bl={globalLogLevel:Ol,enableConsoleLogs:!0,moduleLogLevels:{animation:Ol,background:Ol,i18n:Pl,app:Ml,forms:Ml,ui:Ol,performance:Ml},timestampFormat:!0,showModuleName:!0};const Vl=new class{constructor(){this.config={...Bl},this.originalConsoleMethods={log:console.log,info:console.info,warn:console.warn,error:console.error,debug:console.debug,trace:console.trace}}init(e={}){return this.config={...Bl,...e,moduleLogLevels:{...Bl.moduleLogLevels,...e.moduleLogLevels||{}}},this.checkUrlParameters(),this}checkUrlParameters(){try{const e=new URLSearchParams(window.location.search).get("log");if(e)if(e.includes(":")){const[t,n]=e.split(":"),r=this.getLogLevelFromString(n);void 0!==r&&(this.config.moduleLogLevels[t]=r,this.info("logger",`Set log level for module '${t}' to ${n.toUpperCase()}`))}else{const t=this.getLogLevelFromString(e);void 0!==t&&(this.config.globalLogLevel=t,this.info("logger",`Set global log level to ${e.toUpperCase()}`))}}catch(e){this.originalConsoleMethods.error("Error parsing log URL parameters:",e)}}getLogLevelFromString(e){return{trace:Ll,debug:Ml,info:Ol,warn:Pl,error:Nl,none:Rl}[e.toLowerCase()]}getEffectiveLogLevel(e){return e&&void 0!==this.config.moduleLogLevels[e]?this.config.moduleLogLevels[e]:this.config.globalLogLevel}formatLogMessage(e,t){const n=[...t];let r="";if(this.config.timestampFormat){r+=`[${(new Date).toISOString()}] `}return this.config.showModuleName&&e&&(r+=`[${e}] `),r&&("string"==typeof n[0]?n[0]=r+n[0]:n.unshift(r)),n}isLevelEnabled(e,t){return t>=this.getEffectiveLogLevel(e)&&this.config.enableConsoleLogs}trace(e,...t){this.isLevelEnabled(e,Ll)&&this.originalConsoleMethods.trace(...this.formatLogMessage(e,t))}debug(e,...t){this.isLevelEnabled(e,Ml)&&this.originalConsoleMethods.debug(...this.formatLogMessage(e,t))}info(e,...t){this.isLevelEnabled(e,Ol)&&this.originalConsoleMethods.info(...this.formatLogMessage(e,t))}warn(e,...t){this.isLevelEnabled(e,Pl)&&this.originalConsoleMethods.warn(...this.formatLogMessage(e,t))}error(e,...t){this.isLevelEnabled(e,Nl)&&this.originalConsoleMethods.error(...this.formatLogMessage(e,t))}getModuleLogger(e){return{trace:(...t)=>this.trace(e,...t),debug:(...t)=>this.debug(e,...t),info:(...t)=>this.info(e,...t),warn:(...t)=>this.warn(e,...t),error:(...t)=>this.error(e,...t),group:(t,n=!1)=>{this.isLevelEnabled(e,Ml)&&(n?console.groupCollapsed(`[${e}] ${t}`):console.group(`[${e}] ${t}`))},groupEnd:()=>{this.isLevelEnabled(e,Ml)&&console.groupEnd()},time:t=>{this.isLevelEnabled(e,Ml)&&console.time(`[${e}] ${t}`)},timeEnd:t=>{this.isLevelEnabled(e,Ml)&&console.timeEnd(`[${e}] ${t}`)},dir:(t,n={})=>{this.isLevelEnabled(e,Ml)&&console.dir(t,n)},get isTraceEnabled(){return this.isLevelEnabled(e,Ll)},get isDebugEnabled(){return this.isLevelEnabled(e,Ml)},get isInfoEnabled(){return this.isLevelEnabled(e,Ol)},get isWarnEnabled(){return this.isLevelEnabled(e,Pl)},get isErrorEnabled(){return this.isLevelEnabled(e,Nl)}}}setModuleLogLevel(e,t){this.config.moduleLogLevels[e]=t}setGlobalLogLevel(e){this.config.globalLogLevel=e}enableLogs(e){this.config.enableConsoleLogs=e}};Vl.init(),ls.registerPlugin(pl,Fl);const Ul=new class{constructor(){this.logger=Vl.getModuleLogger("animation"),this.logger.info("AnimationManager initialized"),this.defaults={duration:.8,opacity:{from:0,to:1},ease:"ease-out",stagger:100},this.animatedElements=new Set,this.intersectionObserver=null,this.logger.debug("Animated elements tracking initialized with defaults",this.defaults)}setupRevealAnimations(){this.logger.debug("Setting up reveal animations with GSAP");const e=document.querySelectorAll("[data-animation]");this.logger.debug(`Found ${e.length} elements with data-animation attribute`),e.forEach((e=>{if(this.animatedElements.has(e))return void this.logger.trace("Skipping already animated element",{element:e.tagName,id:e.id,class:e.className});const t=e.getAttribute("data-animation"),n=parseFloat(e.getAttribute("data-animation-delay")||0)/1e3,r=parseFloat(e.getAttribute("data-animation-duration")||this.defaults.duration),i="H1"===e.tagName||"H2"===e.tagName||"H3"===e.tagName||"P"===e.tagName||e.classList.contains("text-animate");this.logger.trace("Setting up GSAP animation for element",{element:e.tagName,id:e.id,class:e.className,type:t,delay:n,duration:r,isText:i}),this.animatedElements.add(e);let s={opacity:0,willChange:"transform, opacity"},o={opacity:1,ease:"power3.out",duration:r,delay:n,onComplete:()=>{e.style.willChange="auto",e.classList.add("animated"),this.logger.trace("Animation completed for element",{element:e.tagName,id:e.id})}};switch(t){case"up":s.y=30,o.y=0;break;case"down":s.y=-30,o.y=0;break;case"left":s.x=-50,o.x=0;break;case"right":s.x=50,o.x=0;break;case"scale":s.scale=.9,o.scale=1,o.ease="back.out(1.7)";break;case"text":case"split":if(e.textContent&&e.textContent.length<40){const t=[...e.textContent],n=e.textContent;return e.textContent="",e.style.opacity="1",void ls.timeline({scrollTrigger:{trigger:e,start:"top 85%",once:!0}}).to(e,{text:n,duration:Math.min(.04*t.length,2),ease:"none"})}s.y=20,o.y=0}i&&"left"!==t&&"right"!==t&&"scale"!==t&&"text"!==t&&"split"!==t&&("H1"!==e.tagName&&"H2"!==e.tagName||(o.onComplete=()=>{e.style.willChange="auto",e.classList.add("animated"),ls.to(e,{textShadow:"0 0 10px rgba(255, 49, 168, 0.3)",duration:.8,repeat:1,yoyo:!0})})),ls.set(e,s),pl.create({trigger:e,start:"top 85%",once:!0,onEnter:()=>{this.logger.trace("Triggering animation for element",{element:e.tagName,id:e.id}),ls.to(e,o)}})})),this.setupHeadingAnimations(),this.logger.debug("GSAP reveal animations setup complete")}setupHeadingAnimations(){document.querySelectorAll("section h2, .section-header h2, .gradient-text").forEach((e=>{var t;if(!this.animatedElements.has(e)&&!e.hasAttribute("data-animation"))if(this.logger.trace("Setting up special heading animation for",{heading:(null==(t=e.textContent)?void 0:t.substring(0,20))+"...",id:e.id}),this.animatedElements.add(e),e.classList.contains("gradient-text"))ls.set(e,{opacity:0,backgroundSize:"100% 100%",backgroundPosition:"left center"}),pl.create({trigger:e,start:"top 85%",once:!0,onEnter:()=>{ls.to(e,{opacity:1,duration:.8,ease:"power2.out",onComplete:()=>{ls.to(e,{backgroundPosition:"right center",duration:1.5,ease:"power1.inOut"})}})}});else if(e.textContent&&e.textContent.length<30){const t=e.textContent;e.textContent="",e.style.opacity="1",pl.create({trigger:e,start:"top 85%",once:!0,onEnter:()=>{ls.to(e,{text:t,duration:Math.min(.05*t.length,2),ease:"none",onComplete:()=>{ls.fromTo(e,{textShadow:"0 0 0px rgba(255, 255, 255, 0)"},{textShadow:"0 0 10px rgba(255, 49, 168, 0.3), 0 0 20px rgba(255, 255, 255, 0.2)",duration:.8,yoyo:!0,repeat:1})}})}})}else ls.set(e,{y:30,opacity:0}),pl.create({trigger:e,start:"top 85%",once:!0,onEnter:()=>{ls.to(e,{y:0,opacity:1,duration:.8,ease:"power3.out"})}})}))}setupStaggeredReveal(e,t,n={}){this.logger.debug("Setting up staggered reveal animation with GSAP",{container:e,items:t,options:n});const r=document.querySelector(e);if(!r)return void this.logger.warn("Container not found, skipping staggered animation",{selector:e});const i=r.querySelectorAll(t);if(!i.length)return void this.logger.warn("No items found in container, skipping staggered animation",{containerSelector:e,itemsSelector:t});this.logger.debug(`Found ${i.length} items for staggered animation`);const s={y:n.y??40,x:n.x??0,scale:n.scale??1,duration:n.duration??this.defaults.duration,stagger:n.stagger?n.stagger/1e3:.1,ease:n.ease?n.ease:"power3.out",start:n.start??"80%"};this.logger.trace("Staggered animation options",s);let o={opacity:0,willChange:"transform, opacity"};0!==s.y&&(o.y=s.y),0!==s.x&&(o.x=s.x),1!==s.scale&&(o.scale=s.scale);let a={opacity:1,x:0,y:0,scale:1,stagger:s.stagger,duration:s.duration,ease:s.ease,clearProps:"willChange",onStart:(e,t)=>{t&&(this.animatedElements.add(t),t.classList.add("animated"),this.logger.trace("Staggered animation started for item",{index:e,item:t.tagName,id:t.id}))}};[...i].some((e=>"H2"===e.tagName||"H3"===e.tagName||"P"===e.tagName||e.classList.contains("text-animate")))&&(a.onComplete=()=>{const e=[...i].filter((e=>"H2"===e.tagName||"H3"===e.tagName));e.length>0&&ls.to(e[0],{textShadow:"0 0 10px rgba(255, 49, 168, 0.3)",duration:.8,repeat:1,yoyo:!0})}),ls.set(i,o),pl.create({trigger:r,start:`top ${s.start}`,once:!0,onEnter:()=>{this.logger.debug(`Triggering GSAP staggered animation for ${i.length} items`),ls.to(i,a)}})}setupSplitScreenAnimation(e,t,n){this.logger.debug("Setting up split screen animation",{container:e,left:t,right:n});const r=document.querySelector(e);if(!r)return void this.logger.error(`Container not found: ${e}`);let i=r.querySelector(t),s=r.querySelector(n);if(i||(i=document.querySelector(t),this.logger.debug(`Trying alternative selector for left element: ${t}`)),s||(s=document.querySelector(n),this.logger.debug(`Trying alternative selector for right element: ${n}`)),!i||!s)return void this.logger.error("Elements not found",{leftFound:!!i,rightFound:!!s,leftSelector:t,rightSelector:n});this.logger.debug("Found all elements for split screen animation"),i.style.opacity="0",i.style.transform="translateX(-50px)",i.style.transition="opacity 0.8s ease-out, transform 0.8s ease-out",i.style.willChange="opacity, transform",s.style.opacity="0",s.style.transform="translateX(50px)",s.style.transition="opacity 0.8s ease-out, transform 0.8s ease-out",s.style.willChange="opacity, transform",this.logger.trace("Set initial states for split screen elements");const o=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(this.logger.debug("Split screen animation triggered"),this.animatedElements.add(i),this.animatedElements.add(s),requestAnimationFrame((()=>{i.style.opacity="1",i.style.transform="translateX(0)",i.classList.add("animated"),s.style.opacity="1",s.style.transform="translateX(0)",s.classList.add("animated"),this.logger.trace("Split screen animation started");i.addEventListener("transitionend",(()=>{i.style.willChange="auto",s.style.willChange="auto",this.logger.trace("Split screen animation completed")}),{once:!0})})),o.unobserve(r))}))}),{root:null,rootMargin:"0px 0px -25% 0px",threshold:.1});o.observe(r),this.logger.debug("Split screen animation setup complete")}animateHeroSequence(e,t={}){this.logger.debug("Animating hero sequence with elements",{elementsProvided:Object.keys(e),options:t});const n=ls.timeline({defaults:{ease:t.ease||"power3.out",duration:.8},onComplete:()=>{this.logger.debug("Hero animation sequence complete"),"function"==typeof t.onComplete&&t.onComplete()}});if(e.titleChars&&e.titleChars.length?(this.logger.trace(`Animating title characters (${e.titleChars.length})`),ls.set(e.titleChars,{y:30,opacity:0,willChange:"transform, opacity"}),n.to(e.titleChars,{y:0,opacity:1,stagger:.02,duration:.7,ease:"back.out(1.7)",onComplete:()=>{e.titleChars.forEach((e=>e.style.willChange="auto"))}},"-=0.2")):e.titleElement?(this.logger.trace("Animating title element (fallback)"),ls.set(e.titleElement,{y:30,opacity:0,willChange:"transform, opacity"}),n.to(e.titleElement,{y:0,opacity:1,duration:.8,onComplete:()=>e.titleElement.style.willChange="auto"},"-=0.2")):this.logger.warn("No title element found for animation"),e.titleLine&&(this.logger.trace("Animating title line"),ls.set(e.titleLine,{width:0,opacity:0,willChange:"width, opacity"}),n.to(e.titleLine,{width:"55%",opacity:.85,duration:.6,ease:"power3.inOut",onComplete:()=>e.titleLine.style.willChange="auto"},"-=0.1")),e.subtitle&&(this.logger.trace("Animating subtitle"),ls.set(e.subtitle,{y:30,opacity:0,willChange:"transform, opacity"}),n.to(e.subtitle,{y:0,opacity:1,duration:.7,onComplete:()=>e.subtitle.style.willChange="auto"},"-=0.3")),e.description){this.logger.trace("Animating description");const t=e.description.textContent;t.length<100?(ls.set(e.description,{opacity:1,text:"",willChange:"content"}),n.to(e.description,{text:t,duration:1.2,ease:"none",onComplete:()=>e.description.style.willChange="auto"},"-=0.1")):(ls.set(e.description,{y:30,opacity:0,willChange:"transform, opacity"}),n.to(e.description,{y:0,opacity:1,duration:.7,onComplete:()=>e.description.style.willChange="auto"},"-=0.3"))}return e.cta&&(this.logger.trace("Animating CTA"),e.cta.style.removeProperty("will-change"),e.cta.style.removeProperty("transform"),ls.set(e.cta,{y:30,opacity:0}),n.to(e.cta,{y:0,opacity:1,duration:.7,onComplete:()=>{e.cta.style.transform="",e.cta.style.opacity="1";const t=e.cta.querySelector(".btn-hero-cta");t&&ls.to(t,{boxShadow:"0 0 15px var(--color-neon-glow)",duration:1,repeat:1,yoyo:!0,delay:.5})}},"-=0.4")),Object.values(e).forEach((e=>{e&&(Array.isArray(e)||e instanceof NodeList?e.forEach((e=>this.animatedElements.add(e))):this.animatedElements.add(e))})),this.logger.debug("Hero animation timeline created and started"),n}setupFormAnimation(e,t){if(!e)return void this.logger.warn("Form element not provided, skipping animation");this.logger.debug("Setting up form animation",{formId:e.id,formClass:e.className});const n=e.querySelectorAll("input, button, .form-group");this.logger.debug(`Found ${n.length} form elements to animate`),n.forEach(((e,t)=>{e.style.transition="opacity 0.5s ease-out, transform 0.5s ease-out",e.style.transitionDelay=.1*t+"s",e.style.willChange="opacity, transform"})),requestAnimationFrame((()=>{n.forEach((e=>{e.style.opacity="0",e.style.transform="translateY(-20px)"}));n[n.length-1].addEventListener("transitionend",(()=>{this.logger.debug("Form animation completed"),"function"==typeof t&&(this.logger.trace("Executing form animation success callback"),this.logger.time("form-success-callback"),t(),this.logger.timeEnd("form-success-callback"))}),{once:!0})}))}};const zl=new class{constructor(){this.isInitialized=!1,this.heroLoaded=!1,this.logger=Vl.getModuleLogger("animation-manager"),this.logger.info("ApplicationAnimationManager instance created")}init(){this.isInitialized?(this.logger.info("Reinitializing AnimationManager"),this.heroLoaded=!1):this.logger.info("Initializing animation manager for the first time"),this.logger.time("animation-manager-initialization");try{this.logger.debug("Resetting existing animations"),document.querySelectorAll(".animated").forEach((e=>{e.classList.remove("animated")})),this.logger.debug("Setting up reveal animations"),this.setupRevealAnimations(),this.logger.debug("Setting up hero animation"),this.setupHeroAnimation(),this.logger.info("Animation manager initialization complete")}catch(e){this.logger.error("Animation manager initialization failed",e)}finally{this.isInitialized=!0,this.logger.timeEnd("animation-manager-initialization")}}setupRevealAnimations(){this.logger.debug("Setting up all reveal animations"),this.logger.time("reveal-animations-setup"),this.logger.debug("Setting up base reveal animations"),Ul.setupRevealAnimations(),this.logger.debug("Setting up feature cards animations"),Ul.setupStaggeredReveal(".features-grid",".card",{y:40,stagger:150,start:"80%"}),this.logger.debug("Setting up solution section split-screen animation"),Ul.setupSplitScreenAnimation("#solution",".problem-content",".solution-content");const e=document.querySelector("#solution"),t=e?e.querySelector(".problem-content"):null,n=e?e.querySelector(".solution-content"):null;this.logger.debug("Solution section animation elements:",{container:e?"Found":"Not found",leftElement:t?"Found":"Not found",rightElement:n?"Found":"Not found"}),e&&t&&n||this.logger.warn("Some solution section elements not found",{solutionSection:!!e,problemContent:!!t,solutionContent:!!n}),this.logger.debug("Setting up CTA section animations"),Ul.setupStaggeredReveal(".cta-section",".cta-content > *",{y:30,stagger:100,start:"75%"}),this.logger.debug("Setting up feedback section animations"),Ul.setupStaggeredReveal(".feedback-section",".feedback-container > *:not(.hidden)",{y:30,stagger:100,start:"75%"}),this.logger.timeEnd("reveal-animations-setup")}setupHeroAnimation(){this.logger.debug("Setting up hero animation"),this.logger.time("hero-animation-setup");const e=document.querySelector("#hero");if(!e)return this.logger.warn("Hero section not found, skipping hero animation"),void this.logger.timeEnd("hero-animation-setup");const t=e.querySelector(".hero-subtitle"),n=e.querySelector(".hero-description"),r=e.querySelector(".hero-cta"),i=e.querySelector(".hero-title-line");this.logger.debug("Hero animation elements:",{heroSectionFound:!!e,heroSubtitleFound:!!t,heroDescriptionFound:!!n,heroCtaFound:!!r,heroTitleLineFound:!!i}),t&&(t.classList.add("will-animate"),this.logger.trace("Set initial state for hero subtitle")),n&&(n.classList.add("will-animate"),this.logger.trace("Set initial state for hero description")),r&&(r.classList.add("will-animate"),r.style.removeProperty("will-change"),r.style.removeProperty("transform"),this.logger.trace("Set initial state for hero CTA and fixed pseudo-element"));const s=e.querySelector(".hero-title");if(!s)return this.logger.warn("Hero title not found, skipping title animation"),void this.logger.timeEnd("hero-animation-setup");s.classList.add("hero-title-gradient","will-animate"),this.logger.debug("Applied gradient effect to hero title");let o=null;try{this.logger.debug("Splitting hero title text for character animation");const e=new ee(s,{types:"chars",tagName:"span"}).chars||s.querySelectorAll(".char")||s.querySelectorAll("span");e&&e.length>0?(this.logger.debug(`Successfully split title into ${e.length} characters`),o=e):this.logger.warn("Character splitting failed, using fallback approach")}catch(c){this.logger.error("SplitType error, using fallback approach",c)}const a={};this.logger.debug("Building animation elements collection");const l=document.querySelector("header");l&&(a.header=l,this.logger.trace("Added header to animation elements"));const u=document.querySelectorAll(".nav-links li");u&&u.length>0&&(a.navItems=u,this.logger.trace(`Added ${u.length} nav items to animation elements`)),i&&(a.titleLine=i,this.logger.trace("Added title line to animation elements")),t&&(a.subtitle=t,this.logger.trace("Added subtitle to animation elements")),n&&(a.description=n,this.logger.trace("Added description to animation elements")),r&&(a.cta=r,this.logger.trace("Added CTA to animation elements")),o&&o.length?(a.titleChars=o,this.logger.trace(`Added ${o.length} title characters to animation elements`)):s&&(a.titleElement=s,this.logger.trace("Added title element (fallback) to animation elements")),this.logger.debug("Animation elements prepared, starting animation");try{this.logger.time("hero-animation-sequence"),Ul.animateHeroSequence(a,{startDelay:.2,ease:"power3.out",onComplete:()=>{this.heroLoaded=!0,this.logger.debug("Hero animation sequence completed")}})}catch(c){this.logger.error("Error in hero animation sequence:",c)}finally{this.logger.timeEnd("hero-animation-setup")}}},jl=function(e,t=""){e&&(e.dataset.originalText=e.innerHTML,e.dataset.originalDisabled=e.disabled,e.classList.add("is-loading"),e.disabled=!0,e.setAttribute("aria-busy","true"))},$l=function(e){e&&(e.classList.remove("is-loading"),e.removeAttribute("aria-busy"),"originalText"in e.dataset&&(e.innerHTML=e.dataset.originalText,delete e.dataset.originalText),"originalDisabled"in e.dataset?(e.disabled="true"===e.dataset.originalDisabled,delete e.dataset.originalDisabled):e.disabled=!1)},ql=function(e=".btn"){document.querySelectorAll(e).forEach((e=>{e.addEventListener("keydown",(t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e.click())})),"a"===e.tagName.toLowerCase()&&e.setAttribute("role","button")}))};var Hl={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Wl={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Gl(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Kl;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Kl extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Xl=function(e){return function(e){const t=Gl(e);return Wl.encodeByteArray(t,!0)}(e).replace(/\./g,"")};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Yl=()=>
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Ql=()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&function(e){try{return Wl.decodeString(e,!0)}catch(n){console.error("base64Decode failed: ",n)}return null}(e[1]);return t&&JSON.parse(t)},Jl=()=>{try{return Yl()||(()=>{if("undefined"==typeof process)return;const e=Hl.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||Ql()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},Zl=e=>{const t=(e=>{var t,n;return null===(n=null===(t=Jl())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},eu=()=>{var e;return null===(e=Jl())||void 0===e?void 0:e.config};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class tu{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function ru(){return!function(){var e;const t=null===(e=Jl())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(n){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iu(){try{return"object"==typeof indexedDB}catch(e){return!1}}function su(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}function ou(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,au.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lu.prototype.create)}}class lu{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(uu,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new au(r,o,n)}}const uu=/\{\$([^}]+)}/g;function cu(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(hu(n)&&hu(s)){if(!cu(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function hu(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(e,t=1e3,n=2){const r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(e){return e&&e._delegate?e._delegate:e}class gu{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new tu;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:pu})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(e=pu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=pu){return this.instances.has(e)}getOptions(e=pu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===pu?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(i){}var r;return n||null}normalizeInstanceIdentifier(e=pu){return this.component?this.component.multipleInstances?e:pu:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class yu{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new mu(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vu,bu;(bu=vu||(vu={}))[bu.DEBUG=0]="DEBUG",bu[bu.VERBOSE=1]="VERBOSE",bu[bu.INFO=2]="INFO",bu[bu.WARN=3]="WARN",bu[bu.ERROR=4]="ERROR",bu[bu.SILENT=5]="SILENT";const Du={debug:vu.DEBUG,verbose:vu.VERBOSE,info:vu.INFO,warn:vu.WARN,error:vu.ERROR,silent:vu.SILENT},wu=vu.INFO,_u={[vu.DEBUG]:"log",[vu.VERBOSE]:"log",[vu.INFO]:"info",[vu.WARN]:"warn",[vu.ERROR]:"error"},Eu=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=_u[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class Cu{constructor(e){this.name=e,this._logLevel=wu,this._logHandler=Eu,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in vu))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Du[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,vu.DEBUG,...e),this._logHandler(this,vu.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,vu.VERBOSE,...e),this._logHandler(this,vu.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,vu.INFO,...e),this._logHandler(this,vu.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,vu.WARN,...e),this._logHandler(this,vu.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,vu.ERROR,...e),this._logHandler(this,vu.ERROR,...e)}}let Tu,Su;const ku=new WeakMap,xu=new WeakMap,Au=new WeakMap,Iu=new WeakMap,Fu=new WeakMap;let Lu={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return xu.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Au.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pu(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Mu(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Su||(Su=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Nu(this),t),Pu(ku.get(this))}:function(...t){return Pu(e.apply(Nu(this),t))}:function(t,...n){const r=e.call(Nu(this),t,...n);return Au.set(r,t.sort?t.sort():[t]),Pu(r)}}function Ou(e){return"function"==typeof e?Mu(e):(e instanceof IDBTransaction&&function(e){if(xu.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));xu.set(e,t)}(e),t=e,(Tu||(Tu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Lu):e);var t}function Pu(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Pu(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&ku.set(t,e)})).catch((()=>{})),Fu.set(t,e),t}(e);if(Iu.has(e))return Iu.get(e);const t=Ou(e);return t!==e&&(Iu.set(e,t),Fu.set(t,e)),t}const Nu=e=>Fu.get(e);function Ru(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=Pu(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Pu(o.result),e.oldVersion,e.newVersion,Pu(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}const Bu=["get","getKey","getAll","getAllKeys","count"],Vu=["put","add","delete","clear"],Uu=new Map;function zu(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Uu.get(t))return Uu.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Vu.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Bu.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&s.done]))[0]};return Uu.set(t,s),s}Lu=(e=>({...e,get:(t,n,r)=>zu(t,n)||e.get(t,n,r),has:(t,n)=>!!zu(t,n)||e.has(t,n)}))(Lu);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ju{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const $u="@firebase/app",qu="0.11.2",Hu=new Cu("@firebase/app"),Gu="@firebase/app-compat",Wu="@firebase/analytics-compat",Ku="@firebase/analytics",Xu="@firebase/app-check-compat",Yu="@firebase/app-check",Qu="@firebase/auth",Ju="@firebase/auth-compat",Zu="@firebase/database",ec="@firebase/data-connect",tc="@firebase/database-compat",nc="@firebase/functions",rc="@firebase/functions-compat",ic="@firebase/installations",sc="@firebase/installations-compat",oc="@firebase/messaging",ac="@firebase/messaging-compat",lc="@firebase/performance",uc="@firebase/performance-compat",cc="@firebase/remote-config",hc="@firebase/remote-config-compat",dc="@firebase/storage",fc="@firebase/storage-compat",gc="@firebase/firestore",pc="@firebase/vertexai",mc="@firebase/firestore-compat",yc="firebase",vc="[DEFAULT]",bc={[$u]:"fire-core",[Gu]:"fire-core-compat",[Ku]:"fire-analytics",[Wu]:"fire-analytics-compat",[Yu]:"fire-app-check",[Xu]:"fire-app-check-compat",[Qu]:"fire-auth",[Ju]:"fire-auth-compat",[Zu]:"fire-rtdb",[ec]:"fire-data-connect",[tc]:"fire-rtdb-compat",[nc]:"fire-fn",[rc]:"fire-fn-compat",[ic]:"fire-iid",[sc]:"fire-iid-compat",[oc]:"fire-fcm",[ac]:"fire-fcm-compat",[lc]:"fire-perf",[uc]:"fire-perf-compat",[cc]:"fire-rc",[hc]:"fire-rc-compat",[dc]:"fire-gcs",[fc]:"fire-gcs-compat",[gc]:"fire-fst",[mc]:"fire-fst-compat",[pc]:"fire-vertex","fire-js":"fire-js",[yc]:"fire-js-all"},Dc=new Map,wc=new Map,_c=new Map;function Ec(e,t){try{e.container.addComponent(t)}catch(n){Hu.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Cc(e){const t=e.name;if(_c.has(t))return Hu.debug(`There were multiple attempts to register component ${t}.`),!1;_c.set(t,e);for(const n of Dc.values())Ec(n,e);for(const n of wc.values())Ec(n,e);return!0}function Tc(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Sc=new lu("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class kc{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new gu("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sc.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const r=Object.assign({name:vc,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw Sc.create("bad-app-name",{appName:String(i)});if(n||(n=eu()),!n)throw Sc.create("no-options");const s=Dc.get(i);if(s){if(cu(n,s.options)&&cu(r,s.config))return s;throw Sc.create("duplicate-app",{appName:i})}const o=new yu(i);for(const l of _c.values())o.addComponent(l);const a=new kc(n,r,o);return Dc.set(i,a),a}function Ac(e=vc){const t=Dc.get(e);if(!t&&e===vc&&eu())return xc();if(!t)throw Sc.create("no-app",{appName:e});return t}function Ic(e,t,n){var r;let i=null!==(r=bc[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Hu.warn(e.join(" "))}Cc(new gu(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc="firebase-heartbeat-store";let Lc=null;function Mc(){return Lc||(Lc=Ru("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Fc)}catch(n){console.warn(n)}}}).catch((e=>{throw Sc.create("idb-open",{originalErrorMessage:e.message})}))),Lc}async function Oc(e,t){try{const n=(await Mc()).transaction(Fc,"readwrite"),r=n.objectStore(Fc);await r.put(t,Pc(e)),await n.done}catch(n){if(n instanceof au)Hu.warn(n.message);else{const e=Sc.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});Hu.warn(e.message)}}}function Pc(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Bc(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Rc();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Hu.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Rc(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Vc(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Vc(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Xl(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Hu.warn(t),""}}}function Rc(){return(new Date).toISOString().substring(0,10)}class Bc{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!iu()&&su().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Mc()).transaction(Fc),n=await t.objectStore(Fc).get(Pc(e));return await t.done,n}catch(t){if(t instanceof au)Hu.warn(t.message);else{const e=Sc.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});Hu.warn(e.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Oc(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Oc(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Vc(e){return Xl(JSON.stringify({version:2,heartbeats:e})).length}var Uc;Uc="",Cc(new gu("platform-logger",(e=>new ju(e)),"PRIVATE")),Cc(new gu("heartbeat",(e=>new Nc(e)),"PRIVATE")),Ic($u,qu,Uc),Ic($u,qu,"esm2017"),Ic("fire-js","");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Ic("firebase","11.4.0","app");const zc="@firebase/installations",jc="0.6.13",$c=1e4,qc=`w:${jc}`,Hc="FIS_v2",Gc=36e5,Wc=new lu("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Kc(e){return e instanceof au&&e.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function Yc(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Qc(e,t){const n=(await t.json()).error;return Wc.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Jc({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Zc(e,{refreshToken:t}){const n=Jc(e);return n.append("Authorization",function(e){return`${Hc} ${e}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)),n}async function eh(e){const t=await e();return t.status>=500&&t.status<600?e():t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function th(e){return new Promise((t=>{setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const nh=/^[cdef][\w-]{21}$/;function rh(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e);return nh.test(t)?t:""}catch(e){return""}}function ih(e){return`${e.appName}!${e.appId}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=new Map;function oh(e,t){const n=ih(e);ah(n,t),function(e,t){const n=function(){!lh&&"BroadcastChannel"in self&&(lh=new BroadcastChannel("[Firebase] FID Change"),lh.onmessage=e=>{ah(e.data.key,e.data.fid)});return lh}();n&&n.postMessage({key:e,fid:t});0===sh.size&&lh&&(lh.close(),lh=null)}(n,t)}function ah(e,t){const n=sh.get(e);if(n)for(const r of n)r(t)}let lh=null;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const uh="firebase-installations-store";let ch=null;function hh(){return ch||(ch=Ru("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(uh)}})),ch}async function dh(e,t){const n=ih(e),r=(await hh()).transaction(uh,"readwrite"),i=r.objectStore(uh),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||oh(e,t.fid),t}async function fh(e){const t=ih(e),n=(await hh()).transaction(uh,"readwrite");await n.objectStore(uh).delete(t),await n.done}async function gh(e,t){const n=ih(e),r=(await hh()).transaction(uh,"readwrite"),i=r.objectStore(uh),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.done,!o||s&&s.fid===o.fid||oh(e,o.fid),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ph(e){let t;const n=await gh(e.appConfig,(n=>{const r=function(e){const t=e||{fid:rh(),registrationStatus:0};return vh(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Wc.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=Xc(e),i=Jc(e),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={fid:n,authVersion:Hc,appId:e.appId,sdkVersion:qc},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await eh((()=>fetch(r,a)));if(l.ok){const e=await l.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:Yc(e.authToken)}}throw await Qc("Create Installation",l)}(e,t);return dh(e.appConfig,n)}catch(n){throw Kc(n)&&409===n.customData.serverCode?await fh(e.appConfig):await dh(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:mh(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function mh(e){let t=await yh(e.appConfig);for(;1===t.registrationStatus;)await th(100),t=await yh(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await ph(e);return n||t}return t}function yh(e){return gh(e,(e=>{if(!e)throw Wc.create("installation-not-found");return vh(e)}))}function vh(e){return 1===(t=e).registrationStatus&&t.registrationTime+$c<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}async function bh({appConfig:e,heartbeatServiceProvider:t},n){const r=function(e,{fid:t}){return`${Xc(e)}/${t}/authTokens:generate`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,n),i=Zc(e,n),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={installation:{sdkVersion:qc,appId:e.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await eh((()=>fetch(r,a)));if(l.ok){return Yc(await l.json())}throw await Qc("Generate Auth Token",l)}async function Dh(e,t=!1){let n;const r=await gh(e.appConfig,(r=>{if(!_h(r))throw Wc.create("not-registered");const i=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Gc}(e)}(i))return r;if(1===i.requestStatus)return n=async function(e,t){let n=await wh(e.appConfig);for(;1===n.authToken.requestStatus;)await th(100),n=await wh(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Dh(e,t):r}(e,t),r;{if(!navigator.onLine)throw Wc.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return n=async function(e,t){try{const n=await bh(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await dh(e.appConfig,r),n}catch(n){if(!Kc(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await dh(e.appConfig,n)}else await fh(e.appConfig);throw n}}(e,t),t}}));return n?await n:r.authToken}function wh(e){return gh(e,(e=>{if(!_h(e))throw Wc.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+$c<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}function _h(e){return void 0!==e&&2===e.registrationStatus}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Eh(e,t=!1){const n=e;await async function(e){const{registrationPromise:t}=await ph(e);t&&await t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n);return(await Dh(n,t)).token}function Ch(e){return Wc.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th="installations",Sh=e=>{const t=Tc(e.getProvider("app").getImmediate(),Th).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await ph(t);return r?r.catch(console.error):Dh(t).catch(console.error),n.fid}(t),getToken:e=>Eh(t,e)}};Cc(new gu(Th,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Ch("App Configuration");if(!e.name)throw Ch("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Ch(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Tc(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),Cc(new gu("installations-internal",Sh,"PRIVATE")),Ic(zc,jc),Ic(zc,jc,"esm2017");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const kh="analytics",xh="https://www.googletagmanager.com/gtag/js",Ah=new Cu("@firebase/analytics"),Ih=new lu("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Fh(e){if(!e.startsWith(xh)){const t=Ih.create("invalid-gtag-resource",{gtagURL:e});return Ah.warn(t.message),""}return e}function Lh(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function Mh(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:Fh}),r=document.createElement("script"),i=`${xh}?l=${e}&id=${t}`;r.src=n?null==n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Oh(e,t,n,r){return async function(i,...s){try{if("event"===i){const[r,i]=s;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await Lh(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(s){Ah.error(s)}}(e,t,n,r,i)}else if("config"===i){const[i,o]=s;await async function(e,t,n,r,i,s){const o=r[i];try{if(o)await t[o];else{const e=(await Lh(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(a){Ah.error(a)}e("config",i,s)}(e,t,n,r,i,o)}else if("consent"===i){const[t,n]=s;e("consent",t,n)}else if("get"===i){const[t,n,r]=s;e("get",t,n,r)}else if("set"===i){const[t]=s;e("set",t)}else e(i,...s)}catch(o){Ah.error(o)}}}const Ph=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Nh(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Rh(e,t=Ph,n){const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw Ih.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Ih.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Vh;return setTimeout((async()=>{a.abort()}),6e4),Bh({appId:r,apiKey:i,measurementId:s},o,a,t)}async function Bh(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=Ph){var s;const{appId:o,measurementId:a}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(Ih.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(r,t)}catch(l){if(a)return Ah.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==l?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:Nh(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw Ih.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return i.deleteThrottleMetadata(o),t}catch(l){const t=l;if(!function(e){if(!(e instanceof au&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(i.deleteThrottleMetadata(o),a)return Ah.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==t?void 0:t.message}]`),{appId:o,measurementId:a};throw l}const u=503===Number(null===(s=null==t?void 0:t.customData)||void 0===s?void 0:s.httpStatus)?du(n,i.intervalMillis,30):du(n,i.intervalMillis),c={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return i.setThrottleMetadata(o,c),Ah.debug(`Calling attemptFetch again in ${u} millis`),Bh(e,c,r,i)}}class Vh{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}async function Uh(e,t,n,r,i,s,o){var a;const l=Rh(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Ah.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>Ah.error(e))),t.push(l);const u=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(){if(!iu())return Ah.warn(Ih.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await su()}catch(e){return Ah.warn(Ih.create("indexeddb-unavailable",{errorInfo:null==e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[c,h]=await Promise.all([l,u]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(xh)&&n.src.includes(e))return n;return null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(s)||Mh(s,c.measurementId),i("js",new Date);const d=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return d.origin="firebase",d.update=!0,null!=h&&(d.firebase_id=h),i("config",c.measurementId,d),c.measurementId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zh=class{constructor(e){this.app=e}_delete(){return delete jh[this.app.options.appId],Promise.resolve()}},jh={},$h=[];const qh={};let Hh,Gh,Wh="dataLayer",Kh=!1;function Xh(e,t,n){!function(){const e=[];if(nu()&&e.push("This is a browser extension environment."),ou()||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=Ih.create("invalid-analytics-context",{errorInfo:t});Ah.warn(n.message)}}();const r=e.options.appId;if(!r)throw Ih.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Ih.create("no-api-key");Ah.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=jh[r])throw Ih.create("already-exists",{id:r});if(!Kh){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Wh);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(...e){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=Oh(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(jh,$h,qh,Wh,"gtag");Gh=e,Hh=t,Kh=!0}jh[r]=Uh(e,$h,qh,t,Hh,Wh,n);return new zh(e)}function Yh(e=Ac()){const t=Tc(e=fu(e),kh);return t.isInitialized()?t.getImmediate():function(e,t={}){const n=Tc(e,kh);if(n.isInitialized()){const e=n.getImmediate();if(cu(t,n.getOptions()))return e;throw Ih.create("already-initialized")}const r=n.initialize({options:t});return r}(e)}async function Qh(){if(nu())return!1;if(!ou())return!1;if(!iu())return!1;try{return await su()}catch(e){return!1}}function Jh(e,t,n){e=fu(e),async function(e,t,n){e("config",await t,{update:!0,user_properties:n})}(Gh,jh[e.app.options.appId],t).catch((e=>Ah.error(e)))}function Zh(e,t,n,r){e=fu(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(Gh,jh[e.app.options.appId],t,n,r).catch((e=>Ah.error(e)))}const ed="@firebase/analytics",td="0.10.12";Cc(new gu(kh,((e,{options:t})=>Xh(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),Cc(new gu("analytics-internal",(function(e){try{const t=e.getProvider(kh).getImmediate();return{logEvent:(e,n,r)=>Zh(t,e,n,r)}}catch(t){throw Ih.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),Ic(ed,td),Ic(ed,td,"esm2017");var nd,rd="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e;
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"==typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),u=s(16777216);function c(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function g(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function p(e,t){this.g=e,this.h=t}function m(e,t){if(c(t))throw Error("division by zero");if(c(e))return new p(a,a);if(h(e))return t=m(d(e),t),new p(d(t.g),d(t.h));if(h(t))return t=m(e,d(t)),new p(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!c(r);){var u=s.add(r);0>=u.l(e)&&(i=i.add(n),s=u),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new p(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),u=(s=o(n)).j(t);h(u)||0<u.l(e);)u=(s=o(n-=r)).j(t);c(s)&&(s=l),i=i.add(s),e=f(e,u)}return new p(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(c(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:c(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(u)&&0>e.l(u))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),p=e.i(s)>>>16,m=65535&e.i(s);n[2*i+2*s]+=f*m,g(n,2*i+2*s),n[2*i+2*s+1]+=l*m,g(n,2*i+2*s+1),n[2*i+2*s+1]+=f*p,g(n,2*i+2*s+1),n[2*i+2*s+2]+=l*p,g(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(u))):i=(i=i.j(r)).add(o(u))}return i},nd=r}).apply(void 0!==rd?rd:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var id,sd,od,ad,ld,ud,cd,hd,dd="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof dd&&dd];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */
var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function u(e,t,n){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function g(e){return/^[\s\xa0]*$/.test(e)}function p(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var y=!(-1==p().indexOf("Gecko")||-1!=p().toLowerCase().indexOf("webkit")&&-1==p().indexOf("Edge")||-1!=p().indexOf("Trident")||-1!=p().indexOf("MSIE")||-1!=p().indexOf("Edge"));function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<D.length;t++)n=D[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function E(e){i.setTimeout((()=>{throw e}),0)}function C(){var e=A;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var T=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new S),(e=>e.reset()));class S{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let k,x=!1,A=new class{constructor(){this.h=this.g=null}add(e,t){const n=T.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},I=()=>{const e=i.Promise.resolve(void 0);k=()=>{e.then(F)}};var F=()=>{for(var e;e=C();){try{e.h.call(e.g)}catch(Ie){E(Ie)}var t=T;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}x=!1};function L(){this.s=this.s,this.C=this.C}function M(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},M.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(Ie){}return e}();function P(e,t){if(M.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{m(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:N[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&P.aa.h.call(this)}}h(P,M);var N={2:"touch",3:"pen",4:"mouse"};P.prototype.h=function(){P.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var R="closure_listenable_"+(1e6*Math.random()|0),B=0;function V(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++B,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function j(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=$(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new V(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),H={};function G(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);return null}return n=Z(n),e&&e[R]?e.K(t,n,o(r)?!!r.capture:!!r,i):function(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Q(e);if(l||(e[q]=l=new z(e)),n=l.add(t,n,r,a,s),n.proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Y;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}(e,t,n,!1,r,i)}function W(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=Z(n),e&&e[R]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$(s=e.g[t],n,r,i))&&(U(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Q(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,i)),(n=-1<e?t[e]:null)&&K(n))}function K(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[R])j(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Q(t))?(j(n,e),0==n.h&&(n.src=null,t[q]=null)):U(e)}}}function X(e){return e in H?H[e]:H[e]="on"+e}function Y(e,t){if(e.da)e=!0;else{t=new P(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&K(e),e=n.call(r,t)}return e}function Q(e){return(e=e[q])instanceof z?e:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(e){return"function"==typeof e?e:(e[J]||(e[J]=function(t){return e.handleEvent(t)}),e[J])}function ee(){L.call(this),this.i=new z(this),this.M=this,this.F=null}function te(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new M(t,e);else if(t instanceof M)t.target=t.target||e;else{var i=t;w(t=new M(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ne(o,r,!0,t)&&i}if(i=ne(o=t.g=e,r,!0,t)&&i,i=ne(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ne(o=t.g=n[s],r,!1,t)&&i}function ne(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&j(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function re(e,t,n){if("function"==typeof e)n&&(e=u(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=u(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ie(e){e.g=re((()=>{e.g=null,e.i&&(e.i=!1,ie(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ee,L),ee.prototype[R]=!0,ee.prototype.removeEventListener=function(e,t,n,r){W(this,e,t,n,r)},ee.prototype.N=function(){if(ee.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ee.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ee.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class se extends L{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ie(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oe(e){L.call(this),this.h=e,this.g={}}h(oe,L);var ae=[];function le(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&K(e)}),e),e.g={}}oe.prototype.N=function(){oe.aa.N.call(this),le(this)},oe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ue=i.JSON.stringify,ce=i.JSON.parse,he=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function de(){}function fe(e){return e.h||(e.h=e.i())}function ge(){}de.prototype.h=null;var pe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function me(){M.call(this,"d")}function ye(){M.call(this,"c")}h(me,M),h(ye,M);var ve={},be=null;function De(){return be=be||new ee}function we(e){M.call(this,ve.La,e)}function _e(e){const t=De();te(t,new we(t))}function Ee(e,t){M.call(this,ve.STAT_EVENT,e),this.stat=t}function Ce(e){const t=De();te(t,new Ee(t,e))}function Te(e,t){M.call(this,ve.Ma,e),this.size=t}function Se(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function ke(){this.g=!0}function xe(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return ue(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}ve.La="serverreachability",h(we,M),ve.STAT_EVENT="statevent",h(Ee,M),ve.Ma="timingevent",h(Te,M),ke.prototype.xa=function(){this.g=!1},ke.prototype.info=function(){};var Ae,Fe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Le={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Me(){}function Oe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new oe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pe}function Pe(){this.i=null,this.g="",this.h=!1}h(Me,de),Me.prototype.g=function(){return new XMLHttpRequest},Me.prototype.i=function(){return{}},Ae=new Me;var Ne={},Re={};function Be(e,t,n){e.L=1,e.v=ct(st(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),je(e),e.A=st(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Et(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Pe,e.g=hn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new se(u(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ae[0]=i.toString()),i=ae);for(var s=0;s<i.length;s++){var o=G(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),_e(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ue(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Re:(n=Number(t.substring(n,r)),isNaN(n)?Ne:(r+=1)+n>t.length?Re:(t=t.slice(r,r+n),e.C=r+n,t))}function je(e){e.S=Date.now()+e.I,$e(e,e.I)}function $e(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Se(u(e.ba,e),t)}function qe(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function He(e){0==e.j.G||e.J||on(e.j,e)}function Ge(e){qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,le(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function We(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Je(n.h,e)))if(!e.K&&Je(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;sn(n),Kt(n)}tn(n),Ce(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Se(u(n.Za,n),6e3));if(1>=Qe(n.h)&&n.ca){try{n.ca()}catch(c){}n.ca=void 0}}else ln(n,11)}else if((e.K||n.g==e)&&sn(n),!g(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.K=u[1],n.ia=u[2];const t=u[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=u[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const c=u[5];null!=c&&"number"==typeof c&&0<c&&(r=1.5*c,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ze(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=cn(r,r.J?r.ia:null,r.W),o.K){et(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(qe(a),je(a)),r.g=o}else en(r);0<n.i.length&&Yt(n)}else"stop"!=u[0]&&"close"!=u[0]||ln(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?ln(n,7):Wt(n):"noop"!=u[0]&&n.l&&n.l.ta(u),n.v=0)}_e()}catch(c){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==$t(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const d=$t(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||qt(this.g)))){this.J||4!=d||7==t||_e(),qe(this);var n=this.g.Z();this.X=n;t:if(Ue(this)){var r=qt(this.g);e="";var s=r.length,o=4==$t(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ge(this),He(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,u=this.g;if((l=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!g(l)){var c=l;break t}}c=null}if(!(n=c)){this.o=!1,this.s=3,Ce(12),Ge(this),He(this);break e}xe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,We(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=ze(this,a),e==Re){4==d&&(this.s=4,Ce(14),n=!1),xe(this.i,this.l,null,"[Incomplete Response]");break}if(e==Ne){this.s=4,Ce(15),xe(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}xe(this.i,this.l,e,null),We(this,e)}if(Ue(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Ce(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),nn(h),h.M=!0,Ce(11))}}else xe(this.i,this.l,a,"[Invalid Chunked Response]"),Ge(this),He(this)}else xe(this.i,this.l,a,null),We(this,a);4==d&&Ge(this),this.o&&!this.J&&(4==d?on(this.j,this):(this.o=!1,je(this)))}else(function(e){const t={};e=(e.g&&2<=$t(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(g(e[r]))continue;var n=_(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ce(12)):(this.s=0,Ce(13)),Ge(this),He(this)}}}catch(d){}},Oe.prototype.cancel=function(){this.J=!0,Ge(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(_e(),Ce(17)),Ge(this),this.s=2,He(this)):$e(this,this.S-e)};var Ke=class{constructor(e,t){this.g=e,this.map=t}};function Xe(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ye(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Qe(e){return e.h?1:e.g?e.g.size:0}function Je(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ze(e,t){e.g?e.g.add(t):e.h=t}function et(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function tt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function nt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(s(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Xe.prototype.cancel=function(){if(this.i=tt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var rt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function it(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof it){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,at(this,e.s),this.l=e.l;var t=e.i,n=new bt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),lt(this,n),this.m=e.m}else e&&(t=String(e).match(rt))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),at(this,t[4]),this.l=ht(t[5]||"",!0),lt(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new bt(null,this.h))}function st(e){return new it(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function at(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function lt(e,t,n){t instanceof bt?(e.i=t,function(e,t){t&&!e.j&&(Dt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(wt(this,t),Et(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=dt(t,yt)),e.i=new bt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ct(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function dt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ft),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ft(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}it.prototype.toString=function(){var e=[],t=this.j;t&&e.push(dt(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(dt(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(dt(n,"/"==n.charAt(0)?mt:pt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",dt(n,vt)),e.join("")};var gt=/[#\/\?@]/g,pt=/[#\?:]/g,mt=/[#\?]/g,yt=/[#\?@]/g,vt=/#/g;function bt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Dt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function wt(e,t){Dt(e),t=Ct(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function _t(e,t){return Dt(e),t=Ct(e,t),e.g.has(t)}function Et(e,t,n){wt(e,t),0<n.length&&(e.i=null,e.g.set(Ct(e,t),d(n)),e.h+=n.length)}function Ct(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function St(){this.g=new he}function kt(e,t,n){const r=n||"";try{nt(e,(function(e,n){let i=e;o(e)&&(i=ue(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function xt(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ee.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function It(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ft(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Lt(e)}function Lt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Mt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Ot(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Mt(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Pt(e){ee.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=bt.prototype).add=function(e,t){Dt(this),this.i=null,e=Ct(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Dt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){Dt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Dt(this);let t=[];if("string"==typeof e)_t(this,e)&&(t=t.concat(this.g.get(Ct(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Dt(this),this.i=null,_t(this,e=Ct(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(xt,de),xt.prototype.g=function(){return new At(this.l,this.j)},xt.prototype.i=function(e){return function(){return e}}({}),h(At,ee),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Lt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ft(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Lt(this)),this.g&&(this.readyState=3,Lt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;It(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ft(this):Lt(this),3==this.readyState&&It(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ft(this))},e.Qa=function(e){this.g&&(this.response=e,Ft(this))},e.ga=function(){this.g&&Ft(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Pt,ee);var Nt=/^https?$/i,Rt=["POST","PUT"];function Bt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Vt(e),zt(e)}function Vt(e){e.A||(e.A=!0,te(e,"complete"),te(e,"error"))}function Ut(e){if(e.h&&void 0!==r&&(!e.v[1]||4!=$t(e)||2!=e.Z()))if(e.u&&4==$t(e))re(e.Ea,0,e);else if(te(e,"readystatechange"),4==$t(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(rt)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Nt.test(o?o.toLowerCase():"")}n=s}if(n)te(e,"complete"),te(e,"success");else{e.m=6;try{var a=2<$t(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Vt(e)}}finally{zt(e)}}}function zt(e,t){if(e.g){jt(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||te(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function jt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function $t(e){return e.g?e.g.readyState:0}function qt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ht(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new ke,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ht("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ht("baseRetryDelayMs",5e3,e),this.cb=Ht("retryDelaySeedMs",1e4,e),this.Wa=Ht("forwardChannelMaxRetries",2,e),this.wa=Ht("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(e&&e.concurrentRequestLimit),this.Da=new St,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Wt(e){if(Xt(e),3==e.G){var t=e.U++,n=st(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),Jt(e,n),(t=new Oe(e,e.j,t)).L=2,t.v=ct(st(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=hn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),je(t)}un(e)}function Kt(e){e.g&&(nn(e),e.g.cancel(),e.g=null)}function Xt(e){Kt(e),e.u&&(i.clearTimeout(e.u),e.u=null),sn(e),e.h.cancel(),e.s&&("number"==typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Yt(e){if(!Ye(e.h)&&!e.s){e.s=!0;var t=e.Ga;k||I(),x||(k(),x=!0),A.add(t,e),e.B=0}}function Qt(e,t){var n;n=t?t.l:e.U++;const r=st(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),Jt(e,r),e.m&&e.o&&Ot(r,e.m,e.o),n=new Oe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=Zt(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),Ze(e.h,n),Be(n,r,t)}function Jt(e,t){e.H&&v(e.H,(function(e,n){ut(t,n,e)})),e.l&&nt({},(function(e,n){ut(t,n,e)}))}function Zt(e,t,n){n=Math.min(e.i.length,n);var r=e.l?u(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{kt(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function en(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;k||I(),x||(k(),x=!0),A.add(t,e),e.v=0}}function tn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Se(u(e.Fa,e),an(e,e.v)),e.v++,!0)}function nn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function rn(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=st(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),Jt(e,t),e.m&&e.o&&Ot(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ct(st(t)),n.m=null,n.P=!0,Ve(n,e)}function sn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function on(e,t){var n=null;if(e.g==t){sn(e),nn(e),e.g=null;var r=2}else{if(!Je(e.h,t))return;n=t.D,et(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;te(r=De(),new Te(r,n)),Yt(e)}else en(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Qe(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=Se(u(e.Ga,e,t),an(e,e.B)),e.B++,0)))}(e,t)||2==r&&tn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:ln(e,5);break;case 4:ln(e,10);break;case 3:ln(e,6);break;default:ln(e,2)}}function an(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function ln(e,t){if(e.j.info("Error code "+t),2==t){var n=u(e.fb,e),r=e.Xa;const t=!r;r=new it(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||ot(r,"https"),ct(r),t?function(e,t){const n=new ke;if(i.Image){const r=new Image;r.onload=c(Tt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(Tt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(Tt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(Tt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new ke;const n=new AbortController,r=setTimeout((()=>{n.abort(),Tt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)})).catch((()=>{clearTimeout(r),Tt(0,0,!1,t)}))}(r.toString(),n)}else Ce(2);e.G=0,e.l&&e.l.sa(t),un(e),Xt(e)}function un(e){if(e.G=0,e.ka=[],e.l){const t=tt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function cn(e,t,n){var r=n instanceof it?st(n):new it(n);if(""!=r.g)t&&(r.g=t+"."+r.g),at(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new it(null);r&&ot(o,r),t&&(o.g=t),s&&at(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),Jt(e,r),r}function hn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Pt(new xt({eb:n})):new Pt(e.pa)).Ha(e.J),t}function dn(){}function fn(){}function gn(e,t){ee.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!g(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!g(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new yn(this)}function pn(e){me.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function mn(){ye.call(this),this.status=1}function yn(e){this.g=e}(e=Pt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?fe(this.o):fe(Ae),this.g.onreadystatechange=u(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Bt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Rt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jt(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Bt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,te(this,"complete"),te(this,"abort"),zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zt(this,!0)),Pt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ut(this):this.bb())},e.bb=function(){Ut(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<$t(this)?this.g.status:-1}catch(e){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ce(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ce(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=cn(this,null,this.W),Yt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Oe(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),w(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Zt(this,i,t),ut(n=st(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),Jt(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Mt(s)))+"&"+t:this.m&&Ot(n,this.m,s)),Ze(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Be(i,n,null)):Be(i,n,t),this.G=2}}else 3==this.G&&(e?Qt(this,e):0==this.i.length||Ye(this.h)||Qt(this))},e.Fa=function(){if(this.u=null,rn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Se(u(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ce(10),Kt(this),rn(this))},e.Za=function(){null!=this.C&&(this.C=null,Kt(this),tn(this),Ce(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=dn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},fn.prototype.g=function(e,t){return new gn(e,t)},h(gn,ee),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Wt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ue(e),e=n);t.i.push(new Ke(t.Ya++,e)),3==t.G&&Yt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Wt(this.g),delete this.g,gn.aa.N.call(this)},h(pn,me),h(mn,ye),h(yn,dn),yn.prototype.ua=function(){te(this.g,"a")},yn.prototype.ta=function(e){te(this.g,new pn(e))},yn.prototype.sa=function(e){te(this.g,new mn)},yn.prototype.ra=function(){te(this.g,"b")},fn.prototype.createWebChannel=fn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,hd=function(){return new fn},cd=function(){return De()},ud=ve,ld={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fe.NO_ERROR=0,Fe.TIMEOUT=8,Fe.HTTP_ERROR=6,ad=Fe,Le.COMPLETE="complete",od=Le,ge.EventType=pe,pe.OPEN="a",pe.CLOSE="b",pe.ERROR="c",pe.MESSAGE="d",ee.prototype.listen=ee.prototype.K,sd=ge,Pt.prototype.listenOnce=Pt.prototype.L,Pt.prototype.getLastError=Pt.prototype.Ka,Pt.prototype.getLastErrorCode=Pt.prototype.Ba,Pt.prototype.getStatus=Pt.prototype.Z,Pt.prototype.getResponseJson=Pt.prototype.Oa,Pt.prototype.getResponseText=Pt.prototype.oa,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Ha,id=Pt}).apply(void 0!==dd?dd:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const fd="@firebase/firestore",gd="4.7.9";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pd.UNAUTHENTICATED=new pd(null),pd.GOOGLE_CREDENTIALS=new pd("google-credentials-uid"),pd.FIRST_PARTY=new pd("first-party-uid"),pd.MOCK_USER=new pd("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let md="11.4.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new Cu("@firebase/firestore");function vd(){return yd.logLevel}function bd(e,...t){if(yd.logLevel<=vu.DEBUG){const n=t.map(_d);yd.debug(`Firestore (${md}): ${e}`,...n)}}function Dd(e,...t){if(yd.logLevel<=vu.ERROR){const n=t.map(_d);yd.error(`Firestore (${md}): ${e}`,...n)}}function wd(e,...t){if(yd.logLevel<=vu.WARN){const n=t.map(_d);yd.warn(`Firestore (${md}): ${e}`,...n)}}function _d(e){if("string"==typeof e)return e;try{
/**
    * @license
    * Copyright 2020 Google LLC
    *
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    *   http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    */
return t=e,JSON.stringify(t)}catch(n){return e}var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(e="Unexpected state"){const t=`FIRESTORE (${md}) INTERNAL ASSERTION FAILED: `+e;throw Dd(t),new Error(t)}function Cd(e,t){e||Ed()}function Td(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class kd extends au{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Id{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(pd.UNAUTHENTICATED)))}shutdown(){}}class Fd{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Ld{constructor(e){this.t=e,this.currentUser=pd.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Cd(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new xd;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new xd,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{bd("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(bd("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new xd)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(bd("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Cd("string"==typeof t.accessToken),new Ad(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Cd(null===e||"string"==typeof e),new pd(e)}}class Md{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=pd.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Od{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Md(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(pd.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Pd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Nd{constructor(e,t){var n;this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,null!=(n=e)&&void 0!==n.settings&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Cd(void 0===this.o);const n=e=>{null!=e.error&&bd("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,bd("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{bd("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):bd("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.V)return Promise.resolve(new Pd(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Cd("string"==typeof e.token),this.R=e.token,new Pd(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Rd(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Vd(e,t){return e<t?-1:e>t?1:0}function Ud(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd=-62135596800,jd=1e6;class $d{static now(){return $d.fromMillis(Date.now())}static fromDate(e){return $d.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*jd);return new $d(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new kd(Sd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new kd(Sd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<zd)throw new kd(Sd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new kd(Sd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jd}_compareTo(e){return this.seconds===e.seconds?Vd(this.nanoseconds,e.nanoseconds):Vd(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-zd;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{static fromTimestamp(e){return new qd(e)}static min(){return new qd(new $d(0,0))}static max(){return new qd(new $d(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="__name__";class Gd{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ed(),void 0===n?n=e.length-t:n>e.length-t&&Ed(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Gd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gd?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Gd.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Math.sign(e.length-t.length)}static compareSegments(e,t){const n=Gd.isNumericId(e),r=Gd.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Gd.extractNumericId(e).compare(Gd.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return nd.fromString(e.substring(4,e.length-2))}}class Wd extends Gd{construct(e,t,n){return new Wd(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new kd(Sd.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new Wd(t)}static emptyPath(){return new Wd([])}}const Kd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xd extends Gd{construct(e,t,n){return new Xd(e,t,n)}static isValidIdentifier(e){return Kd.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xd.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Hd}static keyField(){return new Xd([Hd])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new kd(Sd.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new kd(Sd.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new kd(Sd.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new kd(Sd.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xd(t)}static emptyPath(){return new Xd([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e){this.path=e}static fromPath(e){return new Yd(Wd.fromString(e))}static fromName(e){return new Yd(Wd.fromString(e).popFirst(5))}static empty(){return new Yd(Wd.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Wd.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Wd.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Yd(new Wd(e.slice()))}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(e){return new Jd(e.readTime,e.key,-1)}class Jd{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Jd(qd.min(),Yd.empty(),-1)}static max(){return new Jd(qd.max(),Yd.empty(),-1)}}function Zd(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Yd.comparator(e.documentKey,t.documentKey),0!==n?n:Vd(e.largestBatchId,t.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class ef{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tf(e){if(e.code!==Sd.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;bd("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ed(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new nf(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof nf?t:nf.resolve(t)}catch(t){return nf.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):nf.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):nf.reject(t)}static resolve(e){return new nf(((t,n)=>{t(e)}))}static reject(e){return new nf(((t,n)=>{n(e)}))}static waitFor(e){return new nf(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=nf.resolve(!1);for(const n of e)t=t.next((e=>e?nf.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new nf(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new nf(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function rf(e){return"IndexedDbTransactionError"===e.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.oe(e),this._e=e=>t.writeSequenceNumber(e))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}sf.ae=-1;function of(e){return null==e}function af(e){return 0===e&&1/e==-1/0}function lf(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="";break;case"":n+="";break;default:n+=t}}return n}function uf(e){return e+""}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function hf(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function df(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,t){this.comparator=e,this.root=t||pf.EMPTY}insert(e,t){return new ff(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pf.BLACK,null,null))}remove(e){return new ff(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pf.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gf(this.root,e,this.comparator,!1)}getReverseIterator(){return new gf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gf(this.root,e,this.comparator,!0)}}class gf{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pf{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:pf.RED,this.left=null!=r?r:pf.EMPTY,this.right=null!=i?i:pf.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new pf(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return pf.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return pf.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pf.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pf.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ed();if(this.right.isRed())throw Ed();const e=this.left.check();if(e!==this.right.check())throw Ed();return e+(this.isRed()?0:1)}}pf.EMPTY=null,pf.RED=!0,pf.BLACK=!1,pf.EMPTY=new class{constructor(){this.size=0}get key(){throw Ed()}get value(){throw Ed()}get color(){throw Ed()}get left(){throw Ed()}get right(){throw Ed()}copy(e,t,n,r,i){return this}insert(e,t,n){return new pf(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class mf{constructor(e){this.comparator=e,this.data=new ff(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yf(this.data.getIterator())}getIteratorFrom(e){return new yf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof mf))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new mf(this.comparator);return t.data=e,t}}class yf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e){this.fields=e,e.sort(Xd.comparator)}static empty(){return new vf([])}unionWith(e){let t=new mf(Xd.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new vf(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ud(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new bf("Invalid base64 string: "+t):t}}(e);return new Df(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Df(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vd(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Df.EMPTY_BYTE_STRING=new Df("");const wf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _f(e){if(Cd(!!e),"string"==typeof e){let t=0;const n=wf.exec(e);if(Cd(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ef(e.seconds),nanos:Ef(e.nanos)}}function Ef(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Cf(e){return"string"==typeof e?Df.fromBase64String(e):Df.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="server_timestamp",Sf="__type__",kf="__previous_value__",xf="__local_write_time__";function Af(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Sf])||void 0===n?void 0:n.stringValue)===Tf}function If(e){const t=e.mapValue.fields[kf];return Af(t)?If(t):t}function Ff(e){const t=_f(e.mapValue.fields[xf].timestampValue);return new $d(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}const Mf="(default)";class Of{constructor(e,t){this.projectId=e,this.database=t||Mf}static empty(){return new Of("","")}get isDefaultDatabase(){return this.database===Mf}isEqual(e){return e instanceof Of&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="__type__",Nf="__max__",Rf={fields:{__type__:{stringValue:Nf}}},Bf="__vector__",Vf="value";function Uf(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Af(e)?4:function(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Nf}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)?9007199254740991:function(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Pf])||void 0===n?void 0:n.stringValue)===Bf}(e)?10:11:Ed()}function zf(e,t){if(e===t)return!0;const n=Uf(e);if(n!==Uf(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ff(e).isEqual(Ff(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=_f(e.timestampValue),r=_f(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return r=t,Cf(e.bytesValue).isEqual(Cf(r.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ef(e.geoPointValue.latitude)===Ef(t.geoPointValue.latitude)&&Ef(e.geoPointValue.longitude)===Ef(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ef(e.integerValue)===Ef(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ef(e.doubleValue),r=Ef(t.doubleValue);return n===r?af(n)===af(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ud(e.arrayValue.values||[],t.arrayValue.values||[],zf);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(cf(n)!==cf(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!zf(n[i],r[i])))return!1;return!0}(e,t);default:return Ed()}var r}function jf(e,t){return void 0!==(e.values||[]).find((e=>zf(e,t)))}function $f(e,t){if(e===t)return 0;const n=Uf(e),r=Uf(t);if(n!==r)return Vd(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Vd(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ef(e.integerValue||e.doubleValue),r=Ef(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return qf(e.timestampValue,t.timestampValue);case 4:return qf(Ff(e),Ff(t));case 5:return Vd(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Cf(e),r=Cf(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Vd(n[i],r[i]);if(0!==e)return e}return Vd(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Vd(Ef(e.latitude),Ef(t.latitude));return 0!==n?n:Vd(Ef(e.longitude),Ef(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Hf(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o[Vf])||void 0===n?void 0:n.arrayValue,u=null===(r=a[Vf])||void 0===r?void 0:r.arrayValue,c=Vd((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==u?void 0:u.values)||void 0===s?void 0:s.length)||0);return 0!==c?c:Hf(l,u)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Rf&&t===Rf)return 0;if(e===Rf)return 1;if(t===Rf)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Vd(r[o],s[o]);if(0!==e)return e;const t=$f(n[r[o]],i[s[o]]);if(0!==t)return t}return Vd(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Ed()}}function qf(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Vd(e,t);const n=_f(e),r=_f(t),i=Vd(n.seconds,r.seconds);return 0!==i?i:Vd(n.nanos,r.nanos)}function Hf(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=$f(n[i],r[i]);if(e)return e}return Vd(n.length,r.length)}function Gf(e){return Wf(e)}function Wf(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=_f(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Cf(e.bytesValue).toBase64():"referenceValue"in e?function(e){return Yd.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Wf(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Wf(e.fields[i])}`;return n+"}"}(e.mapValue):Ed()}function Kf(e){switch(Uf(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=If(e);return t?16+Kf(t):16;case 5:return 2*e.stringValue.length;case 6:return Cf(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(e.arrayValue.values||[]).reduce(((e,t)=>e+Kf(t)),0);case 10:case 11:return function(e){let t=0;return hf(e.fields,((e,n)=>{t+=e.length+Kf(n)})),t}(e.mapValue);default:throw Ed()}}function Xf(e){return!!e&&"integerValue"in e}function Yf(e){return!!e&&"arrayValue"in e}function Qf(e){return!!e&&"mapValue"in e}function Jf(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return hf(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Jf(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Jf(e.arrayValue.values[n]);return t}return Object.assign({},e)}class Zf{constructor(e){this.value=e}static empty(){return new Zf({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Qf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jf(t)}setAll(e){let t=Xd.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Jf(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Qf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zf(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Qf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){hf(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Zf(Jf(this.value))}}function eg(e){const t=[];return hf(e.fields,((e,n)=>{const r=new Xd([e]);if(Qf(n)){const e=eg(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new vf(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class tg{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new tg(e,0,qd.min(),qd.min(),qd.min(),Zf.empty(),0)}static newFoundDocument(e,t,n,r){return new tg(e,1,t,qd.min(),n,r,0)}static newNoDocument(e,t){return new tg(e,2,t,qd.min(),qd.min(),Zf.empty(),0)}static newUnknownDocument(e,t){return new tg(e,3,t,qd.min(),qd.min(),Zf.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(qd.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zf.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zf.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qd.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof tg&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tg(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,t){this.position=e,this.inclusive=t}}function rg(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Yd.comparator(Yd.fromName(o.referenceValue),n.key):$f(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ig(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!zf(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,t="asc"){this.field=e,this.dir=t}}function og(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{}class lg extends ag{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new pg(e,t,n):"array-contains"===t?new bg(e,n):"in"===t?new Dg(e,n):"not-in"===t?new wg(e,n):"array-contains-any"===t?new _g(e,n):new lg(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new mg(e,n):new yg(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison($f(t,this.value)):null!==t&&Uf(this.value)===Uf(t)&&this.matchesComparison($f(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ed()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ug extends ag{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new ug(e,t)}matches(e){return cg(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function cg(e){return"and"===e.op}function hg(e){return function(e){for(const t of e.filters)if(t instanceof ug)return!1;return!0}(e)&&cg(e)}function dg(e){if(e instanceof lg)return e.field.canonicalString()+e.op.toString()+Gf(e.value);if(hg(e))return e.filters.map((e=>dg(e))).join(",");{const t=e.filters.map((e=>dg(e))).join(",");return`${e.op}(${t})`}}function fg(e,t){return e instanceof lg?(n=e,(r=t)instanceof lg&&n.op===r.op&&n.field.isEqual(r.field)&&zf(n.value,r.value)):e instanceof ug?function(e,t){return t instanceof ug&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&fg(n,t.filters[r])),!0)}(e,t):void Ed();var n,r}function gg(e){return e instanceof lg?`${(t=e).field.canonicalString()} ${t.op} ${Gf(t.value)}`:e instanceof ug?function(e){return e.op.toString()+" {"+e.getFilters().map(gg).join(" ,")+"}"}(e):"Filter";var t}class pg extends lg{constructor(e,t,n){super(e,t,n),this.key=Yd.fromName(n.referenceValue)}matches(e){const t=Yd.comparator(e.key,this.key);return this.matchesComparison(t)}}class mg extends lg{constructor(e,t){super(e,"in",t),this.keys=vg("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class yg extends lg{constructor(e,t){super(e,"not-in",t),this.keys=vg("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function vg(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Yd.fromName(e.referenceValue)))}class bg extends lg{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yf(t)&&jf(t.arrayValue,this.value)}}class Dg extends lg{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&jf(this.value.arrayValue,t)}}class wg extends lg{constructor(e,t){super(e,"not-in",t)}matches(e){if(jf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!jf(this.value.arrayValue,t)}}class _g extends lg{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>jf(this.value.arrayValue,e)))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.le=null}}function Cg(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Eg(e,t,n,r,i,s,o)}function Tg(e){const t=Td(e);if(null===t.le){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>dg(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>{return(t=e).field.canonicalString()+t.dir;var t})).join(","),of(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Gf(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Gf(e))).join(",")),t.le=e}return t.le}function Sg(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!og(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!fg(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ig(e.startAt,t.startAt)&&ig(e.endAt,t.endAt)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function xg(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ag(e){const t=Td(e);if(null===t.he){t.he=[];const e=new Set;for(const r of t.explicitOrderBy)t.he.push(r),e.add(r.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(e){let t=new mf(Xd.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t})(t).forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.he.push(new sg(r,n))})),e.has(Xd.keyField().canonicalString())||t.he.push(new sg(Xd.keyField(),n))}return t.he}function Ig(e){const t=Td(e);return t.Pe||(t.Pe=function(e,t){if("F"===e.limitType)return Cg(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new sg(e.field,t)}));const n=e.endAt?new ng(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ng(e.startAt.position,e.startAt.inclusive):null;return Cg(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(t,Ag(e))),t.Pe}function Fg(e,t,n){return new kg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Lg(e,t){return Sg(Ig(e),Ig(t))&&e.limitType===t.limitType}function Mg(e){return`${Tg(Ig(e))}|lt:${e.limitType}`}function Og(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>gg(e))).join(", ")}]`),of(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t})).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Gf(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Gf(e))).join(",")),`Target(${t})`}(Ig(e))}; limitType=${e.limitType})`}function Pg(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Yd.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ag(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(r=t,!((n=e).startAt&&!function(e,t,n){const r=rg(e,t,n);return e.inclusive?r<=0:r<0}(n.startAt,Ag(n),r)||n.endAt&&!function(e,t,n){const r=rg(e,t,n);return e.inclusive?r>=0:r>0}(n.endAt,Ag(n),r)));var n,r}function Ng(e,t,n){const r=e.field.isKeyField()?Yd.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?$f(r,i):Ed()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ed()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){hf(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return df(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg=new ff(Yd.comparator);function Vg(){return Bg}const Ug=new ff(Yd.comparator);function zg(...e){let t=Ug;for(const n of e)t=t.insert(n.key,n);return t}function jg(e){let t=Ug;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function $g(){return Hg()}function qg(){return Hg()}function Hg(){return new Rg((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Gg=new ff(Yd.comparator),Wg=new mf(Yd.comparator);function Kg(...e){let t=Wg;for(const n of e)t=t.add(n);return t}const Xg=new mf(Vd);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Yg(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:af(t)?"-0":t}}function Qg(e){return{integerValue:""+e}}function Jg(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!af(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)?Qg(t):Yg(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(){this._=void 0}}function ep(e,t,n){return e instanceof rp?function(e,t){const n={fields:{[Sf]:{stringValue:Tf},[xf]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Af(t)&&(t=If(t)),t&&(n.fields[kf]=t),{mapValue:n}}(n,t):e instanceof ip?sp(e,t):e instanceof op?ap(e,t):function(e,t){const n=np(e,t),r=up(n)+up(e.Ie);return Xf(n)&&Xf(e.Ie)?Qg(r):Yg(e.serializer,r)}(e,t)}function tp(e,t,n){return e instanceof ip?sp(e,t):e instanceof op?ap(e,t):n}function np(e,t){return e instanceof lp?Xf(n=t)||(r=n)&&"doubleValue"in r?t:{integerValue:0}:null;var n,r}class rp extends Zg{}class ip extends Zg{constructor(e){super(),this.elements=e}}function sp(e,t){const n=cp(t);for(const r of e.elements)n.some((e=>zf(e,r)))||n.push(r);return{arrayValue:{values:n}}}class op extends Zg{constructor(e){super(),this.elements=e}}function ap(e,t){let n=cp(t);for(const r of e.elements)n=n.filter((e=>!zf(e,r)));return{arrayValue:{values:n}}}class lp extends Zg{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function up(e){return Ef(e.integerValue||e.doubleValue)}function cp(e){return Yf(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,t){this.field=e,this.transform=t}}class dp{constructor(e,t){this.version=e,this.transformResults=t}}class fp{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fp}static exists(e){return new fp(void 0,e)}static updateTime(e){return new fp(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gp(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class pp{}function mp(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Sp(e.key,fp.none()):new wp(e.key,e.data,fp.none());{const n=e.data,r=Zf.empty();let i=new mf(Xd.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new _p(e.key,r,new vf(i.toArray()),fp.none())}}function yp(e,t,n){e instanceof wp?function(e,t,n){const r=e.value.clone(),i=Cp(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof _p?function(e,t,n){if(!gp(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Cp(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ep(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function vp(e,t,n,r){return e instanceof wp?function(e,t,n,r){if(!gp(e.precondition,t))return n;const i=e.value.clone(),s=Tp(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof _p?function(e,t,n,r){if(!gp(e.precondition,t))return n;const i=Tp(e.fieldTransforms,r,t),s=t.data;return s.setAll(Ep(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return gp(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function bp(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=np(r.transform,e||null);null!=i&&(null===n&&(n=Zf.empty()),n.set(r.field,i))}return n||null}function Dp(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&Ud(n,r,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,r=t.transform,n instanceof ip&&r instanceof ip||n instanceof op&&r instanceof op?Ud(n.elements,r.elements,zf):n instanceof lp&&r instanceof lp?zf(n.Ie,r.Ie):n instanceof rp&&r instanceof rp);var n,r}(e,t))))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask)));var n,r}class wp extends pp{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class _p extends pp{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ep(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Cp(e,t,n){const r=new Map;Cd(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,tp(o,a,n[i]))}return r}function Tp(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,ep(e,s,t))}return r}class Sp extends pp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kp extends pp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&yp(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=vp(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=vp(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=qg();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=mp(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(qd.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Kg())}isEqual(e){return this.batchId===e.batchId&&Ud(this.mutations,e.mutations,((e,t)=>Dp(e,t)))&&Ud(this.baseMutations,e.baseMutations,((e,t)=>Dp(e,t)))}}class Ap{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Cd(e.mutations.length===n.length);let r=function(){return Gg}();const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Ap(e,t,n,r)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fp,Lp;(Lp=Fp||(Fp={}))[Lp.OK=0]="OK",Lp[Lp.CANCELLED=1]="CANCELLED",Lp[Lp.UNKNOWN=2]="UNKNOWN",Lp[Lp.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lp[Lp.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lp[Lp.NOT_FOUND=5]="NOT_FOUND",Lp[Lp.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lp[Lp.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lp[Lp.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lp[Lp.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lp[Lp.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lp[Lp.ABORTED=10]="ABORTED",Lp[Lp.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lp[Lp.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lp[Lp.INTERNAL=13]="INTERNAL",Lp[Lp.UNAVAILABLE=14]="UNAVAILABLE",Lp[Lp.DATA_LOSS=15]="DATA_LOSS",
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
new nd([4294967295,4294967295],0);class Mp{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Op(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Pp(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Np(e,t){return Op(e,t.toTimestamp())}function Rp(e){return Cd(!!e),qd.fromTimestamp(function(e){const t=_f(e);return new $d(t.seconds,t.nanos)}(e))}function Bp(e,t){return Vp(e,t).canonicalString()}function Vp(e,t){const n=(r=e,new Wd(["projects",r.projectId,"databases",r.database])).child("documents");var r;return void 0===t?n:n.child(t)}function Up(e,t){return Bp(e.databaseId,t.path)}function zp(e){const t=function(e){const t=Wd.fromString(e);return Cd(function(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)),t}(e);return 4===t.length?Wd.emptyPath():function(e){return Cd(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}(t)}function jp(e,t,n){return{name:Up(e,t),fields:n.value.mapValue.fields}}function $p(e){let t=zp(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Cd(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=qp(e);return t instanceof ug&&hg(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>{return new sg(Hp((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t})));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,of(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ng(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new ng(n,t)}(n.endAt)),function(e,t,n,r,i,s,o,a){return new kg(e,t,n,r,i,s,o,a)}(t,i,o,s,a,"F",l,u)}function qp(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Hp(e.unaryFilter.field);return lg.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Hp(e.unaryFilter.field);return lg.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Hp(e.unaryFilter.field);return lg.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Hp(e.unaryFilter.field);return lg.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ed()}}(e):void 0!==e.fieldFilter?(t=e,lg.create(Hp(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ed()}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return ug.create(e.compositeFilter.filters.map((e=>qp(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ed()}}(e.compositeFilter.op))}(e):Ed();var t}function Hp(e){return Xd.fromServerFormat(e.fieldPath)}function Gp(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}class Wp{constructor(e){this.Tt=e}}function Kp(e){const t=$p({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Fg(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(){this.Tn=new Yp}addToCollectionParentIndex(e,t){return this.Tn.add(t),nf.resolve()}getCollectionParents(e,t){return nf.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return nf.resolve()}deleteFieldIndex(e,t){return nf.resolve()}deleteAllFieldIndexes(e){return nf.resolve()}createTargetIndexes(e,t){return nf.resolve()}getDocumentsMatchingTarget(e,t){return nf.resolve(null)}getIndexType(e,t){return nf.resolve(0)}getFieldIndexes(e,t){return nf.resolve([])}getNextCollectionGroupToUpdate(e){return nf.resolve(null)}getMinOffset(e,t){return nf.resolve(Jd.min())}getMinOffsetFromCollectionGroup(e,t){return nf.resolve(Jd.min())}updateCollectionGroup(e,t,n){return nf.resolve()}updateIndexEntries(e,t){return nf.resolve()}}class Yp{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new mf(Wd.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new mf(Wd.comparator)).toArray()}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Jp=41943040;class Zp{static withCacheSize(e){return new Zp(e,Zp.DEFAULT_COLLECTION_PERCENTILE,Zp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zp.DEFAULT_COLLECTION_PERCENTILE=10,Zp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zp.DEFAULT=new Zp(Jp,Zp.DEFAULT_COLLECTION_PERCENTILE,Zp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zp.DISABLED=new Zp(-1,0,0);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class em{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new em(0)}static Un(){return new em(-1)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="LruGarbageCollector";function nm([e,t],[n,r]){const i=Vd(e,n);return 0===i?Vd(t,r):i}class rm{constructor(e){this.Hn=e,this.buffer=new mf(nm),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();nm(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class im{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return null!==this.Xn}er(e){bd(tm,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){rf(e)?bd(tm,"Ignoring IndexedDB error during garbage collection: ",e):await tf(e)}await this.er(3e5)}))}}class sm{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return nf.resolve(sf.ae);const n=new rm(t);return this.tr.forEachTarget(e,(e=>n.Zn(e.sequenceNumber))).next((()=>this.tr.rr(e,(e=>n.Zn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(bd("LruGarbageCollector","Garbage collection skipped; disabled"),nf.resolve(Qp)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(bd("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qp):this.ir(e,t)))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,r,i,s,o,a,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(bd("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),vd()<=vu.DEBUG&&bd("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(o-s)+`ms\n\tRemoved ${i} targets in `+(a-o)+`ms\n\tRemoved ${e} documents in `+(l-a)+`ms\nTotal Duration: ${l-u}ms`),nf.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class om{constructor(){this.changes=new Rg((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tg.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?nf.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&vp(n.mutation,e,vf.empty(),$d.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Kg()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=Kg()){const r=$g();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=zg();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=$g();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Kg())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Vg();const s=Hg(),o=Hg();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof _p)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),vp(o.mutation,t,o.mutation.getFieldMask(),$d.now())):s.set(t.key,vf.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new am(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Hg();let r=new ff(((e,t)=>e-t)),i=Kg();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||vf.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Kg()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,u=qg();l.forEach((e=>{if(!i.has(e)){const r=mp(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return nf.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return i=t,Yd.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function(e){return null!==e.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r);var i}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):nf.resolve($g());let o=-1,a=i;return s.next((t=>nf.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?nf.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Kg()))).next((e=>({batchId:o,changes:jg(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Yd(t)).next((e=>{let t=zg();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=zg();return this.indexManager.getCollectionParents(e,i).next((o=>nf.forEach(o,(o=>{const a=(l=t,u=o.child(i),new kg(u,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt));var l,u;return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,tg.newInvalidDocument(r)))}));let n=zg();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&vp(s.mutation,r,vf.empty(),$d.now()),Pg(t,r)&&(n=n.insert(e,r))})),n}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return nf.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,{id:(n=t).id,version:n.version,createTime:Rp(n.createTime)}),nf.resolve();var n}getNamedQuery(e,t){return nf.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,{name:(n=t).name,query:Kp(n.bundledQuery),readTime:Rp(n.readTime)}),nf.resolve();var n}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(){this.overlays=new ff(Yd.comparator),this.Rr=new Map}getOverlay(e,t){return nf.resolve(this.overlays.get(t))}getOverlays(e,t){const n=$g();return nf.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.Et(e,t,r)})),nf.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Rr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Rr.delete(n)),nf.resolve()}getOverlaysForCollection(e,t,n){const r=$g(),i=t.length+1,s=new Yd(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return nf.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ff(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=$g(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=$g(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return nf.resolve(o)}Et(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Rr.get(r.largestBatchId).delete(n.key);this.Rr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Ip(t,n));let i=this.Rr.get(t);void 0===i&&(i=Kg(),this.Rr.set(t,i)),this.Rr.set(t,i.add(n.key))}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(){this.sessionToken=Df.EMPTY_BYTE_STRING}getSessionToken(e){return nf.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,nf.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(){this.Vr=new mf(fm.mr),this.gr=new mf(fm.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new fm(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.wr(new fm(e,t))}br(e,t){e.forEach((e=>this.removeReference(e,t)))}Sr(e){const t=new Yd(new Wd([])),n=new fm(t,e),r=new fm(t,e+1),i=[];return this.gr.forEachInRange([n,r],(e=>{this.wr(e),i.push(e.key)})),i}Dr(){this.Vr.forEach((e=>this.wr(e)))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Yd(new Wd([])),n=new fm(t,e),r=new fm(t,e+1);let i=Kg();return this.gr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new fm(e,0),n=this.Vr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class fm{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Yd.comparator(e.key,t.key)||Vd(e.Cr,t.Cr)}static pr(e,t){return Vd(e.Cr,t.Cr)||Yd.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new mf(fm.mr)}checkEmpty(e){return nf.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new xp(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Mr=this.Mr.add(new fm(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return nf.resolve(s)}lookupMutationBatch(e,t){return nf.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Nr(n),i=r<0?0:r;return nf.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return nf.resolve(0===this.mutationQueue.length?-1:this.Fr-1)}getAllMutationBatches(e){return nf.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new fm(t,0),r=new fm(t,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([n,r],(e=>{const t=this.Or(e.Cr);i.push(t)})),nf.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new mf(Vd);return t.forEach((e=>{const t=new fm(e,0),r=new fm(e,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([t,r],(e=>{n=n.add(e.Cr)}))})),nf.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Yd.isDocumentKey(i)||(i=i.child(""));const s=new fm(new Yd(i),0);let o=new mf(Vd);return this.Mr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Cr)),!0)}),s),nf.resolve(this.Br(o))}Br(e){const t=[];return e.forEach((e=>{const n=this.Or(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Cd(0===this.Lr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Mr;return nf.forEach(t.mutations,(r=>{const i=new fm(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Mr=n}))}qn(e){}containsKey(e,t){const n=new fm(t,0),r=this.Mr.firstAfterOrEqual(n);return nf.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,nf.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e){this.kr=e,this.docs=new ff(Yd.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return nf.resolve(n?n.document.mutableCopy():tg.newInvalidDocument(t))}getEntries(e,t){let n=Vg();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():tg.newInvalidDocument(e))})),nf.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Vg();const s=t.path,o=new Yd(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Zd(Qd(o),n)<=0||(r.has(o.key)||Pg(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return nf.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ed()}qr(e,t){return nf.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new mm(this)}getSize(e){return nf.resolve(this.size)}}class mm extends om{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Ir.addEntry(e,r)):this.Ir.removeEntry(n)})),nf.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e){this.persistence=e,this.Qr=new Rg((e=>Tg(e)),Sg),this.lastRemoteSnapshotVersion=qd.min(),this.highestTargetId=0,this.$r=0,this.Kr=new dm,this.targetCount=0,this.Ur=em.Kn()}forEachTarget(e,t){return this.Qr.forEach(((e,n)=>t(n))),nf.resolve()}getLastRemoteSnapshotVersion(e){return nf.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return nf.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),nf.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),nf.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new em(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,nf.resolve()}updateTargetData(e,t){return this.zn(t),nf.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,nf.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Qr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Qr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),nf.waitFor(i).next((()=>r))}getTargetCount(e){return nf.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return nf.resolve(n)}addMatchingKeys(e,t,n){return this.Kr.yr(t,n),nf.resolve()}removeMatchingKeys(e,t,n){this.Kr.br(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),nf.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),nf.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Kr.vr(t);return nf.resolve(n)}containsKey(e,t){return nf.resolve(this.Kr.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new sf(0),this.zr=!1,this.zr=!0,this.jr=new hm,this.referenceDelegate=e(this),this.Hr=new ym(this),this.indexManager=new Xp,this.remoteDocumentCache=new pm((e=>this.referenceDelegate.Jr(e))),this.serializer=new Wp(t),this.Yr=new um(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new gm(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){bd("MemoryPersistence","Starting transaction:",e);const r=new bm(this.Gr.next());return this.referenceDelegate.Zr(),n(r).next((e=>this.referenceDelegate.Xr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}ei(e,t){return nf.or(Object.values(this.Wr).map((n=>()=>n.containsKey(e,t))))}}class bm extends ef{constructor(e){super(),this.currentSequenceNumber=e}}class Dm{constructor(e){this.persistence=e,this.ti=new dm,this.ni=null}static ri(e){return new Dm(e)}get ii(){if(this.ni)return this.ni;throw Ed()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),nf.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),nf.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),nf.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach((e=>this.ii.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.ii.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nf.forEach(this.ii,(n=>{const r=Yd.fromPath(n);return this.si(e,r).next((e=>{e||t.removeEntry(r,qd.min())}))})).next((()=>(this.ni=null,t.apply(e))))}updateLimboDocument(e,t){return this.si(e,t).next((e=>{e?this.ii.delete(t.toString()):this.ii.add(t.toString())}))}Jr(e){return 0}si(e,t){return nf.or([()=>nf.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class wm{constructor(e,t){this.persistence=e,this.oi=new Rg((e=>function(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=uf(t)),t=lf(e.get(n),t);return uf(t)}(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=function(e,t){return new sm(e,t)}(this,t)}static ri(e,t){return new wm(e,t)}Zr(){}Xr(e){return nf.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}sr(e){let t=0;return this.rr(e,(e=>{t++})).next((()=>t))}rr(e,t){return nf.forEach(this.oi,((n,r)=>this.ar(e,n,r).next((e=>e?nf.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.qr(e,(r=>this.ar(e,r,t).next((e=>{e||(n++,i.removeEntry(r,qd.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),nf.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),nf.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),nf.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),nf.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Kf(e.data.value)),t}ar(e,t,n){return nf.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.oi.get(t);return nf.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=r}static Yi(e,t){let n=Kg(),r=Kg();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new _m(e,t.fromCache,n,r)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=ru()?8:function(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")>0?6:4}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.rs(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ss(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Em;return this._s(e,t,n).next((r=>{if(i.result=r,this.Xi)return this.us(e,t,n,r.size)}))})).next((()=>i.result))}us(e,t,n,r){return n.documentReadCount<this.es?(vd()<=vu.DEBUG&&bd("QueryEngine","SDK will not create cache indexes for query:",Og(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),nf.resolve()):(vd()<=vu.DEBUG&&bd("QueryEngine","Query:",Og(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ts*r?(vd()<=vu.DEBUG&&bd("QueryEngine","The SDK decides to create cache indexes for query:",Og(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ig(t))):nf.resolve())}rs(e,t){if(xg(t))return nf.resolve(null);let n=Ig(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Fg(t,null,"F"),n=Ig(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Kg(...r);return this.ns.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.cs(t,r);return this.ls(t,s,i,n.readTime)?this.rs(e,Fg(t,null,"F")):this.hs(e,s,t,n)}))))})))))}ss(e,t,n,r){return xg(t)||r.isEqual(qd.min())?nf.resolve(null):this.ns.getDocuments(e,n).next((i=>{const s=this.cs(t,i);return this.ls(t,s,n,r)?nf.resolve(null):(vd()<=vu.DEBUG&&bd("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Og(t)),this.hs(e,s,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=qd.fromTimestamp(1e9===r?new $d(n+1,0):new $d(n,r));return new Jd(i,Yd.empty(),t)}(r,-1)).next((e=>e)))}))}cs(e,t){let n=new mf(function(e){return(t,n)=>{let r=!1;for(const i of Ag(e)){const e=Ng(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}(e));return t.forEach(((t,r)=>{Pg(e,r)&&(n=n.add(r))})),n}ls(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}_s(e,t,n){return vd()<=vu.DEBUG&&bd("QueryEngine","Using full collection scan to execute query:",Og(t)),this.ns.getDocumentsMatchingQuery(e,t,Jd.min(),n)}hs(e,t,n,r){return this.ns.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,t,n,r){this.persistence=e,this.Ps=t,this.serializer=r,this.Ts=new ff(Vd),this.Is=new Rg((e=>Tg(e)),Sg),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lm(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ts)))}}async function Sm(e,t){const n=Td(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.As(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Kg();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Rs:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function km(e,t){const n=Td(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}class xm{constructor(){this.activeTargetIds=Xg}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Am{constructor(){this.ho=new xm,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new xm,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{To(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="ConnectivityMonitor";class Lm{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){bd(Fm,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){bd(Fm,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mm=null;function Om(){return null===Mm?Mm=268435456+Math.round(2147483648*Math.random()):Mm++,"0x"+Mm.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Pm="RestConnection",Nm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Rm{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${r}`,this.wo=this.databaseId.database===Mf?`project_id=${n}`:`project_id=${n}&database_id=${r}`}bo(e,t,n,r,i){const s=Om(),o=this.So(e,t.toUriEncodedString());bd(Pm,`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(a,r,i),this.vo(e,o,a,n).then((t=>(bd(Pm,`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw wd(Pm,`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}Co(e,t,n,r,i,s){return this.bo(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+md,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}So(e,t){const n=Nm[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="WebChannelConnection";class Um extends Rm{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,r){const i=Om();return new Promise(((s,o)=>{const a=new id;a.setWithCredentials(!0),a.listenOnce(od.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case ad.NO_ERROR:const t=a.getResponseJson();bd(Vm,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case ad.TIMEOUT:bd(Vm,`RPC '${e}' ${i} timed out`),o(new kd(Sd.DEADLINE_EXCEEDED,"Request time out"));break;case ad.HTTP_ERROR:const n=a.getStatus();if(bd(Vm,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Sd).indexOf(t)>=0?t:Sd.UNKNOWN}(t.status);o(new kd(e,t.message))}else o(new kd(Sd.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new kd(Sd.UNAVAILABLE,"Connection failed."));break;default:Ed()}}finally{bd(Vm,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);bd(Vm,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)}))}Wo(e,t,n){const r=Om(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=hd(),o=cd(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");bd(Vm,`Creating RPC '${e}' stream ${r}: ${u}`,a);const c=s.createWebChannel(u,a);let h=!1,d=!1;const f=new Bm({Fo:t=>{d?bd(Vm,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(bd(Vm,`Opening RPC '${e}' stream ${r} transport.`),c.open(),h=!0),bd(Vm,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},Mo:()=>c.close()}),g=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(t){setTimeout((()=>{throw t}),0)}}))};return g(c,sd.EventType.OPEN,(()=>{d||(bd(Vm,`RPC '${e}' stream ${r} transport opened.`),f.Qo())})),g(c,sd.EventType.CLOSE,(()=>{d||(d=!0,bd(Vm,`RPC '${e}' stream ${r} transport closed`),f.Ko())})),g(c,sd.EventType.ERROR,(t=>{d||(d=!0,wd(Vm,`RPC '${e}' stream ${r} transport errored:`,t),f.Ko(new kd(Sd.UNAVAILABLE,"The operation could not be completed")))})),g(c,sd.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Cd(!!i);const s=i,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){bd(Vm,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=Fp[e];if(void 0!==t)return function(e){if(void 0===e)return Dd("GRPC error has no .code"),Sd.UNKNOWN;switch(e){case Fp.OK:return Sd.OK;case Fp.CANCELLED:return Sd.CANCELLED;case Fp.UNKNOWN:return Sd.UNKNOWN;case Fp.DEADLINE_EXCEEDED:return Sd.DEADLINE_EXCEEDED;case Fp.RESOURCE_EXHAUSTED:return Sd.RESOURCE_EXHAUSTED;case Fp.INTERNAL:return Sd.INTERNAL;case Fp.UNAVAILABLE:return Sd.UNAVAILABLE;case Fp.UNAUTHENTICATED:return Sd.UNAUTHENTICATED;case Fp.INVALID_ARGUMENT:return Sd.INVALID_ARGUMENT;case Fp.NOT_FOUND:return Sd.NOT_FOUND;case Fp.ALREADY_EXISTS:return Sd.ALREADY_EXISTS;case Fp.PERMISSION_DENIED:return Sd.PERMISSION_DENIED;case Fp.FAILED_PRECONDITION:return Sd.FAILED_PRECONDITION;case Fp.ABORTED:return Sd.ABORTED;case Fp.OUT_OF_RANGE:return Sd.OUT_OF_RANGE;case Fp.UNIMPLEMENTED:return Sd.UNIMPLEMENTED;case Fp.DATA_LOSS:return Sd.DATA_LOSS;default:return Ed()}}(t)}(t),i=o.message;void 0===n&&(n=Sd.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Ko(new kd(n,i)),c.close()}else bd(Vm,`RPC '${e}' stream ${r} received:`,i),f.Uo(i)}})),g(o,ud.STAT_EVENT,(t=>{t.stat===ld.PROXY?bd(Vm,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===ld.NOPROXY&&bd(Vm,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.$o()}),0),f}}function zm(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(e){return new Mp(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Ti=e,this.timerId=t,this.Go=n,this.zo=r,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),r=Math.max(0,t-n);r>0&&bd("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,(()=>(this.Yo=Date.now(),e()))),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){null!==this.Jo&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){null!==this.Jo&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="PersistentStream";class Hm{constructor(e,t,n,r,i,s,o,a){this.Ti=e,this.n_=n,this.r_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new $m(e,t)}u_(){return 1===this.state||5===this.state||this.c_()}c_(){return 2===this.state||3===this.state}start(){this.__=0,4!==this.state?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&null===this.s_&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,(()=>this.T_())))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,4!==e?this.a_.reset():t&&t.code===Sd.RESOURCE_EXHAUSTED?(Dd(t.toString()),Dd("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Sd.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.i_===t&&this.V_(e,n)}),(t=>{e((()=>{const e=new kd(Sd.UNKNOWN,"Fetching auth token failed: "+t.message);return this.m_(e)}))}))}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo((()=>{n((()=>this.listener.xo()))})),this.stream.No((()=>{n((()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,(()=>(this.c_()&&(this.state=3),Promise.resolve()))),this.listener.No())))})),this.stream.Lo((e=>{n((()=>this.m_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.__?this.g_(e):this.onNext(e)))}))}l_(){this.state=5,this.a_.Xo((async()=>{this.state=0,this.start()}))}m_(e){return bd(qm,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget((()=>this.i_===e?t():(bd(qm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Gm extends Hm{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Cd(!!e.streamToken),this.lastStreamToken=e.streamToken,Cd(!e.writeResults||0===e.writeResults.length),this.listener.D_()}onNext(e){Cd(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=function(e,t){return e&&e.length>0?(Cd(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Rp(e.updateTime):Rp(t);return n.isEqual(qd.min())&&(n=Rp(t)),new dp(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Rp(e.commitTime);return this.listener.v_(n,t)}C_(){const e={};e.database=function(e){return new Wd(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>function(e,t){let n;if(t instanceof wp)n={update:jp(e,t.key,t.value)};else if(t instanceof Sp)n={delete:Up(e,t.key)};else if(t instanceof _p)n={update:jp(e,t.key,t.data),updateMask:Gp(t.fieldMask)};else{if(!(t instanceof kp))return Ed();n={verify:Up(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof rp)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ip)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof op)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof lp)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Ed()}(0,e)))),t.precondition.isNone||(n.currentDocument=(r=e,void 0!==(i=t.precondition).updateTime?{updateTime:Np(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Ed())),n;var r,i}(this.serializer,e)))};this.I_(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{}class Km extends Wm{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new kd(Sd.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,n,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.bo(e,Vp(t,n),r,i,s))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Sd.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new kd(Sd.UNKNOWN,e.toString())}))}Co(e,t,n,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Co(e,Vp(t,n),r,s,o,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Sd.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new kd(Sd.UNKNOWN,e.toString())}))}terminate(){this.F_=!0,this.connection.terminate()}}class Xm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){0===this.x_&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve()))))}q_(e){"Online"===this.state?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,"Online"===e&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Dd(t),this.N_=!1):bd("OnlineStateTracker",t)}Q_(){null!==this.O_&&(this.O_.cancel(),this.O_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="RemoteStore";class Qm{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To((e=>{n.enqueueAndForget((async()=>{ey(this)&&(bd(Ym,"Restarting streams for network reachability change."),await async function(e){const t=Td(e);t.W_.add(4),await Zm(t),t.j_.set("Unknown"),t.W_.delete(4),await Jm(t)}(this))}))})),this.j_=new Xm(n,r)}}async function Jm(e){if(ey(e))for(const t of e.G_)await t(!0)}async function Zm(e){for(const t of e.G_)await t(!1)}function ey(e){return 0===Td(e).W_.size}async function ty(e,t,n){if(!rf(t))throw t;e.W_.add(1),await Zm(e),e.j_.set("Offline"),n||(n=()=>function(e){const t=Td(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Hr.getLastRemoteSnapshotVersion(e)))}(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{bd(Ym,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await Jm(e)}))}function ny(e,t){return t().catch((n=>ty(e,n,t)))}async function ry(e){const t=Td(e),n=fy(t);let r=t.K_.length>0?t.K_[t.K_.length-1].batchId:-1;for(;iy(t);)try{const e=await km(t.localStore,r);if(null===e){0===t.K_.length&&n.P_();break}r=e.batchId,sy(t,e)}catch(i){await ty(t,i)}oy(t)&&ay(t)}function iy(e){return ey(e)&&e.K_.length<10}function sy(e,t){e.K_.push(t);const n=fy(e);n.c_()&&n.b_&&n.S_(t.mutations)}function oy(e){return ey(e)&&!fy(e).u_()&&e.K_.length>0}function ay(e){fy(e).start()}async function ly(e){fy(e).C_()}async function uy(e){const t=fy(e);for(const n of e.K_)t.S_(n.mutations)}async function cy(e,t,n){const r=e.K_.shift(),i=Ap.from(r,t,n);await ny(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await ry(e)}async function hy(e,t){t&&fy(e).b_&&await async function(e,t){if(function(e){switch(e){case Sd.OK:return Ed();case Sd.CANCELLED:case Sd.UNKNOWN:case Sd.DEADLINE_EXCEEDED:case Sd.RESOURCE_EXHAUSTED:case Sd.INTERNAL:case Sd.UNAVAILABLE:case Sd.UNAUTHENTICATED:return!1;case Sd.INVALID_ARGUMENT:case Sd.NOT_FOUND:case Sd.ALREADY_EXISTS:case Sd.PERMISSION_DENIED:case Sd.FAILED_PRECONDITION:case Sd.ABORTED:case Sd.OUT_OF_RANGE:case Sd.UNIMPLEMENTED:case Sd.DATA_LOSS:return!0;default:return Ed()}}(n=t.code)&&n!==Sd.ABORTED){const n=e.K_.shift();fy(e).h_(),await ny(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await ry(e)}var n}(e,t),oy(e)&&ay(e)}async function dy(e,t){const n=Td(e);n.asyncQueue.verifyOperationInProgress(),bd(Ym,"RemoteStore received new credentials");const r=ey(n);n.W_.add(3),await Zm(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await Jm(n)}function fy(e){return e.Y_||(e.Y_=function(e,t,n){const r=Td(e);return r.M_(),new Gm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:()=>Promise.resolve(),No:ly.bind(null,e),Lo:hy.bind(null,e),D_:uy.bind(null,e),v_:cy.bind(null,e)}),e.G_.push((async t=>{t?(e.Y_.h_(),await ry(e)):(await e.Y_.stop(),e.K_.length>0&&(bd(Ym,`Stopping write stream with ${e.K_.length} pending writes`),e.K_=[]))}))),e.Y_
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class gy{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new xd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new gy(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new kd(Sd.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function py(e,t){if(Dd("AsyncQueue",`${t}: ${e}`),rf(e))return new kd(Sd.UNAVAILABLE,`${t}: ${e}`);throw e}class my{constructor(){this.queries=yy(),this.onlineState="Unknown",this.ia=new Set}terminate(){!function(e,t){const n=Td(e),r=n.queries;n.queries=yy(),r.forEach(((e,n)=>{for(const r of n.ta)r.onError(t)}))}(this,new kd(Sd.ABORTED,"Firestore shutting down"))}}function yy(){return new Rg((e=>Mg(e)),Lg)}var vy,by;(by=vy||(vy={}))._a="default",by.Cache="cache";class Dy{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new Rg((e=>Mg(e)),Lg),this.qa=new Map,this.Qa=new Set,this.$a=new ff(Yd.comparator),this.Ka=new Map,this.Ua=new dm,this.Wa={},this.Ga=new Map,this.za=em.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return!0===this.ja}}async function wy(e,t,n){const r=function(e){const t=Td(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ey.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Cy.bind(null,t),t}(e);try{const e=await function(e,t){const n=Td(e),r=$d.now(),i=t.reduce(((e,t)=>e.add(t.key)),Kg());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Vg(),l=Kg();return n.ds.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=bp(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new _p(e.key,t,eg(t.value.mapValue),fp.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:jg(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Wa[e.currentUser.toKey()];r||(r=new ff(Vd)),r=r.insert(t,n),e.Wa[e.currentUser.toKey()]=r}(r,e.batchId,n),await ky(r,e.changes),await ry(r.remoteStore)}catch(i){const e=py(i,"Failed to persist write");n.reject(e)}}function _y(e,t,n){const r=Td(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ka.forEach(((n,r)=>{const i=r.view.sa(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Td(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.ta)i.sa(t)&&(r=!0)})),r&&function(e){e.ia.forEach((e=>{e.next()}))}(n)}(r.eventManager,t),e.length&&r.La.p_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Ey(e,t){const n=Td(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Td(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ds.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=nf.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Cd(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Kg();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Sy(n,r,null),Ty(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ky(n,e)}catch(i){await tf(i)}}async function Cy(e,t,n){const r=Td(e);try{const e=await function(e,t){const n=Td(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Cd(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Sy(r,t,n),Ty(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ky(r,e)}catch(Le){await tf(Le)}}function Ty(e,t){(e.Ga.get(t)||[]).forEach((e=>{e.resolve()})),e.Ga.delete(t)}function Sy(e,t,n){const r=Td(e);let i=r.Wa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Wa[r.currentUser.toKey()]=i}}async function ky(e,t,n){const r=Td(e),i=[],s=[],o=[];r.ka.isEmpty()||(r.ka.forEach(((e,a)=>{o.push(r.Ha(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){const t=e?!e.fromCache:void 0;r.sharedClientState.updateQueryState(a.targetId,t?"current":"not-current")}if(e){i.push(e);const t=_m.Yi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.La.p_(i),await async function(e,t){const n=Td(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>nf.forEach(t,(t=>nf.forEach(t.Hi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>nf.forEach(t.Ji,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(r){if(!rf(r))throw r;bd("LocalStore","Failed to update sequence numbers: "+r)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.Ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ts=n.Ts.insert(e,i)}}}(r.localStore,s))}async function xy(e,t){const n=Td(e);if(!n.currentUser.isEqual(t)){bd("SyncEngine","User change. New user:",t.toKey());const e=await Sm(n.localStore,t);n.currentUser=t,i="'waitForPendingWrites' promise is rejected due to a user change.",(r=n).Ga.forEach((e=>{e.forEach((e=>{e.reject(new kd(Sd.CANCELLED,i))}))})),r.Ga.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ky(n,e.Rs)}var r,i}class Ay{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jm(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return function(e,t,n,r){return new Tm(e,t,n,r)}(this.persistence,new Cm,e.initialUser,this.serializer)}Xa(e){return new vm(Dm.ri,this.serializer)}Za(e){return new Am}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ay.provider={build:()=>new Ay};class Iy extends Ay{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Cd(this.persistence.referenceDelegate instanceof wm);const n=this.persistence.referenceDelegate.garbageCollector;return new im(n,e.asyncQueue,t)}Xa(e){const t=void 0!==this.cacheSizeBytes?Zp.withCacheSize(this.cacheSizeBytes):Zp.DEFAULT;return new vm((e=>wm.ri(e,t)),this.serializer)}}class Fy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>_y(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=xy.bind(null,this.syncEngine),await async function(e,t){const n=Td(e);t?(n.W_.delete(2),await Jm(n)):t||(n.W_.add(2),await Zm(n),n.j_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new my}createDatastore(e){const t=jm(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Um(r));var r;return function(e,t,n,r){return new Km(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Qm(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>_y(this.syncEngine,e,0)),Lm.D()?new Lm:new Im)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Dy(e,t,n,r,i,s);return o&&(a.ja=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Td(e);bd(Ym,"RemoteStore shutting down."),t.W_.add(5),await Zm(t),t.z_.shutdown(),t.j_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Fy.provider={build:()=>new Fy};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ly="FirestoreClient";class My{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=pd.UNAUTHENTICATED,this.clientId=Bd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{bd(Ly,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(bd(Ly,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=py(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Oy(e,t){e.asyncQueue.verifyOperationInProgress(),bd(Ly,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Sm(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Py(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){bd(Ly,"Using user provided OfflineComponentProvider");try{await Oy(e,e._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!("FirebaseError"===(n=i).name?n.code===Sd.FAILED_PRECONDITION||n.code===Sd.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code))throw i;wd("Error using user provided cache. Falling back to memory cache: "+i),await Oy(e,new Ay)}}else bd(Ly,"Using default OfflineComponentProvider"),await Oy(e,new Iy(void 0));var n;return e._offlineComponents}(e);bd(Ly,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>dy(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>dy(t.remoteStore,n))),e._onlineComponents=t}function Ny(e){return async function(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(bd(Ly,"Using user provided OnlineComponentProvider"),await Py(e,e._uninitializedComponentsProvider._online)):(bd(Ly,"Using default OnlineComponentProvider"),await Py(e,new Fy))),e._onlineComponents}(e).then((e=>e.syncEngine))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const By=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(e,t,n){if(!n)throw new kd(Sd.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Uy(e){if(!Yd.isDocumentKey(e))throw new kd(Sd.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function zy(e){if(Yd.isDocumentKey(e))throw new kd(Sd.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function jy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var t;return"function"==typeof e?"a function":Ed()}function $y(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new kd(Sd.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jy(e);throw new kd(Sd.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="firestore.googleapis.com",Hy=!0;class Gy{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new kd(Sd.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qy,this.ssl=Hy}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Hy;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Jp;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new kd(Sd.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new kd(Sd.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ry(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new kd(Sd.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new kd(Sd.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new kd(Sd.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Wy{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new kd(Sd.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new kd(Sd.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gy(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Id;switch(e.type){case"firstParty":return new Od(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new kd(Sd.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=By.get(e);t&&(bd("ComponentProvider","Removing Datastore"),By.delete(e),t.terminate())}(this),Promise.resolve()}}function Ky(e,t,n,r={}){var i;const s=(e=$y(e,Wy))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:e._getEmulatorOptions()}),a=`${t}:${n}`;s.host!==qy&&s.host!==a&&wd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:r});if(!cu(l,o)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=pd.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Xl(JSON.stringify({alg:"none",type:"JWT"})),Xl(JSON.stringify(s)),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new kd(Sd.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new pd(s)}e._authCredentials=new Fd(new Ad(t,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Xy(this.firestore,e,this._query)}}class Yy{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qy(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yy(this.firestore,e,this._key)}}class Qy extends Xy{constructor(e,t,n){super(e,t,function(e){return new kg(e)}(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yy(this.firestore,null,new Yd(e))}withConverter(e){return new Qy(this.firestore,e,this._path)}}function Jy(e,t,...n){if(e=fu(e),Vy("collection","path",t),e instanceof Wy){const r=Wd.fromString(t,...n);return zy(r),new Qy(e,null,r)}{if(!(e instanceof Yy||e instanceof Qy))throw new kd(Sd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Wd.fromString(t,...n));return zy(r),new Qy(e.firestore,null,r)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Zy="AsyncQueue";class ev{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new $m(this,"async_queue_retry"),this.bu=()=>{const e=zm();e&&bd(Zy,"Visibility state changed to "+e.visibilityState),this.a_.t_()},this.Su=e;const t=zm();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=zm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise((()=>{}));const t=new xd;return this.vu((()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Vu.push(e),this.Cu())))}async Cu(){if(0!==this.Vu.length){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!rf(e))throw e;bd(Zy,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo((()=>this.Cu()))}}vu(e){const t=this.Su.then((()=>(this.pu=!0,e().catch((e=>{this.gu=e,this.pu=!1;throw Dd("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((e=>(this.pu=!1,e))))));return this.Su=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const r=gy.createAndSchedule(this,e,t,n,(e=>this.Fu(e)));return this.fu.push(r),r}Du(){this.gu&&Ed()}verifyOperationInProgress(){}async Mu(){let e;do{e=this.Su,await e}while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then((()=>{this.fu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.fu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Mu()}))}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class tv extends Wy{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new ev,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ev(e),this._firestoreClient=void 0,await e}}}function nv(e){if(e._terminated)throw new kd(Sd.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Lf(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ry(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new My(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e),e._firestoreClient}class rv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rv(Df.fromBase64String(e))}catch(t){throw new kd(Sd.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new rv(Df.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new kd(Sd.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xd(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new kd(Sd.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new kd(Sd.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vd(this._lat,e._lat)||Vd(this._long,e._long)}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv=/^__.*__$/;class uv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new _p(e,this.data,this.fieldMask,t,this.fieldTransforms):new wp(e,this.data,t,this.fieldTransforms)}}function cv(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ed()}}class hv{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new hv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.$u(e),r}Ku(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.Bu(),r}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return _v(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(0===e.length)throw this.Wu("Document fields must not be empty");if(cv(this.Lu)&&lv.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class dv{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||jm(e)}ju(e,t,n,r=!1){return new hv({Lu:e,methodName:t,zu:n,path:Xd.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fv(e){const t=e._freezeSettings(),n=jm(e._databaseId);return new dv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function gv(e,t,n,r,i,s={}){const o=e.ju(s.merge||s.mergeFields?2:0,t,n,i);bv("Data must be an object, but it was:",o,r);const a=yv(r,o);let l,u;if(s.merge)l=new vf(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Dv(t,r,n);if(!o.contains(i))throw new kd(Sd.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Ev(e,i)||e.push(i)}l=new vf(e),u=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=o.fieldTransforms;return new uv(new Zf(a),l,u)}class pv extends sv{_toFieldTransform(e){return new hp(e.path,new rp)}isEqual(e){return e instanceof pv}}function mv(e,t){if(vv(e=fu(e)))return bv("Unsupported field value:",t,e),yv(e,t);if(e instanceof sv)return function(e,t){if(!cv(t.Lu))throw t.Wu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Wu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&4!==t.Lu)throw t.Wu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=mv(i,t.Uu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=fu(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Jg(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=$d.fromDate(e);return{timestampValue:Op(t.serializer,n)}}if(e instanceof $d){const n=new $d(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Op(t.serializer,n)}}if(e instanceof ov)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof rv)return{bytesValue:Pp(t.serializer,e._byteString)};if(e instanceof Yy){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Wu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Bp(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof av)return n=e,r=t,{mapValue:{fields:{[Pf]:{stringValue:Bf},[Vf]:{arrayValue:{values:n.toArray().map((e=>{if("number"!=typeof e)throw r.Wu("VectorValues must only contain numeric values.");return Yg(r.serializer,e)}))}}}}};var n,r;throw t.Wu(`Unsupported field value: ${jy(e)}`)}(e,t)}function yv(e,t){const n={};return df(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):hf(e,((e,r)=>{const i=mv(r,t.qu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function vv(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof $d||e instanceof ov||e instanceof rv||e instanceof Yy||e instanceof sv||e instanceof av)}function bv(e,t,n){if(!vv(n)||("object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))){const r=jy(n);throw"an object"===r?t.Wu(e+" a custom object"):t.Wu(e+" "+r)}var r}function Dv(e,t,n){if((t=fu(t))instanceof iv)return t._internalPath;if("string"==typeof t)return function(e,t,n){if(t.search(wv)>=0)throw _v(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new iv(...t.split("."))._internalPath}catch(r){throw _v(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}(e,t);throw _v("Field path arguments must be of type string or ",e,!1,void 0,n)}const wv=new RegExp("[~\\*/\\[\\]]");function _v(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new kd(Sd.INVALID_ARGUMENT,a+e+l)}function Ev(e,t){return e.some((e=>e.isEqual(t)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(e,t){const n=$y(e.firestore,tv),r=function(e,t,...n){if(e=fu(e),1===arguments.length&&(t=Bd.newId()),Vy("doc","path",t),e instanceof Wy){const r=Wd.fromString(t,...n);return Uy(r),new Yy(e,null,new Yd(r))}{if(!(e instanceof Yy||e instanceof Qy))throw new kd(Sd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Wd.fromString(t,...n));return Uy(r),new Yy(e.firestore,e instanceof Qy?e.converter:null,new Yd(r))}}(e),i=function(e,t){let n;return n=e?e.toFirestore(t):t,n}(e.converter,t);return function(e,t){return function(e,t){const n=new xd;return e.asyncQueue.enqueueAndForget((async()=>wy(await Ny(e),t,n))),n.promise}(nv(e),t)}(n,[gv(fv(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,fp.exists(!1))]).then((()=>r))}function Tv(){return new pv("serverTimestamp")}!function(e,t=!0){md="11.4.0",Cc(new gu("firestore",((e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new tv(new Ld(e.getProvider("auth-internal")),new Nd(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new kd(Sd.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Of(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),Ic(fd,gd,e),Ic(fd,gd,"esm2017")}();const Sv=Vl.getModuleLogger("analytics-service"),kv="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||window.location.search.includes("debug=true");(kv||window.location.search.includes("analytics-debug=true"))&&(window.debugAnalytics=!0);const xv=new class{constructor(){this.analytics=null,this.isInitialized=!1,this.scrollDepthThresholds=[25,50,75,100],this.trackedScrollDepth=new Set,this.sessionStartTime=Date.now(),this.interactionStarted=!1,this.moduleLogger=Sv}async init(e){if(this.isInitialized)return void this.moduleLogger.warn("Analytics service already initialized");this.moduleLogger.info("Initializing Analytics Service");if(!(await Qh()))return this.moduleLogger.warn("Firebase Analytics is not supported in this environment"),void(kv&&this.setupDebugMode());this.analytics=e,this.setupScrollDepthTracking(),this.setupTimeOnPageTracking(),this.trackInitialTrafficSource(),window.debugAnalytics&&this.setupDebugMode(),this.isInitialized=!0}setupDebugMode(){this.moduleLogger.info("Setting up analytics debug mode");let e=document.getElementById("analytics-debug-container");if(!e){e=document.createElement("div"),e.id="analytics-debug-container",Object.assign(e.style,{position:"fixed",bottom:"10px",right:"10px",width:"300px",maxHeight:"400px",overflowY:"auto",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"#0F0",zIndex:"9999",padding:"10px",fontFamily:"monospace",fontSize:"12px",borderRadius:"5px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.5)"});const t=document.createElement("div");t.textContent="Analytics Debug",t.style.fontWeight="bold",t.style.marginBottom="5px",t.style.borderBottom="1px solid #0F0",t.style.paddingBottom="5px",e.appendChild(t);const n=document.createElement("div");n.id="analytics-events",e.appendChild(n),document.body.appendChild(e)}this.debugLogEvent=(e,t)=>{this.moduleLogger.debug(`Analytics Event: ${e}`,t);const n=document.getElementById("analytics-events");if(n){const r=document.createElement("div");r.style.marginBottom="8px",r.style.borderBottom="1px dotted #333",r.style.paddingBottom="3px";const i=(new Date).toLocaleTimeString(),s=document.createElement("span");s.textContent=`[${i}] `,s.style.color="#AAA",r.appendChild(s);const o=document.createElement("span");o.textContent=`${e}: `,o.style.color="#FFF",o.style.fontWeight="bold",r.appendChild(o);const a=document.createElement("span");for(a.textContent=JSON.stringify(t),r.appendChild(a),n.insertBefore(r,n.firstChild);n.children.length>20;)n.removeChild(n.lastChild)}this.analytics&&Zh(this.analytics,e,t)},this.debugSetUserProperties=e=>{this.moduleLogger.debug("Analytics User Properties:",e);const t=document.getElementById("analytics-events");if(t){const n=document.createElement("div");n.style.marginBottom="8px",n.style.borderBottom="1px dotted #333",n.style.paddingBottom="3px",n.style.color="#F0F";const r=(new Date).toLocaleTimeString(),i=document.createElement("span");i.textContent=`[${r}] `,i.style.color="#AAA",n.appendChild(i);const s=document.createElement("span");s.textContent="User Properties: ",s.style.color="#F0F",s.style.fontWeight="bold",n.appendChild(s);const o=document.createElement("span");o.textContent=JSON.stringify(e),n.appendChild(o),t.insertBefore(n,t.firstChild)}this.analytics&&Jh(this.analytics,e)}}trackInitialTrafficSource(){try{const e=this.getTrafficSource();this.moduleLogger.debug("Tracking traffic source",{source:e});const t={page_title:document.title,page_location:window.location.href,traffic_source:e};this.debugLogEvent?this.debugLogEvent("page_view",t):this.analytics&&Zh(this.analytics,"page_view",t)}catch(e){this.moduleLogger.error("Error tracking traffic source",e)}}getTrafficSource(){const e=new URLSearchParams(window.location.search),t=e.get("utm_source"),n=e.get("utm_medium"),r=e.get("utm_campaign");if(t)return`${t}${n?"_"+n:""}${r?"_"+r:""}`;const i=document.referrer;if(!i)return"direct";try{const e=new URL(i).hostname;return e.includes("google")?"organic_google":e.includes("bing")?"organic_bing":e.includes("facebook")||e.includes("fb.com")?"social_facebook":e.includes("twitter")||e.includes("t.co")?"social_twitter":e.includes("linkedin")?"social_linkedin":e.includes("instagram")?"social_instagram":e.includes("youtube")?"social_youtube":`referral_${e}`}catch(s){return this.moduleLogger.error("Error parsing referrer",s),"unknown"}}setupScrollDepthTracking(){this.moduleLogger.debug("Setting up scroll depth tracking"),window.addEventListener("scroll",this.debounce((()=>{if(!this.analytics)return;const e=document.documentElement.scrollHeight,t=document.documentElement.clientHeight,n=window.scrollY,r=Math.floor(n/(e-t)*100);this.scrollDepthThresholds.forEach((e=>{if(r>=e&&!this.trackedScrollDepth.has(e)){this.trackedScrollDepth.add(e),this.moduleLogger.debug(`User reached ${e}% scroll depth`);const t={depth_percentage:e,page_title:document.title};this.debugLogEvent?this.debugLogEvent("scroll_depth",t):this.analytics&&Zh(this.analytics,"scroll_depth",t)}}))}),500))}setupTimeOnPageTracking(){this.moduleLogger.debug("Setting up time on page tracking"),window.addEventListener("beforeunload",(()=>{if(!this.analytics)return;const e=Math.floor((Date.now()-this.sessionStartTime)/1e3);this.moduleLogger.debug(`User spent ${e} seconds on page`);const t={time_seconds:e,page_title:document.title,interaction_occurred:this.interactionStarted};this.debugLogEvent?this.debugLogEvent("session_duration",t):this.analytics&&Zh(this.analytics,"session_duration",t)}));const e=["click","scroll","keypress"],t=()=>{if(!this.interactionStarted){this.interactionStarted=!0;const n=Math.floor((Date.now()-this.sessionStartTime)/1e3);this.moduleLogger.debug(`User started engaging after ${n} seconds`);const r={time_to_engage_seconds:n};this.debugLogEvent?this.debugLogEvent("first_interaction",r):this.analytics&&Zh(this.analytics,"first_interaction",r),e.forEach((e=>{document.removeEventListener(e,t)}))}};e.forEach((e=>{document.addEventListener(e,t)}))}trackWaitlistSignup(e,t={}){if(this.analytics||this.debugLogEvent)try{const n=e.split("@")[1];this.moduleLogger.debug("Tracking waitlist signup",{emailDomain:n,hasAdditionalData:Object.keys(t).length>0});const r={email_domain:n,locale:t.locale||"unknown",form_name:"waitlist_signup",website_version:t.version||"unknown"},i={signed_up:!0,signup_date:(new Date).toISOString().split("T")[0],preferred_language:t.locale||"unknown",website_version:t.version||"unknown"};this.debugLogEvent?(this.debugLogEvent("generate_lead",r),this.debugSetUserProperties(i)):this.analytics&&(Zh(this.analytics,"generate_lead",r),Jh(this.analytics,i))}catch(n){this.moduleLogger.error("Error tracking waitlist signup",n)}else this.moduleLogger.warn("Analytics not initialized, cannot track waitlist signup")}trackFeedbackSubmission(e,t={}){if(this.analytics||this.debugLogEvent)try{this.moduleLogger.debug("Tracking feedback submission",{feedbackLength:e,hasAdditionalData:Object.keys(t).length>0});const n={feedback_length:e,locale:t.locale||"unknown",website_version:t.version||"unknown"};this.debugLogEvent?this.debugLogEvent("submit_feedback",n):this.analytics&&Zh(this.analytics,"submit_feedback",n)}catch(n){this.moduleLogger.error("Error tracking feedback submission",n)}else this.moduleLogger.warn("Analytics not initialized, cannot track feedback")}trackCTAClick(e,t,n,r={}){if(this.analytics||this.debugLogEvent)try{this.moduleLogger.debug("Tracking CTA click",{ctaId:e,ctaLocation:n});const i={content_type:"cta",content_id:e,content_text:t,content_location:n,website_version:r.version||"unknown"};this.debugLogEvent?this.debugLogEvent("select_content",i):this.analytics&&Zh(this.analytics,"select_content",i)}catch(i){this.moduleLogger.error("Error tracking CTA click",i)}else this.moduleLogger.warn("Analytics not initialized, cannot track CTA click")}trackLanguageChange(e,t,n={}){if(this.analytics||this.debugLogEvent)try{this.moduleLogger.debug("Tracking language change",{previousLocale:e,newLocale:t});const r={previous_language:e,new_language:t,website_version:n.version||"unknown"},i={preferred_language:t};this.debugLogEvent?(this.debugLogEvent("language_change",r),this.debugSetUserProperties(i)):this.analytics&&(Zh(this.analytics,"language_change",r),Jh(this.analytics,i))}catch(r){this.moduleLogger.error("Error tracking language change",r)}else this.moduleLogger.warn("Analytics not initialized, cannot track language change")}trackSectionView(e,t,n={}){if(this.analytics||this.debugLogEvent)try{this.moduleLogger.debug("Tracking section view",{sectionId:e,sectionName:t});const r={section_id:e,section_name:t,website_version:n.version||"unknown"};this.debugLogEvent?this.debugLogEvent("view_section",r):this.analytics&&Zh(this.analytics,"view_section",r)}catch(r){this.moduleLogger.error("Error tracking section view",r)}else this.moduleLogger.warn("Analytics not initialized, cannot track section view")}trackWebsiteVersion(e){if(this.analytics||this.debugLogEvent)try{this.moduleLogger.debug("Tracking website version",{version:e});const t={website_version:e,assignment_type:"initial"},n={website_version:e};this.debugLogEvent?(this.debugLogEvent("website_version_view",t),this.debugSetUserProperties(n)):this.analytics&&(Zh(this.analytics,"website_version_view",t),Jh(this.analytics,n))}catch(t){this.moduleLogger.error("Error tracking website version",t)}else this.moduleLogger.warn("Analytics not initialized, cannot track website version")}trackWebsiteVersionChange(e){if(this.analytics||this.debugLogEvent)try{this.moduleLogger.debug("Tracking website version change",{version:e});const t={website_version:e,assignment_type:"manual_change"},n={website_version:e};this.debugLogEvent?(this.debugLogEvent("website_version_change",t),this.debugSetUserProperties(n)):this.analytics&&(Zh(this.analytics,"website_version_change",t),Jh(this.analytics,n))}catch(t){this.moduleLogger.error("Error tracking website version change",t)}else this.moduleLogger.warn("Analytics not initialized, cannot track website version change")}debounce(e,t){let n;return function(...r){clearTimeout(n),n=setTimeout((()=>{clearTimeout(n),e(...r)}),t)}}},Av={apiKey:"AIzaSyAK2d6xeIebK9oX6uvEEX724r6rL5cABWk",authDomain:"jynx-app-landing-page.firebaseapp.com",projectId:"jynx-app-landing-page",storageBucket:"jynx-app-landing-page.firebasestorage.app",messagingSenderId:"983342272821",appId:"1:983342272821:web:8a34575722725feddd7c7c"},Iv=Vl.getModuleLogger("firebase-service");let Fv,Lv,Mv;try{Fv=xc(Av);try{Mv=function(e){const t="object"==typeof e?e:Ac(),n="string"==typeof e?e:Mf,r=Tc(t,"firestore").getImmediate({identifier:n});if(!r._initialized){const e=Zl("firestore");e&&Ky(r,...e)}return r}(Fv)}catch(Zv){Iv.error("Firestore initialization failed",Zv),Mv={collection:()=>({add:()=>Promise.resolve({id:"offline-mode"})})}}const e=()=>{try{Lv=Yh(Fv),xv.init(Lv).catch((e=>{Iv.warn("Analytics initialization failed, continuing without analytics",e)}))}catch(e){Iv.warn("Analytics initialization failed",e),Lv={logEvent:()=>{}}}};Qh().then((t=>{t?e():Iv.warn("Analytics not supported in this environment")})).catch((t=>{Iv.warn("Error checking analytics support",t),e()})),Iv.info("Firebase service initialized successfully")}catch(eb){Iv.error("Failed to initialize Firebase",eb),Fv={},Lv={logEvent:()=>{}},Mv={collection:()=>({add:()=>Promise.resolve({id:"offline-mode"})})}}const Ov={app:Fv,db:Mv,analytics:Lv,addToWaitlist:async function(e,t={}){Iv.info("Adding email to waitlist",{email:e.substring(0,3)+"..."});try{Iv.time("waitlist-submission");const n=await Cv(Jy(Mv,"waitlist"),{email:e,...t,timestamp:Tv(),source:window.location.href,userAgent:navigator.userAgent,browserLanguage:navigator.language||navigator.userLanguage});return Iv.timeEnd("waitlist-submission"),Iv.info("Email added to waitlist successfully",{docId:n.id}),xv.trackWaitlistSignup(e,t),{success:!0,id:n.id}}catch(eb){throw Iv.error("Error adding email to waitlist",eb),eb}},submitFeedback:async function(e,t={}){Iv.info("Submitting feedback",{feedbackLength:e.length,feedbackPreview:e.substring(0,20)+(e.length>20?"...":"")});try{Iv.time("feedback-submission");const n=await Cv(Jy(Mv,"feedback"),{feedback:e,...t,timestamp:Tv(),source:window.location.href,userAgent:navigator.userAgent,browserLanguage:navigator.language||navigator.userLanguage,pathname:window.location.pathname});return Iv.timeEnd("feedback-submission"),Iv.info("Feedback submitted successfully",{docId:n.id}),xv.trackFeedbackSubmission(e.length,t),{success:!0,id:n.id}}catch(eb){throw Iv.error("Error submitting feedback",eb),eb}}},Pv=Vl.getModuleLogger("form-error-handler");const Nv=new class{constructor(){this.errorKeys={"permission-denied":"form.errors.permission_denied","invalid-argument":"form.errors.invalid_argument","not-found":"form.errors.not_found",unavailable:"form.errors.server_unavailable","resource-exhausted":"form.errors.too_many_requests",internal:"form.errors.server_error","network-error":"form.errors.network_error",timeout:"form.errors.timeout","invalid-email":"form.errors.invalid_email","empty-field":"form.errors.empty_field",default:"form.errors.default"}}handleError(e,t,n={}){Pv.error("Form error",e);const r={clearOnFocus:!0,associatedInput:null,...n},i=e.code&&e.code.split("/")[1]||e.code||e.name||"default",s=this.getErrorMessage(i,e.message);return t&&(t.textContent=s,t.setAttribute("role","alert"),t.classList.add("active"),r.clearOnFocus&&r.associatedInput&&r.associatedInput.addEventListener("focus",(()=>{t.textContent="",t.classList.remove("active"),t.removeAttribute("role")}),{once:!0})),s}getErrorMessage(t,n){if(this.errorKeys[t])return e.translate(this.errorKeys[t]);for(const r in this.errorKeys)if(t.includes(r))return e.translate(this.errorKeys[r]);return Pv.debug("Unknown error code, using fallback",{code:t,fallback:!!n}),n||e.translate(this.errorKeys.default)}};const Rv=new class{constructor(){this.isInitialized=!1,this.logger=Vl.getModuleLogger("form-manager"),this.logger.info("FormManager instance created")}init(){if(this.isInitialized)this.logger.warn("FormManager already initialized");else{this.logger.time("form-manager-initialization"),this.logger.info("Initializing form manager");try{this.logger.debug("Setting up forms"),this.setupForms(),this.logger.debug("Setting up feedback system"),this.setupFeedbackSystem(),this.logger.info("Form manager initialization complete")}catch(e){this.logger.error("Form manager initialization failed",e)}finally{this.isInitialized=!0,this.logger.timeEnd("form-manager-initialization")}}}setupForms(){this.logger.debug("Setting up form handlers");const t=document.getElementById("signup-form"),n=document.getElementById("email"),r=document.getElementById("email-error");this.logger.debug("Form elements:",{signupFormFound:!!t,emailInputFound:!!n,emailErrorFound:!!r}),t?(this.logger.debug("Adding event listener to signup form"),t.addEventListener("submit",(async i=>{i.preventDefault(),this.logger.debug("Signup form submitted");const s=n.value.trim();if(this.logger.debug("Validating email",{email:s.substring(0,3)+"..."}),!this.validateEmail(s))return this.logger.debug("Email validation failed"),r.textContent=e.translate("form.email.error"),void n.focus();r.textContent="",this.logger.debug("Email validation passed, proceeding with submission");try{const n=t.querySelector('button[type="submit"]');jl(n,e.translate("form.submitting")),this.logger.debug("Form in submission state"),this.logger.time("form-submission");const r=await this.submitWaitlistEmail(s);this.logger.timeEnd("form-submission"),this.logger.info("Form submission successful",{email:s.substring(0,3)+"...",success:r.success,duration:r.duration+"ms"}),this.logger.debug("Animating form success state"),Ul.setupFormAnimation(t,(()=>{t.innerHTML=`<div class="success-message">${e.translate("form.success")}</div>`;const n=t.querySelector(".success-message");n&&(n.style.opacity="0",n.style.transform="translateY(20px)",n.style.transition="opacity 0.6s ease-out, transform 0.6s ease-out",requestAnimationFrame((()=>{n.style.opacity="1",n.style.transform="translateY(0)"}))),this.logger.debug("Success message displayed")}))}catch(eb){this.logger.error("Form submission error:",eb);const i=t.querySelector('button[type="submit"]');$l(i),Nv.handleError(eb,r,{clearOnFocus:!0,associatedInput:n})}}))):this.logger.warn("Signup form not found, form handlers not initialized"),ql()}setupFeedbackSystem(){this.logger.debug("Setting up feedback system");const t=document.getElementById("feedback-form"),n=document.getElementById("feedback-thanks");this.logger.debug("Feedback elements:",{feedbackFormFound:!!t,feedbackThanksFound:!!n}),t?(this.logger.debug("Setting up feedback form"),t.style.opacity="1",t.style.height="auto",this.logger.debug("Feedback form is always visible"),t.addEventListener("submit",(async r=>{r.preventDefault(),this.logger.debug("Feedback form submitted");const i=document.getElementById("feedback-text").value.trim();if(i){this.logger.debug("Feedback text provided, length:",i.length);try{const r=t.querySelector('button[type="submit"]');jl(r,e.translate("feedback.submitting")),this.logger.debug("Feedback form in submission state"),this.logger.time("feedback-submission");const s=await this.submitFeedback(i);this.logger.timeEnd("feedback-submission"),this.logger.info("Feedback submission successful",{type:"positive",textLength:i.length,success:s.success}),this.logger.debug("Animating feedback form out"),t.style.transition="height 0.5s ease-in, opacity 0.5s ease-in",t.style.height=t.scrollHeight+"px",requestAnimationFrame((()=>{t.style.height="0",t.style.opacity="0",t.addEventListener("transitionend",(()=>{t.classList.add("hidden"),t.reset(),this.logger.trace("Feedback form hidden and reset"),this.logger.debug("Animating thanks message in"),n.style.opacity="0",n.style.transform="scale(0.9)",n.style.transition="opacity 0.5s ease-out, transform 0.5s ease-out",n.classList.remove("hidden"),requestAnimationFrame((()=>{n.style.opacity="1",n.style.transform="scale(1)",this.logger.debug("Thanks message shown, scheduling auto-hide"),setTimeout((()=>{n.style.opacity="0",n.style.transform="scale(0.9)",n.addEventListener("transitionend",(()=>{n.classList.add("hidden"),$l(r),this.logger.debug("Reset feedback UI state")}),{once:!0})}),3e3)}))}))}))}catch(eb){this.logger.error("Feedback submission error:",eb);const n=t.querySelector('button[type="submit"]');$l(n);const r=document.createElement("div");r.classList.add("error-message"),t.appendChild(r),Nv.handleError(eb,r),setTimeout((()=>{r.parentNode&&r.parentNode.removeChild(r)}),5e3)}}else this.logger.debug("Empty feedback text, submission ignored")}))):this.logger.warn("Some feedback elements not found, feedback system not fully initialized")}validateEmail(e){this.logger.trace("Validating email format");return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}async submitWaitlistEmail(t){this.logger.debug("Submitting email to waitlist",{email:t.substring(0,3)+"..."});try{let r="en";try{r=e.getCurrentLocale()}catch(n){r=(navigator.language||navigator.userLanguage||"en").split("-")[0],this.logger.warn("Could not get current locale, using fallback",{locale:r})}const i={uiLanguage:r};return await Ov.addToWaitlist(t,i)}catch(eb){throw this.logger.error("Waitlist submission error",eb),eb}}async submitFeedback(t){this.logger.debug("Submitting feedback",{feedbackLength:t.length});try{let r="en";try{r=e.getCurrentLocale()}catch(n){r=(navigator.language||navigator.userLanguage||"en").split("-")[0],this.logger.warn("Could not get current locale, using fallback",{locale:r})}const i={uiLanguage:r};return await Ov.submitFeedback(t,i)}catch(eb){throw this.logger.error("Feedback submission error",eb),eb}}},Bv=Vl.getModuleLogger("animation-helper");const Vv={restartAllAnimations:function(){Bv.info("Restarting all animations"),document.querySelectorAll(".animated").forEach((e=>{e.classList.remove("animated")})),document.body.offsetHeight,setTimeout((()=>{document.querySelectorAll(".will-animate").forEach((e=>{e.classList.add("animated")})),Bv.debug("All animations restarted")}),50)}};const Uv=new class{constructor(){this.isReady=!1,this.domReady=!1,this.stylesReady=!1,this.resourcesLoaded=!1,this.readyCallbacks=[],this.backgroundLoadCallbacks=[]}init(){document.documentElement.classList.add("js-loading"),document.addEventListener("DOMContentLoaded",(()=>{this.domReady=!0,this.checkReady()})),this.trackStylesheets(),this.setMaxLoadingTime(3e3)}trackStylesheets(){if(0===Array.from(document.styleSheets).length)return this.stylesReady=!0,void this.checkReady();const e=()=>{Array.from(document.styleSheets).every((e=>{try{return null!==e.cssRules}catch(t){return"SecurityError"===t.name}}))?(this.stylesReady=!0,this.checkReady()):setTimeout(e,50)};e()}setMaxLoadingTime(e){setTimeout((()=>{this.isReady||(console.warn("Maximum loading time reached, forcing ready state"),this.forceReady())}),e)}forceReady(){this.isReady=!0,this.domReady=!0,this.stylesReady=!0,this.resourcesLoaded=!0,document.documentElement.classList.remove("js-loading"),document.body.classList.remove("loading-state"),this.executeReadyCallbacks(),this.executeBackgroundLoadCallbacks()}resourcesComplete(){this.resourcesLoaded=!0,this.checkReady(),this.executeBackgroundLoadCallbacks()}checkReady(){this.domReady&&this.stylesReady&&this.resourcesLoaded&&!this.isReady&&(this.isReady=!0,document.documentElement.classList.remove("js-loading"),document.body.classList.remove("loading-state"),this.executeReadyCallbacks())}onReady(e){this.isReady?e():this.readyCallbacks.push(e)}onBackgroundLoadSafe(e){if(this.resourcesLoaded)try{e()}catch(eb){console.error("Error executing background load callback:",eb)}else this.backgroundLoadCallbacks.push(e)}executeReadyCallbacks(){this.readyCallbacks.forEach((e=>{try{e()}catch(eb){console.error("Error executing ready callback",eb)}})),this.readyCallbacks=[]}executeBackgroundLoadCallbacks(){this.backgroundLoadCallbacks.forEach((e=>{try{e()}catch(eb){console.error("Error executing background load callback",eb)}})),this.backgroundLoadCallbacks=[]}};const zv=new class{constructor(){this.log=Vl.getModuleLogger("loading-transition"),this.initialized=!1,this.languageReady=!1,this.uiReady=!1,this.transitionStarted=!1}init(){this.initialized?this.log.warn("LoadingTransitionManager already initialized"):(this.log.info("Initializing loading transition manager"),e.addObserver((()=>{this.languageReady=!0,this.checkReadyState()})),window.addEventListener("DOMContentLoaded",(()=>{this.uiReady=!0,this.checkReadyState()})),Uv.onReady((()=>{this.log.debug("Page loader signaled ready state"),this.startTransition()})),this.fallbackTimeout=setTimeout((()=>{this.log.warn("Fallback timeout reached, forcing transition"),this.startTransition()}),3e3),this.initialized=!0,this.log.info("Loading transition manager initialized"))}checkReadyState(){this.log.debug(`Ready state check - Language: ${this.languageReady}, UI: ${this.uiReady}`),this.languageReady&&this.uiReady&&!this.transitionStarted&&setTimeout((()=>{this.startTransition()}),800)}startTransition(){this.transitionStarted||(this.transitionStarted=!0,clearTimeout(this.fallbackTimeout),this.log.info("Starting transition to loaded state"),requestAnimationFrame((()=>{document.documentElement.classList.remove("js-loading"),document.body.classList.remove("loading-state"),document.body.classList.add("loaded"),setTimeout((()=>{this.log.debug("Transition complete, triggering animations"),Vv.restartAllAnimations(),document.dispatchEvent(new CustomEvent("loading-transition-complete"))}),500)})))}};class jv{constructor(e="localStorage"){this.storageType=e}saveItem(e,t){try{switch(this.storageType){case"localStorage":localStorage.setItem(e,t);break;case"sessionStorage":sessionStorage.setItem(e,t);break;case"cookie":document.cookie=`${e}=${t};path=/;max-age=31536000`;break;default:return console.error(`Unsupported storage type: ${this.storageType}`),!1}return!0}catch(eb){return console.error(`Error saving item to ${this.storageType}:`,eb),!1}}getItem(e){try{switch(this.storageType){case"localStorage":return localStorage.getItem(e);case"sessionStorage":return sessionStorage.getItem(e);case"cookie":const t=document.cookie.match(new RegExp(`(^| )${e}=([^;]+)`));return t?t[2]:null;default:return console.error(`Unsupported storage type: ${this.storageType}`),null}}catch(eb){return console.error(`Error retrieving item from ${this.storageType}:`,eb),null}}removeItem(e){try{switch(this.storageType){case"localStorage":localStorage.removeItem(e);break;case"sessionStorage":sessionStorage.removeItem(e);break;case"cookie":document.cookie=`${e}=;path=/;max-age=0`;break;default:return console.error(`Unsupported storage type: ${this.storageType}`),!1}return!0}catch(eb){return console.error(`Error removing item from ${this.storageType}:`,eb),!1}}}const $v={default:"cyberpunkBlue",alternate:"neonPurple"},qv={cyberpunkBlue:{id:"cyberpunkBlue",name:"Cyberpunk Blue",cssVariables:{"--color-primary":"#2563eb","--color-primary-hover":"#1d4ed8","--color-secondary":"#7c3aed","--color-secondary-hover":"#6d28d9","--color-neon":"#4ade80","--color-neon-glow":"rgba(74, 222, 128, 0.5)","--color-electric-purple":"#8b31ff","--color-electric-blue":"#4361ee","--color-dark":"#050510","--color-background":"#070718","--color-surface":"#0f0f1e","--color-surface-lighter":"#12122a","--gradient-cyberpunk":"linear-gradient(135deg, #2563eb 0%, #7c3aed 100%)","--gradient-hero":"radial-gradient(circle at center, rgba(74, 222, 128, 0.2) 0%, rgba(37, 99, 235, 0.15) 50%, transparent 100%)","--shadow-neon":"0 0 15px rgba(74, 222, 128, 0.5)","--shadow-neon-intense":"0 0 10px rgba(74, 222, 128, 0.7), 0 0 20px rgba(74, 222, 128, 0.5), 0 0 30px rgba(74, 222, 128, 0.3)","--noise-overlay-color":"rgba(7, 7, 24, 0.3)","--floor-background":"radial-gradient(ellipse at center, rgba(37, 99, 235, 0.1) 0%, transparent 80%)"}},neonPurple:{id:"neonPurple",name:"Neon Purple",cssVariables:{"--color-primary":"#7c3aed","--color-primary-hover":"#6d28d9","--color-secondary":"#ec4899","--color-secondary-hover":"#db2777","--color-neon":"#eab308","--color-neon-glow":"rgba(234, 179, 8, 0.5)","--color-electric-purple":"#8b31ff","--color-electric-blue":"#4361ee","--color-dark":"#0f0921","--color-background":"#110a29","--color-surface":"#1a0f38","--color-surface-lighter":"#231352","--gradient-cyberpunk":"linear-gradient(135deg, #7c3aed 0%, #ec4899 100%)","--gradient-hero":"radial-gradient(circle at center, rgba(234, 179, 8, 0.2) 0%, rgba(124, 58, 237, 0.15) 50%, transparent 100%)","--shadow-neon":"0 0 15px rgba(234, 179, 8, 0.5)","--shadow-neon-intense":"0 0 10px rgba(234, 179, 8, 0.7), 0 0 20px rgba(234, 179, 8, 0.5), 0 0 30px rgba(234, 179, 8, 0.3)","--noise-overlay-color":"rgba(15, 9, 33, 0.3)","--floor-background":"radial-gradient(ellipse at center, rgba(124, 58, 237, 0.1) 0%, transparent 80%)"}},retroWave:{id:"retroWave",name:"Retro Wave",cssVariables:{"--color-primary":"#ff2a6d","--color-primary-hover":"#e01e5a","--color-secondary":"#05d9e8","--color-secondary-hover":"#00b5c4","--color-neon":"#d1f7ff","--color-neon-glow":"rgba(209, 247, 255, 0.5)","--color-electric-purple":"#b83dba","--color-electric-blue":"#05d9e8","--color-dark":"#1a1a2e","--color-background":"#212136","--color-surface":"#2b2b46","--color-surface-lighter":"#3a3a5c","--gradient-cyberpunk":"linear-gradient(135deg, #ff2a6d 0%, #05d9e8 100%)","--gradient-hero":"radial-gradient(circle at center, rgba(209, 247, 255, 0.2) 0%, rgba(255, 42, 109, 0.15) 50%, transparent 100%)","--shadow-neon":"0 0 15px rgba(209, 247, 255, 0.5)","--shadow-neon-intense":"0 0 10px rgba(209, 247, 255, 0.7), 0 0 20px rgba(209, 247, 255, 0.5), 0 0 30px rgba(209, 247, 255, 0.3)","--noise-overlay-color":"rgba(26, 26, 46, 0.3)","--floor-background":"radial-gradient(ellipse at center, rgba(255, 42, 109, 0.1) 0%, transparent 80%)"}},cyberRed:{id:"cyberRed",name:"Cyber Red",cssVariables:{"--color-primary":"#ef4444","--color-primary-hover":"#dc2626","--color-secondary":"#3b82f6","--color-secondary-hover":"#2563eb","--color-neon":"#22d3ee","--color-neon-glow":"rgba(34, 211, 238, 0.5)","--color-electric-purple":"#8b5cf6","--color-electric-blue":"#60a5fa","--color-dark":"#18181b","--color-background":"#27272a","--color-surface":"#3f3f46","--color-surface-lighter":"#52525b","--gradient-cyberpunk":"linear-gradient(135deg, #ef4444 0%, #3b82f6 100%)","--gradient-hero":"radial-gradient(circle at center, rgba(34, 211, 238, 0.2) 0%, rgba(239, 68, 68, 0.15) 50%, transparent 100%)","--shadow-neon":"0 0 15px rgba(34, 211, 238, 0.5)","--shadow-neon-intense":"0 0 10px rgba(34, 211, 238, 0.7), 0 0 20px rgba(34, 211, 238, 0.5), 0 0 30px rgba(34, 211, 238, 0.3)","--noise-overlay-color":"rgba(24, 24, 27, 0.3)","--floor-background":"radial-gradient(ellipse at center, rgba(239, 68, 68, 0.1) 0%, transparent 80%)"}},neonGreen:{id:"neonGreen",name:"Neon Green",cssVariables:{"--color-primary":"#10b981","--color-primary-hover":"#059669","--color-secondary":"#8b5cf6","--color-secondary-hover":"#7c3aed","--color-neon":"#fef08a","--color-neon-glow":"rgba(254, 240, 138, 0.5)","--color-electric-purple":"#8b5cf6","--color-electric-blue":"#3b82f6","--color-dark":"#064e3b","--color-background":"#065f46","--color-surface":"#047857","--color-surface-lighter":"#059669","--gradient-cyberpunk":"linear-gradient(135deg, #10b981 0%, #8b5cf6 100%)","--gradient-hero":"radial-gradient(circle at center, rgba(254, 240, 138, 0.2) 0%, rgba(16, 185, 129, 0.15) 50%, transparent 100%)","--shadow-neon":"0 0 15px rgba(254, 240, 138, 0.5)","--shadow-neon-intense":"0 0 10px rgba(254, 240, 138, 0.7), 0 0 20px rgba(254, 240, 138, 0.5), 0 0 30px rgba(254, 240, 138, 0.3)","--noise-overlay-color":"rgba(6, 78, 59, 0.3)","--floor-background":"radial-gradient(ellipse at center, rgba(16, 185, 129, 0.1) 0%, transparent 80%)"}},magentaFusion:{id:"magentaFusion",name:"Magenta Fusion",cssVariables:{"--color-primary":"#e879f9","--color-primary-hover":"#d946ef","--color-secondary":"#2dd4bf","--color-secondary-hover":"#14b8a6","--color-neon":"#bae6fd","--color-neon-glow":"rgba(186, 230, 253, 0.5)","--color-electric-purple":"#d8b4fe","--color-electric-blue":"#7dd3fc","--color-dark":"#701a75","--color-background":"#86198f","--color-surface":"#a21caf","--color-surface-lighter":"#c026d3","--gradient-cyberpunk":"linear-gradient(135deg, #e879f9 0%, #2dd4bf 100%)","--gradient-hero":"radial-gradient(circle at center, rgba(186, 230, 253, 0.2) 0%, rgba(232, 121, 249, 0.15) 50%, transparent 100%)","--shadow-neon":"0 0 15px rgba(186, 230, 253, 0.5)","--shadow-neon-intense":"0 0 10px rgba(186, 230, 253, 0.7), 0 0 20px rgba(186, 230, 253, 0.5), 0 0 30px rgba(186, 230, 253, 0.3)","--noise-overlay-color":"rgba(112, 26, 117, 0.3)","--floor-background":"radial-gradient(ellipse at center, rgba(232, 121, 249, 0.1) 0%, transparent 80%)"}},midnightElegance:{id:"midnightElegance",name:"Midnight Elegance",cssVariables:{"--color-primary":"#4f46e5","--color-primary-hover":"#4338ca","--color-secondary":"#94a3b8","--color-secondary-hover":"#64748b","--color-neon":"#e2e8f0","--color-neon-glow":"rgba(226, 232, 240, 0.5)","--color-electric-purple":"#6366f1","--color-electric-blue":"#3b82f6","--color-dark":"#0f172a","--color-background":"#1e293b","--color-surface":"#334155","--color-surface-lighter":"#475569","--gradient-cyberpunk":"linear-gradient(135deg, #4f46e5 0%, #94a3b8 100%)","--gradient-hero":"radial-gradient(circle at center, rgba(226, 232, 240, 0.1) 0%, rgba(79, 70, 229, 0.05) 50%, transparent 100%)","--shadow-neon":"0 0 15px rgba(226, 232, 240, 0.3)","--shadow-neon-intense":"0 0 10px rgba(226, 232, 240, 0.4), 0 0 20px rgba(226, 232, 240, 0.3), 0 0 30px rgba(226, 232, 240, 0.2)","--noise-overlay-color":"rgba(15, 23, 42, 0.2)","--floor-background":"radial-gradient(ellipse at center, rgba(79, 70, 229, 0.05) 0%, transparent 80%)"}},modernSlate:{id:"modernSlate",name:"Modern Slate",cssVariables:{"--color-primary":"#0ea5e9","--color-primary-hover":"#0284c7","--color-secondary":"#64748b","--color-secondary-hover":"#475569","--color-neon":"#f1f5f9","--color-neon-glow":"rgba(241, 245, 249, 0.5)","--color-electric-purple":"#7c3aed","--color-electric-blue":"#3b82f6","--color-dark":"#0f172a","--color-background":"#1e293b","--color-surface":"#334155","--color-surface-lighter":"#475569","--gradient-cyberpunk":"linear-gradient(135deg, #0ea5e9 0%, #64748b 100%)","--gradient-hero":"radial-gradient(circle at center, rgba(241, 245, 249, 0.1) 0%, rgba(14, 165, 233, 0.05) 50%, transparent 100%)","--shadow-neon":"0 0 15px rgba(241, 245, 249, 0.3)","--shadow-neon-intense":"0 0 10px rgba(241, 245, 249, 0.4), 0 0 20px rgba(241, 245, 249, 0.3), 0 0 30px rgba(241, 245, 249, 0.2)","--noise-overlay-color":"rgba(15, 23, 42, 0.2)","--floor-background":"radial-gradient(ellipse at center, rgba(14, 165, 233, 0.05) 0%, transparent 80%)"}},freshMint:{id:"freshMint",name:"Fresh Mint",cssVariables:{"--color-primary":"#10b981","--color-primary-hover":"#059669","--color-secondary":"#cbd5e1","--color-secondary-hover":"#94a3b8","--color-neon":"#f0fdfa","--color-neon-glow":"rgba(240, 253, 250, 0.5)","--color-electric-purple":"#3b82f6","--color-electric-blue":"#0ea5e9","--color-dark":"#134e4a","--color-background":"#115e59","--color-surface":"#0f766e","--color-surface-lighter":"#0d9488","--gradient-cyberpunk":"linear-gradient(135deg, #10b981 0%, #cbd5e1 100%)","--gradient-hero":"radial-gradient(circle at center, rgba(240, 253, 250, 0.1) 0%, rgba(16, 185, 129, 0.05) 50%, transparent 100%)","--shadow-neon":"0 0 15px rgba(240, 253, 250, 0.3)","--shadow-neon-intense":"0 0 10px rgba(240, 253, 250, 0.4), 0 0 20px rgba(240, 253, 250, 0.3), 0 0 30px rgba(240, 253, 250, 0.2)","--noise-overlay-color":"rgba(19, 78, 74, 0.2)","--floor-background":"radial-gradient(ellipse at center, rgba(16, 185, 129, 0.05) 0%, transparent 80%)"}},elegantLight:{id:"elegantLight",name:"Elegant Light",cssVariables:{"--color-primary":"#6366f1","--color-primary-hover":"#4f46e5","--color-secondary":"#f59e0b","--color-secondary-hover":"#d97706","--color-neon":"#f8fafc","--color-neon-glow":"rgba(248, 250, 252, 0.5)","--color-electric-purple":"#8b5cf6","--color-electric-blue":"#60a5fa","--color-dark":"#1e293b","--color-background":"#cbd5e1","--color-surface":"#e2e8f0","--color-surface-lighter":"#f1f5f9","--gradient-cyberpunk":"linear-gradient(135deg, #6366f1 0%, #f59e0b 100%)","--gradient-hero":"radial-gradient(circle at center, rgba(248, 250, 252, 0.5) 0%, rgba(99, 102, 241, 0.05) 50%, transparent 100%)","--shadow-neon":"0 0 15px rgba(248, 250, 252, 0.3)","--shadow-neon-intense":"0 0 10px rgba(248, 250, 252, 0.4), 0 0 20px rgba(248, 250, 252, 0.3), 0 0 30px rgba(248, 250, 252, 0.2)","--noise-overlay-color":"rgba(30, 41, 59, 0.1)","--floor-background":"radial-gradient(ellipse at center, rgba(99, 102, 241, 0.05) 0%, transparent 80%)"}},smoothCharcoal:{id:"smoothCharcoal",name:"Smooth Charcoal",cssVariables:{"--color-primary":"#475569","--color-primary-hover":"#334155","--color-secondary":"#e11d48","--color-secondary-hover":"#be123c","--color-neon":"#f1f5f9","--color-neon-glow":"rgba(241, 245, 249, 0.5)","--color-electric-purple":"#8b5cf6","--color-electric-blue":"#3b82f6","--color-dark":"#1e293b","--color-background":"#334155","--color-surface":"#475569","--color-surface-lighter":"#64748b","--gradient-cyberpunk":"linear-gradient(135deg, #475569 0%, #e11d48 100%)","--gradient-hero":"radial-gradient(circle at center, rgba(241, 245, 249, 0.1) 0%, rgba(71, 85, 105, 0.05) 50%, transparent 100%)","--shadow-neon":"0 0 15px rgba(241, 245, 249, 0.3)","--shadow-neon-intense":"0 0 10px rgba(241, 245, 249, 0.4), 0 0 20px rgba(241, 245, 249, 0.3), 0 0 30px rgba(241, 245, 249, 0.2)","--noise-overlay-color":"rgba(30, 41, 59, 0.2)","--floor-background":"radial-gradient(ellipse at center, rgba(71, 85, 105, 0.05) 0%, transparent 80%)"}},gamingEdge:{id:"gamingEdge",name:"Gaming Edge",cssVariables:{"--color-primary":"#22c55e","--color-primary-hover":"#16a34a","--color-secondary":"#6d28d9","--color-secondary-hover":"#5b21b6","--color-neon":"#4ade80","--color-neon-glow":"rgba(74, 222, 128, 0.8)","--color-electric-purple":"#8b5cf6","--color-electric-blue":"#2563eb","--color-dark":"#111827","--color-background":"#1f2937","--color-surface":"#374151","--color-surface-lighter":"#4b5563","--gradient-cyberpunk":"linear-gradient(135deg, #22c55e 0%, #6d28d9 100%)","--gradient-hero":"radial-gradient(circle at center, rgba(74, 222, 128, 0.3) 0%, rgba(34, 197, 94, 0.2) 50%, transparent 100%)","--shadow-neon":"0 0 15px rgba(74, 222, 128, 0.8)","--shadow-neon-intense":"0 0 10px rgba(74, 222, 128, 0.9), 0 0 20px rgba(74, 222, 128, 0.7), 0 0 30px rgba(74, 222, 128, 0.5)","--noise-overlay-color":"rgba(17, 24, 39, 0.4)","--floor-background":"radial-gradient(ellipse at center, rgba(34, 197, 94, 0.15) 0%, transparent 80%)"}},roseGold:{id:"roseGold",name:"Rose Gold",cssVariables:{"--color-primary":"#ec4899","--color-primary-hover":"#db2777","--color-secondary":"#f59e0b","--color-secondary-hover":"#d97706","--color-neon":"#fdf2f8","--color-neon-glow":"rgba(253, 242, 248, 0.5)","--color-electric-purple":"#c084fc","--color-electric-blue":"#93c5fd","--color-dark":"#831843","--color-background":"#9d174d","--color-surface":"#be185d","--color-surface-lighter":"#db2777","--gradient-cyberpunk":"linear-gradient(135deg, #ec4899 0%, #f59e0b 100%)","--gradient-hero":"radial-gradient(circle at center, rgba(253, 242, 248, 0.2) 0%, rgba(236, 72, 153, 0.15) 50%, transparent 100%)","--shadow-neon":"0 0 15px rgba(253, 242, 248, 0.5)","--shadow-neon-intense":"0 0 10px rgba(253, 242, 248, 0.7), 0 0 20px rgba(253, 242, 248, 0.5), 0 0 30px rgba(253, 242, 248, 0.3)","--noise-overlay-color":"rgba(131, 24, 67, 0.3)","--floor-background":"radial-gradient(ellipse at center, rgba(236, 72, 153, 0.1) 0%, transparent 80%)"}},electroTeal:{id:"electroTeal",name:"Electro Teal",cssVariables:{"--color-primary":"#14b8a6","--color-primary-hover":"#0d9488","--color-secondary":"#f97316","--color-secondary-hover":"#ea580c","--color-neon":"#fef08a","--color-neon-glow":"rgba(254, 240, 138, 0.5)","--color-electric-purple":"#9333ea","--color-electric-blue":"#3b82f6","--color-dark":"#042f2e","--color-background":"#083344","--color-surface":"#115e59","--color-surface-lighter":"#0f766e","--gradient-cyberpunk":"linear-gradient(135deg, #14b8a6 0%, #f97316 100%)","--gradient-hero":"radial-gradient(circle at center, rgba(254, 240, 138, 0.2) 0%, rgba(20, 184, 166, 0.15) 50%, transparent 100%)","--shadow-neon":"0 0 15px rgba(254, 240, 138, 0.5)","--shadow-neon-intense":"0 0 10px rgba(254, 240, 138, 0.7), 0 0 20px rgba(254, 240, 138, 0.5), 0 0 30px rgba(254, 240, 138, 0.3)","--noise-overlay-color":"rgba(4, 47, 46, 0.3)","--floor-background":"radial-gradient(ellipse at center, rgba(20, 184, 166, 0.1) 0%, transparent 80%)"}},midnightBlue:{id:"midnightBlue",name:"Midnight Blue",cssVariables:{"--color-primary":"#1e40af","--color-primary-hover":"#1e3a8a","--color-secondary":"#c026d3","--color-secondary-hover":"#a21caf","--color-neon":"#60a5fa","--color-neon-glow":"rgba(96, 165, 250, 0.5)","--color-electric-purple":"#9333ea","--color-electric-blue":"#2563eb","--color-dark":"#172554","--color-background":"#1e3a8a","--color-surface":"#1e40af","--color-surface-lighter":"#1d4ed8","--gradient-cyberpunk":"linear-gradient(135deg, #1e40af 0%, #c026d3 100%)","--gradient-hero":"radial-gradient(circle at center, rgba(96, 165, 250, 0.2) 0%, rgba(30, 64, 175, 0.15) 50%, transparent 100%)","--shadow-neon":"0 0 15px rgba(96, 165, 250, 0.5)","--shadow-neon-intense":"0 0 10px rgba(96, 165, 250, 0.7), 0 0 20px rgba(96, 165, 250, 0.5), 0 0 30px rgba(96, 165, 250, 0.3)","--noise-overlay-color":"rgba(23, 37, 84, 0.3)","--floor-background":"radial-gradient(ellipse at center, rgba(30, 64, 175, 0.1) 0%, transparent 80%)"}},amberGold:{id:"amberGold",name:"Amber Gold",cssVariables:{"--color-primary":"#f59e0b","--color-primary-hover":"#d97706","--color-secondary":"#4f46e5","--color-secondary-hover":"#4338ca","--color-neon":"#93c5fd","--color-neon-glow":"rgba(147, 197, 253, 0.5)","--color-electric-purple":"#8b5cf6","--color-electric-blue":"#3b82f6","--color-dark":"#78350f","--color-background":"#92400e","--color-surface":"#b45309","--color-surface-lighter":"#d97706","--gradient-cyberpunk":"linear-gradient(135deg, #f59e0b 0%, #4f46e5 100%)","--gradient-hero":"radial-gradient(circle at center, rgba(147, 197, 253, 0.2) 0%, rgba(245, 158, 11, 0.15) 50%, transparent 100%)","--shadow-neon":"0 0 15px rgba(147, 197, 253, 0.5)","--shadow-neon-intense":"0 0 10px rgba(147, 197, 253, 0.7), 0 0 20px rgba(147, 197, 253, 0.5), 0 0 30px rgba(147, 197, 253, 0.3)","--noise-overlay-color":"rgba(120, 53, 15, 0.3)","--floor-background":"radial-gradient(ellipse at center, rgba(245, 158, 11, 0.1) 0%, transparent 80%)"}},glacierIce:{id:"glacierIce",name:"Glacier Ice",cssVariables:{"--color-primary":"#0ea5e9","--color-primary-hover":"#0284c7","--color-secondary":"#f43f5e","--color-secondary-hover":"#e11d48","--color-neon":"#a5f3fc","--color-neon-glow":"rgba(165, 243, 252, 0.5)","--color-electric-purple":"#c084fc","--color-electric-blue":"#38bdf8","--color-dark":"#0c4a6e","--color-background":"#075985","--color-surface":"#0369a1","--color-surface-lighter":"#0284c7","--gradient-cyberpunk":"linear-gradient(135deg, #0ea5e9 0%, #f43f5e 100%)","--gradient-hero":"radial-gradient(circle at center, rgba(165, 243, 252, 0.2) 0%, rgba(14, 165, 233, 0.15) 50%, transparent 100%)","--shadow-neon":"0 0 15px rgba(165, 243, 252, 0.5)","--shadow-neon-intense":"0 0 10px rgba(165, 243, 252, 0.7), 0 0 20px rgba(165, 243, 252, 0.5), 0 0 30px rgba(165, 243, 252, 0.3)","--noise-overlay-color":"rgba(12, 74, 110, 0.3)","--floor-background":"radial-gradient(ellipse at center, rgba(14, 165, 233, 0.1) 0%, transparent 80%)"}}},Hv={cyberpunkBlue:"default",neonPurple:"alternate",retroWave:"retroWave",electroTeal:"electroTeal",cyberRed:"cyberRed",neonGreen:"neonGreen",midnightBlue:"midnightBlue",amberGold:"amberGold",glacierIce:"glacierIce",magentaFusion:"magentaFusion",midnightElegance:"midnightElegance",modernSlate:"modernSlate",freshMint:"freshMint",elegantLight:"elegantLight",smoothCharcoal:"smoothCharcoal",roseGold:"roseGold",gamingEdge:"gamingEdge"},Gv=Object.entries(Hv).reduce(((e,[t,n])=>(e[n]=t,e)),{});class Wv{constructor(){this.themes=qv,this.stylesheet=this._createStylesheet(),this.defaultTheme="cyberpunkBlue",this.legacyThemeMapping=$v,this.versionToThemeMap=Gv}applyTheme(e){this.legacyThemeMapping[e]?e=this.legacyThemeMapping[e]:this.versionToThemeMap[e]&&(e=this.versionToThemeMap[e]);const t=this.themes[e];if(!t)return console.error(`Theme not found: ${e}`),!1;let n=":root {";return Object.entries(t.cssVariables).forEach((([e,t])=>{n+=`${e}: ${t};`})),n+="}",n+="\n      * {\n        transition: background-color var(--transition-base), \n                    color var(--transition-base), \n                    border-color var(--transition-base), \n                    box-shadow var(--transition-base);\n      }\n    ","cyberpunkBlue"!==e&&(n+="\n        .button-glow {\n          box-shadow: var(--shadow-neon) !important;\n        }\n        \n        .hero-title {\n          background: var(--gradient-cyberpunk);\n          -webkit-background-clip: text;\n          background-clip: text;\n        }\n        \n        .feature-icon {\n          color: var(--color-neon);\n        }\n        \n        .card-hover:hover {\n          border-color: var(--color-neon) !important;\n          box-shadow: var(--shadow-neon) !important;\n        }\n      "),this.stylesheet.textContent=n,document.documentElement.dataset.themeName=t.name,window.dispatchEvent(new CustomEvent("theme-changed",{detail:{themeId:e,themeName:t.name}})),!0}getAvailableThemes(){return Object.keys(this.themes)}getThemeDetails(e){return this.legacyThemeMapping[e]&&(e=this.legacyThemeMapping[e]),this.themes[e]||null}registerTheme(e,t){return e&&"string"==typeof e?t&&"object"==typeof t?t.cssVariables&&"object"==typeof t.cssVariables?(this.themes[e]&&console.warn(`Theme ${e} already exists and will be overwritten`),this.themes[e]={id:e,name:t.name||e,cssVariables:t.cssVariables},!0):(console.error("Theme must include cssVariables object"),!1):(console.error("Theme configuration must be an object"),!1):(console.error("Theme ID must be a non-empty string"),!1)}_createStylesheet(){const e=document.getElementById("jynx-theme-styles");if(e)return e;const t=document.createElement("style");return t.id="jynx-theme-styles",t.setAttribute("data-source","theme-variant-provider"),document.head.appendChild(t),t}enableTransitions(e=300){const t=`\n      * {\n        transition: background-color ${e}ms ease-out, \n                    color ${e}ms ease-out, \n                    border-color ${e}ms ease-out,\n                    box-shadow ${e}ms ease-out;\n      }\n    `,n=document.createElement("style");n.id="jynx-theme-transitions",n.textContent=t,document.head.appendChild(n)}getThemeFromVersion(e){return function(e){return Gv[e]||null}(e)}getVersionFromTheme(e){return function(e){return Hv[e]||null}(e)}}class Kv{constructor(e={}){this.options={testPercentage:50,...e}}shouldParticipateInTest(){const e=this._getUserOrCreateId();return this._hashString(e)%100<this.options.testPercentage}_getUserOrCreateId(){let e=localStorage.getItem("jynx_user_id");if(!e){e=this._generateUserId();try{localStorage.setItem("jynx_user_id",e)}catch(t){console.warn("Unable to store user ID in localStorage")}}return e}_generateUserId(){return"user_"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}_hashString(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return Math.abs(t)%100}isInSegment(e,t){switch(e){case"device":return this._getDeviceType()===t;case"browser":return this._getBrowserType()===t;default:return!1}}_getDeviceType(){const e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated/i.test(e)?"mobile":"desktop"}_getBrowserType(){const e=navigator.userAgent;return e.indexOf("Firefox")>-1?"firefox":e.indexOf("Chrome")>-1?"chrome":e.indexOf("Safari")>-1?"safari":e.indexOf("MSIE")>-1||e.indexOf("Trident")>-1?"ie":e.indexOf("Edge")>-1?"edge":"unknown"}}const Xv=new class{constructor(){this.logger=Vl.getModuleLogger("theme-feedback"),this.selectedThemes=new Set,this.themeProvider=new Wv,this.versionManager=null,this.isInitialized=!1}init(e=null){if(this.isInitialized)return void this.logger.warn("ThemeFeedbackManager already initialized");if(this.logger.info("Initializing ThemeFeedbackManager"),this.versionManager=e,this.themeOptionsContainer=document.getElementById("theme-options"),this.submitButton=document.getElementById("submit-theme-feedback"),this.thanksMessage=document.getElementById("theme-feedback-thanks"),this.currentThemeDisplay=document.getElementById("current-theme-name"),!(this.themeOptionsContainer&&this.submitButton&&this.thanksMessage&&this.currentThemeDisplay))return void this.logger.error("Required DOM elements not found");let t=this.versionManager?this.versionManager.getCurrentTheme():this.themeProvider.defaultTheme||"cyberpunkBlue";this.currentThemeId=t,!this.versionManager&&this.themeProvider&&this.currentThemeId&&(this.themeProvider.applyTheme(this.currentThemeId),this.applyThemeCategory(this.currentThemeId)),this.updateCurrentThemeDisplay(),this.renderThemeOptions(),this.submitButton.addEventListener("click",this.handleSubmit.bind(this)),window.addEventListener("website-theme-changed",(e=>{e.detail&&e.detail.themeId&&(this.currentThemeId=e.detail.themeId,this.updateCurrentThemeDisplay(),this.applyThemeCategory(this.currentThemeId),this.updateThemeOptionsForCurrentTheme())})),this.isInitialized=!0,this.logger.info("ThemeFeedbackManager initialized")}renderThemeOptions(){this.themeOptionsContainer.innerHTML="";this.themeProvider.getAvailableThemes().forEach((e=>{const t=this.themeProvider.getThemeDetails(e);if(!t)return;const n=document.createElement("div");if(n.className="theme-option",n.setAttribute("data-theme-id",e),e===this.currentThemeId){n.classList.add("current");const e=document.createElement("div");e.className="current-theme-indicator",e.textContent="",n.appendChild(e)}const r=document.createElement("div");r.className="theme-feedback-checkbox";const i="fr"===(document.documentElement.lang||"en")?"J'aime":"Like";r.setAttribute("data-like-text",i);const s=document.createElement("input");s.type="checkbox",s.className="theme-feedback-checkbox-input",s.id=`theme-checkbox-${e}`,s.setAttribute("data-theme-id",e),this.selectedThemes.has(e)&&(s.checked=!0);const o=document.createElement("label");o.className="theme-feedback-checkbox-label",o.setAttribute("for",`theme-checkbox-${e}`),s.addEventListener("change",(t=>{t.target.checked?this.selectedThemes.add(e):this.selectedThemes.delete(e),this.updateSubmitButtonState(),t.stopPropagation()})),r.addEventListener("click",(e=>{e.stopPropagation()})),r.appendChild(s),r.appendChild(o),n.appendChild(r),n.style.backgroundColor=t.cssVariables["--color-surface"],n.style.borderColor=t.cssVariables["--color-primary"],n.style.background=`linear-gradient(135deg, ${t.cssVariables["--color-surface"]} 0%, ${t.cssVariables["--color-surface-lighter"]} 100%)`;const a=document.createElement("div");a.className="theme-accent-bar",a.style.cssText=`\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 4px;\n        background: ${t.cssVariables["--gradient-cyberpunk"]};\n        border-top-left-radius: 0.5rem;\n        border-top-right-radius: 0.5rem;\n      `;const l=document.createElement("div");l.className="theme-option-name",l.textContent=t.name;const u=document.createElement("div");u.className="theme-color-preview",u.style.cssText="\n        display: flex;\n        margin-top: 8px;\n        gap: 4px;\n      ";const c=document.createElement("div");c.className="color-swatch",c.style.cssText=`\n        width: 12px;\n        height: 12px;\n        border-radius: 50%;\n        background: ${t.cssVariables["--color-primary"]};\n      `,u.appendChild(c);const h=document.createElement("div");h.className="color-swatch",h.style.cssText=`\n        width: 12px;\n        height: 12px;\n        border-radius: 50%;\n        background: ${t.cssVariables["--color-secondary"]};\n      `,u.appendChild(h);const d=document.createElement("div");d.className="color-swatch",d.style.cssText=`\n        width: 12px;\n        height: 12px;\n        border-radius: 50%;\n        background: ${t.cssVariables["--color-neon"]};\n      `,u.appendChild(d),n.appendChild(a),n.appendChild(l),n.appendChild(u),n.addEventListener("click",(()=>this.toggleThemeSelection(n,e))),this.themeOptionsContainer.appendChild(n)})),this.applyThemeCategory(this.currentThemeId)}updateThemeOptionsForCurrentTheme(){document.querySelectorAll(".theme-option").forEach((e=>{const t=e.getAttribute("data-theme-id");e.classList.remove("current");const n=e.querySelector(".current-theme-indicator");if(n&&e.removeChild(n),t===this.currentThemeId){e.classList.add("current");const t=document.createElement("div");t.className="current-theme-indicator",t.textContent="",e.appendChild(t)}}))}updateCurrentThemeDisplay(){if(this.currentThemeDisplay&&this.themeProvider){const e=this.themeProvider.getThemeDetails(this.currentThemeId);e&&(this.currentThemeDisplay.textContent=e.name)}}applyThemeCategory(e){document.body.classList.remove("theme-cyberpunk","theme-classic","theme-girly","theme-gamer"),["cyberpunkBlue","neonPurple","retroWave","cyberRed","neonGreen","magentaFusion"].includes(e)?document.body.classList.add("theme-cyberpunk"):["midnightElegance","modernSlate","freshMint","elegantLight","smoothCharcoal"].includes(e)?document.body.classList.add("theme-classic"):"roseGold"===e?document.body.classList.add("theme-girly"):"gamingEdge"===e&&document.body.classList.add("theme-gamer")}toggleThemeSelection(e,t){const n=this.currentThemeId;if(this.currentThemeId=t,this.applySelectionEffect(e),this.themeProvider&&t)if(this.themeProvider.applyTheme(t),this.applyThemeCategory(t),this.versionManager)this.versionManager.setTheme(t);else{this.updateUrlWithTheme(t);const e=this.themeProvider.getThemeDetails(t),r=e?e.name:t;window.dispatchEvent(new CustomEvent("website-theme-changed",{detail:{themeId:t,themeName:r,previousThemeId:n}}))}this.updateCurrentThemeDisplay(),this.updateThemeOptionsForCurrentTheme()}updateUrlWithTheme(e){const t=new URL(window.location.href),n=new URLSearchParams(t.search);n.set("theme",e),t.search=n.toString(),window.history.replaceState({},"",t.toString()),this.logger.info(`URL updated with theme parameter: ${e}`)}applySelectionEffect(e){const t=document.createElement("span");if(t.className="ripple-effect",t.style.cssText="\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%) scale(0);\n      width: 300%;\n      height: 300%;\n      background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 70%);\n      border-radius: 50%;\n      pointer-events: none;\n      animation: ripple 0.6s ease-out forwards;\n    ",!document.querySelector("style#ripple-keyframes")){const e=document.createElement("style");e.id="ripple-keyframes",e.textContent="\n        @keyframes ripple {\n          from { transform: translate(-50%, -50%) scale(0); opacity: 1; }\n          to { transform: translate(-50%, -50%) scale(1); opacity: 0; }\n        }\n      ",document.head.appendChild(e)}e.appendChild(t),setTimeout((()=>{e.contains(t)&&e.removeChild(t)}),600)}updateSubmitButtonState(){this.submitButton.disabled=0===this.selectedThemes.size,this.submitButton.classList.toggle("disabled",0===this.selectedThemes.size)}async handleSubmit(){if(0!==this.selectedThemes.size)try{this.logger.info("Submitting theme feedback",{selectedThemes:Array.from(this.selectedThemes)}),this.submitButton.disabled=!0,this.submitButton.innerHTML='<span class="spinner"></span> Submitting...';const e=this.currentThemeId;await this.submitThemeFeedback(Array.from(this.selectedThemes),e),this.showThanksMessage(),this.resetSelection()}catch(eb){this.logger.error("Error submitting theme feedback",eb),alert("There was an error submitting your feedback. Please try again."),this.submitButton.disabled=!1,this.submitButton.innerHTML="Submit Theme Feedback"}}async submitThemeFeedback(e,t){try{this.logger.time("theme-feedback-submission");const n=await Cv(Jy(Ov.db,"theme-feedback"),{selectedThemes:e,currentTheme:t,timestamp:Tv(),userAgent:navigator.userAgent,language:navigator.language||navigator.userLanguage,pathname:window.location.pathname,referrer:document.referrer,screenWidth:window.innerWidth,screenHeight:window.innerHeight});return this.logger.timeEnd("theme-feedback-submission"),this.logger.info("Theme feedback submitted successfully",{docId:n.id}),{success:!0,id:n.id}}catch(eb){throw this.logger.error("Error submitting theme feedback to Firebase",eb),eb}}showThanksMessage(){this.submitButton.disabled=!1,this.submitButton.innerHTML="Submit Theme Feedback",this.thanksMessage.classList.remove("hidden"),this.thanksMessage.style.animation="none",this.thanksMessage.offsetWidth,this.thanksMessage.style.animation="fadeIn 0.5s ease-out",setTimeout((()=>{this.thanksMessage.classList.add("hidden")}),5e3)}resetSelection(){this.selectedThemes.clear(),document.querySelectorAll(".theme-feedback-checkbox-input").forEach((e=>{e.checked=!1})),this.themeProvider&&this.currentThemeId&&(this.themeProvider.applyTheme(this.currentThemeId),this.applyThemeCategory(this.currentThemeId)),this.updateCurrentThemeDisplay(),this.updateSubmitButtonState()}};const Yv=new class{constructor(){this.isInitialized=!1,this.logger=Vl.getModuleLogger("ui-manager"),this.logger.info("UIManager instance created")}init(){if(this.isInitialized)this.logger.warn("UIManager already initialized");else{this.logger.time("ui-initialization"),this.logger.info("Initializing UI manager");try{this.logger.debug("Setting up event listeners"),this.setupEventListeners(),this.logger.debug("Setting up header scroll behavior"),this.setupHeaderScroll(),this.logger.debug("Adding accessibility features"),this.addAccessibilityFeatures(),this.logger.info("UI manager initialization complete")}catch(e){this.logger.error("UI initialization failed",e)}finally{this.isInitialized=!0,this.logger.timeEnd("ui-initialization")}}}setupEventListeners(){const e=document.querySelector(".menu-toggle"),t=document.querySelector("#primary-navigation");this.logger.debug("Setting up event listeners",{menuToggleFound:!!e,primaryNavFound:!!t}),e&&t?e.addEventListener("click",(()=>{const n="true"===e.getAttribute("aria-expanded");this.logger.debug("Menu toggle clicked",{wasExpanded:n}),e.setAttribute("aria-expanded",!n),t.classList.toggle("active"),document.body.style.overflow=n?"":"hidden"})):this.logger.warn("Mobile menu elements not found",{menuToggle:e,primaryNav:t});const n=document.querySelectorAll('a[href^="#"]:not([href="#"])');this.logger.debug(`Found ${n.length} anchor links for smooth scrolling`),n.forEach((n=>{n.addEventListener("click",(function(n){n.preventDefault();const r=this.getAttribute("href"),i=document.querySelector(r);if(i){const n=80,s=i.getBoundingClientRect().top+window.pageYOffset-n;"scrollBehavior"in document.documentElement.style?window.scrollTo({top:s,behavior:"smooth"}):window.scrollTo(0,s),Vl.getModuleLogger("ui-manager").debug("Smooth scrolling to",{targetId:r}),(null==t?void 0:t.classList.contains("active"))&&(e.setAttribute("aria-expanded","false"),t.classList.remove("active"),document.body.style.overflow="",Vl.getModuleLogger("ui-manager").debug("Closed mobile menu after navigation"))}else Vl.getModuleLogger("ui-manager").warn(`Target element not found: ${r}`)}))}));const r=document.querySelectorAll(".nav-links li");this.logger.debug(`Setting up ${r.length} nav items for staggered animation`),r.forEach(((e,t)=>{e.style.setProperty("--item-index",t)}))}setupHeaderScroll(){const e=document.querySelector("header");let t=window.scrollY;this.logger.debug("Setting up header scroll behavior",{headerFound:!!e}),e?window.addEventListener("scroll",this.debounce((()=>{const n=window.scrollY,r=n-t;this.logger.trace("Scroll event",{scrollY:n,scrollDelta:r,lastScrollY:t}),n>10?e.classList.contains("header-scrolled")||(e.classList.add("header-scrolled"),this.logger.debug("Header entered scrolled state")):e.classList.contains("header-scrolled")&&(e.classList.remove("header-scrolled"),this.logger.debug("Header exited scrolled state")),n>t&&n>100?e.classList.contains("header-hidden")||(e.classList.add("header-hidden"),this.logger.debug("Header hidden (scrolling down)")):e.classList.contains("header-hidden")&&(e.classList.remove("header-hidden"),this.logger.debug("Header revealed (scrolling up)")),t=n}),50)):this.logger.warn("Header element not found, scroll behavior not initialized")}addAccessibilityFeatures(){this.logger.debug("Adding accessibility features");window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(this.logger.info("Reduced motion preference detected, adapting animations"),document.body.classList.add("reduced-motion"));const e=document.querySelectorAll("a, button, input, select, textarea");this.logger.debug(`Adding focus handlers to ${e.length} interactive elements`),e.forEach((e=>{e.addEventListener("focus",(()=>{e.classList.add("focus-visible")})),e.addEventListener("blur",(()=>{e.classList.remove("focus-visible")}))})),this.logger.debug("Accessibility features setup complete")}debounce(e,t){let n;return this.logger.trace("Creating debounced function",{wait:t}),function(...r){clearTimeout(n),n=setTimeout((()=>{clearTimeout(n),e(...r)}),t)}}},Qv=new class{constructor(e={}){this.logger=Vl.getModuleLogger("website-version"),this.logger.info("Initializing WebsiteVersionDisplayManager"),this.options={storageType:"localStorage",storageKey:"jynx_website_theme",paramName:"theme",defaultThemeId:"cyberpunkBlue",testPercentage:50,debugMode:!1,...e},this.logger.debug("Options:",this.options),this.storageManager=new jv(this.options.storageType),this.themeProvider=new Wv,this.segmentationService=new Kv({testPercentage:this.options.testPercentage}),this.currentThemeId=null,this.initialized=!1,this._onAnimationsComplete=this._onAnimationsComplete.bind(this)}init(){if(this.initialized)return this.logger.warn("WebsiteVersionDisplayManager already initialized"),this.currentThemeId;this.logger.time("theme-initialization"),this.logger.info("Determining website theme");try{const e=new URLSearchParams(window.location.search).get(this.options.paramName),t=this.themeProvider.getAvailableThemes();if(e&&t.includes(e))this.logger.info(`Theme set from URL parameter: ${e}`),this.currentThemeId=e,this.storageManager.saveItem(this.options.storageKey,e);else{const e=this.storageManager.getItem(this.options.storageKey);if(e&&t.includes(e))this.logger.info(`Theme retrieved from storage: ${e}`),this.currentThemeId=e;else{const e=this.segmentationService.shouldParticipateInTest();this.logger.debug("User segmentation result: "+(e?"In test group":"In control group")),this.currentThemeId=e?this._getRandomTestTheme():this.options.defaultThemeId,this.logger.info(`New theme assigned: ${this.currentThemeId}`),this.storageManager.saveItem(this.options.storageKey,this.currentThemeId)}}"complete"===document.readyState?this._applyThemeImmediately():(document.addEventListener("loading-transition-complete",this._onAnimationsComplete),window.addEventListener("load",(()=>{setTimeout((()=>{this.initialized||(this.logger.warn("Applying theme after timeout - loading-transition-complete event not fired"),this._applyThemeImmediately())}),2e3)}))),this.options.debugMode&&this._addDebugControls()}catch(eb){this.logger.error("Error during theme initialization:",eb),this.currentThemeId=this.options.defaultThemeId,this._applyThemeImmediately()}return this.logger.timeEnd("theme-initialization"),this.currentThemeId}_onAnimationsComplete(){document.removeEventListener("loading-transition-complete",this._onAnimationsComplete),this._applyThemeImmediately()}_applyThemeImmediately(){if(this.initialized)return;this.logger.time("apply-theme");if(this.themeProvider.applyTheme(this.currentThemeId)){document.body.dataset.themeId=this.currentThemeId;const e=this.themeProvider.getThemeDetails(this.currentThemeId),t=e?e.name:this.currentThemeId;this.logger.info(`Theme applied: ${t} (${this.currentThemeId})`),this._updateUrlWithTheme(this.currentThemeId),window.dispatchEvent(new CustomEvent("website-theme-applied",{detail:{themeId:this.currentThemeId,themeName:t}}))}else this.logger.error(`Failed to apply theme: ${this.currentThemeId}`);this.initialized=!0,this.logger.timeEnd("apply-theme")}_getRandomTestTheme(){const e=this.themeProvider.getAvailableThemes().filter((e=>e!==this.options.defaultThemeId));if(0===e.length)return this.options.defaultThemeId;return e[Math.floor(Math.random()*e.length)]}getCurrentTheme(){return this.currentThemeId}setTheme(e){if(!this.themeProvider.getAvailableThemes().includes(e))return this.logger.error(`Invalid theme ID: ${e}`),!1;this.logger.info(`Manually setting theme to: ${e}`),this.currentThemeId=e,this.storageManager.saveItem(this.options.storageKey,e);const t=document.createElement("div");return t.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background-color: rgba(0, 0, 0, 0.3);\n      backdrop-filter: blur(4px);\n      z-index: 9998;\n      opacity: 0;\n      transition: opacity 300ms ease-in-out;\n      pointer-events: none;\n    ",document.body.appendChild(t),t.offsetWidth,t.style.opacity="1",setTimeout((()=>{this.themeProvider.applyTheme(e),document.body.dataset.themeId=e,this._updateUrlWithTheme(e),t.style.opacity="0",setTimeout((()=>{document.body.contains(t)&&document.body.removeChild(t);const n=this.themeProvider.getThemeDetails(e),r=n?n.name:e;window.dispatchEvent(new CustomEvent("website-theme-changed",{detail:{themeId:this.currentThemeId,themeName:r}}))}),300)}),150),!0}_updateUrlWithTheme(e){if("undefined"!=typeof window)try{const t=new URL(window.location.href),n=new URLSearchParams(t.search);n.set(this.options.paramName,e),t.search=n.toString(),window.history.replaceState({},"",t.toString()),this.logger.debug(`Updated URL with theme parameter: ${e}`)}catch(eb){this.logger.error("Error updating URL with theme parameter:",eb)}}clearStoredTheme(){return this.logger.info("Clearing stored theme"),this.storageManager.removeItem(this.options.storageKey)}getAvailableThemes(){return this.themeProvider.getAvailableThemes()}resetAndDetermine(){return this.clearStoredTheme(),this.initialized=!1,this.init()}_addDebugControls(){if(!this.options.debugMode)return;this.logger.debug("Adding debug controls");const e=document.createElement("div");e.id="jynx-theme-debug",e.style.cssText="\n      position: fixed;\n      bottom: 20px;\n      right: 20px;\n      background: rgba(10, 10, 20, 0.8);\n      border: 1px solid var(--color-neon, #4ade80);\n      color: white;\n      padding: 10px;\n      border-radius: 5px;\n      font-family: monospace;\n      font-size: 12px;\n      z-index: 9999;\n      box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n      backdrop-filter: blur(5px);\n      transition: transform 300ms ease;\n      transform: translateY(0);\n    ";const t=document.createElement("div");t.textContent="Theme Debug Panel",t.style.cssText="font-weight: bold; margin-bottom: 8px; font-size: 14px;",e.appendChild(t);const n=document.createElement("div");n.id="jynx-current-theme";const r=this.themeProvider.getThemeDetails(this.currentThemeId),i=r?r.name:this.currentThemeId;n.textContent=`Current: ${i}`,n.style.cssText="margin-bottom: 8px; color: var(--color-neon, #4ade80);",e.appendChild(n);const s=document.createElement("div");s.style.cssText="display: flex; gap: 5px; flex-wrap: wrap;";const o=this.themeProvider.getAvailableThemes();o.forEach((e=>{const t=this.themeProvider.getThemeDetails(e),r=t?t.name:e,i=document.createElement("button");i.textContent=r,i.style.cssText=`\n        background: ${e===this.currentThemeId?"var(--color-neon, #4ade80)":"rgba(20, 20, 40, 0.8)"};\n        color: ${e===this.currentThemeId?"#000":"#fff"};\n        border: 1px solid var(--color-neon, #4ade80);\n        border-radius: 3px;\n        padding: 3px 8px;\n        font-size: 11px;\n        cursor: pointer;\n        transition: all 200ms ease;\n      `,i.addEventListener("mouseover",(()=>{e!==this.currentThemeId&&(i.style.background="rgba(74, 222, 128, 0.3)")})),i.addEventListener("mouseout",(()=>{e!==this.currentThemeId&&(i.style.background="rgba(20, 20, 40, 0.8)")})),i.addEventListener("click",(()=>{if(e!==this.currentThemeId){this.setTheme(e),document.querySelectorAll("#jynx-theme-debug button").forEach((e=>{e.style.background="rgba(20, 20, 40, 0.8)",e.style.color="#fff"})),i.style.background="var(--color-neon, #4ade80)",i.style.color="#000";const t=this.themeProvider.getThemeDetails(e),r=t?t.name:e;n.textContent=`Current: ${r}`}})),s.appendChild(i)})),e.appendChild(s);const a=document.createElement("button");a.textContent="Reset",a.style.cssText="\n      background: rgba(255, 67, 108, 0.8);\n      color: white;\n      border: none;\n      border-radius: 3px;\n      padding: 3px 8px;\n      font-size: 11px;\n      cursor: pointer;\n      margin-top: 8px;\n      width: 100%;\n      transition: all 200ms ease;\n    ",a.addEventListener("mouseover",(()=>{a.style.background="rgba(255, 67, 108, 1)"})),a.addEventListener("mouseout",(()=>{a.style.background="rgba(255, 67, 108, 0.8)"})),a.addEventListener("click",(()=>{const e=this.resetAndDetermine(),t=this.themeProvider.getThemeDetails(e),r=t?t.name:e;n.textContent=`Current: ${r}`,document.querySelectorAll("#jynx-theme-debug button").forEach((t=>{const n=o.find((e=>{const n=this.themeProvider.getThemeDetails(e);return t.textContent===(n?n.name:e)}))===e;t.style.background=n?"var(--color-neon, #4ade80)":"rgba(20, 20, 40, 0.8)",t.style.color=n?"#000":"#fff"}))})),e.appendChild(a);const l=document.createElement("button");l.textContent="-",l.style.cssText="\n      position: absolute;\n      top: 8px;\n      right: 8px;\n      width: 16px;\n      height: 16px;\n      line-height: 14px;\n      text-align: center;\n      background: rgba(255, 255, 255, 0.2);\n      border: none;\n      border-radius: 50%;\n      font-size: 14px;\n      cursor: pointer;\n      padding: 0;\n    ";let u=!1;l.addEventListener("click",(()=>{u=!u,e.style.transform=u?"translateY(calc(100% - 30px))":"translateY(0)",l.textContent=u?"+":"-"})),e.appendChild(l),document.body.appendChild(e),this._makeElementDraggable(e)}_makeElementDraggable(e){let t=0,n=0,r=0,i=0;const s=e.querySelector("div:first-child");function o(e){(e=e||window.event).preventDefault(),r=e.clientX,i=e.clientY,document.onmouseup=l,document.onmousemove=a}function a(s){(s=s||window.event).preventDefault(),t=r-s.clientX,n=i-s.clientY,r=s.clientX,i=s.clientY,e.style.top=e.offsetTop-n+"px",e.style.left=e.offsetLeft-t+"px",e.style.right="auto",e.style.bottom="auto"}function l(){document.onmouseup=null,document.onmousemove=null}s?(s.style.cursor="move",s.onmousedown=o):e.onmousedown=o}static checkBrowserSupport(){const e={localStorage:"undefined"!=typeof Storage,customEvents:"function"==typeof CustomEvent,css:window.CSS&&window.CSS.supports&&CSS.supports("--color-var","red")};return console.info("Browser support check:",e),Object.values(e).every((e=>e))}}({defaultThemeId:"cyberpunkBlue",paramName:"theme",storageKey:"jynx_website_theme",testPercentage:50,storageType:"localStorage",debugMode:!1});const Jv=new class{constructor(){this.isInitialized=!1,this.logger=Vl.getModuleLogger("app"),this.logger.info("AppManager instance created")}init(){if(this.isInitialized)this.logger.warn("AppManager already initialized");else{this.logger.time("app-initialization"),this.logger.info("Initializing application");try{"undefined"!=typeof window&&(window.pageLoader=Uv),this.logger.debug("Initializing Loading Transition manager"),zv.init(),this.logger.debug("Initializing Website Version manager"),Qv.init(),this.logger.debug("Initializing UI manager"),Yv.init(),this.logger.debug("Initializing Form manager"),Rv.init(),this.setupAnalyticsTracking(),document.addEventListener("loading-transition-complete",(()=>{this.logger.info("Loading transition complete, triggering animations"),zl.init(),window.i18n&&Uv.resourcesLoaded&&window.i18n.preloadRemainingLocales()})),window.addEventListener("website-theme-applied",(e=>{this.logger.info(`Website theme applied: ${e.detail.themeId} (${e.detail.themeName})`),xv.trackWebsiteVersion(e.detail.themeId)})),window.addEventListener("website-theme-changed",(e=>{this.logger.info(`Website theme changed: ${e.detail.themeId} (${e.detail.themeName})`),xv.trackWebsiteVersionChange(e.detail.themeId)})),this.logger.info("Initializing Theme Feedback manager"),Xv.init(Qv),this.logger.info("Application initialization complete")}catch(e){this.logger.error("Initialization failed",e)}finally{this.isInitialized=!0,this.logger.timeEnd("app-initialization")}}}setupAnalyticsTracking(){this.logger.debug("Setting up analytics tracking"),this.setupCTATracking(),this.setupSectionViewTracking(),this.setupLanguageChangeTracking()}setupCTATracking(){this.logger.debug("Setting up CTA tracking");[{selector:".btn-hero-cta",id:"hero-cta",location:"hero"},{selector:".btn-ghost",id:"hero-features",location:"hero"},{selector:"#signup-form .btn",id:"waitlist-signup",location:"cta"},{selector:"#submit-theme-feedback",id:"theme-feedback-submit",location:"theme-feedback"},{selector:"#feedback-form .btn",id:"feedback-submit",location:"feedback"},{selector:'a[href="about.html"]',id:"footer-about",location:"footer"},{selector:'a[href="privacy.html"]',id:"footer-privacy",location:"footer"},{selector:'a[href="terms.html"]',id:"footer-terms",location:"footer"},{selector:".nav-links a",id:"nav-link",location:"header"}].forEach((({selector:e,id:t,location:n})=>{const r=document.querySelectorAll(e);r.forEach(((e,i)=>{const s=r.length>1?`${t}-${i}`:t;e.addEventListener("click",(()=>{const t=e.textContent.trim()||e.getAttribute("data-i18n")||"unknown",r=Qv.getCurrentTheme();xv.trackCTAClick(s,t,n,{version:r})}))}))}))}setupSectionViewTracking(){this.logger.debug("Setting up section view tracking");const e=[{id:"hero",name:"Hero"},{id:"features",name:"Features"},{id:"solution",name:"Solution"},{id:"cta",name:"Call to Action"},{id:"theme-feedback",name:"Theme Feedback"},{id:"feedback",name:"Feedback"}],t=new Set,n=new IntersectionObserver((n=>{n.forEach((n=>{if(n.isIntersecting&&!t.has(n.target.id)){const r=n.target.id,i=e.find((e=>e.id===r));if(i){const e=Qv.getCurrentTheme();xv.trackSectionView(i.id,i.name,{version:e}),t.add(r)}}}))}),{threshold:.5});e.forEach((e=>{const t=document.getElementById(e.id);t&&n.observe(t)}))}setupLanguageChangeTracking(){this.logger.debug("Setting up language change tracking");let t=e.getCurrentLocale();e.addObserver((e=>{if(t&&e&&t!==e){const n=Qv.getCurrentTheme();xv.trackLanguageChange(t,e,{version:n}),t=e}}))}};Uv.init(),document.addEventListener("DOMContentLoaded",(()=>{Jv.init(),window.i18n&&window.pageLoader&&(window.i18n.pageLoader=window.pageLoader),setTimeout((()=>{Uv.resourcesLoaded||Uv.resourcesComplete()}),500)}));export{Ov as f};
