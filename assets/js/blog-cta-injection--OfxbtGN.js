class t{constructor(){this.progressBar=null,this.contentElement=null,this.isScrolling=!1,this.scrollTimeout=null,this.rafId=null}init(){this.progressBar=document.querySelector(".reading-progress__bar"),this.contentElement=document.querySelector(".blog-post-content"),this.progressBar&&this.contentElement&&(this.setupEventListeners(),this.updateProgress())}setupEventListeners(){window.addEventListener("scroll",this.handleScroll.bind(this),{passive:!0}),window.addEventListener("resize",this.debounce((()=>{this.updateProgress()}),200))}handleScroll(){this.rafId&&cancelAnimationFrame(this.rafId),this.rafId=requestAnimationFrame((()=>{this.updateProgress()}))}updateProgress(){const t=this.contentElement.getBoundingClientRect(),e=t.top+window.pageYOffset,n=t.height,s=window.pageYOffset,i=e+n-window.innerHeight;let o=0;o=s<=e?0:s>=i?100:(s-e)/(i-e)*100,o=Math.max(0,Math.min(100,o)),this.setProgress(o)}setProgress(t){this.progressBar&&(this.progressBar.style.width=`${t}%`)}debounce(t,e){return(...n)=>{clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout((()=>{t.apply(this,n)}),e)}}reset(){this.setProgress(0)}destroy(){window.removeEventListener("scroll",this.handleScroll.bind(this)),this.rafId&&cancelAnimationFrame(this.rafId),this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.reset()}}document.addEventListener("DOMContentLoaded",(()=>{(new t).init()}));class e{constructor(){this.shareButtons=null,this.shareUrl="",this.shareTitle="",this.copyButton=null,this.copyOriginalText=""}init(){this.shareUrl=encodeURIComponent(window.location.href),this.shareTitle=encodeURIComponent(document.title),this.shareButtons=document.querySelectorAll(".blog-post-share__button"),this.shareButtons.length&&this.setupEventListeners()}setupEventListeners(){this.shareButtons.forEach((t=>{const e=t.dataset.platform;"copy"===e?(this.copyButton=t,this.copyOriginalText=t.textContent,t.addEventListener("click",(t=>{t.preventDefault(),this.handleCopyLink()}))):t.addEventListener("click",(t=>{t.preventDefault(),this.handleShare(e)}))}))}handleShare(t){let e="";switch(t){case"twitter":e=`https://twitter.com/intent/tweet?url=${this.shareUrl}&text=${this.shareTitle}`;break;case"linkedin":e=`https://www.linkedin.com/sharing/share-offsite/?url=${this.shareUrl}`;break;case"facebook":e=`https://www.facebook.com/sharer/sharer.php?u=${this.shareUrl}`;break;default:return}this.openSharePopup(e,t)}openSharePopup(t,e){const n=`width=600,height=600,left=${(window.innerWidth-600)/2+window.screenX},top=${(window.innerHeight-600)/2+window.screenY},toolbar=0,location=0,menubar=0,resizable=1,scrollbars=1`,s=window.open(t,`share-${e}`,n);s?s.focus():window.open(t,"_blank")}async handleCopyLink(){const t=decodeURIComponent(this.shareUrl);try{navigator.clipboard&&navigator.clipboard.writeText?(await navigator.clipboard.writeText(t),this.showCopyFeedback(!0)):(this.copyToClipboardFallback(t),this.showCopyFeedback(!0))}catch(e){this.showCopyFeedback(!1)}}copyToClipboardFallback(t){const e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.opacity="0",e.style.pointerEvents="none",document.body.appendChild(e),e.select(),e.setSelectionRange(0,e.value.length);try{document.execCommand("copy")}catch(n){throw new Error("Copy fallback failed")}finally{document.body.removeChild(e)}}showCopyFeedback(t){this.copyButton&&(t?(this.copyButton.textContent="Copied!",this.copyButton.classList.add("copied"),setTimeout((()=>{this.copyButton.textContent=this.copyOriginalText,this.copyButton.classList.remove("copied")}),2e3)):(this.copyButton.textContent="Failed to copy",setTimeout((()=>{this.copyButton.textContent=this.copyOriginalText}),2e3)))}updateShareContent(t,e){this.shareUrl=encodeURIComponent(t),this.shareTitle=encodeURIComponent(e)}}document.addEventListener("DOMContentLoaded",(()=>{(new e).init()})),(new class{constructor(){this.ctaElement=null,this.contentContainer=null,this.targetPosition=.45,this.minParagraphs=5}init(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>this.injectCTA())):this.injectCTA()}injectCTA(){try{if(this.ctaElement=document.getElementById("blog-cta-mid-content"),this.contentContainer=document.querySelector(".post-content-wrapper"),!this.ctaElement||!this.contentContainer)return;const t=this.contentContainer.querySelectorAll("p");if(t.length<this.minParagraphs)return;const e=Math.floor(t.length*this.targetPosition),n=t[e];if(!n)return;this.findBestInsertionPoint(n,t,e).insertAdjacentElement("afterend",this.ctaElement),this.ctaElement.style.display=""}catch(t){}}findBestInsertionPoint(t,e,n){const s=Math.min(e.length-1,n+3);for(let i=n;i<=s;i++){const t=e[i],n=t.nextElementSibling;if(n&&/^H[2-4]$/.test(n.tagName))return t}return t}}).init();
